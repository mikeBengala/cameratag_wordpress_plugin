!function(){"use strict";function e(){var e,t,n,i=(l.appVersion,l.userAgent),r=l.appName,o=""+parseFloat(l.appVersion),a=parseInt(l.appVersion,10);if(p){r="Opera";try{o=l.userAgent.split("OPR/")[1].split(" ")[0],a=o.split(".")[0]}catch(s){o="0.0.0.0",a=0}}else m?(t=i.indexOf("MSIE"),r="IE",o=i.substring(t+5)):g?(t=i.indexOf("Chrome"),r="Chrome",o=i.substring(t+7)):h?(t=i.indexOf("Safari"),r="Safari",o=i.substring(t+7),-1!==(t=i.indexOf("Version"))&&(o=i.substring(t+8))):f?(t=i.indexOf("Firefox"),r="Firefox",o=i.substring(t+8)):(e=i.lastIndexOf(" ")+1)<(t=i.lastIndexOf("/"))&&(r=i.substring(e,t),o=i.substring(t+1),r.toLowerCase()===r.toUpperCase()&&(r=l.appName));return d&&(r="Edge",o=parseInt(l.userAgent.match(/Edge\/(\d+).(\d+)$/)[2],10).toString()),-1!==(n=o.indexOf(";"))&&(o=o.substring(0,n)),-1!==(n=o.indexOf(" "))&&(o=o.substring(0,n)),a=parseInt(""+o,10),isNaN(a)&&(o=""+parseFloat(l.appVersion),a=parseInt(l.appVersion,10)),{fullVersion:o,version:a,name:r,isPrivateBrowsing:!1}}function t(e,t){var n=0,i=50,r=!1,o=window.setInterval(function(){e()&&(window.clearInterval(o),t(r)),n++>i&&(window.clearInterval(o),r=!0,t(r))},10)}function n(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return n&&parseInt(n[1],10)>=10?!0:!1}function i(e){var i;if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){i=!1},function(){i=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var r;try{r=window.indexedDB.open("test"),r.onerror=function(){return!0}}catch(o){i=!0}"undefined"==typeof i&&t(function(){return"done"===r.readyState?!0:!1},function(e){e||(i=r.result?!1:!0)})}else if(n(window.navigator.userAgent)){i=!1;try{window.indexedDB||(i=!0)}catch(o){i=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(o){i=!0}"undefined"==typeof i&&(i=!1,window.localStorage.removeItem("test"))}t(function(){return"undefined"!=typeof i?!0:!1},function(){e(i)})}function r(){var e="-",t=l.appVersion,n=l.userAgent,i=e,r=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in r){var a=r[o];if(a.r.test(n)){i=a.s;break}}var s=e;switch(/Windows/.test(i)&&(/Windows (.*)/.test(i)&&(s=/Windows (.*)/.exec(i)[1]),i="Windows"),i){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(n)&&(s=/Mac OS X (10[\.\_\d]+)/.exec(n)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(n)&&(s=/Android ([\.\_\d]+)/.exec(n)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(n)&&(s=/OS (\d+)_(\d+)_?(\d+)?/.exec(t),s=s[1]+"."+s[2]+"."+(0|s[3]))}return{osName:i,osVersion:s}}function o(e){P.isWebRTCSupported&&(P.isORTCSupported||a(function(t){e(t.match(/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/)?"Local: "+t:"Public: "+t)}))}function a(e){function t(t){var i=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,r=i.exec(t);if(!r)return void console.warn("Could not match IP address in",t);var o=r[1];void 0===n[o]&&e(o),n[o]=!0}var n={},i=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,r=!!window.webkitRTCPeerConnection;if(!i){var o=document.getElementById("iframe");if(!o)throw"NOTE: you need to have an iframe in the page right above the script tag.";var a=o.contentWindow;i=a.RTCPeerConnection||a.mozRTCPeerConnection||a.webkitRTCPeerConnection,r=!!a.webkitRTCPeerConnection}if(i){var s,c={optional:[{RtpDataChannels:!0}]};r&&(s={iceServers:[{urls:"stun:stun.services.mozilla.com"}]},"undefined"!=typeof P&&P.browser.isFirefox&&P.browser.version<=38&&(s[0]={url:s[0].urls}));var l=new i(s,c);l.onicecandidate=function(e){e.candidate&&t(e.candidate.candidate)},l.createDataChannel(""),l.createOffer(function(e){l.setLocalDescription(e,function(){},function(){})},function(){}),setTimeout(function(){var e=l.localDescription.sdp.split("\n");e.forEach(function(e){0===e.indexOf("a=candidate:")&&t(e)})},1e3)}}function s(e){return x?(!l.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(l.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!l.enumerateDevices&&l.enumerateDevices&&(l.enumerateDevices=l.enumerateDevices.bind(l)),l.enumerateDevices?(C=[],E=[],T=[],S=[],void l.enumerateDevices(function(t){t.forEach(function(e){var t={};for(var n in e)t[n]=e[n];"audio"===t.kind&&(t.kind="audioinput"),"video"===t.kind&&(t.kind="videoinput");var i;C.forEach(function(e){e.id===t.id&&e.kind===t.kind&&(i=!0)}),i||(t.deviceId||(t.deviceId=t.id),t.id||(t.id=t.deviceId),t.label?("videoinput"!==t.kind||O||(O=!0),"audioinput"!==t.kind||I||(I=!0)):(t.label="Please invoke getUserMedia once.","https:"!==location.protocol&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(t.label="HTTPs is required to get label of this "+t.kind+" device.")),"audioinput"===t.kind&&(j=!0,-1===E.indexOf(t)&&E.push(t)),"audiooutput"===t.kind&&(k=!0,-1===T.indexOf(t)&&T.push(t)),"videoinput"===t.kind&&(R=!0,-1===S.indexOf(t)&&S.push(t)),-1===C.indexOf(t)&&C.push(t))}),"undefined"!=typeof P&&(P.MediaDevices=C,P.hasMicrophone=j,P.hasSpeakers=k,P.hasWebcam=R,P.isWebsiteHasWebcamPermissions=O,P.isWebsiteHasMicrophonePermissions=I,P.audioInputDevices=E,P.audioOutputDevices=T,P.videoInputDevices=S),e&&e()})):void(e&&e())):void(e&&e())}var c="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";!function(e){"undefined"==typeof window&&("undefined"==typeof window&&"undefined"!=typeof global?(global.navigator={userAgent:c,getUserMedia:function(){}},e.window=global):"undefined"==typeof window,"undefined"==typeof document&&(e.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){return{}}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(e.screen={width:0,height:0}))}("undefined"!=typeof global?global:window);var l=window.navigator;"undefined"!=typeof l?("undefined"!=typeof l.webkitGetUserMedia&&(l.getUserMedia=l.webkitGetUserMedia),"undefined"!=typeof l.mozGetUserMedia&&(l.getUserMedia=l.mozGetUserMedia)):l={getUserMedia:function(){},userAgent:c};var u=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(l.userAgent||""),d=!(-1===l.userAgent.indexOf("Edge")||!l.msSaveOrOpenBlob&&!l.msSaveBlob),p=!!window.opera||l.userAgent.indexOf(" OPR/")>=0,f="undefined"!=typeof window.InstallTrigger,h=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,g=!!window.chrome&&!p,m=!!document.documentMode&&!d,v={Android:function(){return l.userAgent.match(/Android/i)},BlackBerry:function(){return l.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return l.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return l.userAgent.match(/Opera Mini/i)},Windows:function(){return l.userAgent.match(/IEMobile/i)},any:function(){return v.Android()||v.BlackBerry()||v.iOS()||v.Opera()||v.Windows()},getOsName:function(){var e="Unknown OS";return v.Android()&&(e="Android"),v.BlackBerry()&&(e="BlackBerry"),v.iOS()&&(e="iOS"),v.Opera()&&(e="Opera Mini"),v.Windows()&&(e="Windows"),e}},y="Unknown OS",_="Unknown OS Version";if(v.any())y=v.getOsName();else{var b=r();y=b.osName,_=b.osVersion}var w=!1,A=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){!w&&e in document.createElement("canvas")&&(w=!0),!A&&e in document.createElement("video")&&(A=!0)});var C=[],E=[],T=[],S=[];l.mediaDevices&&l.mediaDevices.enumerateDevices&&(l.enumerateDevices=function(e){l.mediaDevices.enumerateDevices().then(e)["catch"](function(){e([])})});var x=!1;"undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?x=!0:l.mediaDevices&&l.mediaDevices.enumerateDevices&&(x=!0);var j=!1,k=!1,R=!1,I=!1,O=!1;s();var P=window.DetectRTC||{};P.browser=e(),i(function(e){P.browser.isPrivateBrowsing=!!e}),P.browser["is"+P.browser.name]=!0;var D=(!!(window.process&&"object"==typeof window.process&&window.process.versions&&window.process.versions["node-webkit"]),!1);["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){D||e in window&&(D=!0)}),P.isWebRTCSupported=D,P.isORTCSupported="undefined"!=typeof RTCIceGatherer;var L=!1;P.browser.isChrome&&P.browser.version>=35?L=!0:P.browser.isFirefox&&P.browser.version>=34&&(L=!0),"https:"!==location.protocol&&(L=!1),P.isScreenCapturingSupported=L;var N={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){N.isSupported||e in window&&(N.isSupported=!0,"createMediaStreamSource"in window[e].prototype&&(N.isCreateMediaStreamSourceSupported=!0))}),P.isAudioContextSupported=N.isSupported,P.isCreateMediaStreamSourceSupported=N.isCreateMediaStreamSourceSupported;var M=!1;P.browser.isChrome&&P.browser.version>31&&(M=!0),P.isRtpDataChannelsSupported=M;var B=!1;P.browser.isFirefox&&P.browser.version>28?B=!0:P.browser.isChrome&&P.browser.version>25?B=!0:P.browser.isOpera&&P.browser.version>=11&&(B=!0),P.isSctpDataChannelsSupported=B,P.isMobileDevice=u;var F=!1;l.getUserMedia?F=!0:l.mediaDevices&&l.mediaDevices.getUserMedia&&(F=!0),P.browser.isChrome&&P.browser.version>=46&&"https:"!==location.protocol&&(P.isGetUserMediaSupported="Requires HTTPs"),P.isGetUserMediaSupported=F,P.osName=y,P.osVersion=_;var U="";if(screen.width){var H=screen.width?screen.width:"",V=screen.height?screen.height:"";U+=""+H+" x "+V}P.displayResolution=U,P.isCanvasSupportsStreamCapturing=w,P.isVideoSupportsStreamCapturing=A,P.DetectLocalIPAddress=o,P.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,P.isWebSocketsBlocked=!P.isWebSocketsSupported,P.checkWebSocketsSupport=function(e){e=e||function(){};try{var t=new WebSocket("wss://echo.websocket.org:443/");t.onopen=function(){P.isWebSocketsBlocked=!1,e(),t.close(),t=null},t.onerror=function(){P.isWebSocketsBlocked=!0,e()}}catch(n){P.isWebSocketsBlocked=!0,e()}},P.load=function(e){e=e||function(){},s(e)},P.MediaDevices=C,P.hasMicrophone=j,P.hasSpeakers=k,P.hasWebcam=R,P.isWebsiteHasWebcamPermissions=O,P.isWebsiteHasMicrophonePermissions=I,P.audioInputDevices=E,P.audioOutputDevices=T,P.videoInputDevices=S;var W=!1;"setSinkId"in document.createElement("video")&&(W=!0),P.isSetSinkIdSupported=W;var z=!1;P.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(z=!0):P.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(z=!0),P.isRTPSenderReplaceTracksSupported=z;var $=!1;P.browser.isFirefox&&P.browser.version>38&&($=!0),P.isRemoteStreamProcessingSupported=$;var G=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(G=!0),P.isApplyConstraintsSupported=G;var Y=!1;P.browser.isFirefox&&P.browser.version>=43&&(Y=!0),P.isMultiMonitorScreenCapturingSupported=Y,P.isPromisesSupported=!!("Promise"in window),"undefined"==typeof P&&(window.DetectRTC={});var Q=window.MediaStream;"undefined"==typeof Q&&"undefined"!=typeof webkitMediaStream&&(Q=webkitMediaStream),P.MediaStream="undefined"!=typeof Q?Object.keys(Q.prototype):!1,P.MediaStreamTrack="undefined"!=typeof MediaStreamTrack?Object.keys(MediaStreamTrack.prototype):!1;var J=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;P.RTCPeerConnection="undefined"!=typeof J?Object.keys(J.prototype):!1,window.DetectRTC=P,"undefined"!=typeof module&&(module.exports=P),"function"==typeof define&&define.amd&&define("DetectRTC",[],function(){return P})}(),"undefined"==typeof CameraTag&&(CameraTag=new function(){var scripts=document.getElementsByTagName("script"),currentScriptSrc=scripts[scripts.length-1].src;null==currentScriptSrc.match("cameratag.com")&&console.warn("ERROR: Please load cameratag.js from cameratag.com. See http://cameratag.com/v12/docs/camera_embed");var mobileUploadSupported=function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var e=document.createElement("input");return e.type="file",!e.disabled},isMobileDevice=window.DetectRTC.isMobileDevice,self=this;self.version="12";var appServer="www.cameratag.com",BUCKET_NAME;self.cameras={},self.players={},self.video_walls={},self.photobooths={},self.captures={},self.photos={},self.microphones={},self.uploader={};var session_id,token,apiKey,callbacks={},settingUp=!1,webrtc_enabled,swfobject,selected_cam_id,selected_mic_id,allow_play_count=!0,initialized=!1;if("undefined"==typeof CT_verbose_mode&&(CT_verbose_mode=!1),"undefined"==typeof AudioContext&&"undefined"==typeof webkitAudioContext);else{window.AudioContext=window.AudioContext||window.webkitAudioContext;var audioContext=new AudioContext||new webkitAudioContext}"undefined"==typeof CT_i18n&&(CT_i18n=[]),CT_i18n[0]=CT_i18n[0]||"To record this video using your mobile phone please visit <<url>> in your mobile browser",CT_i18n[1]=CT_i18n[1]||"Your mobile device does not support video uploading",CT_i18n[2]=CT_i18n[2]||"Recording in this browser requires Flash player 11 or higher. Would you like to install it now?",CT_i18n[3]=CT_i18n[3]||"Unable to embed recorder. Please make sure you have Flash Player 11 or higher installed",CT_i18n[4]=CT_i18n[4]||"choose a method below to submit your video",CT_i18n[5]=CT_i18n[5]||"record from camera",CT_i18n[6]=CT_i18n[6]||"upload a file",CT_i18n[7]=CT_i18n[7]||"record from phone",CT_i18n[8]=CT_i18n[8]||"wave to the camera",CT_i18n[9]=CT_i18n[9]||"recording in",CT_i18n[10]=CT_i18n[10]||"uploading...",CT_i18n[11]=CT_i18n[11]||"click to stop recording",CT_i18n[12]=CT_i18n[12]||"click to skip review",CT_i18n[13]=CT_i18n[13]||"Accept",CT_i18n[14]=CT_i18n[14]||"Re-Record",CT_i18n[15]=CT_i18n[15]||"Review Recording",CT_i18n[16]=CT_i18n[16]||"please wait while we push pixels",CT_i18n[17]=CT_i18n[17]||"published",CT_i18n[18]=CT_i18n[18]||"Enter your <b>mobile phone number</b> below and we will text you a link for mobile recording",CT_i18n[19]=CT_i18n[19]||"Send Mobile Link",CT_i18n[20]=CT_i18n[20]||"cancel",CT_i18n[21]=CT_i18n[21]||"Check your phone for mobile recording instructions",CT_i18n[22]=CT_i18n[22]||"or point your mobile browser to",CT_i18n[23]=CT_i18n[23]||"drop file to upload",CT_i18n[24]=CT_i18n[24]||"sending your message",CT_i18n[25]=CT_i18n[25]||"please enter your phone number!",CT_i18n[26]=CT_i18n[26]||"that does not appear to be a valid phone number",CT_i18n[27]=CT_i18n[27]||"Unable to send SMS.",CT_i18n[28]=CT_i18n[28]||"No Camera Detected",CT_i18n[29]=CT_i18n[29]||"No Microphone Detected",CT_i18n[30]=CT_i18n[30]||"Hardware Access Denied",CT_i18n[31]=CT_i18n[31]||"Lost connection to server",CT_i18n[32]=CT_i18n[32]||"Playback failed",CT_i18n[33]=CT_i18n[33]||"Unable To Connect",CT_i18n[34]=CT_i18n[34]||"Unable to publish your recording.",CT_i18n[35]=CT_i18n[35]||"Unable to submit form data.",CT_i18n[36]=CT_i18n[36]||"uploading your video",CT_i18n[37]=CT_i18n[37]||"buffering video playback",CT_i18n[38]=CT_i18n[38]||"publishing",CT_i18n[39]=CT_i18n[39]||"connecting...",CT_i18n[40]=CT_i18n[40]||"negotiating firewall...",CT_i18n[41]=CT_i18n[41]||"Oh No! It looks like your browser paused the recorder",CT_i18n[42]=CT_i18n[42]||"That does not appear to be a valid video file. Proceed anyway?",CT_i18n[43]=CT_i18n[43]||"Record or Upload a Video",CT_i18n[44]=CT_i18n[44]||"Tap to get started",CT_i18n[45]=CT_i18n[45]||"Choose a method to submit your photo",CT_i18n[46]=CT_i18n[46]||"Capture from Webcam",CT_i18n[47]=CT_i18n[47]||"Upload a File",CT_i18n[48]=CT_i18n[48]||"Choose which device(s) you would like to use",CT_i18n[49]=CT_i18n[49]||"Tap here to snap or upload a photo",CT_i18n[50]=CT_i18n[50]||"Image Adjustments / Filters",CT_i18n[51]=CT_i18n[51]||"Pan & Zoom",CT_i18n[52]=CT_i18n[52]||"Smoke",CT_i18n[53]=CT_i18n[53]||"Murica",CT_i18n[54]=CT_i18n[54]||"Brightness / Contrast",CT_i18n[55]=CT_i18n[55]||"Night Vision",CT_i18n[56]=CT_i18n[56]||"Posterize",CT_i18n[57]=CT_i18n[57]||"Zinc",CT_i18n[58]=CT_i18n[58]||"Berry",CT_i18n[59]=CT_i18n[59]||"Spy Cam",CT_i18n[60]=CT_i18n[60]||"Magazine",CT_i18n[61]=CT_i18n[61]||"Cross Hatch",CT_i18n[62]=CT_i18n[62]||"Flare",CT_i18n[63]=CT_i18n[63]||"Hue / Saturation",CT_i18n[64]=CT_i18n[64]||"Vibrance",CT_i18n[65]=CT_i18n[65]||"Denoise",CT_i18n[66]=CT_i18n[66]||"Unsharp Mask",CT_i18n[67]=CT_i18n[67]||"Noise",CT_i18n[68]=CT_i18n[68]||"Sepia",CT_i18n[69]=CT_i18n[69]||"Vignette",CT_i18n[70]=CT_i18n[70]||"Zoom Blur",CT_i18n[71]=CT_i18n[71]||"Triangle Blur",CT_i18n[72]=CT_i18n[72]||"Tilt Shift",CT_i18n[73]=CT_i18n[73]||"Lens Blur",CT_i18n[74]=CT_i18n[74]||"Swirl",CT_i18n[75]=CT_i18n[75]||"Bulge / Pinch",CT_i18n[76]=CT_i18n[76]||"Ink",CT_i18n[77]=CT_i18n[77]||"Edge Work",CT_i18n[78]=CT_i18n[78]||"Hexagonal Pixelate",CT_i18n[79]=CT_i18n[79]||"Dot Screen",CT_i18n[80]=CT_i18n[80]||"Color Halftone",CT_i18n[82]=CT_i18n[82]||"Angle",CT_i18n[83]=CT_i18n[83]||"Size",CT_i18n[84]=CT_i18n[84]||"Scale",CT_i18n[85]=CT_i18n[85]||"Radius",CT_i18n[86]=CT_i18n[86]||"Strength",CT_i18n[87]=CT_i18n[87]||"Brightness",CT_i18n[88]=CT_i18n[88]||"Blur Radius",CT_i18n[89]=CT_i18n[89]||"Gradient Radius",CT_i18n[90]=CT_i18n[90]||"Hue",CT_i18n[91]=CT_i18n[91]||"Saturation",CT_i18n[92]=CT_i18n[92]||"Motion",CT_i18n[93]=CT_i18n[93]||"Number of Colors",CT_i18n[94]=CT_i18n[94]||"Gamma",CT_i18n[95]=CT_i18n[95]||"Color",CT_i18n[96]=CT_i18n[96]||"Luminance",CT_i18n[97]=CT_i18n[97]||"Contrast",CT_i18n[98]=CT_i18n[98]||"Stopping",CT_i18n[99]=CT_i18n[99]||"Unable to activate camera or microphone",CT_i18n[100]=CT_i18n[100]||"Waiting for hardware",CT_i18n[101]=CT_i18n[101]||"Resume Recording",CT_i18n[102]=CT_i18n[102]||"Recording Paused",CT_i18n[103]=CT_i18n[103]||"choose a method below to submit your audio",CT_i18n[104]=CT_i18n[104]||"record from microphone",CT_i18n[105]=CT_i18n[105]||"Which microphone would you would like to use",CT_i18n[106]=CT_i18n[106]||"this video is longer than the maximum allowed length of ## seconds. Please try again.",CT_i18n[107]=CT_i18n[107]||"That does not appear to be a valid audio file. Proceed anyway?",CT_i18n[108]=CT_i18n[108]||"We were unable to parse the file you selected. Please try again.",CT_i18n[109]=CT_i18n[109]||"This browser does not support hardware access from insecure origins. Please use https://",CT_i18n[110]=CT_i18n[110]||"Your video is still uploading to ther server. Please try again a few seconds.";var init=function(e){webrtc_enabled=e,initialized=!0,self.setup()};self.setup=function(){initialized?(instantiateCameras(),instantiatePlayers(),instantiateVideoWalls(),instantiatePhotoBooths(),instantiateScreenCaptures(),instantiatePhotos(),instantiateAudioRecorders()):console.warn("CameraTag not initialized yet. Please wait to call setup()")};var get_camera=function(e,t){$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+e+"/new_video.json",type:"get",success:function(e){void 0!=e.app_uuid?(BUCKET_NAME=e.bucket_name,session_id=e.session_id,token=e.token,apiKey=e.api_key,t({success:!0,app_uuid:e.app_uuid,video_media_factories:e.video_media_factories,audio_media_factories:e.audio_media_factories,photo_media_factories:e.photo_media_factories,videoServer:e.videoServer})):t({success:!1,message:e.message})},error:function(e,n,i){t({success:!1,message:"error initializing recorder",jqXHR:e,textStatus:n,errorThrown:i})}})},generateUUID=function(e){var t=(new Date).getTime(),n=e+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)});return n},instantiateCameras=function(){$("camera:not([data-initializing])").each(function(e,t){$(t).attr("data-initializing",!0),new CameraTagVideoCamera(t)})},instantiatePlayers=function(){$("video:not([data-initializing]),player:not([data-initializing])").each(function(e,t){($(t).attr("data-uuid")||$(t).attr("data-video-id"))&&($(t).attr("data-initializing",!0),new CameraTagPlayer(t))})},instantiateVideoWalls=function(){$("videowall:not([data-initializing])").each(function(e,t){$(t).attr("data-initializing",!0),new CameraTagVideoWall(t)})},instantiatePhotoBooths=function(){$("photobooth:not([data-initializing])").each(function(e,t){$(t).attr("data-initializing",!0),new CameraTagPhotoCamera(t)})},instantiateScreenCaptures=function(){$("capture:not([data-initializing])").each(function(e,t){$(t).attr("data-initializing",!0),new CameraTagScreenCapture(t)})},instantiatePhotos=function(){$("photo:not([data-initializing])").each(function(e,t){$(t).attr("data-initializing",!0),new CameraTagPhoto(t)})},instantiateAudioRecorders=function(){$("microphone:not([data-initializing])").each(function(e,t){$(t).attr("data-initializing",!0),new CameraTagAudioRecorder(t)})};self.observe=function(e,t,n,i){i=i||!1,callbacks[e]||(callbacks[e]={}),callbacks[e][t]||(callbacks[e][t]=[]),i?callbacks[e][t].splice(0,0,n):callbacks[e][t].push(n)},self.fire=function(e,t,n){callbacks[e]||(callbacks[e]={}),callbacks[e][t]||(callbacks[e][t]=[]),setTimeout(function(){fire_handlers(e,t,n)},1)};var fire_handlers=function(e,t,n){if("object"==typeof callbacks[e][t])for(i=0;i<callbacks[e][t].length;i++)try{callbacks[e][t][i](n)}catch(r){}};self.stopObserving=function(e,t,n){for(callbacks[e]||(callbacks[e]={}),callbacks[e][t]||(callbacks[e][t]=[]),i=0;i<callbacks[e][t].length;i++)callbacks[e][t][i]==n&&callbacks[e][t].splice(i,1)};var publish_asset=function(e){$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+e.camera_uuid+"/assets/"+e.asset_uuid+"/publish.json",type:"post",data:{original_filename:e.original_filename,asset_type:e.asset_type,publish_type:e.type,archive_id:e.archive_id,server:e.videoServer,referer:window.location.toString(),version:self.version,signature:e.signature,signature_expiration:e.signature_expiration,metadata:JSON.stringify(e.metadata),asset_name:e.asset_name,asset_description:e.asset_description,bucket_name:BUCKET_NAME},success:function(t){t.uuid?self.fire(e.asset_uuid,"published",t):self.fire(e.asset_uuid,"publishFailed",{success:!1,video_uuid:e.asset_uuid,message:t.error})},error:function(){self.fire(e.asset_uuid,"publishFailed",{success:!1,video_uuid:e.asset_uuid,message:"unkown error"})}})};self.prototype=self;var CameraTagVideoCamera=function(e){var t,n,r=parseInt(1e8*Math.random()),o=this,a=this,s=$(e).attr("data-uuid")||$(e).attr("data-app-id")||$(e).attr("id"),c=$(e).attr("data-signature"),l=$(e).attr("data-signature-expiration"),u=$(e).attr("data-name"),d=$(e).attr("data-description"),p=$(e).attr("data-metadata")||$(e).attr("data-video-data"),f=["mov","mp4","webm","flv","mv4","mov","avi","wmv","mpeg","mpg","m4v"],h="true"==$(e).attr("data-player-on-processed"),g=$(e).attr("data-stack");try{t=JSON.parse(p)}catch(m){void 0!=p&&console.warn("Could not parse metadata JSON from <camera> attribute.")}var v,y,_,b,w,A,C,E,T,S,x,j,k,R,I,O,P,D,L,N,M,B,F,U,H,V,W,z,G,Y,Q,J,q,X,K,Z,et,tt,nt,it,rt,ot,at,st,ct,lt,ut,dt,pt,ft,ht,gt,mt,vt,yt,_t,bt,wt,At,Ct,Et,Tt,St={},xt={},jt=$(e).attr("id")||r,kt=0,Rt=0,It=$(e).attr("data-video-uuid");o.connect=function(){},o.play=function(){},o.record=function(){},o.stopRecording=function(){},o.stopPlayback=function(){},o.showFlashSettings=function(){},o.getFrame=function(){};var Ot,Pt,Dt,Lt=function(){},Nt=!1,Mt=!1,Bt=!1,Ft=!1,Ut=0,Ht=!1,Vt=[],Wt=!1,zt=!1,$t=function(){var e,n=this;swfobject=swfobject||initializeSwfobject();var i=function(){e=document[jt+"_swf"],"undefined"==typeof e&&5>G?(G+=1,setTimeout(i,200)):G>=5&&CameraTag.fire(jt,"flashInitializationError")};if($("#"+jt+"_player_placeholder").remove(),0==swfobject.getFlashPlayerVersion().major){var o=$('<object type="application/x-shockwave-flash" id="'+jt+'_swf" name="'+jt+'_swf" data="//'+appServer+"/static/"+CameraTag.version+"/camera.swf?"+r+'" width="100%" height="100%">'),a=$('<param name="allowfullscreen" value="true"></param>'),p=$('<param name="allowscriptaccess" value="always"></param>'),f=$('<param name="wmode" value="transparent"></param>'),h="videoServer="+T;h+="&amp;videoUUID="+xt.uuid,h+="&amp;cameraUUID="+v,h+="&amp;domID="+jt,h+="&amp;maxLength="+R,h+="&amp;hResolution="+j,h+="&amp;vResolution="+k,h+="&amp;videoBitRate="+D,h+="&amp;skipAutoDetect="+N,h+="&amp;flipRecordPreview="+V,h+="&amp;simpleSecurity="+M,h+="&amp;verboseMode="+CT_verbose_mode;var g=$('<param name="flashvars" value="'+h+'"></param>');o.append(a),o.append(p),o.append(f),o.append(g),$("#"+jt+"_recorder_placeholder").replaceWith(o),i()}else{var g={videoServer:T,videoUUID:xt.uuid,cameraUUID:v,domID:jt,maxLength:R,hResolution:j,vResolution:k,videoBitRate:D,skipAutoDetect:N,flipRecordPreview:V,simpleSecurity:M,verboseMode:CT_verbose_mode},m={allowfullscreen:"true",allowscriptaccess:"always",wmode:"transparent"},y={id:jt+"_swf",name:jt+"_swf"};swfobject.embedSWF("//"+appServer+"/static/"+CameraTag.version+"/camera.swf?"+r,jt+"_recorder_placeholder","100%","100%","11.1.0","https://"+appServer+"/static/"+CameraTag.version+"/expressInstall.swf",g,m,y,i)}n.stack="Flash",n.setUUID=function(t){e.setUUID(t)},n.listCameras=function(){e.listCameras()},n.listMicrophones=function(){e.listMicrophones()},n.setCamera=function(t){e.setCamera(t)},n.setMicrophone=function(t){e.setMicrophone(t)},n.showNothing=function(){e.showNothing()},n.showRecorder=function(){e.showRecorder()},n.showPlayer=function(){e.showPlayer()},n.stopPlayback=function(){e.stopPlayback()},n.startPlayback=function(){e.startPlayback()},n.connect=function(){e.connect()},n.disconnect=function(){e.disconnect()},n.startRecording=function(){e.startRecording()},n.stopRecording=function(){e.stopRecording()},n.pauseRecording=function(){e.pauseRecording()},n.resumeRecording=function(){e.resumeRecording()},n.publish=function(){un(CT_i18n[38]),publish_asset({origial_filename:xt.uuid+".flv",camera_uuid:s,asset_uuid:xt.uuid,asset_type:"Video",type:"webcam",videoServer:T,signature:c,signature_expiration:l,metadata:t,asset_name:u,asset_description:d})}},Gt=function(){var e,n=this;cams=[],mics=[];var i=window.URL||window.webkitURL,r=$('<video id="'+jt+'-video-preview" webkit-playsinline style="width:100%; height:100%; object-fit: contain; visibility:visible; display:block;"></video>');Z.prepend(r),r.hide();var o,r=r[0],s=function(){Bt=!0;var t=E.indexOf("upload");o=$(-1==t?'<input id="'+jt+'_upload_file" style="position:absolute;" type="file" accept="video/*" capture="camcorder">':'<input id="'+jt+'_upload_file" style="position:absolute;" type="file" accept="video/*">'),$(it).append(o),$(o).css({left:0,top:0,width:1,height:1,opacity:0}),Z.find(".cameratag_record").click(function(e){e.target!=o[0]&&(e.stopPropagation(),$(o).click())}),$(o).change(function(){e=o[0].files[0],CameraTag.fire(jt,"recordingStopped"),CameraTag.fire(jt,"readyToPublish")}),r.addEventListener("loadedmetadata",p),CameraTag.fire(jt,"initialized")},p=function(){Q&&r.duration>R&&(swal(CT_i18n[106].replace("##",R)),r.src=null,a.loadInterface(it))};n.stack="Mobile",n.setUUID=function(){},n.listCameras=function(){return cams},n.listMicrophones=function(){return mics},n.setCamera=function(){},n.setMicrophone=function(){},n.showNothing=function(){r.src=null},n.showRecorder=function(){},n.showPlayer=function(){$(r).show(),r.src=i.createObjectURL(e),r.load()},n.stopPlayback=function(){$(r).hide(),r.muted=!0,r.pause(),CameraTag.fire(jt,"playbackStopped")},n.startPlayback=function(){$(r).show(),r.src=i.createObjectURL(e),r.muted=!1,r.play(),CameraTag.fire(jt,"playbackStarted"),$(r).bind("ended",function(){CameraTag.fire(jt,"playbackStopped")})},n.publish=function(){CameraTag.fire(jt,"uploadStarted"),y.add({name:"recordings/"+xt.uuid+".flv",file:e,notSignedHeadersAtInitiate:{"Cache-Control":"max-age=3600"},xAmzHeadersAtInitiate:{"x-amz-acl":"public-read"},signParams:{},complete:function(){Wt=!0,publishType="mobile",tt.css("left","0px"),tt.css("right","0px"),un(CT_i18n[38]),publish_asset({original_filename:e.name,camera_uuid:v,asset_uuid:xt.uuid,asset_type:"Video",type:publishType,videoServer:T,signature:c,signature_expiration:l,metadata:t,asset_name:u,asset_description:d})},progress:function(e){e=e,CameraTag.fire(jt,"UploadProgress",e),CameraTag.fire(jt,"uploadProgress",e),pt.html((100*e).toFixed(1)+"%")}})},n.connect=function(){},n.disconnect=function(){CameraTag.fire(jt,"serverDisconnected")},n.startRecording=function(){$(o).click()},n.stopRecording=function(){},s()},Yt=function(){var e,n=this,i=$('<video id="'+jt+'-video-preview" style="width:100%; height:100%; object-fit: fill; visibility:visible; display:block;"></video>');Z.prepend(i);var r,o,a,s,p,f,h,i=i[0],g=[],m=[],_=[];navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(e){$(e).each(function(e,t){device_name=""==t.label?t.deviceId:t.label,"audioinput"===t.kind?_.push({label:device_name,deviceId:t.deviceId}):"videoinput"===t.kind&&m.push({label:device_name,deviceId:t.deviceId})}),0==m.length?CameraTag.fire(jt,"noCamera"):0==_.length?CameraTag.fire(jt,"noMic"):(X=getCookie("CameraTagSelectedCameraId")&&"default"!=getCookie("CameraTagSelectedCameraId")?getCookie("CameraTagSelectedCameraId"):m[0].deviceId,K=getCookie("CameraTagSelectedMicId")&&"default"!=getCookie("CameraTagSelectedMicId")?getCookie("CameraTagSelectedMicId"):_[0].deviceId),CameraTag.fire(jt,"initialized")}):CameraTag.fire(jt,"initialized"),V&&(i.style.transform="scaleX(-1)");var b;n.stack="MediaRecorder",n.setUUID=function(){},n.listCameras=function(){return m},n.listMicrophones=function(){return _},n.setCamera=function(e){X=e,createCookie("CameraTagSelectedCameraId",e)},n.setMicrophone=function(e){K=e,createCookie("CameraTagSelectedMicId",e)},n.showNothing=function(){i.src=null},n.showRecorder=function(){b&&i.src!=r&&(i.muted=!0,i.src=r,i.play())},n.showPlayer=function(){},n.stopPlayback=function(){i.pause(),i.muted=!0,CameraTag.fire(jt,"playbackStopped")},n.startPlayback=function(){i.src=a,i.muted=!1,i.play(),CameraTag.fire(jt,"playbackStarted"),$(i).bind("ended",function(){CameraTag.fire(jt,"playbackStopped")})},n.connect=function(){publishType="mediarecorder";var t=j/k;CameraTag.fire(jt,"waitingForCameraActivity");var n={audio:{deviceId:K},video:{deviceId:X,width:{ideal:j},height:{ideal:k},aspectRatio:{ideal:t}}},c=function(t){b=t,"undefined"==typeof s&&(s=audioContext.createMediaStreamSource(b),p=audioContext.createMediaElementSource(i)),f=createAudioMeter(audioContext),s.connect(f),p.connect(f),"Firefox"!=DetectRTC.browser.name&&p.connect(audioContext.destination);var n=window.URL||window.webkitURL;r=n.createObjectURL(b),i.src=r,i.play(),i.muted=!0;var c={mimeType:"video/webm;codecs=vp9"};MediaRecorder.isTypeSupported(c.mimeType)||(c={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(c.mimeType)||(c={mimeType:"video/webm"},MediaRecorder.isTypeSupported(c.mimeType)||(c={mimeType:""}))),c.videoBitsPerSecond=D,c.audioBitsPerSecond=L;try{e=new MediaRecorder(b,c)}catch(l){return void ln("Error creating MediaRecorder")}e.ondataavailable=function(e){e.data&&e.data.size>0&&g.push(e.data)},e.onerror=function(e){ln(e)},e.onwarning=function(){},e.onstop=function(){o=new Blob(g,{type:"video/webm"});var e=window.URL||window.webkitURL;a=e.createObjectURL(o),g=[],CameraTag.fire(jt,"readyToPublish"),CameraTag.fire(jt,"recordingStopped")},m=[],_=[],navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(e){$(e).each(function(e,t){device_name=""==t.label?t.deviceId:t.label,"audioinput"===t.kind?_.push({label:device_name,deviceId:t.deviceId}):"videoinput"===t.kind&&m.push({label:device_name,deviceId:t.deviceId})
}),0==m.length?CameraTag.fire(jt,"noCamera"):0==_.length?CameraTag.fire(jt,"noMic"):(X=X||m[0].deviceId,K=K||_[0].deviceId),CameraTag.fire(jt,"serverConnected"),CameraTag.fire(jt,"readyToRecord"),h=setInterval(w,100)}):(CameraTag.fire(jt,"serverConnected"),CameraTag.fire(jt,"readyToRecord"),h=setInterval(w,100))},l=function(e){console.log(e),CameraTag.fire(jt,"cameraDenied")};navigator.mediaDevices.getUserMedia(n).then(c)["catch"](l)},n.disconnect=function(){Bt&&("inactive"!=e.state&&e.stop(),e.stream&&e.stream.getTracks&&$(e.stream.getTracks()).each(function(e,t){t.stop()}),CameraTag.fire(jt,"serverDisconnected"))},n.startRecording=function(){i.play(),i.muted=!0,e.start(1e3),CameraTag.fire(jt,"recordingStarted"),clearInterval(h),h=setInterval(w,100)},n.stopRecording=function(){i.pause(),e.stop(),clearInterval(h),un(CT_i18n[98])},n.pauseRecording=function(){i.pause(),e.pause(),CameraTag.fire(jt,"recordingPaused")},n.resumeRecording=function(){i.muted=!0,i.play(),e.resume(),CameraTag.fire(jt,"recordingResumed")};var w=function(){var e=parseInt(100*f.volume);CameraTag.fire(jt,"audioLevel",e)};n.publish=function(){0==o.size&&ln("There was an error recording your file"),CameraTag.fire(jt,"uploadStarted"),y.add({name:"recordings/"+xt.uuid+".flv",file:o,notSignedHeadersAtInitiate:{"Cache-Control":"max-age=3600"},xAmzHeadersAtInitiate:{"x-amz-acl":"public-read"},signParams:{},complete:function(){o=null,Wt=!0,publishType="mediarecorder",tt.css("left","0px"),tt.css("right","0px"),un(CT_i18n[38]),publish_asset({original_filename:xt.uuid+".flv",camera_uuid:v,asset_uuid:xt.uuid,asset_type:"Video",type:"mediarecorder",videoServer:T,signature:c,signature_expiration:l,metadata:t,asset_name:u,asset_description:d})},progress:function(e){e=e,CameraTag.fire(jt,"UploadProgress",e),CameraTag.fire(jt,"uploadProgress",e),pt.html((100*e).toFixed(1)+"%"),tn(e)}})}},Qt=function(){var e,n,i,r,o=this,a=[],p=[];navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(e){$(e).each(function(e,t){device_name=""==t.label?t.deviceId:t.label,"audioinput"===t.kind?p.push({label:device_name,deviceId:t.deviceId}):"videoinput"===t.kind&&a.push({label:device_name,deviceId:t.deviceId})}),0==a.length?CameraTag.fire(jt,"noCamera"):0==p.length?CameraTag.fire(jt,"noMic"):(X=getCookie("CameraTagSelectedCameraId")&&"default"!=getCookie("CameraTagSelectedCameraId")?getCookie("CameraTagSelectedCameraId"):a[0].deviceId,K=getCookie("CameraTagSelectedMicId")&&"default"!=getCookie("CameraTagSelectedMicId")?getCookie("CameraTagSelectedMicId"):p[0].deviceId),CameraTag.fire(jt,"initialized")}):CameraTag.fire(jt,"initialized"),o.stack="WebRTC",o.setUUID=function(){},o.listCameras=function(){return a},o.listMicrophones=function(){return p},o.setCamera=function(e){X=e},o.setMicrophone=function(e){K=e},o.showNothing=function(){},o.showRecorder=function(){$("#"+jt+"_recorder_placeholder").show(),$("#"+jt+"_player_placeholder").hide()},o.showPlayer=function(){$("#"+jt+"_recorder_placeholder").hide(),$("#"+jt+"_player_placeholder").show()},o.stopPlayback=function(){n.pause(),n.muted=!0,CameraTag.fire(jt,"playbackStopped")},o.startPlayback=function(){var t="https://s3.amazonaws.com/ctperm/"+apiKey+"/"+e+"/archive.mp4";$("#"+jt+"_player_placeholder").html('<video width="100%" height="100%" playsinline="true"><source src="'+t+'"></source></video>'),n=$("#"+jt+"_player_placeholder").find("video")[0],$(n).show(),n.addEventListener("error",function(){swal(CT_i18n[110]),CameraTag.fire(jt,"playbackStopped")},!0),n.play(),CameraTag.fire(jt,"playbackStarted"),$(n).bind("ended",function(){CameraTag.fire(jt,"playbackStopped")})},o.connect=function(){CameraTag.fire(jt,"waitingForCameraActivity"),i=OT.initSession(apiKey,session_id).on("streamCreated",function(e){i.subscribe(e.stream)}).connect(token,function(){r=OT.initPublisher(null,{resolution:"640x480",height:"100%",width:"100%",style:{buttonDisplayMode:"off"},fitMode:"contain",showControls:!1,insertDefaultUI:!1,mirror:V,minVideoBitrate:512e3}),r.on("videoElementCreated",function(e){var t=e.element;$(t).css({width:"100%",height:"100%","object-fit":"contain"}),V&&(t.style.transform="scaleX(-1)"),$("#"+jt+"_recorder_placeholder").append(t)}),r.on("publishComplete",function(e){return e?(console.log(e),void ln(CT_i18n[99])):void 0}),r.on("audioLevelUpdated",function(e){var t=parseInt(100*e.audioLevel);CameraTag.fire(jt,"audioLevel",t)}),i.publish(r,function(e){return e?(console.log(e),void ln(CT_i18n[99])):(CameraTag.fire(jt,"serverConnected"),void CameraTag.fire(jt,"readyToRecord"))})})},o.disconnect=function(){r.destroy(),i.disconnect(),CameraTag.fire(jt,"serverDisconnected")},o.startRecording=function(){$.getJSON("https://"+appServer+"/opentok/start/"+i.id,function(t){e=t.id,CameraTag.fire(jt,"recordingStarted")})},o.stopRecording=function(){$.getJSON("https://"+appServer+"/opentok/stop/"+e,function(){f()})};var f=function(){var t="https://s3.amazonaws.com/ctperm/"+apiKey+"/"+e+"/archive.mp4";un(CT_i18n[10]),$.ajax({type:"HEAD",async:!0,url:t}).done(function(){CameraTag.fire(jt,"recordingStopped"),CameraTag.fire(jt,"readyToPublish")}).fail(function(){setTimeout(f,1e3)})};o.pauseRecording=function(){console.log("recording pausing not available in this recording stack.")},o.resumeRecording=function(){console.log("recording pausing not available in this recording stack.")},o.upload=function(){},o.publish=function(){un(CT_i18n[38]),publish_asset({original_filename:e,camera_uuid:s,asset_uuid:xt.uuid,archive_id:e,asset_type:"Video",type:"stream",videoServer:T,signature:c,signature_expiration:l,metadata:t,asset_name:u,asset_description:d})}};CameraTag.cameras[jt]=o;var Jt=function(){get_camera(s,function(e){return e.success?(v=e.app_uuid,T=e.videoServer,St=e.video_media_factories,xt=qt(),CameraTag.observe(xt.uuid,"published",function(e){xt.uuid==e.uuid&&(Ot="published",dn(),CameraTag.fire(jt,"published",xt),pn(),o.loadInterface(mt),Bt&&o.disconnect())},!0),h&&CameraTag.observe(xt.uuid,"processed",function(e){xt.uuid==e.uuid&&($(mt).html('<player data-uuid="'+xt.uuid+'" id="'+jt+'_player" data-signature="'+c+'" data-signature-expiration="'+l+'"></player>'),CameraTag.setup())},!0),CameraTag.observe(xt.uuid,"publishFailed",function(e){xt.uuid==e.video_uuid&&ln(CT_i18n[34]+e.message)},!0)):(Vt.push(e.message),CameraTag.fire(jt,"initializationError",e)),Xt(),Vt.length>0?void ln(Vt[0]):(CameraTag.observe(jt,"initialized",function(){et instanceof Gt?o.loadInterface(it,!0):o.loadInterface(tt,!0),et.listCameras().length>0&&nt.show()}),W=parseInt($(Z).height()/14),12>W&&(W=12),void $(Z).css({fontSize:W+"px"}))})},qt=function(){var e={};return e.uuid=It?It:generateUUID("v-"),e.medias={},St&&$.each(St,function(t){e.medias[t]=null}),e},Xt=function(){if(b=$(e).attr("name")||jt,q=$(e).attr("style"),St&&webrtc_enabled){var t,n=St[Object.keys(St)[0]].width,i=St[Object.keys(St)[0]].height,r=n/i;r>1.3?(t=300/i,S=300,x=parseInt(n*t)):(t=400/n,x=400,S=parseInt(i*t)),j=n,k=i}else if(St){var t,n=St[Object.keys(St)[0]].width,i=St[Object.keys(St)[0]].height,r=n/i;r>1.3?(t=300/i,S=300,x=parseInt(n*t)):(t=400/n,x=400,S=parseInt(i*t)),n>640||i>480?(j=parseInt(n/2),k=parseInt(i/2)):(j=n,k=i)}else x=400,S=300,j=400,k=300;return x=$(e).attr("data-width")||x,S=$(e).attr("data-height")||S,x=parseInt(x),S=parseInt(S),E=$(e).attr("data-sources")||"record,upload,sms",E=E.replace(" ","").split(","),R=$(e).attr("data-maxlength")||$(e).attr("data-max-length")||30,I=$(e).attr("data-minlength")||$(e).attr("data-min-length")||3,D=$(e).attr("data-videobitrate")||j*k*.47407+196608,L=$(e).attr("data-audiobitrate")||4e4,_=$(e).attr("data-txt-message")||CT_i18n[0],autoPreview="true"==$(e).attr("data-autopreview"),O=!autoPreview,pollServer="false"!=$(e).attr("data-poll-for-processed"),U="false"!=$(e).attr("data-publish-on-upload"),P="true"==$(e).attr("data-skip-font-awesome"),H="false"!=$(e).attr("data-upload-on-select"),F="false"!=$(e).attr("data-record-on-connect"),N="false"!=$(e).attr("data-skip-auto-detect")||"true"==$(e).attr("data-detect-camera"),M="true"==$(e).attr("data-simple-security"),V="false"!=$(e).attr("data-mirror-recording"),z=$(e).attr("data-default-sms-country"),Y=$(e).attr("data-frame-interval")||20,Q="false"!=$(e).attr("data-enforce-mobile-length"),J=$(e).attr("data-buffer-size")||16384,B=$(e).attr("data-pre-roll-length")?parseInt($(e).attr("data-pre-roll-length")):5,on(),en(),nn(),gn(),Vt.length>0?void ln(Vt.join("\n")):void 0},Kt=function(){return"Chrome"==DetectRTC.browser.name&&DetectRTC.browser.version>=60?!0:"Safari"==DetectRTC.browser.name&&DetectRTC.browser.version>=11?!0:!1},Zt=function(){return"Chrome"==DetectRTC.browser.name||"Firefox"==DetectRTC.browser.name?window.isSecureContext:"https:"==window.location.protocol},en=function(){g&&("mobile"==g||"flash"==g||"webrtc"==g)||"mediarecorder"==g?"mobile"==g?et=new Gt:"flash"==g?et=new $t:"webrtc"==g?et=new Qt:"mediarecorder"==g&&(et=new Yt):et=isMobileDevice?webrtc_enabled&&OT.checkSystemRequirements()?new Qt:new Gt:"Safari"==DetectRTC.browser.name&&DetectRTC.browser.version>=11?new Qt:webrtc_enabled&&"Edge"!=DetectRTC.browser.name?new Qt:new $t,Kt()&&!Zt()};o.stack=function(){return et.stack},o.getState=function(){return Ot};var tn=function(e){CameraTag.fire(jt,"UploadProgress",e),CameraTag.fire(jt,"uploadProgress",e);var t=180*e,n=360*e;$(".radial-progress .circle .mask.full, .radial-progress .circle .fill").css({transform:"rotate("+t+"deg)"}),$(".radial-progress .circle .fill.fix").css({transform:"rotate("+n+"deg)"}),pt.html((100*e).toFixed(1)+"%")};o.startUpload=function(e){Dt=e||Dt;var i=Dt.name.split(".");if(i=i[i.length-1],i=i.toLowerCase(),-1!=f.indexOf(i)||confirm(CT_i18n[42])){CameraTag.fire(jt,"uploadStarted");var r=navigator.userAgent.toLowerCase().indexOf("android")>-1;pt.html(r?"...":"0%"),y.add({name:"recordings/"+xt.uuid+".flv",file:Dt,notSignedHeadersAtInitiate:{"Cache-Control":"max-age=3600"},xAmzHeadersAtInitiate:{"x-amz-acl":"public-read"},signParams:{},complete:function(){Wt=!0,CameraTag.fire(jt,"readyToPublish"),tt.css("left","0px"),tt.css("right","0px"),U?(un(CT_i18n[38]),publish_asset({original_filename:Dt.name,camera_uuid:v,asset_uuid:xt.uuid,asset_type:"Video",type:"upload",videoServer:T,signature:c,signature_expiration:l,metadata:t,asset_name:u,asset_description:d})):n=!0},progress:tn})}};var nn=function(){if(y=new Evaporate({signerUrl:"//"+appServer+"/api/v"+CameraTag.version+"/assets/upload_signature",aws_key:"AKIAJCHWZMZ35EB62V2A",bucket:BUCKET_NAME,aws_url:"https://"+BUCKET_NAME,cloudfront:!0,logging:!1}),o.uploader=y,!(et instanceof Gt)&&-1!=E.indexOf("upload")&&tt.find(".cameratag_upload").length>0){var e=tt.find(".cameratag_upload")[0],t=E.indexOf("upload");if(-1==t)var n=$('<input id="'+jt+'_upload_file" style="position:absolute;" type="file" accept="video/mp4,video/m4v,video/x-flv,video/flv,video/wmv,video/mpg,video/quicktime,video/webm,video/x-ms-wmv,video/ogg,video/avi,video/mov,video/x-m4v,video/*" capture>');else var n=$('<input id="'+jt+'_upload_file" style="position:absolute;" type="file" accept="video/mp4,video/m4v,video/x-flv,video/flv,video/wmv,video/mpg,video/quicktime,video/webm,video/x-ms-wmv,video/ogg,video/avi,video/mov,video/x-m4v,video/*">');$(tt).append(n),$(n).css({left:$(e).offset().left-$(e).offsetParent().offset().left,top:$(e).offset().top-$(e).offsetParent().offset().top,width:$(e).width(),height:$(e).height(),opacity:0}),$(e).css({zIndex:1}),$(e).click(function(e){e.target!=n[0]&&(e.stopPropagation(),$(n).click())}),$(n).change(function(e){e.target.files[0]&&(Dt=e.target.files[0],CameraTag.fire(jt,"uploadFileSelected",Dt),H&&o.startUpload(),$(e.target).val(""))})}},rn=function(){et.listCameras().length>0&&(Ct.html(""),$(et.listCameras()).each(function(e,t){var n=t.deviceId==X?"selected":"";Ct.append('<option value="'+t.deviceId+'" '+n+">"+t.label+"</option>")}),Et.html(""),$(et.listMicrophones()).each(function(e,t){var n=t.deviceId==K?"selected":"",i=$('<option value="'+t.deviceId+'" '+n+">"+t.label+"</option>");Et.append(i)}))},on=function(){if(isMobileDevice){var t=E.indexOf("sms");-1!=t&&E.splice(t,1)}if(!P){var n=$('<link href="//netdna.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.css" media="all" rel="stylesheet" type="text/css" />');$("head").append(n)}Z=$('<div id="'+jt+'" class="camera_tag"></div>'),Z.css({width:x+"px",height:S+"px"}),Z.attr("style",q),$(e).replaceWith(Z);var i=$('<div id="'+jt+'_recorder_placeholder"></div>');i.css({width:"100%",height:"100%",position:"absolute",top:"0px"}),Z.append(i);var r=$('<div id="'+jt+'_player_placeholder"></div>');if(r.css({width:"100%",height:"100%",position:"absolute",top:"0px"}),Z.append(r),hn(),tt=$("#"+jt+"-start-screen").addClass("cameratag_screen"),0==tt.length){tt=$('<div id="'+jt+'_start_screen" class="cameratag_screen cameratag_start"></div>');var a=$('<a class="cameratag_select_prompt">'+CT_i18n[4]+"</a>");if(tt.append(a),-1!=E.indexOf("record")){var s=$('<a class="cameratag_primary_link cameratag_record_link cameratag_record"><span class="cameratag_action_icon"><i class="fa fa-video-camera" aria-hidden="true"></i></span><br><span class="cameratag_prompt_label">'+CT_i18n[5]+"</span></a>");tt.append(s)}if(-1!=E.indexOf("upload")){var c=$('<a id="'+jt+'_upload_link" class="cameratag_primary_link cameratag_upload_link cameratag_upload"><span class="cameratag_action_icon">&#61678;</span><br><span class="cameratag_prompt_label">'+CT_i18n[6]+"</span></a>");tt.append(c)}if(-1!=E.indexOf("sms")){var l=$('<a class="cameratag_primary_link cameratag_sms_link cameratag_sms"><span class="cameratag_action_icon">&#61707;</span><br><span class="cameratag_prompt_label">'+CT_i18n[7]+"</span></a>");tt.append(l)}nt=$('<i class="cameratag_settings_btn fa fa-cog" src="//cameratag.com/assets/gear.png" style="display:none"></i>'),tt.append(nt)}if(Z.append(tt),$(tt).css("position","absolute"),it=$("#"+jt+"-mobile-start-screen").addClass("cameratag_screen"),0==it.length){it=$('<div id="'+jt+'_mobile_start_screen" class="cameratag_screen cameratag_mobile_start cameratag_record"></div>');var a=$('<a class="cameratag_mobile_prompt">'+CT_i18n[43]+"</a>");it.append(a);var l=$('<a class="cameratag_primary_link cameratag_sms_link"><span class="cameratag_action_icon">&#61707;</span><br><span class="cameratag_prompt_label">'+CT_i18n[44]+"</span></a>");it.append(l)}if(Z.append(it),vt=$("#"+jt+"-error-screen").addClass("cameratag_screen"),0==vt.length){vt=$('<div class="cameratag_screen cameratag_error"></div>'),yt=$('<div class="cameratag_error_message"></div>'),vt.append(yt);var u=$('<img class="cameratag_settings_btn" src="//cameratag.com/assets/gear.png">');vt.append(u)}else yt=$(".cameratag_error_message");if(Z.append(vt),ct=$("#"+jt+"-camera-detection-screen").addClass("cameratag_screen"),0==ct.length&&(ct=$("#"+jt+"camera-detection-screen").addClass("cameratag_screen")),0==ct.length){ct=$('<div class="cameratag_screen cameratag_detect"></div>');var d=$('<div class="cameratag_prompt">'+CT_i18n[8]+"</div>");ct.append(d)}if(Z.append(ct),Tt=$("#"+jt+"-device-selection-screen").addClass("cameratag_screen"),0==Tt.length){Tt=$('<div class="cameratag_screen cameratag_select"></div>');var p=$('<div class="cameratag_horizontal_meter cameratag_device_selection_meter"></div>'),f=$('<div class="cameratag_prompt"></div>'),h=$('<a class="cameratag_save_device_selection">Save Settings</a>');Ct=$('<select class="cameratag_camera_options"></select>'),Et=$('<select class="cameratag_mic_options"></select>'),f.append(p).append(h).append('<i class="fa fa-video-camera" aria-hidden="true"></i>').append(Ct).append('<br/><i class="fa fa-microphone" aria-hidden="true"></i>').append(Et),Tt.append(f)}else Ct=Tt.find(".cameratag_camera_options"),Et=Tt.find(".cameratag_mic_options");if(Z.append(Tt),lt=$("#"+jt+"-countdown-screen").addClass("cameratag_screen"),ut=lt.find(".cameratag_countdown_status"),0==lt.length){lt=$('<div class="cameratag_screen cameratag_count"></div>');var g=$('<div class="cameratag_prompt">'+CT_i18n[9]+" </div>"),m=$('<div class="cameratag_horizontal_meter cameratag_countdown_meter"></div>');g.append(m),ut=$('<div class="cameratag_countdown_status"></div>'),lt.append(ut),lt.append(g)}if(Z.append(lt),rt=$("#"+jt+"-throttled-screen"),0==rt.length){rt=$('<div class="cameratag_throttled"></div>');var y=$('<div class="cameratag_throttled_message">'+CT_i18n[41]+"</div>")}if(rt.append(y),Z.append(rt),ot=$("#"+jt+"-paused-screen").addClass("cameratag_screen"),0==ot.length){ot=$('<div class="cameratag_screen cameratag_paused"></div>');var _=$('<div class="cameratag_paused_message">'+CT_i18n[102]+"</div>")}if(ot.append(_),Z.append(ot),dt=$("#"+jt+"-upload-screen").addClass("cameratag_screen"),pt=dt.find(".cameratag_upload_status"),0==dt.length){dt=$('<div class="cameratag_screen cameratag_upload"></div>');var w=$('<div class="cameratag_prompt">'+CT_i18n[10]+"</div>");pt=$('<div class="cameratag_upload_status"></div>');var A=$('<div class="radial-progress" data-progress="0"><div class="circle"><div class="mask full"><div class="fill"></div></div><div class="mask half"><div class="fill"></div><div class="fill fix"></div></div><div class="shadow"></div></div><div class="inset"></div></div>');dt.append(A),dt.append(pt),dt.append(w)}if(Z.append(dt),st=$("#"+jt+"-recording-screen").addClass("cameratag_screen"),Rt=st.find(".cameratag_record_timer_prompt"),0==st.length){st=$('<div class="cameratag_screen cameratag_recording cameratag_stop_recording"></div>');var C=$('<div class="cameratag_prompt">'+CT_i18n[11]+"</div>"),T=$('<div class="cameratag_horizontal_meter cameratag_recording_meter"></div>');Rt=$('<span class="cameratag_record_timer_prompt"> ('+sn(R)+")</span>");var j=$('<img src="//'+appServer+'/assets/recording.gif"/>');C.append(T).append(Rt),st.append(C),st.append(j)}if(Z.append(st),at=$("#"+jt+"-playback-screen").addClass("cameratag_screen"),0==at.length){at=$('<div class="cameratag_screen cameratag_playback cameratag_stop_playback"></div>');var k=$('<div class="cameratag_prompt">'+CT_i18n[12]+"</div>");at.append(k)}if(Z.append(at),ft=$("#"+jt+"-accept-screen").addClass("cameratag_screen"),0==ft.length){ft=$('<div class="cameratag_screen cameratag_accept"></div>');var I=$('<a class="cameratag_accept_btn cameratag_publish"><span class="button_label"><i class="fa fa-floppy-o" aria-hidden="true"></i> '+CT_i18n[13]+"</span></a>"),O=$('<a class="cameratag_rerecord_btn cameratag_record"><span class="button_label"><i class="fa fa-times-circle" aria-hidden="true"></i> '+CT_i18n[14]+"</span></a>"),D=$('<a class="cameratag_play_btn cameratag_play"><span class="button_label"><i class="fa fa-play" aria-hidden="true"></i> '+CT_i18n[15]+"</span></a>");ft.append(I),ft.append(D),ft.append(O)}if(Z.append(ft),ht=$("#"+jt+"-wait-screen").addClass("cameratag_screen"),gt=ht.find(".cameratag_wait_message"),0==ht.length){ht=$('<div class="cameratag_screen cameratag_wait"></div>');var L=$('<div class="cameratag_spinner"><img src="//'+appServer+'/assets/loading.gif"/><br/><span class="cameratag_wait_message">'+CT_i18n[16]+"</span></div>");ht.append(L),gt=ht.find(".cameratag_wait_message")}if(Z.append(ht),mt=$("#"+jt+"-completed-screen").addClass("cameratag_screen"),0==mt.length){mt=$('<div class="cameratag_screen cameratag_completed"></div>'),wt=$('<div class="cameratag_thumb_bg"></div>');var N=$('<div class="cameratag_checkmark"><span class="check"><i class="fa fa-check-circle-o" aria-hidden="true"></i></span> '+CT_i18n[17]+"</div>");mt.append(wt),mt.append(N)}if(Z.append(mt),processed_screen=$("#"+jt+"-processed-screen").addClass("cameratag_screen"),0==processed_screen.length&&(processed_screen=$('<div class="cameratag_screen cameratag_processed"></div>')),Z.append(processed_screen),_t=$("#"+jt+"-sms-screen").addClass("cameratag_screen"),bt=_t.find(".cameratag_sms_input"),0==_t.length){_t=$('<div class="cameratag_screen cameratag_sms_screen"></div>');var M=$('<div class="cameratag_sms_prompt">'+CT_i18n[18]+"<br/></div>");bt=$('<input id="'+jt+'_sms_input" class="cameratag_sms_input" type="text"/>');var B=$('<br/><a href="javascript:" class="cameratag_send_sms">'+CT_i18n[19]+'</a>&nbsp;&nbsp;<a href="javascript:" class="cameratag_goto_start">'+CT_i18n[20]+"</a>");M.append(bt),M.append(B),_t.append(M),$(bt).intlTelInput({defaultCountry:z})}Z.append(_t),At=$("#"+jt+"-check-phone-screen").addClass("cameratag_screen"),0==At.length&&(At=$('<div class="cameratag_screen cameratag_check_phone"><div class="cameratag_check_phone_prompt">'+CT_i18n[21]+'</div><div class="cameratag_check_phone_url">'+CT_i18n[22]+" http://"+appServer+"/api/v"+CameraTag.version+"/cameras/"+v+"/videos/"+xt.uuid+"/mobile_record</div></div>")),Z.append(At),Z.append("<input id='"+b+"_uuid' type='hidden' name='"+b+"_uuid' value=''>"),$.each(St,function(e,t){Z.append("<input id='"+b+"_"+t.name+"' type='hidden' name='"+b+"_"+t.name+"' value=''>")}),Et.add(Ct).change(function(){var e=Ct.val(),t=Et.val();o.disconnect(),X=e,K=t,et.setCamera(e),et.setMicrophone(t),o.selectDevices()}),Z.find(".cameratag_record").click(function(){o.record()}),Z.find(".cameratag_stop_recording").click(function(){o.stopRecording()}),Z.find(".cameratag_stop_playback").click(function(){o.stopPlayback()}),Z.find(".cameratag_play").click(function(){o.play()}),Z.find(".cameratag_resume").click(function(){o.resumeRecording()}),Z.find(".cameratag_publish").click(function(){o.publish()}),Z.find(".cameratag_goto_start").click(function(){o.loadInterface(tt,!0)}),Z.find(".cameratag_send_sms").click(function(){o.send_sms()}),Z.find(".cameratag_sms").click(function(){o.loadInterface(_t)}),Z.find(".cameratag_settings_btn").click(function(e){e.stopPropagation(),o.selectDevices()}),Z.find(".cameratag_save_device_selection").click(function(){o.disconnect(),o.loadInterface(tt)})};o.selectDevices=function(){o.connect(function(){rn(),o.loadInterface(Tt)})};var an=function(e,t){Nt||Mt?(Z.find(".cameratag_screen").hide(),setTimeout(function(){an(e,t)},1e3)):(o.loadInterface(lt),Ut>=e?(Ut=0,lt.hide(),t(),CameraTag.fire(jt,"countdownFinished")):(ut.html(e-Ut),Ut+=1,setTimeout(function(){an(e,t)},1e3)))};o.loadInterface=function(e){Pt=e,Z.find(".cameratag_screen").hide(),"none"!=e&&e.css("display","block")};var sn=function(e){var t=Math.floor(e/60),n=e-60*t;return t>0?10>n?t+":0"+n:t+":"+n:n},cn=function(){kt+=1;var e=R-kt;Rt.html(" ("+sn(e)+")"),0==e&&(CameraTag.fire(jt,"recordingTimeOut"),clearInterval(w),o.stopRecording())},ln=function(e){yt.html(e),o.loadInterface(vt,!0)};o.publish=function(){if(!Wt)throw"Camera not ready to publish. Please wait for the 'readyToPublish' event.";CameraTag.fire(jt,"publishing"),un(CT_i18n[38]),n?publish_asset({original_filename:Dt.name,camera_uuid:v,asset_uuid:xt.uuid,asset_type:"Video",type:"upload",videoServer:T,signature:c,signature_expiration:l,metadata:t,asset_name:u,asset_description:d}):et.publish()};var un=function(e){e=e||"please wait",gt.html(e),o.loadInterface(ht)},dn=function(){$("#"+b+"_uuid").val(xt.uuid),$.each(St,function(e,t){var n="//"+appServer+"/assets/"+xt.uuid+"/"+e+"."+t.extension;$("#"+b+"_"+e).val(n),xt.medias[e]=n})};o.setMetadata=function(e,n){if(n=n||!1,"object"!=typeof e)return void console.warn("setMetadata only accepts Javascript Objects");if(t=e,"published"==Ot||n){var i=JSON.stringify(e);$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+v+"/assets/"+xt.uuid+"/metadata.json",data:{metadata:i,asset_type:"Video"},type:"post",success:function(){return!0},error:function(e,t,n){return ln(CT_i18n[35]),CameraTag.fire(jt,"addDataError",{jqXHR:e,textStatus:t,errorThrown:n}),!1}})}},o.addVideoData=o.setMetadata,o.setVideoData=o.setMetadata,o.reset=function(){clearTimeout(A),clearTimeout(C),clearInterval(w),Ut=0,kt=0,Ht=!1,Vt=[],Wt=!1,n=!1,Bt&&o.disconnect(),xt=qt(),CameraTag.observe(xt.uuid,"published",function(e){xt.uuid==e.uuid&&(Ot="published",dn(),o.loadInterface(mt),Bt&&o.disconnect(),CameraTag.fire(jt,"published",xt),pn())},!0),h&&CameraTag.observe(xt.uuid,"processed",function(e){xt.uuid==e.uuid&&($(processed_screen).html('<player data-uuid="'+xt.uuid+'" id="'+jt+'_player" data-signature="'+c+'" data-signature-expiration="'+l+'"></player>'),o.loadInterface(processed_screen),CameraTag.setup())},!0),CameraTag.observe(xt.uuid,"publishFailed",function(e){xt.uuid==e.video_uuid&&ln(CT_i18n[34]+e.message.error)},!0),et instanceof Gt||(et.setUUID(xt.uuid),et.showNothing()),Z.find("input").val(""),et instanceof Gt?o.loadInterface(it,!0):o.loadInterface(tt,!0),o.showRecorder(),CameraTag.fire(jt,"cameraReset")},o.setLength=function(e){o.setMaxLength(e)},o.setMaxLength=function(e){R=e,Rt.html("("+sn(e)+")")},o.setSignature=function(e){c=e},o.setSignatureExpiration=function(e){l=e},o.setMinLength=function(e){I=e},o.send_sms=function(){var e=$(bt).intlTelInput("getSelectedCountryData").dialCode,n=$(bt).val(),i="+"+e+n;return""==n?void swal(CT_i18n[25]):(un(CT_i18n[24]),t&&o.setMetadata(t,!0),void $.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+v+"/videos/"+xt.uuid+"/sms",data:{number:i,message:_},type:"post",success:function(e,t,n){e.success?(o.loadInterface(At),CameraTag.fire(jt,"smsSent")):(o.loadInterface(_t),swal(CT_i18n[26]),CameraTag.fire(jt,"smsError",{jqXHR:n,textStatus:t}))},error:function(e,t,n){return ln(CT_i18n[27]),CameraTag.fire(jt,"smsError",{jqXHR:e,textStatus:t,errorThrown:n}),!1}}))},o.getVideo=function(){return xt},o.restart_upload=function(){o.uploader.restart_upload()},o.destroy=function(){if(clearTimeout(A),clearTimeout(C),clearInterval(w),Ut=0,kt=0,Ht=!1,Vt=[],Wt=!1,Bt)CameraTag.observe(jt,"serverDisconnected",o.destroy),o.disconnect();else{if(CameraTag.stopObserving(jt,"serverDisconnected",o.destroy),delete CameraTag.cameras[jt],Z.remove(),callbacks[jt].destroyed)var e=callbacks[jt].destroyed.slice();else var e=[];callbacks[jt]={},e&&setTimeout(function(){for(i=0;i<e.length;i++)try{e[i]()}catch(t){}},750)}};var pn=function(){pollServer&&$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+v+"/videos/"+xt.uuid+".json",type:"get",data:{referer:window.location.toString()},success:function(e){e.state&&"processed"==e.state?(CameraTag.fire(xt.uuid,"processed",e),CameraTag.fire(jt,"processed",e)):e.state&&"error"==e.state?(CameraTag.fire(xt.uuid,"processingFailed",e),CameraTag.fire(jt,"processingFailed",e)):A=setTimeout(pn,2e3)},error:function(e,t,n){A=setTimeout(pn,2e3),CameraTag.fire(jt,"processingPollingError",{jqXHR:e,textStatus:t,errorThrown:n})}})},fn=function(){$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+v+"/videos/"+xt.uuid+".json",type:"get",data:{referer:window.location.toString()},success:function(e){"published"==e.state||"processed"==e.state?(CameraTag.fire(xt.uuid,"published",e),clearInterval(C)):C=setTimeout(function(){fn()},4e3)},error:function(e,t,n){C=setTimeout(function(){fn()},4e3),CameraTag.fire(jt,"publishedPollingError",{jqXHR:e,textStatus:t,errorThrown:n})}})},hn=function(){o.play=function(){et&&Bt&&et.startPlayback()},o.setVideoBitrate=function(e){et&&et.setVideoBitrate(e)},o.showFlashSettings=function(){et&&(o.loadInterface("none"),et.showFlashSettings())},o.record=function(){et instanceof Gt||(et&&Bt?(CameraTag.fire(jt,"countdownStarted"),et.showRecorder(),an(B,o.record_without_countdown)):(o.loadInterface("none"),o.connect()))},o.showRecorder=function(){et&&et.showRecorder()},o.showPlayer=function(){et&&et.showPlayer()},o.record_without_countdown=function(){if(!Ft)throw"Camera not ready to record. Please observe 'readyToRecord' event before recording";et&&(Ot="recording",et.showRecorder(),et.startRecording())},o.pauseRecording=function(){et.pauseRecording()},o.resumeRecording=function(){et.resumeRecording()},o.stopPlayback=function(){et&&Bt&&et.stopPlayback()},o.stopRecording=function(){kt>=I?(clearInterval(w),et&&Bt&&et.stopRecording()):console.warn("stopRecording called before minimum length")},o.connect=function(e){Lt=e||function(){F?o.record():o.loadInterface("none")},et&&et.connect()},o.disconnect=function(){et&&(Ot="disconnecting",et.disconnect())}},gn=function(){CameraTag.observe(jt,"initialized",function(){zt=!0,Ot="initialized",-1==E.indexOf("record")||et instanceof Gt||buildSettingsDialog()},!0),CameraTag.observe(jt,"throttled",function(){throttled_timer=setTimeout(function(){Mt=!0,Z.find(".cameratag_screen").hide(),rt.show()},1500)},!0),CameraTag.observe(jt,"unthrottled",function(){clearTimeout(throttled_timer),Mt&&(Mt=!1,rt.hide(),o.loadInterface(Pt))},!0),CameraTag.observe(jt,"connecting",function(){un(CT_i18n[39])},!0),CameraTag.observe(jt,"connecting2",function(){un(CT_i18n[40])},!0),CameraTag.observe(jt,"securityDialogOpen",function(){o.loadInterface("none")},!0),CameraTag.observe(jt,"securityDialogClosed",function(){o.loadInterface(ct)},!0),CameraTag.observe(jt,"settingsDialogClosed",function(){o.loadInterface(tt,!0)},!0),CameraTag.observe(jt,"detectingCamera",function(){o.loadInterface(ct)},!0),CameraTag.observe(jt,"hardwareError",function(){ln(CT_i18n[99])},!0),CameraTag.observe(jt,"flashInitializationError",function(){o.record=function(){confirm(CT_i18n[2])&&window.open("https://get.adobe.com/flashplayer")}},!0),CameraTag.observe(jt,"unsupportedFlashVersion",function(){o.record=function(){confirm(CT_i18n[2])&&window.open("https://get.adobe.com/flashplayer")}},!0),CameraTag.observe(jt,"noCamera",function(){o.record=function(){swal(CT_i18n[28])}},!0),CameraTag.observe(jt,"noMic",function(){o.record=function(){swal(CT_i18n[29])}},!0),CameraTag.observe(jt,"readyToRecord",function(){Ft=!0,Lt()},!0),CameraTag.observe(jt,"cameraDenied",function(){ln(CT_i18n[30])},!0),CameraTag.observe(jt,"serverConnected",function(){Bt=!0},!0),CameraTag.observe(jt,"serverDisconnected",function(){Bt=!1,Ft=!1,"disconnecting"!=Ot&&"published"!=Ot&&"readyToPublish"!=Ot&&(o.stopRecording(),et.showNothing(),ln(CT_i18n[31]),setTimeout(function(){o.loadInterface(tt)},2e3))},!0),CameraTag.observe(jt,"playbackFailed",function(){ln(CT_i18n[32])},!0),CameraTag.observe(jt,"serverError",function(){ln(CT_i18n[33])},!0),CameraTag.observe(jt,"waitingForCameraActivity",function(){un(CT_i18n[100])},!0),CameraTag.observe(jt,"countdownStarted",function(){o.loadInterface(lt)},!0),CameraTag.observe(jt,"countdownFinished",function(){},!0),CameraTag.observe(jt,"recordingStarted",function(){kt=0,w=setInterval(function(){cn()},1e3),o.loadInterface(st)},!0),CameraTag.observe(jt,"recordingPaused",function(){clearInterval(w),Z.find(".cameratag_screen").hide(),ot.show()},!0),CameraTag.observe(jt,"recordingResumed",function(){ot.hide(),w=setInterval(function(){cn()},1e3),o.loadInterface(st)},!0),CameraTag.observe(jt,"recordingStopped",function(){clearInterval(w),O?(et.showPlayer(),o.loadInterface(ft)):o.play()},!0),CameraTag.observe(jt,"audioLevel",function(e){var t=e+"%";$(".cameratag_vertical_meter").css({height:t}),$(".cameratag_horizontal_meter").css({width:t})},!0),CameraTag.observe(jt,"bufferingDown",function(){un(CT_i18n[37])},!0),CameraTag.observe(jt,"recordingTimeOut",function(){},!0),CameraTag.observe(jt,"playbackStarted",function(){o.loadInterface(at)},!0),CameraTag.observe(jt,"playbackStopped",function(){o.loadInterface(ft)},!0),CameraTag.observe(jt,"publishing",function(){Ot="publishing"},!0),CameraTag.observe(jt,"uploadStarted",function(){Ht=!0,o.loadInterface(dt)},!0),CameraTag.observe(jt,"uploadProgress",function(e){pt.html((100*e).toFixed(1)+"%")},!0),CameraTag.observe(jt,"uploadAborted",function(){Ht=!1},!0),CameraTag.observe(jt,"readyToPublish",function(){Wt=!0,Ot="readyToPublish"},!0),CameraTag.observe(jt,"smsSent",function(){fn()},!0),CameraTag.observe(jt,"published",function(){},!0),CameraTag.observe(jt,"publishFailed",function(){ln(CT_i18n[34])},!0),CameraTag.observe(jt,"processed",function(){Ot="processed";for(var e in St)if("thumb"==St[e].media_type){$(Z).find(".cameratag_thumb_bg").css({backgroundImage:"url(//"+appServer+"/assets/"+xt.uuid+"/"+St[e].name+"."+St[e].extension+")"});break}},!0)};Jt()};CameraTagPlayer=function(video_el){var cachebuster=parseInt(1e8*Math.random()),video_el=$(video_el),new_video_tag,jwplayerInjected=!1,uuids,self=this,dom_id=video_el.attr("id")||cachebuster,signature=$(video_el).attr("data-signature"),signature_expiration=$(video_el).attr("data-signature-expiration"),default_options={},largest_source_width=0,largest_source_height=0,height,width,jw_player_instance,user_options={},playlist,container,playbar_frame,playbar_cover,jw_target,setup=function(){""!=video_el.attr("data-uuid")&&"["==video_el.attr("data-uuid")[0]?uuids=eval(video_el.attr("data-uuid")):""!=video_el.attr("data-uuid")&&-1!=video_el.attr("data-uuid").indexOf(",")?uuids=video_el.attr("data-uuid").replace(" ","").split(","):""!=video_el.attr("data-uuid")?uuids=[video_el.attr("data-uuid")]:swal("no video uuids found"),build_default_options(),user_options=video_el.attr("data-options")?JSON.parse(video_el.attr("data-options")):{},build_playlist_array(uuids)
},build_default_options=function(){default_options.skin="glow",$(video_el).attr("data-aspectratio")&&(default_options.aspectratio=$(video_el).attr("data-aspectratio")),$(video_el).attr("data-image")&&(default_options.image=$(video_el).attr("data-image")),$(video_el).attr("data-autostart")&&(default_options.autostart="true"==$(video_el).attr("data-autostart")),$(video_el).attr("data-controls")&&(default_options.controls="true"==$(video_el).attr("data-controls")),$(video_el).attr("data-displaytitle")&&(default_options.displaytitle="true"==$(video_el).attr("data-displaytitle")),$(video_el).attr("data-displaydescription")&&(default_options.displaydescription="true"==$(video_el).attr("data-displaydescription")),$(video_el).attr("data-mute")&&(default_options.mute="true"==$(video_el).attr("data-mute")),$(video_el).attr("data-repeat")&&(default_options.repeat="true"==$(video_el).attr("data-repeat")),$(video_el).attr("data-primary")&&(default_options.primary="true"==$(video_el).attr("data-primary")),$(video_el).attr("data-stretching")&&(default_options.stretching="true"==$(video_el).attr("data-stretching")),($(video_el).attr("data-sharing-link")||$(video_el).attr("data-sharing-heading")||$(video_el).attr("data-sharing-link"))&&(default_options.sharing={},default_options.link=$(video_el).attr("data-sharing-link"),default_options.code=$(video_el).attr("data-sharing-embed"),default_options.heading=$(video_el).attr("data-sharing-heading")),default_captions="false"==$(video_el).attr("data-show-captions")?!1:!0},buildInterface=function(){if(container=$('<div id="'+dom_id+'" class="cameratag"></div>'),jw_target=$('<div id="'+dom_id+'_jw_target"></div>'),container.append(jw_target),$(video_el).replaceWith(container),default_options.aspectratio);else{var e=width/height;if(e>1.3){var t=300/height;height=300,width=parseInt(width*t)}else{var t=400/width;width=400,height=parseInt(height*t)}}init_jwplayer(),playbar_frame=$('<div id="'+dom_id+'_playbar_frame" class="cameratag_audio_playbar_frame"></div>'),playbar_waveform_container=$('<div id="'+dom_id+'_playbar_wavform_container" class="cameratag_audio_playbar_wavform_container"></div>'),playbar_waveform=$('<img id="'+dom_id+'_playbar_waveform" class="cameratag_audio_playbar_waveform"></img>'),playbar_waveform_container.append(playbar_waveform),playbar_cover=$('<div id="'+dom_id+'_playbar_cover" class="cameratag_audio_playbar_cover"></div>'),playbar_frame.append(playbar_waveform_container).append(playbar_cover)},create_audio_playlist_item=function(e,t){var n={},i=e.negative_waveform_url+"?signature="+signature+"&signature_expiration="+signature_expiration;n.negative_image=i,n.sources=[],n.sources.push({file:e.mp3_url+"?signature="+signature+"&signature_expiration="+signature_expiration,label:"MP3"}),n.tracks=[],$.each(e.medias,function(e,t){"caption"==t.media_type&&"COMPLETED"==t.state&&(n.tracks.push({file:t.urls[Object.keys(t.urls)[0]],kind:"captions",label:t.name}),n["default"]=default_captions)}),n.uuid=e.uuid,n.type=e.type,n.app_uuid=e.app_uuid,n.title=e.name||e.uuid,n.description=e.description,0==playlist.length&&(n.ad_server_type=e.ad_server_type,n.ad_server_url=e.ad_server_url),n.length=e.length,640>largest_source_width&&(largest_source_width=640),120>largest_source_height&&(largest_source_height=300),playlist[t]=n},create_video_playlist_item=function(e,t){var n={},i=[];for(var r in e.medias)("thumb"==e.medias[r].media_type||"small_thumb"==e.medias[r].media_type)&&i.push(e.medias[r]);var o=[];for(var r in e.medias)"mp4"==e.medias[r].media_type&&o.push(e.medias[r]);if(i.length>0){var a=i[0].urls.cameratag+"?signature="+signature+"&signature_expiration="+signature_expiration;n.image=$(video_el).attr("data-image")||a}n.sources=[],$(o).each(function(e,t){var i=t.urls.cameratag+"?signature="+signature+"&signature_expiration="+signature_expiration;n.sources.push({file:i,label:t.width+"x"+t.height})}),n.tracks=[],$.each(e.medias,function(e,t){"caption"==t.media_type&&"COMPLETED"==t.state&&n.tracks.push({file:t.urls[Object.keys(t.urls)[0]],kind:"captions",label:t.name,"default":!0})}),n.tracks.push({file:"//"+appServer+"/api/v"+CameraTag.version+"/apps/"+e.app_uuid+"/assets/"+e.uuid+"/thumbnails.vtt",kind:"thumbnails"}),n.height=o[0].height,n.width=o[0].width,n.uuid=e.uuid,n.type=e.type,n.app_uuid=e.app_uuid,n.title=e.name||e.uuid,n.description=e.description,n.ad_server_type=e.ad_server_type,n.ad_server_url=e.ad_server_url;var s=o[0].width,c=o[0].height;s>largest_source_width&&(largest_source_width=s),c>largest_source_height&&(largest_source_height=c),playlist[t]=n},build_playlist_array=function(e){playlist=[],$(e).each(function(t,n){$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/assets/"+n+".json?signature="+signature+"&signature_expiration="+signature_expiration,type:"get",data:{referer:window.location.toString()},success:function(n){return 0==n.success?void create_error_playlist_item():("Audio"==n.type&&create_audio_playlist_item(n,t),"Video"==n.type&&create_video_playlist_item(n,t),("published"==n.state||"error"==n.state)&&CameraTag.fire(dom_id,"unprocessedmedia",{uuid:n.uuid}),width=video_el.attr("data-width")||largest_source_width,height=default_options.aspectratio?$(video_el).attr("data-height"):$(video_el).attr("data-height")||largest_source_height,void(playlist.length==e.length&&buildInterface()))},error:function(){create_error_playlist_item()}})})},create_error_playlist_item=function(){playlist.push({image:"https://www.cameratag.com/assets/error2.png",sources:[{file:"https://cameratag.com/videos/v-673733c6-5c55-4d41-88d3-66f8e4bc48fe/720p/mp4.mp4"}],uuid:"fetch_error"}),width=531,height=300,playlist.length==uuids.length&&buildInterface(),CameraTag.fire(dom_id,"loaderror",{})},get_ad_server_url=function(){var e;return $(playlist).each(function(t,n){return n.ad_server_url?e=n.ad_server_url:void 0}),e},get_ad_server_type=function(){var e;return $(playlist).each(function(t,n){return n.ad_server_type?e=n.ad_server_type:void 0}),e},init_jwplayer=function(){jwplayer.key="ziVL9s0pxpESKa4mUW9KADbRrkb59LC2qGEI9Q==",default_options.playlist=playlist,default_options.width=width,default_options.height=height;var e=get_ad_server_type(),t=get_ad_server_url();t&&(default_options.advertising={},default_options.advertising.client=e,default_options.advertising.tag=t),combined_options=$.extend({},default_options,user_options),container.css({width:combined_options.width,height:combined_options.height}),jw_player_instance=jwplayer(dom_id+"_jw_target").setup(combined_options),CameraTag.players[dom_id]=jw_player_instance,setup_player_events()},setup_player_events=function(){function e(t,n){var t=jw_player_instance.getPosition(),n=jw_player_instance.getDuration();if(n>0){var i=t/n*100,i=100-i,r=n-t;playbar_cover[0].style.transitionDuration="0s",playbar_cover.css({width:i+"%"}),setTimeout(function(){playbar_cover[0].style.transitionDuration=r-.2+"s",playbar_cover.css({width:"0%"})},100)}else setTimeout(function(){e(t,n)},100)}jw_player_instance.on("ready",function(){container.find(".jw-preview").append(playbar_frame)}),jw_player_instance.on("play",function(){e();var t=jw_player_instance.getPlaylistItem();"Audio"==t.type?(playbar_frame.css({visibility:"visible"}),playbar_waveform.attr("src",t.negative_image)):playbar_frame.css({visibility:"hidden"})}),jw_player_instance.on("pause",function(){var e=jw_player_instance.getPosition(),t=jw_player_instance.getDuration(),n=e/t*100,n=100-n;playbar_cover[0].style.transitionDuration="0s",playbar_cover.css({width:n+"%"})}),jw_player_instance.on("complete",function(){playbar_cover[0].style.transitionDuration="0s",playbar_cover.css({width:"100%"})}),jw_player_instance.on("seek",function(){setTimeout(function(){e()},100)}),jw_player_instance.on("playlistItem",function(){}),jw_player_instance.onReady(function(){CameraTag.fire(dom_id,"ready",{})}),jw_player_instance.onSetupError(function(e,t){CameraTag.fire(dom_id,"setupError",{fallback:e,message:t})}),jw_player_instance.onPlaylist(function(e){CameraTag.fire(dom_id,"playlist",{playlist:e})}),jw_player_instance.onPlaylistItem(function(e,t){CameraTag.fire(dom_id,"playlistItem",{index:e,playlist:t})}),jw_player_instance.onPlaylistComplete(function(){CameraTag.fire(dom_id,"playlistComplete",{})}),jw_player_instance.onBufferChange(function(e){CameraTag.fire(dom_id,"bufferChange",{buffer:e})}),jw_player_instance.onPlay(function(){CameraTag.fire(dom_id,"play",{}),allow_play_count&&($.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+jw_player_instance.getPlaylistItem().app_uuid+"/assets/"+jw_player_instance.getPlaylistItem().uuid+"/play_count",type:"post",success:function(){}}),allow_play_count=!1,setTimeout(function(){allow_play_count=!0},3e3))}),jw_player_instance.onPause(function(e){CameraTag.fire(dom_id,"pause",{oldstate:e})}),jw_player_instance.onBuffer(function(){CameraTag.fire(dom_id,"buffer",{})}),jw_player_instance.onIdle(function(){CameraTag.fire(dom_id,"idle",{})}),jw_player_instance.onComplete(function(){CameraTag.fire(dom_id,"complete",{})}),jw_player_instance.onError(function(e){CameraTag.fire(dom_id,"error",{message:e})}),jw_player_instance.onSeek(function(e,t){CameraTag.fire(dom_id,"seek",{position:e,offset:t})}),jw_player_instance.onTime(function(e,t){CameraTag.fire(dom_id,"time",{duration:e,position:t})}),jw_player_instance.onMute(function(e){CameraTag.fire(dom_id,"mute",{muted:e})}),jw_player_instance.onVolume(function(e){CameraTag.fire(dom_id,"volume",{volume:e})}),jw_player_instance.onFullscreen(function(e){CameraTag.fire(dom_id,"fullscreen",{fullscreen:e})}),jw_player_instance.onResize(function(e,t){CameraTag.fire(dom_id,"resize",{width:e,height:t})}),jw_player_instance.onQualityLevels(function(e){CameraTag.fire(dom_id,"levels",{levels:e})}),jw_player_instance.onQualityChange(function(e){CameraTag.fire(dom_id,"qualityChange",{currentQuality:e})}),jw_player_instance.onCaptionsList(function(e){CameraTag.fire(dom_id,"captionsList",{tracks:e})}),jw_player_instance.onCaptionsChange(function(e){CameraTag.fire(dom_id,"captionsChange",{track:e})}),jw_player_instance.onControls(function(e){CameraTag.fire(dom_id,"controls",{controls:e})}),jw_player_instance.onDisplayClick(function(){CameraTag.fire(dom_id,"displayClick",{})}),jw_player_instance.onAdClick(function(e){CameraTag.fire(dom_id,"adClick",{tag:e})}),jw_player_instance.onAdCompanions(function(e,t){CameraTag.fire(dom_id,"adCompanions",{tag:e,companions:t})}),jw_player_instance.onAdComplete(function(e){CameraTag.fire(dom_id,"adComplete",{tag:e})}),jw_player_instance.onAdSkipped(function(e){CameraTag.fire(dom_id,"adSkipped",{tag:e})}),jw_player_instance.onAdError(function(e,t){CameraTag.fire(dom_id,"adError",{tag:e,message:t})}),jw_player_instance.onAdImpression(function(e){CameraTag.fire(dom_id,"adImpression",{tag:e})}),jw_player_instance.onAdTime(function(e,t,n){CameraTag.fire(dom_id,"adTime",{tag:e,position:t,duration:n})}),jw_player_instance.onBeforePlay(function(){CameraTag.fire(dom_id,"beforePlay",{})}),jw_player_instance.onBeforeComplete(function(){CameraTag.fire(dom_id,"beforeComplete",{})}),jw_player_instance.onMeta(function(e){CameraTag.fire(dom_id,"metadata",{metadata:e})})};setup()},CameraTagVideoWall=function(e){var t,n=this,i=[],r=$(e).attr("data-app-id"),o=$(e).attr("id"),a=$('<div id="'+o+'" class="camera_tag_video_wall"></div>'),s=1,c=$(e).attr("data-per-page"),l="true"==$(e).attr("data-include-name")?!0:!1,u="true"==$(e).attr("data-include-description")?!0:!1,d="false"==$(e).attr("data-open-lightbox")?!1:!0,p=$(e).attr("data-thumbnail-height")||250,f="true"==$(e).attr("data-show-top-pagnation"),h="false"!=$(e).attr("data-show-bottom-pagnation"),g=$('<div class="cameratag_lb_overlay"></div>'),m=$('<div class="cameratag_lb_body"></div>'),v=$('<div class="cameratag_video_wrapper"></div>'),y=$(e).attr("data-signature"),_=$(e).attr("data-signature-expiration"),b=function(){$(e).replaceWith(a),CameraTag.observe(o,"noAssets",function(){console.warn("We couldn't find any assets for your VideoWall '"+o+"'. Have you setup your CameraTag App's security settings to allow wall access?")}),$("body").append(g),$(g).click(n.closeVideo),$("body").append(m),$(m).append(v),n.loadPage(),CameraTag.video_walls[o]=n};n.loadPage=function(e){e=e||s,$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+r+"/assets/wall.json?page="+e,type:"get",data:{n:c},success:function(n){"object"==typeof n&&n.assets&&n.assets.length>0?(i=n.assets,t=n.total_pages,s=e,w()):CameraTag.fire(o,"noAssets")},error:function(e,t,n){CameraTag.fire(o,"serverError",{jqXHR:e,textStatus:t,errorThrown:n})}})};var w=function(){$(a).html(""),t>1&&f&&A(),$(i).each(function(e,t){var n=[],i=[];for(var r in t.medias)"COMPLETED"!=t.medias[r].state||"photo"!=t.medias[r].media_type&&"thumb"!=t.medias[r].media_type&&"small_thumb"!=t.medias[r].media_type||n.push(t.medias[r]),"COMPLETED"==t.medias[r].state&&"filmstrip"==t.medias[r].media_type&&i.push(t.medias[r]);if(n.length>0)var s=n[0].width,c=n[0].height;else var s=640,c=480;var p=$('<div id="'+o+"_"+t.uuid+'" class="cameratag_video_container"></div>'),f='<div class="cameratag_smart_thumb" style="background:url('+t.preview_thumbnail_url+"?signature="+y+"&signature_expiration="+_+') center center / contain no-repeat rgb(255, 255, 255)" data-width="'+s+'" data-height="'+c+'"';i.length>0&&(f+='data-strip-url="'+i[0].urls.cameratag+'"',f+='data-frame-count="30"'),f+="></div>",thumbnail_el=$(f);var h=$('<div class="cameratag_video_name">'+t.name+"</div>"),g=$('<div class="cameratag_video_description">'+t.description+"</div>");$(p).append(thumbnail_el),l&&$(p).append(h),u&&$(p).append(g),$(a).append(p),d&&$(p).click(function(){C(t)})}),t>1&&h&&A();new AssetGrid(a,".cameratag_smart_thumb",p);E()};n.nextPage=function(){t>s&&n.loadPage(s+1)},n.previousPage=function(){s>1&&n.loadPage(s-1)};var A=function(){var e=$('<div class="cameratag_videowall_pagination"></div>');if(s>1){var i=$('<span data-page="'+(s+1)+'" class="cameratag_videowall_pagination_link">&#9664;</span>');$(e).append(i)}for(var r=4>s?1:s-3,o=0;6>o&&t>=r;){if(r==s)var c=$('<span class="cameratag_videowall_pagination_link current">'+r+"</span>");else var c=$('<span data-page="'+r+'" class="cameratag_videowall_pagination_link">'+r+"</span>");$(e).append(c),r+=1,o+=1}if(t-s>9&&($(e).append("<span>.&nbsp;.&nbsp;.&nbsp;</span>"),$(e).append('<span data-page="'+(t-2)+'" class="cameratag_videowall_pagination_link">'+(t-2)+"</span>"),$(e).append('<span data-page="'+(t-1)+'" class="cameratag_videowall_pagination_link">'+(t-1)+"</span>"),$(e).append('<span data-page="'+t+'"class="cameratag_videowall_pagination_link">'+t+"</span>")),t>s){var l=$('<span data-page="'+(s+1)+'" class="cameratag_videowall_pagination_link">&#9654;</span>');$(e).append(l)}$(e).find(".cameratag_videowall_pagination_link[data-page]").click(function(){var e=$(this).attr("data-page");n.loadPage(e)}),$(a).append(e)},C=function(e){var t=parseInt($("#"+o+"_"+e.uuid+" img").attr("data-width")),n=parseInt($("#"+o+"_"+e.uuid+" img").attr("data-height"));$(m)[0].style.maxWidth=t+"px",$(m)[0].style.maxHeight=n+"px","Video"==e.type||"Audio"==e.type?m.html('<player id="ct_video_player" data-signature="'+y+'" data-signature-expiration="'+_+'" data-options=\'{"width":"100%", "height":"100%"}\' data-uuid="'+e.uuid+'"></player>'):"Photo"==e.type&&m.html('<img src="'+e.preview_thumbnail_url+"?signature="+y+"&signature_expiration="+_+'" id="ct_image" style="max-width:100%; max-height:100%"></img>'),g.show(),m.show(),("Video"==e.type||"Audio"==e.type)&&CameraTag.setup()};n.closeVideo=function(){g.hide(),m.hide(),m.html("")};var E=function(){$("[data-strip-url]").each(function(e,t){var n=$(t).attr("data-strip-url"),i=$(t).attr("data-frame-count"),r=$(t).width(),o=$(t).height(),a=o*i;$(t).css({backgroundImage:"url("+n+")",backgroundSize:r+"px "+a+"px",backgroundPosition:"0px 0px"}),$(t).mousemove(function(e){var n=parseInt(e.offsetX/r*i),a=o*n*-1;$(t).css({backgroundPosition:"0px "+a+"px"})}),$(t).mouseout(function(){var e=o*(i/2)*-1;$(t).css({backgroundPosition:"0px "+e+"px"})})})};b()},CameraTagPhotoCamera=function(e){function t(e){return!!e.exifdata}function r(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),i=n.length,r=new ArrayBuffer(i),o=new Uint8Array(r),a=0;i>a;a++)o[a]=n.charCodeAt(a);return r}function o(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){200!=this.status&&0!==this.status||t(this.response)},n.send()}function a(e,t){function n(n){var i=s(n),r=c(n);e.exifdata=i||{},e.iptcdata=r||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var i=r(e.src);n(i)}else if(/^blob\:/i.test(e.src)){var a=new FileReader;a.onload=function(e){n(e.target.result)},o(e.src,function(e){a.readAsArrayBuffer(e)})}else{var l=new XMLHttpRequest;l.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(l.response),l=null},l.open("GET",e.src,!0),l.responseType="arraybuffer",l.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var a=new FileReader;a.onload=function(e){console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},a.readAsArrayBuffer(e)}}function s(e){var t=new DataView(e);if(console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return console.log("Not a valid JPEG"),!1;for(var n,i=2,r=e.byteLength;r>i;){if(255!=t.getUint8(i))return console.log("Not a valid marker at offset "+i+", found: "+t.getUint8(i)),!1;if(n=t.getUint8(i+1),console.log(n),225==n)return console.log("Found 0xFFE1 marker"),f(t,i+4,t.getUint16(i+2)-2);i+=2+t.getUint16(i+2)}}function c(e){var t=new DataView(e);if(console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return console.log("Not a valid JPEG"),!1;for(var n=2,i=e.byteLength,r=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};i>n;){if(r(t,n)){var o=t.getUint8(n+7);o%2!==0&&(o+=1),0===o&&(o=4);var a=n+8+o,s=t.getUint16(n+6+o);return l(e,a,s)}n++}}function l(e,t,n){for(var i,r,o,a,s,c=new DataView(e),l={},u=t;t+n>u;)28===c.getUint8(u)&&2===c.getUint8(u+1)&&(a=c.getUint8(u+2),a in _&&(o=c.getInt16(u+3),s=o+5,r=_[a],i=p(c,u+5,o),l.hasOwnProperty(r)?l[r]instanceof Array?l[r].push(i):l[r]=[l[r],i]:l[r]=i)),u++;return l}function u(e,t,n,i,r){var o,a,s,c=e.getUint16(n,!r),l={};for(s=0;c>s;s++)o=n+12*s+2,a=i[e.getUint16(o,!r)],!a&&console.log("Unknown tag: "+e.getUint16(o,!r)),l[a]=d(e,o,t,n,r);return l}function d(e,t,n,i,r){var o,a,s,c,l,u,d=e.getUint16(t+2,!r),f=e.getUint32(t+4,!r),h=e.getUint32(t+8,!r)+n;switch(d){case 1:case 7:if(1==f)return e.getUint8(t+8,!r);for(o=f>4?h:t+8,a=[],c=0;f>c;c++)a[c]=e.getUint8(o+c);return a;case 2:return o=f>4?h:t+8,p(e,o,f-1);case 3:if(1==f)return e.getUint16(t+8,!r);for(o=f>2?h:t+8,a=[],c=0;f>c;c++)a[c]=e.getUint16(o+2*c,!r);return a;case 4:if(1==f)return e.getUint32(t+8,!r);for(a=[],c=0;f>c;c++)a[c]=e.getUint32(h+4*c,!r);return a;case 5:if(1==f)return l=e.getUint32(h,!r),u=e.getUint32(h+4,!r),s=new Number(l/u),s.numerator=l,s.denominator=u,s;for(a=[],c=0;f>c;c++)l=e.getUint32(h+8*c,!r),u=e.getUint32(h+4+8*c,!r),a[c]=new Number(l/u),a[c].numerator=l,a[c].denominator=u;return a;case 9:if(1==f)return e.getInt32(t+8,!r);for(a=[],c=0;f>c;c++)a[c]=e.getInt32(h+4*c,!r);return a;case 10:if(1==f)return e.getInt32(h,!r)/e.getInt32(h+4,!r);for(a=[],c=0;f>c;c++)a[c]=e.getInt32(h+8*c,!r)/e.getInt32(h+4+8*c,!r);return a}}function p(e,t,i){var r="";for(n=t;n<t+i;n++)r+=String.fromCharCode(e.getUint8(n));return r}function f(e,t){if("Exif"!=p(e,t,4))return console.log("Not valid EXIF data! "+p(e,t,4)),!1;var n,i,r,o,a,s=t+6;if(18761==e.getUint16(s))n=!1;else{if(19789!=e.getUint16(s))return console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(s+2,!n))return console.log("Not valid TIFF data! (no 0x002A)"),!1;var c=e.getUint32(s+4,!n);if(8>c)return console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(s+4,!n)),!1;if(i=u(e,s,s+c,m,n),i.ExifIFDPointer){o=u(e,s,s+i.ExifIFDPointer,g,n);for(r in o){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[r]=y[r][o[r]];break;case"ExifVersion":case"FlashpixVersion":o[r]=String.fromCharCode(o[r][0],o[r][1],o[r][2],o[r][3]);break;case"ComponentsConfiguration":o[r]=y.Components[o[r][0]]+y.Components[o[r][1]]+y.Components[o[r][2]]+y.Components[o[r][3]]}i[r]=o[r]}}if(i.GPSInfoIFDPointer){a=u(e,s,s+i.GPSInfoIFDPointer,v,n);for(r in a){switch(r){case"GPSVersionID":a[r]=a[r][0]+"."+a[r][1]+"."+a[r][2]+"."+a[r][3]}i[r]=a[r]}}return i}var h=function(e){return e instanceof h?e:this instanceof h?void(this.EXIFwrapped=e):new h(e)},g=h.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},m=h.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},v=h.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},y=h.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},_={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};h.getData=function(e,n){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete||(t(e)?n&&n.call(e):a(e,n),0))},h.getTag=function(e,n){return t(e)?e.exifdata[n]:void 0},h.getAllTags=function(e){if(!t(e))return{};var n,i=e.exifdata,r={};for(n in i)i.hasOwnProperty(n)&&(r[n]=i[n]);return r},h.pretty=function(e){if(!t(e))return"";var n,i=e.exifdata,r="";for(n in i)i.hasOwnProperty(n)&&(r+="object"==typeof i[n]?i[n]instanceof Number?n+" : "+i[n]+" ["+i[n].numerator+"/"+i[n].denominator+"]\r\n":n+" : ["+i[n].length+" values]\r\n":n+" : "+i[n]+"\r\n");return r},h.readFromBinaryFile=function(e){return s(e)};var b,w,A,C,E,T,S,x,j,k,R,I,O,P,D,L,N,M,B,F,U,H,V,W,z,G,Y,Q,J,q,X,K,Z,et,tt,nt,it,rt,ot,at,st,ct,lt,ut,dt,pt,ft,ht,gt,mt,vt,yt,_t,bt,wt,At,Ct,Et,Tt,St,xt,jt,kt=0,Rt=1,It=0,Ot=0,Pt=this,Dt=[],Lt=parseInt(1e8*Math.random()),Nt=function(e){var t,n,i,r,o,a=this;a.cams=[];var s=function(){n=$("<canvas></canvas>"),t=$("<video></video>"),i=n[0].getContext("2d"),$(e).replaceWith(t),$(n).insertAfter(t),t[0].width=st,t[0].height=ct,flip_preview&&(t[0].style.transform="scaleX(-1)"),n.attr("width",lt),n.attr("height",ut),n.hide(),t[0].addEventListener("canplay",function(){c()},!1),navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(e){$(e).each(function(e,t){device_name=""==t.label?t.deviceId:t.label,"videoinput"===t.kind&&a.cams.push({label:device_name,deviceId:t.deviceId})}),0==a.cams.length?CameraTag.fire(bt,"noCamera"):jt=getCookie("CameraTagSelectedCameraId")||a.cams[0].deviceId,CameraTag.fire(bt,"initialized")}):CameraTag.fire(bt,"initialized")};a.setCamera=function(e){jt=e,createCookie("CameraTagSelectedCameraId",e)},a.listCameras=function(){return a.cams},a.connect=function(){navigator.getUserMedia({audio:!1,video:{deviceId:jt,width:{ideal:lt},height:{ideal:ut}}},function(e){Et=!0,r=e,"undefined"==typeof t[0].srcObject?t[0].src=URL.createObjectURL(e):t[0].srcObject=e,t[0].play(),a.cams=[],navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(e){$(e).each(function(e,t){device_name=""==t.label?t.deviceId:t.label,"videoinput"===t.kind&&a.cams.push({label:device_name,deviceId:t.deviceId})}),0==a.cams.length?CameraTag.fire(bt,"noCamera"):jt=getCookie("CameraTagSelectedCameraId")||a.cams[0].deviceId,CameraTag.fire(bt,"connected")}):CameraTag.fire(bt,"connected")},function(e){CameraTag.fire(bt,"cameraError"),Gt(e)})},a.disconnect=function(){if(Et){try{r.stop()}catch(e){r.getTracks()[0].stop()}Et=!1,CameraTag.fire(bt,"disconnected")}},a.hide=function(){t.hide()},a.show=function(){t.show()},a.getFrame=function(){return o};var c=function(){return t[0].paused||t[0].ended?!1:(i.drawImage(t[0],0,0,lt,ut),setTimeout(c,40),void(o=n[0].toDataURL("image/jpg")))};s()},Mt=function(e){var t,n=this,i=function(){var t=$('<div id="'+bt+'_swf_placeholder"></div>');if($(e).parents(".cameratag_photobooth_container").prepend(t),swfobject=swfobject||initializeSwfobject(),0==swfobject.getFlashPlayerVersion().major){var n=$('<object type="application/x-shockwave-flash" id="'+bt+'_swf" name="'+bt+'_swf" data="//'+appServer+"/static/"+CameraTag.version+"/photobooth.swf?"+Lt+'" width="100%" height="100%">'),i=$('<param name="allowfullscreen" value="true"></param>'),o=$('<param name="allowscriptaccess" value="always"></param>'),a=$('<param name="wmode" value="transparent"></param>'),s="flipPreview="+flip_preview;s+="&amp;domID="+bt,s+="&amp;hResolution="+lt,s+="&amp;vResolution="+ut;var c=$('<param name="flashvars" value="'+s+'"></param>');n.append(i),n.append(o),n.append(a),n.append(c),$("#"+bt+"_swf_placeholder").replaceWith(n),r()}else{var c={dom_id:bt,flipPreview:flip_preview,h_resolution:lt,v_resolution:ut},l={allowfullscreen:"true",allowscriptaccess:"always",wmode:"transparent"},u={id:bt+"_swf",name:bt+"_swf"};swfobject.embedSWF("//"+appServer+"/static/"+CameraTag.version+"/photobooth.swf?"+Lt,bt+"_swf_placeholder","100%","100%","11.1.0","https://"+appServer+"/static/"+CameraTag.version+"/expressInstall.swf",c,l,u,r)}spacer=$('<div style="width:'+st+"px; height:"+ct+'px;"></div>'),$(e).replaceWith(spacer)},r=function(){t=$("#"+bt+"_swf")[0],"undefined"==typeof t&&setTimeout(r,200)};n.connect=function(){t.connect()},n.hide=function(){$(t).hide()},n.show=function(){$(t).show()},n.disconnect=function(){t.disconnect()},n.getFrame=function(){return t.getFrame()},n.showFlashSettings=function(){t.showFlashSettings()},n.listCameras=function(){return t.listCameras()},i()},Bt=function(e){var t,n,i,r,o,a,s,c,l,u,d,p,f,h=this,g=this;at=lt/st;var m;h.selected_filter=null;try{R=!0,i=fx.canvas()}catch(v){R=!1,i=$("<canvas></canvas>")}var y=function(){o=$("<img></img>"),t=$("<canvas></canvas>"),f=$("<img></img>"),t.attr("width",lt),t.attr("height",ut),f.attr("width",st),$(e).replaceWith(f),$(i).insertAfter(f),$(t).insertAfter(i),$(o).insertAfter(t),o.hide(),t.hide(),$(i).hide(),n=t[0].getContext("2d"),h.select_filter(0),isMobileDevice&&CameraTag.fire(bt,"initialized")};h.select_filter=function(e){0==e?(review_edit_controls.hide(),review_ready_controls.show()):(review_edit_controls.show(),review_ready_controls.hide()),1==e?(H.show(),U.show(),zoom_slider.slider("value",1),zoom_slider_container.show()):(H.hide(),$t(),zoom_slider_container.hide()),R&&(h.selected_filter=h.filters[e],h.selected_filter.use(),Y.val(e)),h.draw()},h.setUserZoom=function(e){l=e,u=c*l,d=a*u,p=s*u;var t=1/at;if(dt){rt=d-lt,ot=p-ut,W=rt*t,V=ot*t,drag_container_width=(d+rt)*t,drag_container_height=(p+ot)*t;var n=d*t,i=p*t;H.css({left:-1*W,top:-1*V,width:drag_container_width,height:drag_container_height}),$(U).css({width:n,height:i,top:V,left:W}),$(U).draggable("option","containment","parent")}else{rt=.5*d,ot=.5*p,W=rt*t*-1,V=ot*t*-1,drag_container_width=(lt+2*rt)*t,drag_container_height=(lt+2*ot)*t;var n=d*t,i=p*t,r=It*t+-1*W,o=Ot*t+-1*V;H.css({left:W,top:V,width:drag_container_width,height:drag_container_height}),$(U).css({width:n,height:i,top:o,left:r}),$(U).draggable("option","containment","parent")}},h.setOffset=function(e,t){It=e,Ot=t
},h.applyFilter=function(){h.draw(m),It=0,Ot=0,zoom_slider.slider("value",1),h.select_filter(0),H.hide()};var _=function(){var e;if(e=kt>0?1:Rt){var t=w(o[0],e,0,0,o[0].width,o[0].height);flipper_data_url=t.toDataURL("image/jpeg"),o[0].onload=b,o[0].src=flipper_data_url}},b=function(){a=o[0].width,s=o[0].height;var e=lt/a,t=ut/s;c=dt?e>t?e:t:t>e?e:t,It=(lt-c*a)/2,Ot=(ut-c*s)/2,h.setUserZoom(1),h.draw(),kt+=1},w=function(e,t,n,i,r,o){if(!/^[1-8]$/.test(t))throw new Error("orientation should be [1-8]");null==n&&(n=0),null==i&&(i=0),null==r&&(r=e.width),null==o&&(o=e.height);var a=document.createElement("canvas"),s=a.getContext("2d");switch(a.width=r,a.height=o,s.save(),+t){case 1:break;case 2:s.translate(r,0),s.scale(-1,1);break;case 3:s.translate(r,o),s.rotate(1*Math.PI);break;case 4:s.translate(0,o),s.scale(1,-1);break;case 5:a.width=o,a.height=r,s.rotate(.5*Math.PI),s.scale(1,-1);break;case 6:a.width=o,a.height=r,s.rotate(.5*Math.PI),s.translate(0,-o);break;case 7:a.width=o,a.height=r,s.rotate(1.5*Math.PI),s.translate(-r,o),s.scale(1,-1);break;case 8:a.width=o,a.height=r,s.translate(0,r),s.rotate(1.5*Math.PI)}return"Safari"==DetectRTC.browser.name&&isMobileDevice?(s.translate(0,o),s.scale(1,-1),0===kt&&6==t&&(s.translate(r,o),s.rotate(1*Math.PI))):"Safari"!=DetectRTC.browser.name||isMobileDevice||(s.translate(0,o),s.scale(1,-1),6==t&&(s.translate(r,o),s.rotate(1*Math.PI))),s.drawImage(e,n,i,r,o),s.restore(),a};h.draw=function(e){if(e)return o[0].onload=_,void(o[0].src=e);if(n.beginPath(),n.rect(0,0,lt,ut),n.fillStyle="black",n.fill(),n.drawImage(o[0],It,Ot,d,p),R){r=i.texture(t[0]),h.selected_filter.draw(lt,ut);var a=i.toDataURL("image/png")}else var a=t[0].toDataURL("image/png");f[0].src=a,m=a},h.getFrame=function(){return m};var A=function(e,t,n){var i=this;i.name=e;var t=t,r=[],o=[];i.draw=function(e,t){n(i,e,t)},i.addNub=function(e,t,n){o.push({name:e,x:t,y:n})},i.addSlider=function(e,t,n,i,o,a){r.push({name:e,label:t,min:n,max:i,value:o,step:a})},i.use=function(){G.html("");for(var e=0;e<r.length;e++){var t=r[e];$('<div class="cameratag_photobooth_filter_property"><div class="cameratag_photobooth_filter_property_title">'+t.label.replace(/ /g,"&nbsp;")+':</div><div cameratag_photobooth_filter_property_slider" id="slider'+e+'"></div></div>').appendTo(G);var n=function(e,t){return function(n,i){e[t.name]=i.value,g.draw()}}(this,t);$("#slider"+e).slider({slide:n,change:n,min:t.min,max:t.max,value:t.value,step:t.step}),i[t.name]=t.value}$(".cameratag_photobooth_nub").remove();for(var e=0;e<o.length;e++){var a=o[e],s=a.x*f[0].width,c=a.y*f[0].height;$('<div class="cameratag_photobooth_nub" id="nub'+e+'"></div>').appendTo(N);var l=function(e,t){return function(n,i){var r=$(n.target.parentNode).offset(),o=(i.offset.left-r.left)*at,a=(i.offset.top-r.top)*at;e[t.name]={x:o,y:a},g.draw()}}(this,a);$("#nub"+e).draggable({drag:l,containment:"parent",scroll:!1}).css({left:s,top:c}),i[a.name]={x:s*at,y:c*at}}},t(i)};h.filters=R?[new A(CT_i18n[50],function(){},function(){i.draw(r,lt,ut).update()}),new A(CT_i18n[51],function(){},function(){i.draw(r,lt,ut).update()}),new A(CT_i18n[52],function(e){e.addSlider("frame",CT_i18n[92],0,200,0,1)},function(e){i.draw(r,lt,ut).smoke(e.frame).update()}),new A(CT_i18n[53],function(){},function(){i.draw(r,lt,ut).murica().update()}),new A(CT_i18n[54],function(e){e.addSlider("brightness",CT_i18n[87],-1,1,0,.01),e.addSlider("contrast",CT_i18n[97],-1,1,0,.01)},function(e){i.draw(r,lt,ut).brightnessContrast(e.brightness,e.contrast).update()}),new A(CT_i18n[55],function(e){e.addSlider("luminanceThreshold",CT_i18n[96],0,1,.2,.1),e.addSlider("colorAmplification",CT_i18n[95],0,10,4,.5),e.addSlider("frame",CT_i18n[92],0,200,0,1)},function(e){i.draw(r,lt,ut).nightvision(e.frame,e.luminanceThreshold,e.colorAmplification).update()}),new A(CT_i18n[56],function(e){e.addSlider("gamma",CT_i18n[94],0,2,.6,.01),e.addSlider("numColors",CT_i18n[93],0,24,8,1)},function(e){i.draw(r,lt,ut).posterize(e.gamma,e.numColors).update()}),new A(CT_i18n[57],function(e){e.addSlider("red","Red",-1,1,.5,.1),e.addSlider("green","Green",-1,1,.3,.1),e.addSlider("blue","Blue",-1,1,.2,.1),e.addSlider("sat","Saturation",-1,1,.2,.1)},function(e){i.draw(r,lt,ut).zinc(e.red,e.green,e.blue,e.sat).update()}),new A(CT_i18n[58],function(){},function(){i.draw(r,lt,ut).berry().update()}),new A(CT_i18n[59],function(){},function(){i.draw(r,lt,ut).spycam().update()}),new A(CT_i18n[60],function(e){e.addSlider("size",CT_i18n[83],.1,1,.5,.01)},function(e){i.draw(r,lt,ut).magazine(e.size).update()}),new A(CT_i18n[61],function(){},function(){i.draw(r,lt,ut).crosshatch().update()}),new A(CT_i18n[62],function(e){e.addSlider("frame",CT_i18n[92],0,200,0,1)},function(e){i.draw(r,lt,ut).flare(e.frame).update()}),new A(CT_i18n[63],function(e){e.addSlider("hue",CT_i18n[90],-1,1,0,.01),e.addSlider("saturation",CT_i18n[91],-1,1,0,.01)},function(e){i.draw(r,lt,ut).hueSaturation(e.hue,e.saturation).update()}),new A(CT_i18n[64],function(e){e.addSlider("amount",CT_i18n[86],-1,1,.5,.01)},function(e){i.draw(r,lt,ut).vibrance(e.amount).update()}),new A(CT_i18n[65],function(e){e.addSlider("exponent",CT_i18n[86],0,50,20,1)},function(e){i.draw(r,lt,ut).denoise(e.exponent).update()}),new A(CT_i18n[66],function(e){e.addSlider("radius",CT_i18n[85],0,200,20,1),e.addSlider("strength",CT_i18n[86],0,5,2,.01)},function(e){i.draw(r,lt,ut).unsharpMask(e.radius,e.strength).update()}),new A(CT_i18n[67],function(e){e.addSlider("amount",CT_i18n[86],0,1,.5,.01)},function(e){i.draw(r,lt,ut).noise(e.amount).update()}),new A(CT_i18n[68],function(e){e.addSlider("amount",CT_i18n[86],0,1,1,.01)},function(e){i.draw(r,lt,ut).sepia(e.amount).update()}),new A(CT_i18n[69],function(e){e.addSlider("size",CT_i18n[83],0,1,.5,.01),e.addSlider("amount",CT_i18n[86],0,1,.5,.01)},function(e){i.draw(r,lt,ut).vignette(e.size,e.amount).update()}),new A(CT_i18n[70],function(e){e.addNub("center",.5,.5),e.addSlider("strength",CT_i18n[86],0,1,.3,.01)},function(e){i.draw(r,lt,ut).zoomBlur(e.center.x,e.center.y,e.strength).update()}),new A(CT_i18n[71],function(e){e.addSlider("radius",CT_i18n[85],0,200,50,1)},function(e){i.draw(r,lt,ut).triangleBlur(e.radius).update()}),new A(CT_i18n[72],function(e){e.addNub("start",.15,.75),e.addNub("end",.75,.6),e.addSlider("blurRadius",CT_i18n[88],0,50,15,1),e.addSlider("gradientRadius",CT_i18n[89],0,400,200,1)},function(e){i.draw(r,lt,ut).tiltShift(e.start.x,e.start.y,e.end.x,e.end.y,e.blurRadius,e.gradientRadius).update()}),new A(CT_i18n[73],function(e){e.addSlider("radius",CT_i18n[85],0,50,10,1),e.addSlider("brightness",CT_i18n[87],-1,1,.75,.01),e.addSlider("angle",CT_i18n[82],-Math.PI,Math.PI,0,.01)},function(e){i.draw(r,lt,ut).lensBlur(e.radius,e.brightness,e.angle).update()}),new A(CT_i18n[74],function(e){e.addNub("center",.5,.5),e.addSlider("angle",CT_i18n[82],-25,25,3,.1),e.addSlider("radius",CT_i18n[85],0,600,200,1)},function(e){i.draw(r,lt,ut).swirl(e.center.x,e.center.y,e.radius,e.angle).update()}),new A(CT_i18n[75],function(e){e.addNub("center",.5,.5),e.addSlider("strength",CT_i18n[86],-1,1,.5,.01),e.addSlider("radius",CT_i18n[85],0,600,200,1)},function(e){i.draw(r,lt,ut).bulgePinch(e.center.x,e.center.y,e.radius,e.strength).update()}),new A(CT_i18n[76],function(e){e.addSlider("strength",CT_i18n[86],0,1,.25,.01)},function(e){i.draw(r,lt,ut).ink(e.strength).update()}),new A(CT_i18n[77],function(e){e.addSlider("radius",CT_i18n[85],0,200,10,1)},function(e){i.draw(r,lt,ut).edgeWork(e.radius).update()}),new A(CT_i18n[78],function(e){e.addNub("center",.5,.5),e.addSlider("scale",CT_i18n[84],10,100,20,1)},function(e){i.draw(r,lt,ut).hexagonalPixelate(e.center.x,e.center.y,e.scale).update()}),new A(CT_i18n[79],function(e){e.addNub("center",.5,.5),e.addSlider("angle",CT_i18n[82],0,Math.PI/2,1.1,.01),e.addSlider("size",CT_i18n[83],3,20,3,.01)},function(e){i.draw(r,lt,ut).dotScreen(e.center.x,e.center.y,e.angle,e.size).update()}),new A(CT_i18n[80],function(e){e.addNub("center",.5,.5),e.addSlider("angle",CT_i18n[82],0,Math.PI/2,.25,.01),e.addSlider("size",CT_i18n[83],3,20,4,.01)},function(e){i.draw(r,lt,ut).colorHalftone(e.center.x,e.center.y,e.angle,e.size).update()})]:[new A(CT_i18n[50],function(){},function(){}),new A(CT_i18n[51],function(){},function(){})],y()},Ft=function(){flip_preview="false"!=!$(e).attr("data-mirror-preview"),bt=$(e).attr("id"),vt=$(e).attr("data-app-id"),yt=$(e).attr("data-signature"),_t=$(e).attr("data-signature-expiration"),Tt=$(e).attr("name")||bt,Ct=$(e).attr("data-metadata"),dt="true"==$(e).attr("data-force-full-frame"),pt="true"==$(e).attr("data-skip-zoom"),manual_stack=$(e).attr("data-stack");try{St=JSON.parse(Ct)}catch(t){void 0!=Ct&&console.warn("Could not parse user-data JSON from <photobooth> attribute.")}get_camera(vt,function(t){if(!t.success)return void Dt.push(t.message);media_factories=t.photo_media_factories;var n,i=media_factories[Object.keys(media_factories)[0]].width,r=media_factories[Object.keys(media_factories)[0]].height;mf_aspect=i/r,mf_aspect>1.3?(n=300/r,ct=300,st=parseInt(i*n)):(n=400/i,st=400,ct=parseInt(r*n)),lt=$(e).attr("data-horizontal-resolution")||media_factories[Object.keys(media_factories)[0]].width,ut=$(e).attr("data-vertical-resolution")||media_factories[Object.keys(media_factories)[0]].height,st=$(e).attr("data-width")||st,ct=$(e).attr("data-height")||ct,ft=Vt(),Ht(),At=new Evaporate({signerUrl:"//"+appServer+"/api/v"+CameraTag.version+"/assets/upload_signature",aws_key:"AKIAJCHWZMZ35EB62V2A",bucket:BUCKET_NAME,aws_url:"https://"+BUCKET_NAME,cloudfront:!0,logging:!1}),CameraTag.observe(ft.uuid,"published",function(e){ft.uuid==e.uuid&&(ht="published",zt(),Et&&Pt.disconnect(),gt&&gt.hide(),Pt.loadInterface(j),F[0].src=mt.getFrame(),CameraTag.fire(bt,"published",e),Wt())},!0),CameraTag.observe(ft.uuid,"publishFailed",function(e){e(CT_i18n[34]+": "+e.message)},!0),CameraTag.observe(bt,"cameraError",function(){Gt("Error Accessing Your Camera")},!0),CameraTag.observe(bt,"connecting",function(){Pt.loadInterface("none")},!0),CameraTag.observe(bt,"connected",function(){xt()},!0),CameraTag.observe(bt,"settingsDialogClosed",function(){Pt.loadInterface(w)},!0),CameraTag.observe(bt,"initialized",function(){ht="initialized",Pt.loadInterface(isMobileDevice?A:w)},!0),CameraTag.photobooths[bt]=Pt})},Ut=function(){gt.listCameras().length>0&&(I.html(""),$(gt.listCameras()).each(function(e,t){var n=t.deviceId==jt?"selected":"",i=$('<option value="'+t.deviceId+'" '+n+">"+t.label+"</option>");I.append(i)}))},Ht=function(){var t=$('<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" media="all" rel="stylesheet" type="text/css" />');if($("head").append(t),b=$('<div class="cameratag_photobooth_container"></div>'),D=$('<div class="cameratag_photobooth_canvas_placeholder">Loading...</div>'),b.append(D),w=$("#"+bt+"-start-screen").addClass("cameratag_photobooth_screen"),0==w.length){w=$('<div class="cameratag_photobooth_start_screen cameratag_photobooth_screen"></div>');var n=$('<a class="cameratag_select_prompt">'+CT_i18n[45]+"</a>"),i=$('<a class="cameratag_primary_link cameratag_record_link cameratag_photobooth_capture"><span class="cameratag_action_icon"><i class="fa fa-camera-retro" aria-hidden="true"></i></span><br><span class="cameratag_prompt_label">'+CT_i18n[46]+"</span></a>"),r=$('<a id="'+bt+'_upload_link" class="cameratag_primary_link cameratag_upload_link cameratag_upload"><span class="cameratag_action_icon">&#61678;</span><br><span class="cameratag_prompt_label">'+CT_i18n[47]+"</span></a>"),o="",a=$('<i class="cameratag_settings_btn fa fa-cog" src="//cameratag.com/assets/gear.png"></i>');w.append(a),w.append(n).append(i).append(r).append(o)}if(A=$("#"+bt+"-mobile-start-screen").addClass("cameratag_photobooth_screen"),0==A.length){A=$('<div class="cameratag_photobooth_mobile_start_screen cameratag_photobooth_screen"></div>');var n=$('<a class="cameratag_select_prompt">'+CT_i18n[49]+"</a>"),s=$('<a class="cameratag_primary_link cameratag_sms_link"><span class="cameratag_action_icon">&#61707;</span><br><span class="cameratag_prompt_label"></span></a>');A.append(n).append(s)}if(webrtc_enabled&&(S=$("#"+bt+"-settings-screen").addClass("cameratag_photobooth_screen"),0==S.length&&(S=$('<div id="'+bt+'_settings_screen" class="cameratag_photobooth_screen cameratag_phoobooth_setings_screen"></div>'))),T=$("#"+bt+"-upload-screen").addClass("cameratag_photobooth_screen"),nt=T.find(".cameratag_photobooth_upload_status"),0==T.length){T=$('<div class="cameratag_photobooth_upload_screen cameratag_photobooth_screen"></div>');var c=$('<div class="cameratag_prompt">'+CT_i18n[10]+"</div>");nt=$('<div class="cameratag_photobooth_upload_status"></div>'),T.append(nt),T.append(c)}if(C=$("#"+bt+"-capture-screen").addClass("cameratag_photobooth_screen"),0==C.length){C=$('<div class="cameratag_photobooth_capture_screen cameratag_photobooth_screen"></div>');var l=$('<div class="cameratag_photobooth_trigger_container"></div>');M=$('<div class="cameratag_photobooth_trigger"></div>'),l.append(M),C.append(l)}if(E=$("#"+bt+"-review-screen").addClass("cameratag_photobooth_screen"),0==E.length&&(E=$('<div class="cameratag_photobooth_review_screen cameratag_photobooth_screen"></div>')),B=$('<div class="cameratag_photobooth_image_frame"></div>'),L=$('<div class="cameratag_photobooth_review_canvas_placeholer"></div>'),H=$('<div class="cameratag_photobooth_offset_dragger_container"></div>'),U=$('<div class="cameratag_photobooth_offset_dragger"></div>'),H.append(U),H.hide(),N=$('<div class="cameratag_photobooth_nubs_el"></div>'),B.append(L).append(N).append(H),review_edit_controls=$('<div class="cameratag_review_edit_controls"></div>'),z=$('<div class="cameratag_photobooth_filter_container"></div>'),G=$('<table class="cameratag_photobooth_filter_properties"></div>'),zoom_slider_container=$('<div class="cameratag_photobooth_filter_property"></div>'),zoom_slider_title=$('<div class="cameratag_photobooth_filter_property_title">Zoom Level</div>'),zoom_slider=$('<div class="cameratag_photobooth_filter_proprty_slider"></div>'),zoom_slider_container.append(zoom_slider_title).append(zoom_slider),K=$('<a class="cameratag_photobooth_apply cameratag_button">APPLY</a>'),Z=$('<a class="cameratag_photobooth_cancel">CANCEL</a>'),z.append(G).append(zoom_slider_container),review_edit_controls.append(z).append(K).append(Z).append(et).append(tt).append('<div style="clear:both"></div>'),review_ready_controls=$('<div class="cameratag_review_ready_controls"></div>'),Y=$('<select class="cameratag_photobooth_filter_selector"></select>'),et=$('<a class="cameratag_photobooth_accept cameratag_button">SAVE</a>'),tt=$('<a class="cameratag_photobooth_retake cameratag_button">START OVER</a>'),review_ready_controls.append(Y).append(et).append('<div style="clear:both"></div>'),E.append(B).append(review_edit_controls).append(review_ready_controls),j=$("#"+bt+"-published-screen").addClass("cameratag_photobooth_screen"),0==j.length&&(j=$('<div class="cameratag_photobooth_published_screen cameratag_photobooth_screen"></div>'),j.append('<img class="cameratag_photobooth_published_img"></img>')),F=$(j).find(".cameratag_photobooth_published_img"),x=$("#"+bt+"-error-screen").addClass("cameratag_photobooth_screen"),0==x.length?(x=$('<div class="cameratag_photobooth_error_screen cameratag_photobooth_screen"></div>'),X=$('<div class="cameratag_photobooth_error_message"></div>'),x.append(X)):X=$(".cameratag_photobooth_error_message"),k=$("#"+bt+"-device-selection-screen").addClass("cameratag_photobooth_screen"),0==k.length){k=$('<div class="cameratag_photobooth_screen cameratag_select"></div>');var u=$('<div class="cameratag_prompt"></div>'),d=$('<a class="cameratag_save_device_selection">Save Settings</a>');I=$('<select class="cameratag_camera_options"></select>'),u.append(d).append('<i class="fa fa-video-camera" aria-hidden="true"></i>').append(I),k.append(u)}else I=k.find(".cameratag_camera_options");if(wait_screen=$("#"+bt+"-wait-screen").addClass("cameratag_photobooth_screen"),0==wait_screen.length){wait_screen=$('<div class="cameratag_photobooth_wait_screen cameratag_photobooth_screen"></div>');var p=$('<div class="cameratag_spinner"><img src="//'+appServer+'/assets/loading.gif"/><br/><span class="cameratag_photobooth_wait_message">'+CT_i18n[16]+"</span></div>");wait_screen.append(p)}q=wait_screen.find(".cameratag_photobooth_wait_message"),b.append("<input id='"+Tt+"_uuid' type='hidden' name='"+Tt+"_uuid' value='"+ft.uuid+"'>"),$.each(media_factories,function(e,t){b.append("<input id='"+Tt+"_"+t.name+"' type='hidden' name='"+Tt+"_"+t.name+"' value=''>")}),I.change(function(){var e=I.val();Pt.disconnect(),jt=e,gt.setCamera(e),Pt.selectDevices()}),b.css({width:st+"px",height:ct+"px"}),b.append(w),b.append(A),b.append(C),b.append(T),b.append(E),b.append(x),b.append(wait_screen),b.append(j),b.append(S),b.append(k),font_size=parseInt($(b).height()/14),font_size<12&&(font_size=12),$(b).css({fontSize:font_size+"px"}),b.find(".cameratag_settings_btn").click(function(e){e.stopPropagation(),Pt.selectDevices()}),b.find(".cameratag_save_device_selection").click(function(){Pt.disconnect(),Pt.loadInterface(w)}),mt=new Bt(L);for(var f="",h=0;h<mt.filters.length;h++)f+="<option value="+h+">"+mt.filters[h].name+"</option>";$(b).find(".cameratag_photobooth_filter_selector").html(f),$(b).find(".cameratag_photobooth_capture").click(function(){Pt.connect()}),$(b).find(".cameratag_photobooth_trigger").click(Pt.takePicture),$(b).find(".cameratag_photobooth_accept").click(Pt.publish),$(b).find(".cameratag_photobooth_apply").click(Pt.applyFilter),$(b).find(".cameratag_photobooth_cancel").click(Pt.cancelFilter),$(b).find(".cameratag_photobooth_retake").click(function(){Pt.back()}),$(b).find(".cameratag_photobooth_filter_selector").change(function(){mt.select_filter($(this).val()),mt.draw(wt)}),U.draggable({scroll:!1,drag:function(e,t){console.log("UIx:"+t.position.left+" UIy:"+t.position.top+" xOffset:"+rt+" yOffset:"+ot+" milti:"+at);var n=t.position.left-rt/at,i=t.position.top-ot/at;mt.setOffset(n*at,i*at),mt.draw()}}),zoom_slider.slider({slide:function(e,t){mt.setUserZoom(t.value),mt.draw()},change:function(e,t){mt.setUserZoom(t.value),mt.draw()},min:1,max:3,value:1,step:.01}),isMobileDevice?Yt(A):w.find(".cameratag_upload").length>0&&Yt(w.find(".cameratag_upload")[0]),Q=$('<div class="cameratag_photobooth_flash"></div>'),J=new Audio("//"+appServer+"/static/"+CameraTag.version+"/shutter.ogg"),$(e).replaceWith(b),!manual_stack||"flash"!=manual_stack&&"webrtc"!=manual_stack?isMobileDevice||(gt=webrtc_enabled?new Nt(D):new Mt(D)):"flash"==manual_stack?recorder=new Mt(D):"webrtc"==manual_stack&&(recorder=new Nt(D)),$("body").append(Q)};Pt.getPhoto=function(){return ft};var Vt=function(){var e={};return e.uuid=generateUUID("i-"),e.medias={},media_factories&&$.each(media_factories,function(t){e.medias[t]=null}),e},Wt=function(){$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/apps/"+vt+"/assets/"+ft.uuid+".json",type:"get",data:{referer:window.location.toString()},success:function(e){e.state&&"processed"==e.state?(CameraTag.fire(ft.uuid,"processed",e),CameraTag.fire(bt,"processed",e)):e.state&&"error"==e.state?(CameraTag.fire(ft.uuid,"processingFailed",e),CameraTag.fire(bt,"processingFailed",e)):it=setTimeout(Wt,2e3)},error:function(e,t,n){it=setTimeout(Wt,2e3),CameraTag.fire(bt,"processingPollingError",{jqXHR:e,textStatus:t,errorThrown:n})}})};Pt.reset=function(){ft=Vt(),Pt.loadInterface(isMobileDevice?A:w),gt&&gt.show(),$("#"+Tt+"_uuid").val(ft.uuid),$.each(media_factories,function(e){$("#"+Tt+"_"+e).val(""),ft.medias[e]=""}),CameraTag.observe(ft.uuid,"published",function(e){ft.uuid==e.uuid&&(ht="published",zt(),Et&&Pt.disconnect(),gt&&gt.hide(),Pt.loadInterface(j),F[0].src=mt.getFrame(),CameraTag.fire(bt,"published",e),Wt())},!0),CameraTag.observe(ft.uuid,"publishFailed",function(e){Gt(CT_i18n[34]+": "+e.message.error)},!0)};var zt=function(){$("#"+Tt+"_uuid").val(ft.uuid),$.each(media_factories,function(e,t){var n="//"+appServer+"/assets/"+ft.uuid+"/"+e+"."+t.extension;$("#"+Tt+"_"+e).val(n),ft.medias[e]=n})};Pt.setMetadata=function(e){if("object"!=typeof e)return void console.warn("setMetadata only accepts Javascript Objects");if(St=e,"published"==ht){var t=JSON.stringify(e);$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+vt+"/assets/"+ft.uuid+"/metadata.json",data:{form_data:t},type:"post",success:function(){return!0},error:function(e,t,n){return throw_error(CT_i18n[35]),CameraTag.fire(bt,"metadataError",{jqXHR:e,textStatus:t,errorThrown:n}),!1}})}},Pt.applyFilter=function(){mt.applyFilter()};var $t=function(){mt&&(mt.setUserZoom(1),mt.setOffset(0,0))};Pt.cancelFilter=function(){$t(),mt.select_filter(0)};var Gt=function(e){X.html(e),Pt.loadInterface(x)};Pt.connect=function(e){return webrtc_enabled&&!window.isSecureContext?void swal(CT_i18n[109]):(xt=e||function(){Pt.loadInterface(C)},void(gt&&gt.connect()))},Pt.disconnect=function(){gt.disconnect(),Et=!1},Pt.takePicture=function(){Qt(gt.getFrame())},Pt.back=function(){destination=P,P=w,b.find(".cameratag_photobooth_screen").hide(),"none"!=destination&&destination.css("display","block")},Pt.selectDevices=function(){Pt.connect(function(){Ut(),Pt.loadInterface(k)})},Pt.loadInterface=function(e){P=O,O=e,b.find(".cameratag_photobooth_screen").hide(),"none"!=e&&e.css("display","block")},Pt.select_filter=function(e){mt.select_filter(e),CameraTag.fire(bt,"filterSelected",e)},Pt.publish=function(){CameraTag.fire(bt,"publishing"),Pt.loadInterface(T),Et&&Pt.disconnect();var e=Jt(mt.getFrame());At.add({name:"recordings/"+ft.uuid+".jpg",file:e,notSignedHeadersAtInitiate:{"Cache-Control":"max-age=3600"},xAmzHeadersAtInitiate:{"x-amz-acl":"public-read"},signParams:{},complete:function(){publish_asset({original_filename:ft.uuid+".jpg",camera_uuid:vt,asset_uuid:ft.uuid,asset_type:"Photo",type:"webcam",signature:yt,signature_expiration:_t,metadata:St})},progress:function(e){nt.html((100*e).toFixed(1)+"%"),CameraTag.fire(bt,"uploadProgress",e)}})};var Yt=function(e){var t=$('<input id="'+bt+'_upload_file" style="position:absolute;" type="file" accept="image/*">');$(w).append(t),$(t).css({left:$(e).offset().left-$(e).offsetParent().offset().left,top:$(e).offset().top-$(e).offsetParent().offset().top,width:$(e).width(),height:$(e).height(),opacity:0}),$(e).css({zIndex:1}),$(e).click(function(e){e.target!=t[0]&&(e.stopPropagation(),$(t).click())}),$(t).change(function(e){Pt.selectFile(e.target.files[0])})};Pt.destroy=function(){if(Et&&Pt.disconnect(),delete CameraTag.photobooths[bt],b.remove(),callbacks[bt].destroyed)var e=callbacks[bt].destroyed.slice();else var e=[];callbacks[bt]={},e&&setTimeout(function(){for(i=0;i<e.length;i++)try{e[i]()}catch(t){}},750)},Pt.selectFile=function(e){var t=e.name.split(".");t=t[t.length-1],t=t.toLowerCase(),h.getData(e,function(){if(Rt=e.exifdata.Orientation||1,window.File&&window.FileReader&&window.FileList&&window.Blob){if(!e.type.match("image.*")&&!confirm(CT_i18n[42]))return;var t=new FileReader;t.addEventListener("load",function(){Qt(t.result)},!1),t.readAsDataURL(e),pt||Pt.select_filter(1)}else swal("The File APIs are not fully supported in this browser.")})};var Qt=function(e){ht="reviewing",Et&&Pt.disconnect(),J.play();var t=new Image;t.addEventListener("error",function(){swal(CT_i18n[108]),CameraTag.fire(bt,"invalidImage"),Pt.loadInterface(w)}),t.src=e,mt.draw(e),Pt.loadInterface(E),CameraTag.fire(bt,"photoTaken")},Jt=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:n})};Ft()},CameraTagPhoto=function(e){var t,n,i,r,o=this,a=$(e).attr("data-uuid"),s=$(e).attr("id"),c=$(e).attr("data-signature"),l=$(e).attr("data-signature-expiration"),u=function(){$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/assets/"+a+".json?signature="+c+"&signature_expiration="+l,type:"get",success:function(o){t=o;var a=[];for(var s in t.medias)"COMPLETED"!=t.medias[s].state||"photo"!=t.medias[s].media_type&&"thumb"!=t.medias[s].media_type&&"small_thumb"!=t.medias[s].media_type||a.push(t.medias[s]);if(a.length>0){var c=a[0].width,l=a[0].height;c>640&&(c/=2,l/=2)}else c=640,l=360;r=a[0].urls.cameratag,n=$(e).attr("data-width")||c,i=$(e).attr("data-height")||l,d()}}),CameraTag.photos[s]=o},d=function(){var t=$('<img id="'+s+'" src="'+r+"?signature="+c+"&signature_expiration="+l+'"></img>');t.css({width:n,height:i}),t.attr("style",$(e).attr("style")),$(e).replaceWith(t)};u()};var CameraTagAudioRecorder=function(e){var t,n=parseInt(1e8*Math.random()),r=this,o=$(e).attr("data-uuid")||$(e).attr("data-app-id")||$(e).attr("id"),a=$(e).attr("data-signature"),s=$(e).attr("data-signature-expiration"),c=$(e).attr("data-name"),l=$(e).attr("data-description"),u=$(e).attr("data-metadata")||$(e).attr("data-audio-data"),d=["wav","mp3","aif","aiff","aifc"];try{t=JSON.parse(u)}catch(p){void 0!=u&&console.warn("Could not parse metadata JSON from <camera> attribute.")}var f,h,g,m,v,y,_,b,w,A,C,E,T,S,x,j,k,R,I,O,P,D,L,N,M,B,F,U,H,V,W,z,G,Y,Q,J,q,X,K,Z,et,tt,nt,it,rt,ot,at,st,ct,lt,ut,dt,pt,ft,ht,gt,mt,vt,yt,_t,bt,X,wt={},At={},Ct=$(e).attr("id")||n,Et=0,Tt=0,St=$(e).attr("data-audio-uuid"),xt=0,jt=!1;r.connect=function(){},r.play=function(){},r.record=function(){},r.stopRecording=function(){},r.stopPlayback=function(){},r.showFlashSettings=function(){};var kt,Rt,It,Ot,Pt=!1,Dt=!1,Lt=!1,Nt=!1,Mt=0,Bt=!1,Ft=[],Ut=!1,Ht=!1;CameraTag.microphones[Ct]=r;var Vt=function(){get_camera(o,function(e){return e.success?(f=e.app_uuid,A=e.videoServer,wt=e.audio_media_factories,At=Wt(),CameraTag.observe(At.uuid,"published",function(e){At.uuid==e.uuid&&(kt="published",on(),CameraTag.fire(Ct,"published",At),F&&sn(),r.loadInterface(ht),Lt&&r.disconnect())},!0),CameraTag.observe(At.uuid,"publishFailed",function(e){At.uuid==e.video_uuid&&nn(CT_i18n[34]+e.message)},!0)):(Ft.push(e.message),CameraTag.fire(Ct,"initializationError",e)),isMobileDevice&&(Ft.push("Audio recording not yet supported on mobile"),CameraTag.fire(Ct,"initializationError",e)),zt(),Ft.length>0?void nn(Ft[0]):(CameraTag.observe(Ct,"initialized",function(){isMobileDevice?r.loadInterface(tt,!0):r.loadInterface(K,!0),J.listMicrophones().length>0&&et.show()}),U=parseInt($(Q).height()/14),12>U&&(U=12),void $(Q).css({fontSize:U+"px"}))})},Wt=function(){var e={};return e.uuid=St?St:generateUUID("au-"),e.medias={},wt&&$.each(wt,function(t){e.medias[t]=null}),e},zt=function(){return g=$(e).attr("name")||Ct,G=$(e).attr("style"),w=$(e).attr("class"),E=400,C=300,T=400,S=300,_=$(e).attr("data-sources")||"record,upload",_=_.replace(" ","").split(","),x=$(e).attr("data-maxlength")||$(e).attr("data-max-length")||30,j=$(e).attr("data-minlength")||$(e).attr("data-min-length")||3,I=$(e).attr("data-audiobitrate")||4e4,CT_i18n[0]=$(e).attr("data-txt-message")||CT_i18n[0],autoPreview="true"==$(e).attr("data-autopreview"),k=!autoPreview,N="false"!=$(e).attr("data-publish-on-upload"),R="true"==$(e).attr("data-skip-font-awesome"),M="false"!=$(e).attr("data-upload-on-select"),L="false"!=$(e).attr("data-record-on-connect"),O="false"!=$(e).attr("data-skip-auto-detect")||"true"==$(e).attr("data-detect-camera"),P="true"==$(e).attr("data-simple-security"),B="false"!=$(e).attr("data-mirror-recording"),F="true"==$(e).attr("data-poll-for-processed"),webrtc_enabled="false"==$(e).attr("data-webrtc")?!1:webrtc_enabled,H=$(e).attr("data-default-sms-country"),W=$(e).attr("data-frame-interval")||41,Y="false"!=$(e).attr("data-show-visualization"),z=$(e).attr("data-buffer-size")||16384,D=$(e).attr("data-pre-roll-length")?parseInt($(e).attr("data-pre-roll-length")):5,Gt(),Xt(),$t(),un(),isMobileDevice&&(Ft.push(CT_i18n[1]),CameraTag.fire(Ct,"unsupportedDevice")),Ft.length>0?void nn(Ft.join("\n")):void((isMobileDevice||-1==_.indexOf("record"))&&CameraTag.fire(Ct,"initialized"))},$t=function(){webrtc_enabled&&window.isSecureContext?(J=new dn,It="rtc_audio"):(J=new pn,It="flash_audio")};r.getState=function(){return kt},r.startUpload=function(e){Ot=e||Ot;var n=Ot.name.split(".");if(n=n[n.length-1],n=n.toLowerCase(),-1!=d.indexOf(n)||confirm(CT_i18n[107])){CameraTag.fire(Ct,"uploadStarted");var i=navigator.userAgent.toLowerCase().indexOf("android")>-1;ut.html(i?"...":"0%"),h.add({name:"recordings/"+At.uuid+".flv",file:Ot,notSignedHeadersAtInitiate:{"Cache-Control":"max-age=3600"},xAmzHeadersAtInitiate:{"x-amz-acl":"public-read"},signParams:{},complete:function(){Ut=!0,It="upload",CameraTag.fire(Ct,"readyToPublish"),K.css("left","0px"),K.css("right","0px"),N&&(rn(CT_i18n[38]),tn(f,At.uuid,"upload",A,a,s,t,c,l))},progress:function(e){CameraTag.fire(Ct,"UploadProgress",e),CameraTag.fire(Ct,"uploadProgress",e),ut.html((100*e).toFixed(1)+"%")}})}};var Gt=function(){if(h=new Evaporate({signerUrl:"//"+appServer+"/api/v"+CameraTag.version+"/assets/upload_signature",aws_key:"AKIAJCHWZMZ35EB62V2A",bucket:BUCKET_NAME,aws_url:"https://"+BUCKET_NAME,cloudfront:!0,logging:!1}),r.uploader=h,!h.supported){var e=_.indexOf("upload");-1!=e&&_.splice(e,1)}},Yt=function(){if(J.listMicrophones().length>0){var e=$('<select class="cameratag_mic_select"></select>'),t=$('<div class="cameratag_select_prompt">'+CT_i18n[48]+"</div>");$(J.listMicrophones()).each(function(t,n){var i=$('<option value="'+n.deviceId+'">'+n.label+"</option>");e.append(i)});var n=$('<div class="cameratag_save">Save</div>');e.change(function(){J.setMicrophone($(this).val())}),n.click(function(){r.loadInterface(K)}),Z.append(t).append(e).append("<br/>").append(n)}},Qt=function(){Y&&(jt=!0,qt())},Jt=function(){jt=!1},qt=function(){jt&&(X.clearRect(0,0,E,C),X.strokeStyle=xt>60?"red":"green",height_adjusted_level=.05*xt*C,X.lineWidth=3,X.beginPath(),X.moveTo(0,.5*C),X.bezierCurveTo(.25*E,.5*C+height_adjusted_level,.75*E,.5*C-height_adjusted_level,E,C/2),X.stroke(),height_adjusted_level=.05*xt*C*Math.random(),X.lineWidth=1,X.beginPath(),X.moveTo(0,.5*C),X.bezierCurveTo(.25*E,.5*C+height_adjusted_level,.75*E,.5*C-height_adjusted_level,E,C/2),X.stroke(),rafID=window.requestAnimationFrame(qt))},Xt=function(){if(!R){var t=$('<link href="//netdna.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.css" media="all" rel="stylesheet" type="text/css" />');$("head").append(t)}if(Q=$('<div id="'+Ct+'" class="camera_tag"></div>'),Q.css({width:E+"px",height:C+"px"}),Q.attr("style",G),Q.addClass(w),$(e).replaceWith(Q),Q.append("<div id='"+Ct+"_recorder_placeholder'></div>"),ln(),q=$('<canvas width="'+E+'" height="'+C+'"></canvas>'),Q.prepend(q),X=q[0].getContext("2d"),-1!=_.indexOf("record")&&(Z=$("#"+Ct+"-settings-screen").addClass("cameratag_screen"),0==Z.length&&(Z=$('<div id="'+Ct+'_settings_screen" class="cameratag_screen cameratag_setings"></div>'))),Q.append(Z),K=$("#"+Ct+"-start-screen").addClass("cameratag_screen"),0==K.length){K=$('<div id="'+Ct+'_start_screen" class="cameratag_screen cameratag_start"></div>');var n=$('<a class="cameratag_select_prompt">'+CT_i18n[103]+"</a>");if(K.append(n),-1!=_.indexOf("record")){var i=$('<a class="cameratag_primary_link cameratag_record_link cameratag_record"><span class="cameratag_action_icon"><i class="fa fa-microphone" aria-hidden="true"></i></span><br><span class="cameratag_prompt_label">'+CT_i18n[104]+"</span></a>");K.append(i)}if(-1!=_.indexOf("upload")){var o=$('<a id="'+Ct+'_upload_link" class="cameratag_primary_link cameratag_upload_link cameratag_upload"><span class="cameratag_action_icon">&#61678;</span><br><span class="cameratag_prompt_label">'+CT_i18n[6]+"</span></a>");K.append(o)}if(-1!=_.indexOf("sms")){var a=$('<a class="cameratag_primary_link cameratag_sms_link cameratag_sms"><span class="cameratag_action_icon">&#61707;</span><br><span class="cameratag_prompt_label">'+CT_i18n[7]+"</span></a>");K.append(a)}et=$('<i class="cameratag_settings_btn fa fa-cog" src="//cameratag.com/assets/gear.png" style="display:none"></i>'),K.append(et)}if(Q.append(K),$(K).css("position","absolute"),tt=$("#"+Ct+"-mobile-start-screen").addClass("cameratag_screen"),0==tt.length){tt=$('<div id="'+Ct+'_mobile_start_screen" class="cameratag_screen cameratag_mobile_start cameratag_record"></div>');var n=$('<a class="cameratag_mobile_prompt">'+CT_i18n[43]+"</a>");tt.append(n);var a=$('<a class="cameratag_primary_link cameratag_sms_link"><span class="cameratag_action_icon">&#61707;</span><br><span class="cameratag_prompt_label">'+CT_i18n[44]+"</span></a>");tt.append(a)}if(Q.append(tt),gt=$("#"+Ct+"-error-screen").addClass("cameratag_screen"),0==gt.length){gt=$('<div class="cameratag_screen cameratag_error"></div>'),mt=$('<div class="cameratag_error_message"></div>'),gt.append(mt);var s=$('<img class="cameratag_settings_btn" src="//cameratag.com/assets/gear.png">');
gt.append(s)}else mt=$(".cameratag_error_message");if(Q.append(gt),at=$("#"+Ct+"-camera-detection-screen").addClass("cameratag_screen"),0==at.length&&(at=$("#"+Ct+"camera-detection-screen").addClass("cameratag_screen")),0==at.length){at=$('<div class="cameratag_screen cameratag_detect"></div>');var c=$('<div class="cameratag_prompt">'+CT_i18n[8]+"</div>");at.append(c)}if(Q.append(at),st=$("#"+Ct+"-countdown-screen").addClass("cameratag_screen"),ct=st.find(".cameratag_countdown_status"),0==st.length){st=$('<div class="cameratag_screen cameratag_count"></div>');var l=$('<div class="cameratag_prompt">'+CT_i18n[9]+" </div>");ct=$('<div class="cameratag_countdown_status"></div>'),st.append(ct),st.append(l)}if(Q.append(st),nt=$("#"+Ct+"-throttled-screen"),0==nt.length){nt=$('<div class="cameratag_throttled"></div>');var u=$('<div class="cameratag_throttled_message">'+CT_i18n[41]+"</div>")}if(nt.append(u),Q.append(nt),it=$("#"+Ct+"-paused-screen").addClass("cameratag_screen"),0==it.length){it=$('<div class="cameratag_screen cameratag_paused"></div>');var d=$('<div class="cameratag_paused_message">'+CT_i18n[102]+"</div>")}if(it.append(d),Q.append(it),lt=$("#"+Ct+"-upload-screen").addClass("cameratag_screen"),ut=lt.find(".cameratag_upload_status"),0==lt.length){lt=$('<div class="cameratag_screen cameratag_upload"></div>');var p=$('<div class="cameratag_prompt">'+CT_i18n[10]+"</div>");ut=$('<div class="cameratag_upload_status"></div>'),lt.append(ut),lt.append(p)}if(Q.append(lt),ot=$("#"+Ct+"-recording-screen").addClass("cameratag_screen"),Tt=ot.find(".cameratag_record_timer_prompt"),0==ot.length){ot=$('<div class="cameratag_screen cameratag_recording cameratag_stop_recording"></div>');var h=$('<div class="cameratag_prompt">'+CT_i18n[11]+"</div>");Tt=$('<span class="cameratag_record_timer_prompt"> ('+Zt(x)+")</span>");var m=$('<img src="//'+appServer+'/assets/recording.gif"/>');h.append(Tt),ot.append(h),ot.append(m)}if(Q.append(ot),rt=$("#"+Ct+"-playback-screen").addClass("cameratag_screen"),0==rt.length){rt=$('<div class="cameratag_screen cameratag_playback cameratag_stop_playback"></div>');var v=$('<div class="cameratag_prompt">'+CT_i18n[12]+"</div>");rt.append(v)}if(Q.append(rt),dt=$("#"+Ct+"-accept-screen").addClass("cameratag_screen"),0==dt.length){dt=$('<div class="cameratag_screen cameratag_accept"></div>');var y=$('<a class="cameratag_accept_btn cameratag_publish"><span class="button_label"><i class="fa fa-floppy-o" aria-hidden="true"></i> '+CT_i18n[13]+"</span></a>"),b=$('<a class="cameratag_rerecord_btn cameratag_record"><span class="button_label"><i class="fa fa-times-circle" aria-hidden="true"></i> '+CT_i18n[14]+"</span></a>"),A=$('<a class="cameratag_play_btn cameratag_play"><span class="button_label"><i class="fa fa-play" aria-hidden="true"></i> '+CT_i18n[15]+"</span></a>");dt.append(y),dt.append(A),dt.append(b)}if(Q.append(dt),pt=$("#"+Ct+"-wait-screen").addClass("cameratag_screen"),ft=pt.find(".cameratag_wait_message"),0==pt.length){pt=$('<div class="cameratag_screen cameratag_wait"></div>');var T=$('<div class="cameratag_spinner"><img src="//'+appServer+'/assets/loading.gif"/><br/><span class="cameratag_wait_message">'+CT_i18n[16]+"</span></div>");pt.append(T),ft=pt.find(".cameratag_wait_message")}if(Q.append(pt),ht=$("#"+Ct+"-completed-screen").addClass("cameratag_screen"),0==ht.length){ht=$('<div class="cameratag_screen cameratag_completed"></div>'),_t=$('<div class="cameratag_thumb_bg"></div>');var S=$('<div class="cameratag_checkmark"><i class="fa fa-check-circle-o" aria-hidden="true"></i></span> '+CT_i18n[17]+"</div>");ht.append(_t),ht.append(S)}if(Q.append(ht),vt=$("#"+Ct+"-sms-screen").addClass("cameratag_screen"),yt=vt.find(".cameratag_sms_input"),0==vt.length){vt=$('<div class="cameratag_screen cameratag_sms_screen"></div>');var j=$('<div class="cameratag_sms_prompt">'+CT_i18n[18]+"<br/></div>");yt=$('<input id="'+Ct+'_sms_input" class="cameratag_sms_input" type="text"/>');var k=$('<br/><a href="javascript:" class="cameratag_send_sms">'+CT_i18n[19]+'</a>&nbsp;&nbsp;<a href="javascript:" class="cameratag_goto_start">'+CT_i18n[20]+"</a>");j.append(yt),j.append(k),vt.append(j),$(yt).intlTelInput({defaultCountry:H})}Q.append(vt),bt=$("#"+Ct+"-check-phone-screen").addClass("cameratag_screen"),0==bt.length&&(bt=$('<div class="cameratag_screen cameratag_check_phone"><div class="cameratag_check_phone_prompt">'+CT_i18n[21]+'</div><div class="cameratag_check_phone_url">'+CT_i18n[22]+" http://"+appServer+"/api/v"+CameraTag.version+"/cameras/"+f+"/videos/"+At.uuid+"/mobile_record</div></div>")),Q.append(bt),Q.append("<input id='"+g+"_uuid' type='hidden' name='"+g+"_uuid' value='"+At.uuid+"'>"),$.each(wt,function(e,t){Q.append("<input id='"+g+"_"+t.name+"' type='hidden' name='"+g+"_"+t.name+"' value=''>")}),!isMobileDevice&&-1!=_.indexOf("upload")&&K.find(".cameratag_upload").length>0&&an(K.find(".cameratag_upload")[0]),Q.find(".cameratag_record").click(function(){r.record()}),Q.find(".cameratag_stop_recording").click(function(){r.stopRecording()}),Q.find(".cameratag_stop_playback").click(function(){r.stopPlayback()}),Q.find(".cameratag_play").click(function(){r.play()}),Q.find(".cameratag_resume").click(function(){r.resumeRecording()}),Q.find(".cameratag_publish").click(function(){r.publish()}),Q.find(".cameratag_goto_start").click(function(){r.loadInterface(K,!0)}),Q.find(".cameratag_send_sms").click(function(){r.send_sms()}),Q.find(".cameratag_sms").click(function(){r.loadInterface(vt)}),Q.find(".cameratag_settings_btn").click(function(e){e.stopPropagation(),r.inputSettings()})};r.inputSettings=function(){r.loadInterface(Z)};var Kt=function(e,t){Pt?(Q.find(".cameratag_screen").hide(),setTimeout(function(){Kt(e,t)},1e3)):(r.loadInterface(st),Mt>=e?(Mt=0,st.hide(),t(),CameraTag.fire(Ct,"countdownFinished")):(ct.html(e-Mt),Mt+=1,setTimeout(function(){Kt(e,t)},1e3)))};r.loadInterface=function(e){Rt=e,Q.find(".cameratag_screen").hide(),"none"!=e&&e.css("display","block")};var Zt=function(e){var t=Math.floor(e/60),n=e-60*t;return t>0?10>n?t+":0"+n:t+":"+n:n},en=function(){Et+=1;var e=x-Et;Tt.html(" ("+Zt(e)+")"),0==e&&(CameraTag.fire(Ct,"recordingTimeOut"),clearInterval(m),r.stopRecording())},tn=function(e,t,n,i,o,a,s,c,l){"rtc_audio"==n||isMobileDevice?(r.loadInterface(lt),J.upload()):publish_asset({camera_uuid:e,asset_uuid:t,asset_type:"Audio",type:n,videoServer:i,signature:o,signature_expiration:a,metadata:s,asset_name:c,asset_description:l})},nn=function(e){mt.html(e),r.loadInterface(gt,!0)};r.publish=function(){if(!Ut)throw"Camera not ready to publish. Please wait for the 'readyToPublish' event.";CameraTag.fire(Ct,"publishing"),rn(CT_i18n[38]),tn(f,At.uuid,It,A,a,s,t,c,l)};var rn=function(e){e=e||"please wait",ft.html(e),r.loadInterface(pt)},on=function(){$("#"+g+"_uuid").val(At.uuid),$.each(wt,function(e,t){var n="//"+appServer+"/assets/"+At.uuid+"/"+e+"."+t.extension;$("#"+g+"_"+e).val(n),At.medias[e]=n})};r.setMetadata=function(e,n){if(n=n||!1,"object"!=typeof e)return void console.warn("setMetadata only accepts Javascript Objects");if(t=e,"published"==kt||n){var i=JSON.stringify(e);$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+f+"/assets/"+At.uuid+"/metadata.json",data:{metadata:i,asset_type:"Audio"},type:"post",success:function(){return!0},error:function(e,t,n){return nn(CT_i18n[35]),CameraTag.fire(Ct,"addDataError",{jqXHR:e,textStatus:t,errorThrown:n}),!1}})}},r.addVideoData=r.setMetadata,r.setVideoData=r.setMetadata,r.reset=function(){clearTimeout(v),clearTimeout(y),clearInterval(m),Mt=0,Et=0,Bt=!1,Ft=[],Ut=!1,Lt&&r.disconnect(),"undefined"!=typeof audioLevelInterval&&clearInterval(audioLevelInterval),At=Wt(),CameraTag.observe(At.uuid,"published",function(e){At.uuid==e.uuid&&(kt="published",on(),r.loadInterface(ht),Lt&&r.disconnect(),CameraTag.fire(Ct,"published",At),F&&sn())},!0),CameraTag.observe(At.uuid,"publishFailed",function(e){At.uuid==e.video_uuid&&nn(CT_i18n[34]+e.message.error)},!0),isMobileDevice||(J.setUUID(At.uuid),J.showNothing()),Q.find("input").val(""),r.loadInterface(K,!0),r.showRecorder(),CameraTag.fire(Ct,"microphoneReset")},r.setLength=function(e){r.setMaxLength(e)},r.setMaxLength=function(e){x=e,Tt.html("("+Zt(e)+")")},r.setSignature=function(e){a=e},r.setSignatureExpiration=function(e){s=e},r.setMinLength=function(e){j=e},r.send_sms=function(){var e=$(yt).intlTelInput("getSelectedCountryData").dialCode,n=$(yt).val(),i="+"+e+n;return""==n?void swal(CT_i18n[25]):(rn(CT_i18n[24]),t&&r.setMetadata(t),void $.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+f+"/videos/"+At.uuid+"/sms",data:{number:i,message:CT_i18n[0]},type:"post",success:function(e,t,n){e.success?(r.loadInterface(bt),CameraTag.fire(Ct,"smsSent")):(r.loadInterface(vt),swal(CT_i18n[26]),CameraTag.fire(Ct,"smsError",{jqXHR:n,textStatus:t}))},error:function(e,t,n){return nn(CT_i18n[27]),CameraTag.fire(Ct,"smsError",{jqXHR:e,textStatus:t,errorThrown:n}),!1}}))},r.getAudio=function(){return At},r.restart_upload=function(){r.uploader.restart_upload()},r.destroy=function(){if(clearTimeout(v),clearTimeout(y),clearInterval(m),Mt=0,Et=0,Bt=!1,Ft=[],Ut=!1,Lt)CameraTag.observe(Ct,"serverDisconnected",r.destroy),r.disconnect();else{if(CameraTag.stopObserving(Ct,"serverDisconnected",r.destroy),delete CameraTag.cameras[Ct],Q.remove(),callbacks[Ct].destroyed)var e=callbacks[Ct].destroyed.slice();else var e=[];callbacks[Ct]={},e&&setTimeout(function(){for(i=0;i<e.length;i++)try{e[i]()}catch(t){}},750)}};var an=function(e){var t=_.indexOf("upload");if(-1==t)var n=$('<input id="'+Ct+'_upload_file" style="position:absolute;" type="file" accept="audio/*" capture>');else var n=$('<input id="'+Ct+'_upload_file" style="position:absolute;" type="file" accept="audio/*">');$(K).append(n),$(n).css({left:$(e).offset().left-$(e).offsetParent().offset().left,top:$(e).offset().top-$(e).offsetParent().offset().top,width:$(e).width(),height:$(e).height(),opacity:0}),$(e).css({zIndex:1}),$(e).click(function(e){e.target!=n[0]&&(e.stopPropagation(),$(n).click())}),$(n).change(function(e){Ot=e.target.files[0],CameraTag.fire(Ct,"uploadFileSelected",Ot),M&&r.startUpload(),$(e.target).val("")})},sn=function(){F&&$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+f+"/assets/"+At.uuid+".json",type:"get",data:{referer:window.location.toString()},success:function(e){e&&"processed"==e.state?CameraTag.fire(Ct,"processed",e):e&&"error"==e.state?CameraTag.fire(Ct,"processingFailed",e):v=setTimeout(sn,2e3)},error:function(e,t,n){v=setTimeout(sn,2e3),CameraTag.fire(Ct,"processingPollingError",{jqXHR:e,textStatus:t,errorThrown:n})}})},cn=function(){$.ajax({url:"//"+appServer+"/api/v"+CameraTag.version+"/cameras/"+f+"/assets/"+At.uuid+".json",type:"get",data:{referer:window.location.toString()},success:function(e){"published"==e.state||"processed"==e.state?(CameraTag.fire(At.uuid,"published",e),clearInterval(y)):y=setTimeout(function(){cn()},4e3)},error:function(e,t,n){y=setTimeout(function(){cn()},4e3),CameraTag.fire(Ct,"publishedPollingError",{jqXHR:e,textStatus:t,errorThrown:n})}})},ln=function(){r.play=function(){J&&Lt&&J.startPlayback()},r.setVideoBitrate=function(e){J&&J.setVideoBitrate(e)},r.showFlashSettings=function(){J&&(r.loadInterface("none"),J.showFlashSettings())},r.record=function(){isMobileDevice||(J&&Lt?(CameraTag.fire(Ct,"countdownStarted"),J.showRecorder(),Kt(D,r.record_without_countdown)):(r.loadInterface("none"),r.connect()))},r.showRecorder=function(){J&&J.showRecorder()},r.showPlayer=function(){J&&J.showPlayer()},r.record_without_countdown=function(){if(!Nt)throw"Camera not ready to record. Please observe 'readyToRecord' event before recording";J&&(kt="recording",J.showRecorder(),J.startRecording())},r.pauseRecording=function(){J.pauseRecording()},r.pausePlayback=function(){J.pausePlayback()},r.seekPlayback=function(e){J.seekPlayback(e)},r.resumeRecording=function(){J.resumeRecording()},r.stopPlayback=function(){J&&Lt&&J.stopPlayback()},r.stopRecording=function(){Et>=j?(clearInterval(m),J&&Lt&&J.stopRecording()):console.warn("stopRecording called before minimum length")},r.connect=function(){J&&J.connect()},r.disconnect=function(){J&&(kt="disconnecting",J.disconnect())}},un=function(){CameraTag.observe(Ct,"initialized",function(){Ht=!0,kt="initialized",-1!=_.indexOf("record")&&Yt()},!0),CameraTag.observe(Ct,"throttled",function(){throttled_timer=setTimeout(function(){Dt=!0,Q.find(".cameratag_screen").hide(),nt.show()},1500)},!0),CameraTag.observe(Ct,"unthrottled",function(){clearTimeout(throttled_timer),Dt&&(Dt=!1,nt.hide(),r.loadInterface(Rt))},!0),CameraTag.observe(Ct,"connecting",function(){rn(CT_i18n[39])},!0),CameraTag.observe(Ct,"connecting2",function(){rn(CT_i18n[40])},!0),CameraTag.observe(Ct,"securityDialogOpen",function(){r.loadInterface("none")},!0),CameraTag.observe(Ct,"securityDialogClosed",function(){r.loadInterface(at)},!0),CameraTag.observe(Ct,"settingsDialogClosed",function(){r.loadInterface(K,!0)},!0),CameraTag.observe(Ct,"detectingCamera",function(){r.loadInterface(at)},!0),CameraTag.observe(Ct,"hardwareError",function(){nn(CT_i18n[99])},!0),CameraTag.observe(Ct,"flashInitializationError",function(){r.record=function(){confirm(CT_i18n[2])&&window.open("https://get.adobe.com/flashplayer")}},!0),CameraTag.observe(Ct,"unsupportedFlashVersion",function(){r.record=function(){confirm(CT_i18n[2])&&window.open("https://get.adobe.com/flashplayer")}},!0),CameraTag.observe(Ct,"noCamera",function(){r.record=function(){swal(CT_i18n[28])}},!0),CameraTag.observe(Ct,"noMic",function(){r.record=function(){swal(CT_i18n[29])}},!0),CameraTag.observe(Ct,"readyToRecord",function(){Nt=!0,L?r.record():r.loadInterface("none")},!0),CameraTag.observe(Ct,"cameraDenied",function(){nn(CT_i18n[30])},!0),CameraTag.observe(Ct,"serverConnected",function(){Qt(),Lt=!0},!0),CameraTag.observe(Ct,"serverDisconnected",function(){Lt=!1,Nt=!1,"disconnecting"!=kt&&"published"!=kt&&"readyToPublish"!=kt&&(r.stopRecording(),J.showNothing(),nn(CT_i18n[31]),setTimeout(function(){r.loadInterface(K)},2e3))},!0),CameraTag.observe(Ct,"playbackFailed",function(){nn(CT_i18n[32])},!0),CameraTag.observe(Ct,"serverError",function(){nn(CT_i18n[33])},!0),CameraTag.observe(Ct,"waitingForMicrophoneActivity",function(){rn(CT_i18n[100])},!0),CameraTag.observe(Ct,"countdownStarted",function(){r.loadInterface(st)},!0),CameraTag.observe(Ct,"countdownFinished",function(){},!0),CameraTag.observe(Ct,"recordingStarted",function(){Et=0,Qt(),m=setInterval(function(){en()},1e3),r.loadInterface(ot)},!0),CameraTag.observe(Ct,"audioLevel",function(e){xt=e},!0),CameraTag.observe(Ct,"recordingPaused",function(){clearInterval(m),Q.find(".cameratag_screen").hide(),it.show()},!0),CameraTag.observe(Ct,"recordingResumed",function(){it.hide(),Qt(),m=setInterval(function(){en()},1e3),r.loadInterface(ot)},!0),CameraTag.observe(Ct,"recordingStopped",function(){Jt(),clearInterval(m),k?(J.showPlayer(),r.loadInterface(dt)):r.play()},!0),CameraTag.observe(Ct,"bufferingDown",function(){rn(CT_i18n[37])},!0),CameraTag.observe(Ct,"recordingTimeOut",function(){},!0),CameraTag.observe(Ct,"playbackStarted",function(){Qt(),r.loadInterface(rt)},!0),CameraTag.observe(Ct,"playbackStopped",function(){Jt(),r.loadInterface(dt)},!0),CameraTag.observe(Ct,"publishing",function(){kt="publishing"},!0),CameraTag.observe(Ct,"uploadStarted",function(){Bt=!0,r.loadInterface(lt)},!0),CameraTag.observe(Ct,"uploadProgress",function(e){ut.html((100*e).toFixed(1)+"%")},!0),CameraTag.observe(Ct,"uploadAborted",function(){Bt=!1},!0),CameraTag.observe(Ct,"readyToPublish",function(){Ut=!0,kt="readyToPublish"},!0),CameraTag.observe(Ct,"smsSent",function(){cn()},!0),CameraTag.observe(Ct,"published",function(){},!0),CameraTag.observe(Ct,"publishFailed",function(){nn(CT_i18n[34])},!0),CameraTag.observe(Ct,"processed",function(){kt="processed",$(Q).find(".cameratag_thumb_bg").css({backgroundImage:"url(//"+appServer+"/downloads/"+At.uuid+".png)"})},!0)},dn=function(){var e=this,n=$('<video id="'+Ct+'-video-preview" style="position:absolute; top:0px; left:0px; width:100%; height:100%; object-fit: fill;"></video>');$(n).bind("ended",function(){CameraTag.fire(Ct,"playbackStopped")});var i,r,o,u,d,p,g,m=[];Q.prepend(n);var n=n[0];mics=[],navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(e){$(e).each(function(e,t){"audioinput"===t.kind&&mics.push({label:t.label,deviceId:t.deviceId})}),0==mics.length?CameraTag.fire(Ct,"noMic"):selected_mic_id=getCookie("CameraTagSelectedMicId")&&"default"!=getCookie("CameraTagSelectedMicId")?getCookie("CameraTagSelectedMicId"):mics[0].deviceId,CameraTag.fire(Ct,"initialized")}):CameraTag.fire(Ct,"initialized"),B&&(n.style.transform="scaleX(-1)");var v;e.stack="MediaRecorder",e.setUUID=function(){},e.listMicrophones=function(){return mics},e.setMicrophone=function(e){selected_mic_id=e,createCookie("CameraTagSelectedMicId",e)},e.showNothing=function(){n.src=null},e.showRecorder=function(){},e.showPlayer=function(){},e.stopPlayback=function(){n.pause(),n.muted=!0,p.disconnect(g),p.disconnect(audioContext.destination),CameraTag.fire(Ct,"playbackStopped")},e.startPlayback=function(){n.src!=u&&(p.connect(g),p.connect(audioContext.destination),i=setInterval(y,100),n.src=u),n.muted=!1,n.play(),CameraTag.fire(Ct,"playbackStarted")},e.pausePlayback=function(){n.pause(),CameraTag.fire(Ct,"playbackPaused")},e.seekPlayback=function(e){n.currentTime=e,CameraTag.fire(Ct,"playbackSeeked")},e.connect=function(){It="rtc_audio",CameraTag.fire(Ct,"waitingForMicrophoneActivity"),n.muted=!0;var e={audio:{deviceId:selected_mic_id,audioBitrate:I},video:!1},t=function(e){v=e,d=audioContext.createMediaStreamSource(v),"undefined"==typeof p&&(p=audioContext.createMediaElementSource(n)),g=createAudioMeter(audioContext),g.connect(audioContext.destination);try{r=new MediaRecorder(v,{})}catch(t){return void nn("Error creating MediaRecorder")}r.ondataavailable=function(e){e.data&&e.data.size>0&&m.push(e.data)},r.onerror=function(e){nn(e)},r.onwarning=function(){},r.onstop=function(){o=new Blob(m,{type:"audio/ogg"});var e=window.URL||window.webkitURL;u=e.createObjectURL(o),m=[],CameraTag.fire(Ct,"readyToPublish"),CameraTag.fire(Ct,"recordingStopped")},CameraTag.fire(Ct,"serverConnected"),CameraTag.fire(Ct,"readyToRecord")},i=function(){CameraTag.fire(Ct,"cameraDenied")};navigator.mediaDevices.getUserMedia(e).then(t)["catch"](i)};var y=function(){var e=parseInt(100*g.volume);CameraTag.fire(Ct,"audioLevel",e)};e.disconnect=function(){Lt&&("inactive"!=r.state&&r.stop(),r.stream&&r.stream.getTracks&&$(r.stream.getTracks()).each(function(e,t){t.stop()}),CameraTag.fire(Ct,"serverDisconnected"))},e.startRecording=function(){d.connect(g),n.muted=!0,r.start(1e3),i=setInterval(y,100),CameraTag.fire(Ct,"recordingStarted")},e.stopRecording=function(){rn(CT_i18n[98]),clearInterval(i),"inactive"!=r.state&&(d.disconnect(g),r.stop())},e.pauseRecording=function(){n.pause(),r.pause(),clearInterval(i),CameraTag.fire(Ct,"recordingPaused")},e.resumeRecording=function(){n.muted=!0,n.play(),i=setInterval(y,100),r.resume(),CameraTag.fire(Ct,"recordingResumed")},e.upload=function(){CameraTag.fire(Ct,"uploadStarted"),h.add({name:"recordings/"+At.uuid+".flv",file:o,notSignedHeadersAtInitiate:{"Cache-Control":"max-age=3600"},xAmzHeadersAtInitiate:{"x-amz-acl":"public-read"},signParams:{},complete:function(){Ut=!0,It="rtc_audio",K.css("left","0px"),K.css("right","0px"),rn(CT_i18n[38]),publish_asset({camera_uuid:f,asset_uuid:At.uuid,asset_type:"Audio",type:"rtc_audio",videoServer:A,signature:a,signature_expiration:s,metadata:t,asset_name:c,asset_description:l})},progress:function(e){e=e,CameraTag.fire(Ct,"UploadProgress",e),CameraTag.fire(Ct,"uploadProgress",e),ut.html((100*e).toFixed(1)+"%")}})}},pn=function(){var e,t=this;swfobject=swfobject||initializeSwfobject();var i=function(){e=document[Ct+"_swf"],"undefined"==typeof e&&5>V?(V+=1,setTimeout(i,200)):V>=5&&CameraTag.fire(Ct,"flashInitializationError")};if(0==swfobject.getFlashPlayerVersion().major){var r=$('<object type="application/x-shockwave-flash" id="'+Ct+'_swf" name="'+Ct+'_swf" data="//'+appServer+"/static/"+CameraTag.version+"/audio.swf?"+n+'" width="100%" height="100%">'),o=$('<param name="allowfullscreen" value="true"></param>'),a=$('<param name="allowscriptaccess" value="always"></param>'),s=$('<param name="wmode" value="transparent"></param>'),c="videoServer="+A;c+="&amp;videoUUID="+At.uuid,c+="&amp;cameraUUID="+f,c+="&amp;domID="+Ct,c+="&amp;maxLength="+x,c+="&amp;hResolution="+T,c+="&amp;vResolution="+S,c+="&amp;videoBitRate="+I,c+="&amp;fps="+b,c+="&amp;skipAutoDetect="+O,c+="&amp;flipRecordPreview="+B,c+="&amp;simpleSecurity="+P,c+="&amp;verboseMode="+CT_verbose_mode;var l=$('<param name="flashvars" value="'+c+'"></param>');r.append(o),r.append(a),r.append(s),r.append(l),$("#"+Ct+"_recorder_placeholder").replaceWith(r),i()}else{var l={videoServer:A,videoUUID:At.uuid,cameraUUID:f,domID:Ct,maxLength:x,hResolution:T,vResolution:S,fps:b,videoBitRate:I,skipAutoDetect:O,flipRecordPreview:B,simpleSecurity:P,verboseMode:CT_verbose_mode},u={allowfullscreen:"true",allowscriptaccess:"always",wmode:"transparent"},d={id:Ct+"_swf",name:Ct+"_swf",style:"position:absolute; top:0px; left:0px;"};swfobject.embedSWF("//"+appServer+"/static/"+CameraTag.version+"/audio.swf?"+n,Ct+"_recorder_placeholder","100%","100%","11.1.0","https://"+appServer+"/static/"+CameraTag.version+"/expressInstall.swf",l,u,d,i)}t.stack="Flash",t.setUUID=function(t){e.setUUID(t)},t.listMicrophones=function(){e.listMicrophones()},t.setMicrophone=function(t){e.setMicrophone(t)},t.showNothing=function(){e.showNothing()},t.showRecorder=function(){e.showRecorder()},t.showPlayer=function(){e.showPlayer()},t.stopPlayback=function(){e.stopPlayback()},t.startPlayback=function(){e.startPlayback()},t.pausePlayback=function(){e.pausePlayback()},t.seekPlayback=function(t){e.seekPlayback(t)},t.connect=function(){e.connect()},t.disconnect=function(){e.disconnect()},t.startRecording=function(){e.startRecording()},t.stopRecording=function(){e.stopRecording()},t.pauseRecording=function(){e.pauseRecording()},t.resumeRecording=function(){e.resumeRecording()}};Vt()},fx=function(){function e(e,t,n){return Math.max(e,Math.min(t,n))}function t(e){return{_:e,loadContentsOf:function(e){it=this._.gl,this._.loadContentsOf(e)},destroy:function(){it=this._.gl,this._.destroy()}}}function n(e){return t(ot.fromElement(e))}function i(e,t){var n=it.UNSIGNED_BYTE;if(it.getExtension("OES_texture_float")&&it.getExtension("OES_texture_float_linear")){var i=new ot(100,100,it.RGBA,it.FLOAT);try{i.drawTo(function(){n=it.FLOAT})}catch(r){}i.destroy()}this._.texture&&this._.texture.destroy(),this._.spareTexture&&this._.spareTexture.destroy(),this.width=e,this.height=t,this._.texture=new ot(e,t,it.RGBA,n),this._.spareTexture=new ot(e,t,it.RGBA,n),this._.extraTexture=this._.extraTexture||new ot(0,0,it.RGBA,n),this._.flippedShader=this._.flippedShader||new rt(null,"        uniform sampler2D texture;        varying vec2 texCoord;        void main() {            gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));        }    "),this._.isInitialized=!0}function r(e,t,n){return this._.isInitialized&&e._.width==this.width&&e._.height==this.height||i.call(this,t?t:e._.width,n?n:e._.height),e._.use(),this._.texture.drawTo(function(){rt.getDefaultShader().drawRect()}),this}function o(){return this._.texture.use(),this._.flippedShader.drawRect(),this}function a(e,t,n,i){(n||this._.texture).use(),this._.spareTexture.drawTo(function(){e.uniforms(t).drawRect()}),this._.spareTexture.swapWith(i||this._.texture)}function s(e){return e.parentNode.insertBefore(this,e),e.parentNode.removeChild(e),this}function c(){var e=new ot(this._.texture.width,this._.texture.height,it.RGBA,it.UNSIGNED_BYTE);return this._.texture.use(),e.drawTo(function(){rt.getDefaultShader().drawRect()}),t(e)}function l(){var e=this._.texture.width,t=this._.texture.height,n=new Uint8Array(e*t*4);return this._.texture.drawTo(function(){it.readPixels(0,0,e,t,it.RGBA,it.UNSIGNED_BYTE,n)}),n}function u(e){return function(){return it=this._.gl,e.apply(this,arguments)}}function d(e,t,n,i,r,o,a,s){var c=n-r,l=i-o,u=a-r,d=s-o,p=e-n+r-a,f=t-i+o-s,h=c*d-u*l,g=(p*d-u*f)/h,m=(c*f-p*l)/h;return[n-e+g*n,i-t+g*i,g,a-e+m*a,s-t+m*s,m,e,t,1]}function p(e){var t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=t*o*l-t*a*c-n*r*l+n*a*s+i*r*c-i*o*s;return[(o*l-a*c)/u,(i*c-n*l)/u,(n*a-i*o)/u,(a*s-r*l)/u,(t*l-i*s)/u,(i*r-t*a)/u,(r*c-o*s)/u,(n*s-t*c)/u,(t*o-n*r)/u]}function f(e,t){return[e[0]*t[0]+e[1]*t[3]+e[2]*t[6],e[0]*t[1]+e[1]*t[4]+e[2]*t[7],e[0]*t[2]+e[1]*t[5]+e[2]*t[8],e[3]*t[0]+e[4]*t[3]+e[5]*t[6],e[3]*t[1]+e[4]*t[4]+e[5]*t[7],e[3]*t[2]+e[4]*t[5]+e[5]*t[8],e[6]*t[0]+e[7]*t[3]+e[8]*t[6],e[6]*t[1]+e[7]*t[4]+e[8]*t[7],e[6]*t[2]+e[7]*t[5]+e[8]*t[8]]}function h(e){var t=e.length;this.xa=[],this.ya=[],this.u=[],this.y2=[],e.sort(function(e,t){return e[0]-t[0]});for(var n=0;t>n;n++)this.xa.push(e[n][0]),this.ya.push(e[n][1]);this.u[0]=0,this.y2[0]=0;for(var n=1;t-1>n;++n){var i=this.xa[n+1]-this.xa[n-1],r=(this.xa[n]-this.xa[n-1])/i,o=r*this.y2[n-1]+2;this.y2[n]=(r-1)/o;var a=(this.ya[n+1]-this.ya[n])/(this.xa[n+1]-this.xa[n])-(this.ya[n]-this.ya[n-1])/(this.xa[n]-this.xa[n-1]);this.u[n]=(6*a/i-r*this.u[n-1])/o}this.y2[t-1]=0;for(var n=t-2;n>=0;--n)this.y2[n]=this.y2[n]*this.y2[n+1]+this.u[n]}function g(e,t){return new rt(null,e+"    uniform sampler2D texture;    uniform vec2 texSize;    varying vec2 texCoord;    void main() {        vec2 coord = texCoord * texSize;        "+t+"        gl_FragColor = texture2D(texture, coord / texSize);        vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);        if (coord != clampedCoord) {            /* fade to transparent if we are outside the image */            gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));        }    }")}function m(t,n){return it.brightnessContrast=it.brightnessContrast||new rt(null,"        uniform sampler2D texture;        uniform float brightness;        uniform float contrast;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            color.rgb += brightness;            if (contrast > 0.0) {                color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;            } else {                color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;            }            gl_FragColor = color;        }    "),a.call(this,it.brightnessContrast,{brightness:e(-1,t,1),contrast:e(-1,n,1)}),this}function v(t){for(var n=new h(t),i=[],r=0;256>r;r++)i.push(e(0,Math.floor(256*n.interpolate(r/255)),255));return i}function y(e,t,n){e=v(e),1==arguments.length?t=n=e:(t=v(t),n=v(n));for(var i=[],r=0;256>r;r++)i.splice(i.length,0,e[r],t[r],n[r],255);return this._.extraTexture.initFromBytes(256,1,i),this._.extraTexture.use(1),it.curves=it.curves||new rt(null,"        uniform sampler2D texture;        uniform sampler2D map;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            color.r = texture2D(map, vec2(color.r)).r;            color.g = texture2D(map, vec2(color.g)).g;            color.b = texture2D(map, vec2(color.b)).b;            gl_FragColor = color;        }    "),it.curves.textures({map:1}),a.call(this,it.curves,{}),this}function _(e){it.denoise=it.denoise||new rt(null,"        uniform sampler2D texture;        uniform float exponent;        uniform float strength;        uniform vec2 texSize;        varying vec2 texCoord;        void main() {            vec4 center = texture2D(texture, texCoord);            vec4 color = vec4(0.0);            float total = 0.0;            for (float x = -4.0; x <= 4.0; x += 1.0) {                for (float y = -4.0; y <= 4.0; y += 1.0) {                    vec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);                    float weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));                    weight = pow(weight, exponent);                    color += sample * weight;                    total += weight;                }            }            gl_FragColor = color / total;        }    ");for(var t=0;2>t;t++)a.call(this,it.denoise,{exponent:Math.max(0,e),texSize:[this.width,this.height]});return this}function b(e){return it.bokeh=it.bokeh||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        float PI = 3.14159265;        uniform sampler2D texture2;        float init = 1.0;        uniform float time;        uniform vec3 p0;        uniform vec3 p1;        uniform vec3 p2;        uniform vec3 p3;        uniform vec3 p4;        uniform vec3 p5;        uniform vec3 p6;        uniform vec3 p7;        vec2 center = vec2(400,300);        float radius = 720.0;        vec3 hue(vec3 c,float a){          float sa=sin(a*PI),ca=cos(a*PI);          vec3 w=(vec3(2.0*ca,-sqrt(3.0)*sa-ca,sqrt(3.0)*sa-ca)+1.0)/3.0;          return vec3(dot(c,w.xyz),dot(c,w.zxy),dot(c,w.yzx));        }        void main(){          vec3 c=texture2D(texture,texCoord*0.994+0.003).rgb;          if(init==1.0) c=(c+0.5)*c-0.1;          vec2 p=texCoord*vec2(800.0,800.0*texSize.y/texSize.x);          vec3 b0=texture2D(texture2,(p-p0.xy)/p0.z).rgb;          vec3 b1=vec3(texture2D(texture2,(p-p1.xy)/p1.z).r*1.3);          b1.g=b1.b-=0.05;          vec3 b2=texture2D(texture2,(p-p2.xy)/p2.z).rgb;          vec3 b3=texture2D(texture2,(p-p3.xy)/p3.z).rgb;          vec3 b4=texture2D(texture2,(p-p4.xy)/p4.z).rgb;          vec3 b5=texture2D(texture2,(p-p5.xy)/p5.z).rgb;          vec3 b6=texture2D(texture2,(p-p6.xy)/p6.z).rgb;          vec3 b7=texture2D(texture2,(p-p7.xy)/p7.z).rgb;          vec3 c1=hue(b0,0.1) +\nb1 +\nhue(b2,-0.1) +\nhue(b3,-0.2) +\nb4*0.3 +\nb5*0.5 +\nb6*1.5 +\nb7;gl_FragColor=vec4(clamp(c+hue(c1,time*0.2)*length(texCoord*texSize-center)/radius*0.8,0.0,1.0),1.0);        }    "),a.call(this,it.bokeh,{time:e}),this}function w(e){return it.flare=it.flare||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        uniform float time;        float hl(float c1,float c0){          return(c0<0.5?(2.0*c0*c1):(1.0-2.0*(1.0-c0)*(1.0-c1)));        }        void main(){          vec2 p=texCoord-0.2;          vec3 c=vec3(0.0);          for(float i=0.0;i<4.0;i++){            float t=time/4.0+i*3.0;            p.y+=sin(p.x*2.0-t)-sin(t)*0.1;            p.x+=cos(p.y*3.0-t+cos(t))*0.15;            float w=(sin(p.x*10.0)+sin(i*0.1)+p.y*8.0);            float z=1.0/sqrt(abs(w))*(abs(sin(time*0.1+2.0))*0.5+2.0);            c+=vec3(z*0.2,z*0.1,z*0.025);          }          vec3 c0=texture2D(texture,texCoord).rgb;          c=vec3(hl(c0.r,c.r),hl(c0.g,c.g),hl(c0.b,c.b));          gl_FragColor=vec4(clamp(c0*c0+c*0.5,0.0,1.0),1.0);        }    "),a.call(this,it.flare,{time:e}),this}function A(e){return it.halo=it.halo||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        float RADIUS = 0.4;        float TWO_PI = 6.28318531;        float X_PRO = 0.5;        uniform float time;        void main(){          vec2 p=(texCoord-vec2(0.5))*texSize/texSize.y;          float r=length(p*8.0),a=atan(p.y+1.5,p.x),t=time+50.0/(r+1.0),d=abs(0.05/(sin(t)+sin(time+a*8.0)))*28.0;          vec3 c=vec3(-sin(r*5.0-a-time+sin(r+t)),sin(r*3.0+a-cos(time)+sin(r+t)),cos(r+a*2.0+log(5.001-(a/4.0))-time)+sin(r+t));          float dist=length(p);          if(dist<RADIUS) c+=(dist-RADIUS)*11.0;          vec3 c0=texture2D(texture,texCoord).rgb;          c0.r-=sin(c0.r*TWO_PI)*X_PRO;          c0.g-=sin(c0.g*TWO_PI)*X_PRO;          c0.b+=sin(c0.b*TWO_PI)*X_PRO;          gl_FragColor=vec4(c0+clamp(c*d*0.2,0.0,1.0),1.0);        }    "),a.call(this,it.halo,{time:e}),this}function C(e){return it.smoke=it.smoke||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        uniform float time;        float r(float d,float w,float o){          return(cos(d*0.0174533)+1.0)*w+o;        }        void main(){          vec2 p=texCoord;          float t=time*0.25+1024.0,w=r(t*10.0,2.0,0.5),cw=cos(w)*0.0075,xo=r(t*0.12,2.5,5.0),yo=r(t*0.1,4.0,5.0);          for(float i=1.0;i<31.0;i++){            p.x+=sin(p.y*i+t*cw+i*0.03)*0.375/i+xo;            p.y+=sin(p.x*i+t*w*0.00375+(i+15.0)*0.03)*0.6/i+yo;          }          vec3 c0=(texture2D(texture,texCoord).rgb-0.5)*1.5+0.6;          c0=mix(c0,vec3(c0.r*0.3+c0.g*0.59+c0.b*0.11),0.5);          vec3 c1=clamp(vec3(sin(p.x*3.0)*0.5+0.5,sin(p.y*3.0)*0.5+0.5,sin(p.x+p.y)),0.0,1.0)*0.7+0.3;          gl_FragColor=vec4(1.0-(1.0-c0)*(1.0-c1),1.0);        }    "),a.call(this,it.smoke,{time:e}),this
}function E(){return it.berry=it.berry||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        const vec3 g1=vec3(1.0,0.6,0.8);        const vec3 g2=vec3(0.6,0.8,1.0);        void main(){          vec3 c=(texture2D(texture,texCoord).rgb-0.5)*1.8+0.5;          c=vec3(c.r*0.3+c.g*0.59+c.b*0.11);          vec3 g=mix(g1,g2,texCoord.x*(texSize.y/texSize.x)+(texSize.x-texSize.y)/texSize.x/2.0);          gl_FragColor=vec4(1.0-(1.0-c)*(1.0-g),1.0);        }    "),a.call(this,it.berry,{}),this}function T(){return it.spycam=it.spycam||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        float PI = 3.14159265;        const vec3 tint=vec3(0.85,1.1,1.35);        float rand(vec2 r){          return fract(sin(dot(r,vec2(12.9898,78.233)))*43758.5453);        }        void main(){          vec2 p=texCoord;          float b=mix(sin(p.x*PI),sin(p.y*PI),0.5);          vec3 c=texture2D(texture,p).rgb;          float noise=rand(vec2(c.g,atan(p.x,p.y)));          float tv=mix(b,mix(b/2.0,abs(sin(gl_FragCoord.y/2.0))/1.5,0.5),0.5)+noise/16.0;          c=vec3(c.r*0.3+c.g*0.59+c.b*0.11)*tint;          gl_FragColor=vec4(((c-0.5)*4.0+1.0)*vec3(tv),1.0);        }    "),a.call(this,it.spycam,{}),this}function T(){return it.spycam=it.spycam||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        float PI = 3.14159265;        const vec3 tint=vec3(0.85,1.1,1.35);        float rand(vec2 r){          return fract(sin(dot(r,vec2(12.9898,78.233)))*43758.5453);        }        void main(){          vec2 p=texCoord;          float b=mix(sin(p.x*PI),sin(p.y*PI),0.5);          vec3 c=texture2D(texture,p).rgb;          float noise=rand(vec2(c.g,atan(p.x,p.y)));          float tv=mix(b,mix(b/2.0,abs(sin(gl_FragCoord.y/2.0))/1.5,0.5),0.5)+noise/16.0;          c=vec3(c.r*0.3+c.g*0.59+c.b*0.11)*tint;          gl_FragColor=vec4(((c-0.5)*4.0+1.0)*vec3(tv),1.0);        }    "),a.call(this,it.spycam,{}),this}function S(){return it.murica=it.murica||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        void main(){            float x = texCoord.x;            vec3 tc=vec3(texture2D(texture,texCoord).rgb);            if(x>0.0 && x<0.33) tc.rgb*=vec3(0.0,0.0,1.0);            if(x>0.33 && x<0.66) tc.rgb*=vec3(1.0,1.0,1.0);            if(x>0.66) tc.rgb*=vec3(1.0,0.0,0.0);            gl_FragColor=vec4(tc,1.0);        }    "),a.call(this,it.murica,{texSize:[this.width,this.height]}),this}function x(e,t,n){return it.nightvision=it.nightvision||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        uniform float time;        uniform float luminanceThreshold;        uniform float colorAmplification;        void main (){          vec4 finalColor;          vec2 uv;          uv.x = 0.4*sin(time*50.0);          uv.y = 0.4*cos(time*50.0);          vec3 c = texture2D(texture, texCoord).rgb;          float lum = dot(vec3(0.30, 0.59, 0.11), c);          if (lum < luminanceThreshold) c *= colorAmplification;           vec3 visionColor = vec3(0.1, 0.95, 0.2);          finalColor.rgb = (c * visionColor);          gl_FragColor.rgb = finalColor.rgb;          gl_FragColor.a = 1.0;        }    "),a.call(this,it.nightvision,{time:e,luminanceThreshold:t,colorAmplification:n,texSize:[this.width,this.height]}),this}function j(e,t){return it.posterize=it.posterize||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        uniform float gamma;        uniform float numColors;        void main(){          vec3 c = texture2D(texture, texCoord).rgb;          c = pow(c, vec3(gamma, gamma, gamma));          c = c * numColors;          c = floor(c);          c = c / numColors;          c = pow(c, vec3(1.0/gamma));          gl_FragColor = vec4(c, 1.0);        }    "),a.call(this,it.posterize,{gamma:e,numColors:t,texSize:[this.width,this.height]}),this}function k(e,t,n,i,r){return it.badtv=it.badtv||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        float time;        float distortion;        float distortion2;        float speed;        float rollSpeed;        vec3 mod289(vec3 x) {          return x - floor(x * (1.0 / 289.0)) * 289.0;        }        vec2 mod289(vec2 x) {          return x - floor(x * (1.0 / 289.0)) * 289.0;        }        vec3 permute(vec3 x) {          return mod289(((x*34.0)+1.0)*x);        }        float snoise(vec2 v) {          const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);          vec2 i  = floor(v + dot(v, C.yy) );          vec2 x0 = v - i + dot(i, C.xx);          vec2 i1;          i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);          vec4 x12 = x0.xyxy + C.xxzz;          x12.xy -= i1;          i = mod289(i);          vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));          vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);          m = m*m ;          m = m*m ;          vec3 x = 2.0 * fract(p * C.www) - 1.0;          vec3 h = abs(x) - 0.5;          vec3 ox = floor(x + 0.5);          vec3 a0 = x - ox;          m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );          vec3 g;          g.x  = a0.x  * x0.x  + h.x  * x0.y;          g.yz = a0.yz * x12.xz + h.yz * x12.yw;          return 130.0 * dot(m, g);        }        void main() {          vec2 p = texCoord;          float ty = time*speed;          float yt = p.y - time;          float offset = snoise(vec2(yt*3.0,0.0))*0.2;          offset = offset*distortion * offset*distortion * offset;          offset += snoise(vec2(yt*50.0,0.0))*distortion2*0.001;          float v_offset = time / texSize[1];          gl_FragColor = texture2D(texture, vec2(fract(p.x),(p.y - v_offset) ));        }    "),a.call(this,it.badtv,{time:e,distortion:t,distortion2:n,speed:i,rollSpeed:r,texSize:[this.width,this.height]}),this}function R(e){return it.magazine=it.magazine||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        float K = 1.0471975511965976;        uniform float size;        float cosa = 0.5000000000000001;        float sina = 0.8660254037844386;        float fade = 1152.0;        vec2 center = vec2(400.0, 300.0);        vec4 rect = vec4(0.028, 0.021, 0.972, 0.979);        void main(){          vec2 p=texCoord*1.04-0.02;          vec3 c=(texture2D(texture,p).rgb-0.5)*1.3+0.6;          float lu=(c.r*0.3+c.g*0.59+c.b*0.11)*16.0-8.0;          if(texCoord.x<rect.t) lu+=(rect.t-texCoord.x)*fade;          else if(texCoord.x>rect.q) lu+=(texCoord.x-rect.q)*fade;          if(texCoord.y<rect.s) lu+=(rect.s-texCoord.y)*fade;          else if(texCoord.y>rect.p) lu+=(texCoord.y-rect.p)*fade;          p=gl_FragCoord.xy-center;          p=vec2(p.x*cosa-p.y*sina,p.x*sina+p.y*cosa)*size;          gl_FragColor=vec4(clamp(vec3(lu+sin(p.x)*sin(p.y)*4.0),0.0,1.0),1.0);        }    "),a.call(this,it.magazine,{size:e}),this}function I(e,t,n){return it.rainbow=it.rainbow||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        uniform float radius;        uniform float border;        uniform float ratio;        void main(){          vec2 p=texCoord-0.5;          float r=radius/texSize.y,b=length(max(abs(vec2(p.x*texSize.x/texSize.y,p.y)/r)-vec2(0.5*ratio,0.5)/r+border,0.0));          gl_FragColor=vec4(1.0-(1.0-texture2D(texture,texCoord).rgb)*clamp(smoothstep(1.02,0.98,b),0.0,1.0),1.0);        }    "),a.call(this,it.rainbow,{border:e,radius:t,ratio:n}),this}function O(e,t,n){return it.snow=it.snow||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        uniform vec2 center;        uniform float radius;        uniform float width;        const vec3 frost=vec3(0.9,1.1,1.5);        void main(){          vec3 c=texture2D(texture,texCoord).rgb;          float attn,outerRadius=radius+width,dist=distance(texCoord*texSize,center);          if(dist<radius) attn=0.0;          else if(dist>outerRadius) attn=1.0;          else attn=(dist-radius)/width;attn=max(0.1,attn);          gl_FragColor=vec4((1.0-(1.0-c)*(1.0-attn))*frost,1.0);        }    "),a.call(this,it.snow,{center:e,radius:t,width:n}),this}function P(e,t,n){return it.fire=it.fire||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        float PI = 3.14159265;        float WAVELENGTH = 26.0;        float AMPLITUDE = 0.0125;        float SPEED = 3.0;        uniform sampler2D frame1;        uniform sampler2D frame2;        uniform sampler2D frame3;        uniform sampler2D frame4;        uniform sampler2D frame5;        uniform sampler2D frame6;        uniform float time;        uniform float left;        uniform float right;        const vec3 fire=vec3(0.9,0.3,0.0);        const vec3 fire2=vec3(1.2,1.0,0.8);        vec3 mod289(vec3 x){          return x-floor(x*(1.0/289.0))*289.0;        }        vec4 mod289(vec4 x){          return x-floor(x*(1.0/289.0))*289.0;        }        vec4 permute(vec4 x){          return mod289(((x*34.0)+1.0)*x);        }        vec4 taylorInvSqrt(vec4 r){          return 1.79284291400159-0.85373472095314*r;        }        vec3 fade(vec3 t){          return t*t*t*(t*(t*6.0-15.0)+10.0);        }        float noise(vec3 P){          vec3 Pi0=floor(P),Pi1=Pi0+vec3(1.0);          Pi0=mod289(Pi0);          Pi1=mod289(Pi1);          vec3 Pf0=fract(P),Pf1=Pf0-vec3(1.0);          vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x),iy=vec4(Pi0.yy,Pi1.yy),iz0=Pi0.zzzz,iz1=Pi1.zzzz,ixy=permute(permute(ix)+iy),ixy0=permute(ixy+iz0),ixy1=permute(ixy+iz1),gx0=ixy0*(1.0/7.0),gy0=fract(floor(gx0)*(1.0/7.0))-0.5;          gx0=fract(gx0);          vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0),sz0=step(gz0,vec4(0.0));          gx0-=sz0*(step(0.0,gx0)-0.5);          gy0-=sz0*(step(0.0,gy0)-0.5);          vec4 gx1=ixy1*(1.0/7.0),gy1=fract(floor(gx1)*(1.0/7.0))-0.5;          gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1),sz1=step(gz1,vec4(0.0));          gx1-=sz1*(step(0.0,gx1)-0.5);          gy1-=sz1*(step(0.0,gy1)-0.5);          vec3 g000=vec3(gx0.x,gy0.x,gz0.x),g100=vec3(gx0.y,gy0.y,gz0.y),g010=vec3(gx0.z,gy0.z,gz0.z),g110=vec3(gx0.w,gy0.w,gz0.w),g001=vec3(gx1.x,gy1.x,gz1.x),g101=vec3(gx1.y,gy1.y,gz1.y),g011=vec3(gx1.z,gy1.z,gz1.z),g111=vec3(gx1.w,gy1.w,gz1.w);          vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));          g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;          g110*=norm0.w;          vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));          g001*=norm1.x;g011*=norm1.y;          g101*=norm1.z;g111*=norm1.w;          float n000=dot(g000,Pf0),n100=dot(g100,vec3(Pf1.x,Pf0.yz)),n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z)),n110=dot(g110,vec3(Pf1.xy,Pf0.z)),n001=dot(g001,vec3(Pf0.xy,Pf1.z)),n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z)),n011=dot(g011,vec3(Pf0.x,Pf1.yz)),n111=dot(g111,Pf1);          vec3 fade_xyz=fade(Pf0);          vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);          vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);          return mix(n_yz.x,n_yz.y,fade_xyz.x);        }        float diff(vec3 c1,vec3 c2){c1=(c1-c2)*5.0;          return clamp(c1.r+c1.g+c1.b,0.2,1.2)-0.2;        }        void main(){          if(texCoord.x<left||texCoord.x>right) gl_FragColor=vec4(0.0);          else{vec2 p=texCoord+sin(vec2(noise(vec3(texCoord,time*SPEED)*WAVELENGTH)*PI*AMPLITUDE,noise(vec3(texCoord,(time+1.0)*SPEED)*WAVELENGTH)*PI*AMPLITUDE));            vec3 c0=texture2D(texture,p).rgb,c1=texture2D(frame6,p).rgb,c2=texture2D(frame5,p).rgb,c3=texture2D(frame4,p).rgb,c4=texture2D(frame3,p).rgb,c5=texture2D(frame2,p).rgb,c6=texture2D(frame1,p).rgb;            float c=diff(c0,c1)*2.0;            c+=diff(c1,c2);            c+=diff(c2,c3);            c+=diff(c3,c4);            c+=diff(c4,c5)*0.5;            c+=diff(c5,c6)*0.125;gl_FragColor=vec4(texture2D(texture,texCoord).rgb*fire2+c*fire,1.0);          }        }    "),a.call(this,it.fire,{time:e,left:t,right:n}),this}function D(){return it.crosshatch=it.crosshatch||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        void main(){          vec3 c=(texture2D(texture,texCoord).rgb-0.5)*1.5+0.7;          float lu=c.r*0.3+c.g*0.59+c.b*0.11,p0=gl_FragCoord.x+gl_FragCoord.y,p1=gl_FragCoord.x-gl_FragCoord.y,h=1.0;          if(lu<0.75&&mod(p0,8.0)==0.0 ||            lu<0.5&&mod(p1,8.0)==0.0 ||            lu<0.4&&mod(p0-4.0,8.0)==0.0 ||            lu<0.3&&mod(p1-4.0,8.0)==0.0 ||            lu<0.2&&mod(p0-2.0,4.0)==0.0 ||            lu<0.1&&mod(p1-2.0,4.0)==0.0) h=0.0;gl_FragColor=vec4(h,h,h,1.0);        }    "),a.call(this,it.crosshatch,{}),this}function L(e,t,n,i){return it.cocoa=it.cocoa||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        uniform float R_LU;        uniform float G_LU;        uniform float B_LU;        uniform float SAT;        uniform sampler2D texture2;        float fade = 60.0;        vec4 rect = vec4(0.022, 0.0165, 0.978, 0.9835);        vec2 center = vec2(400, 300);        float radius = 133.33333333333334;        float width = 348.0;        const vec3 tint=vec3(0.0,-0.18,-0.28);        void main(){          vec2 p=texCoord*1.025-0.0125;          vec3 c0=1.0-(1.0-texture2D(texture,p).rgb)*(1.0-texture2D(texture2,p).rgb);          vec3 c;          c.r=((R_LU+(1.0-R_LU)*SAT)*c0.r)+((G_LU-G_LU*SAT)*c0.g)+((B_LU-B_LU*SAT)*c0.b);          c.g=((R_LU-R_LU*SAT)*c0.r)+((G_LU+(1.0-G_LU)*SAT)*c0.g)+((B_LU-B_LU*SAT)*c0.b);          c.b=((R_LU-R_LU*SAT)*c0.r)+((G_LU-G_LU*SAT)*c0.g)+((B_LU+(1.0-B_LU)*SAT)*c0.b);          c+=tint*(1.0-c);          float attn,outerRadius=radius+width,dist=distance(p*texSize,center),bc=0.0;          if(texCoord.x<rect.t) bc=(rect.t-texCoord.x)*fade;          else if(texCoord.x>rect.q) bc=(texCoord.x-rect.q)*fade;          if(texCoord.y<rect.s) bc+=(rect.s-texCoord.y)*fade;          else if(texCoord.y>rect.p) bc+=(texCoord.y-rect.p)*fade;          if(dist<radius) attn=1.0;          else if(dist>outerRadius) attn=0.0;          else attn=1.0-pow((dist-radius)/width,1.4);          gl_FragColor=vec4(clamp((c*vec3(attn,attn-0.09,attn-0.14)-bc),0.0,1.0),1.0);        }    "),a.call(this,it.cocoa,{R_LU:e,G_LU:t,B_LU:n,SAT:i}),this}function N(e,t,n,i){return it.zinc=it.zinc||new rt(null,"        uniform sampler2D texture;        uniform vec2 texSize;        varying vec2 texCoord;        uniform sampler2D texture2;        uniform float fade;        uniform vec4 rect;        uniform float R_LU;        uniform float G_LU;        uniform float B_LU;        uniform float SAT;        void main(){            const vec3 tint=vec3(0.16,0.0,0.08);            const vec3 cyan=vec3(0.96,1.16,1.1);            vec2 p=texCoord*1.025-0.0125;            vec3 c0=(1.0-(1.0-0.5*texture2D(texture,p).rgb)*(1.0-texture2D(texture2,p).rgb));            vec3 c;            c.r=((R_LU+(1.0-R_LU)*SAT)*c0.r)+((G_LU-G_LU*SAT)*c0.g)+((B_LU-B_LU*SAT)*c0.b);            c.g=((R_LU-R_LU*SAT)*c0.r)+((G_LU+(1.0-G_LU)*SAT)*c0.g)+((B_LU-B_LU*SAT)*c0.b);            c.b=((R_LU-R_LU*SAT)*c0.r)+((G_LU-G_LU*SAT)*c0.g)+((B_LU+(1.0-B_LU)*SAT)*c0.b);            c*=cyan;            c+=tint*(1.0-c);            float bc=0.0;            if(texCoord.x<rect.t) bc=(rect.t-texCoord.x)*fade;            else if(texCoord.x>rect.q) bc=(texCoord.x-rect.q)*fade;            if(texCoord.y<rect.s) bc+=(rect.s-texCoord.y)*fade;            else if(texCoord.y>rect.p) bc+=(texCoord.y-rect.p)*fade;            gl_FragColor=vec4(clamp((c-bc),0.0,1.0),1.0);        }    "),a.call(this,it.zinc,{R_LU:e,G_LU:t,B_LU:n,SAT:i}),this}function M(t,n){return it.hueSaturation=it.hueSaturation||new rt(null,"        uniform sampler2D texture;        uniform float hue;        uniform float saturation;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);                        /* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */            float angle = hue * 3.14159265;            float s = sin(angle), c = cos(angle);            vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;            float len = length(color.rgb);            color.rgb = vec3(                dot(color.rgb, weights.xyz),                dot(color.rgb, weights.zxy),                dot(color.rgb, weights.yzx)            );                        /* saturation adjustment */            float average = (color.r + color.g + color.b) / 3.0;            if (saturation > 0.0) {                color.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));            } else {                color.rgb += (average - color.rgb) * (-saturation);            }                        gl_FragColor = color;        }    "),a.call(this,it.hueSaturation,{hue:e(-1,t,1),saturation:e(-1,n,1)}),this}function B(t){return it.noise=it.noise||new rt(null,"        uniform sampler2D texture;        uniform float amount;        varying vec2 texCoord;        float rand(vec2 co) {            return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);        }        void main() {            vec4 color = texture2D(texture, texCoord);                        float diff = (rand(texCoord) - 0.5) * amount;            color.r += diff;            color.g += diff;            color.b += diff;                        gl_FragColor = color;        }    "),a.call(this,it.noise,{amount:e(0,t,1)}),this}function F(t){return it.sepia=it.sepia||new rt(null,"        uniform sampler2D texture;        uniform float amount;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            float r = color.r;            float g = color.g;            float b = color.b;                        color.r = min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));            color.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));            color.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));                        gl_FragColor = color;        }    "),a.call(this,it.sepia,{amount:e(0,t,1)}),this}function U(e,t){return it.unsharpMask=it.unsharpMask||new rt(null,"        uniform sampler2D blurredTexture;        uniform sampler2D originalTexture;        uniform float strength;        uniform float threshold;        varying vec2 texCoord;        void main() {            vec4 blurred = texture2D(blurredTexture, texCoord);            vec4 original = texture2D(originalTexture, texCoord);            gl_FragColor = mix(blurred, original, 1.0 + strength);        }    "),this._.extraTexture.ensureFormat(this._.texture),this._.texture.use(),this._.extraTexture.drawTo(function(){rt.getDefaultShader().drawRect()}),this._.extraTexture.use(1),this.triangleBlur(e),it.unsharpMask.textures({originalTexture:1}),a.call(this,it.unsharpMask,{strength:t}),this._.extraTexture.unuse(1),this}function H(t){return it.vibrance=it.vibrance||new rt(null,"        uniform sampler2D texture;        uniform float amount;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            float average = (color.r + color.g + color.b) / 3.0;            float mx = max(color.r, max(color.g, color.b));            float amt = (mx - average) * (-amount * 3.0);            color.rgb = mix(color.rgb, vec3(mx), amt);            gl_FragColor = color;        }    "),a.call(this,it.vibrance,{amount:e(-1,t,1)}),this}function V(t,n){return it.vignette=it.vignette||new rt(null,"        uniform sampler2D texture;        uniform float size;        uniform float amount;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);                        float dist = distance(texCoord, vec2(0.5, 0.5));            color.rgb *= smoothstep(0.8, size * 0.799, dist * (amount + size));                        gl_FragColor = color;        }    "),a.call(this,it.vignette,{size:e(0,t,1),amount:e(0,n,1)}),this}function W(t,n,i){it.lensBlurPrePass=it.lensBlurPrePass||new rt(null,"        uniform sampler2D texture;        uniform float power;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            color = pow(color, vec4(power));            gl_FragColor = vec4(color);        }    ");var r="        uniform sampler2D texture0;        uniform sampler2D texture1;        uniform vec2 delta0;        uniform vec2 delta1;        uniform float power;        varying vec2 texCoord;        "+at+"        vec4 sample(vec2 delta) {            /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(delta, 151.7182), 0.0);                        vec4 color = vec4(0.0);            float total = 0.0;            for (float t = 0.0; t <= 30.0; t++) {                float percent = (t + offset) / 30.0;                color += texture2D(texture0, texCoord + delta * percent);                total += 1.0;            }            return color / total;        }    ";it.lensBlur0=it.lensBlur0||new rt(null,r+"        void main() {            gl_FragColor = sample(delta0);        }    "),it.lensBlur1=it.lensBlur1||new rt(null,r+"        void main() {            gl_FragColor = (sample(delta0) + sample(delta1)) * 0.5;        }    "),it.lensBlur2=it.lensBlur2||new rt(null,r+"        void main() {            vec4 color = (sample(delta0) + 2.0 * texture2D(texture1, texCoord)) / 3.0;            gl_FragColor = pow(color, vec4(power));        }    ").textures({texture1:1});for(var o=[],s=0;3>s;s++){var c=i+s*Math.PI*2/3;o.push([t*Math.sin(c)/this.width,t*Math.cos(c)/this.height])}var l=Math.pow(10,e(-1,n,1));return a.call(this,it.lensBlurPrePass,{power:l}),this._.extraTexture.ensureFormat(this._.texture),a.call(this,it.lensBlur0,{delta0:o[0]},this._.texture,this._.extraTexture),a.call(this,it.lensBlur1,{delta0:o[1],delta1:o[2]},this._.extraTexture,this._.extraTexture),a.call(this,it.lensBlur0,{delta0:o[1]}),this._.extraTexture.use(1),a.call(this,it.lensBlur2,{power:1/l,delta0:o[2]}),this}function z(e,t,n,i,r,o){it.tiltShift=it.tiltShift||new rt(null,"        uniform sampler2D texture;        uniform float blurRadius;        uniform float gradientRadius;        uniform vec2 start;        uniform vec2 end;        uniform vec2 delta;        uniform vec2 texSize;        varying vec2 texCoord;        "+at+"        void main() {            vec4 color = vec4(0.0);            float total = 0.0;                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));            float radius = smoothstep(0.0, 1.0, abs(dot(texCoord * texSize - start, normal)) / gradientRadius) * blurRadius;            for (float t = -30.0; t <= 30.0; t++) {                float percent = (t + offset - 0.5) / 30.0;                float weight = 1.0 - abs(percent);                vec4 sample = texture2D(texture, texCoord + delta / texSize * percent * radius);                                /* switch to pre-multiplied alpha to correctly blur transparent images */                sample.rgb *= sample.a;                                color += sample * weight;                total += weight;            }                        gl_FragColor = color / total;                        /* switch back from pre-multiplied alpha */            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;        }    ");var s=n-e,c=i-t,l=Math.sqrt(s*s+c*c);return a.call(this,it.tiltShift,{blurRadius:r,gradientRadius:o,start:[e,t],end:[n,i],delta:[s/l,c/l],texSize:[this.width,this.height]}),a.call(this,it.tiltShift,{blurRadius:r,gradientRadius:o,start:[e,t],end:[n,i],delta:[-c/l,s/l],texSize:[this.width,this.height]}),this}function $(e){return it.triangleBlur=it.triangleBlur||new rt(null,"        uniform sampler2D texture;        uniform vec2 delta;        varying vec2 texCoord;        "+at+"        void main() {            vec4 color = vec4(0.0);            float total = 0.0;                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        for (float t = -30.0; t <= 30.0; t++) {                float percent = (t + offset - 0.5) / 30.0;                float weight = 1.0 - abs(percent);                vec4 sample = texture2D(texture, texCoord + delta * percent);                                /* switch to pre-multiplied alpha to correctly blur transparent images */                sample.rgb *= sample.a;                                color += sample * weight;                total += weight;            }                        gl_FragColor = color / total;                        /* switch back from pre-multiplied alpha */            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;        }    "),a.call(this,it.triangleBlur,{delta:[e/this.width,0]}),a.call(this,it.triangleBlur,{delta:[0,e/this.height]}),this}function G(e,t,n){return it.zoomBlur=it.zoomBlur||new rt(null,"        uniform sampler2D texture;        uniform vec2 center;        uniform float strength;        uniform vec2 texSize;        varying vec2 texCoord;        "+at+"        void main() {            vec4 color = vec4(0.0);            float total = 0.0;            vec2 toCenter = center - texCoord * texSize;                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        for (float t = 0.0; t <= 40.0; t++) {                float percent = (t + offset) / 40.0;                float weight = 4.0 * (percent - percent * percent);                vec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);                                /* switch to pre-multiplied alpha to correctly blur transparent images */                sample.rgb *= sample.a;                                color += sample * weight;                total += weight;            }                        gl_FragColor = color / total;                        /* switch back from pre-multiplied alpha */            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;        }    "),a.call(this,it.zoomBlur,{center:[e,t],strength:n,texSize:[this.width,this.height]}),this}function Y(e,t,n,i){return it.colorHalftone=it.colorHalftone||new rt(null,"        uniform sampler2D texture;        uniform vec2 center;        uniform float angle;        uniform float scale;        uniform vec2 texSize;        varying vec2 texCoord;                float pattern(float angle) {            float s = sin(angle), c = cos(angle);            vec2 tex = texCoord * texSize - center;            vec2 point = vec2(                c * tex.x - s * tex.y,                s * tex.x + c * tex.y            ) * scale;            return (sin(point.x) * sin(point.y)) * 4.0;        }                void main() {            vec4 color = texture2D(texture, texCoord);            vec3 cmy = 1.0 - color.rgb;            float k = min(cmy.x, min(cmy.y, cmy.z));            cmy = (cmy - k) / (1.0 - k);            cmy = clamp(cmy * 10.0 - 3.0 + vec3(pattern(angle + 0.26179), pattern(angle + 1.30899), pattern(angle)), 0.0, 1.0);            k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539), 0.0, 1.0);            gl_FragColor = vec4(1.0 - cmy - k, color.a);        }    "),a.call(this,it.colorHalftone,{center:[e,t],angle:n,scale:Math.PI/i,texSize:[this.width,this.height]}),this}function Q(e,t,n,i){return it.dotScreen=it.dotScreen||new rt(null,"        uniform sampler2D texture;        uniform vec2 center;        uniform float angle;        uniform float scale;        uniform vec2 texSize;        varying vec2 texCoord;                float pattern() {            float s = sin(angle), c = cos(angle);            vec2 tex = texCoord * texSize - center;            vec2 point = vec2(                c * tex.x - s * tex.y,                s * tex.x + c * tex.y            ) * scale;            return (sin(point.x) * sin(point.y)) * 4.0;        }                void main() {            vec4 color = texture2D(texture, texCoord);            float average = (color.r + color.g + color.b) / 3.0;            gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);        }    "),a.call(this,it.dotScreen,{center:[e,t],angle:n,scale:Math.PI/i,texSize:[this.width,this.height]}),this}function J(e){return it.edgeWork1=it.edgeWork1||new rt(null,"        uniform sampler2D texture;        uniform vec2 delta;        varying vec2 texCoord;        "+at+"        void main() {            vec2 color = vec2(0.0);            vec2 total = vec2(0.0);                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        for (float t = -30.0; t <= 30.0; t++) {                float percent = (t + offset - 0.5) / 30.0;                float weight = 1.0 - abs(percent);                vec3 sample = texture2D(texture, texCoord + delta * percent).rgb;                float average = (sample.r + sample.g + sample.b) / 3.0;                color.x += average * weight;                total.x += weight;                if (abs(t) < 15.0) {                    weight = weight * 2.0 - 1.0;                    color.y += average * weight;                    total.y += weight;                }            }            gl_FragColor = vec4(color / total, 0.0, 1.0);        }    "),it.edgeWork2=it.edgeWork2||new rt(null,"        uniform sampler2D texture;        uniform vec2 delta;        varying vec2 texCoord;        "+at+"        void main() {            vec2 color = vec2(0.0);            vec2 total = vec2(0.0);                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        for (float t = -30.0; t <= 30.0; t++) {                float percent = (t + offset - 0.5) / 30.0;                float weight = 1.0 - abs(percent);                vec2 sample = texture2D(texture, texCoord + delta * percent).xy;                color.x += sample.x * weight;                total.x += weight;                if (abs(t) < 15.0) {                    weight = weight * 2.0 - 1.0;                    color.y += sample.y * weight;                    total.y += weight;                }            }            float c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);            gl_FragColor = vec4(c, c, c, 1.0);        }    "),a.call(this,it.edgeWork1,{delta:[e/this.width,0]}),a.call(this,it.edgeWork2,{delta:[0,e/this.height]}),this}function q(e,t,n){return it.hexagonalPixelate=it.hexagonalPixelate||new rt(null,"        uniform sampler2D texture;        uniform vec2 center;        uniform float scale;        uniform vec2 texSize;        varying vec2 texCoord;        void main() {            vec2 tex = (texCoord * texSize - center) / scale;            tex.y /= 0.866025404;            tex.x -= tex.y * 0.5;                        vec2 a;            if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) a = vec2(floor(tex.x), floor(tex.y));            else a = vec2(ceil(tex.x), ceil(tex.y));            vec2 b = vec2(ceil(tex.x), floor(tex.y));            vec2 c = vec2(floor(tex.x), ceil(tex.y));                        vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);            vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);            vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);            vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);                        float alen = length(TEX - A);            float blen = length(TEX - B);            float clen = length(TEX - C);                        vec2 choice;            if (alen < blen) {                if (alen < clen) choice = a;                else choice = c;            } else {                if (blen < clen) choice = b;                else choice = c;            }                        choice.x += choice.y * 0.5;            choice.y *= 0.866025404;            choice *= scale / texSize;            gl_FragColor = texture2D(texture, choice + center / texSize);        }    "),a.call(this,it.hexagonalPixelate,{center:[e,t],scale:n,texSize:[this.width,this.height]}),this
}function X(e){return it.ink=it.ink||new rt(null,"        uniform sampler2D texture;        uniform float strength;        uniform vec2 texSize;        varying vec2 texCoord;        void main() {            vec2 dx = vec2(1.0 / texSize.x, 0.0);            vec2 dy = vec2(0.0, 1.0 / texSize.y);            vec4 color = texture2D(texture, texCoord);            float bigTotal = 0.0;            float smallTotal = 0.0;            vec3 bigAverage = vec3(0.0);            vec3 smallAverage = vec3(0.0);            for (float x = -2.0; x <= 2.0; x += 1.0) {                for (float y = -2.0; y <= 2.0; y += 1.0) {                    vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;                    bigAverage += sample;                    bigTotal += 1.0;                    if (abs(x) + abs(y) < 2.0) {                        smallAverage += sample;                        smallTotal += 1.0;                    }                }            }            vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);            gl_FragColor = vec4(color.rgb - dot(edge, edge) * strength * 100000.0, color.a);        }    "),a.call(this,it.ink,{strength:e*e*e*e*e,texSize:[this.width,this.height]}),this}function K(t,n,i,r){return it.bulgePinch=it.bulgePinch||g("        uniform float radius;        uniform float strength;        uniform vec2 center;    ","        coord -= center;        float distance = length(coord);        if (distance < radius) {            float percent = distance / radius;            if (strength > 0.0) {                coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);            } else {                coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);            }        }        coord += center;    "),a.call(this,it.bulgePinch,{radius:i,strength:e(-1,r,1),center:[t,n],texSize:[this.width,this.height]}),this}function Z(e,t,n){if(it.matrixWarp=it.matrixWarp||g("        uniform mat3 matrix;        uniform bool useTextureSpace;    ","        if (useTextureSpace) coord = coord / texSize * 2.0 - 1.0;        vec3 warp = matrix * vec3(coord, 1.0);        coord = warp.xy / warp.z;        if (useTextureSpace) coord = (coord * 0.5 + 0.5) * texSize;    "),e=Array.prototype.concat.apply([],e),4==e.length)e=[e[0],e[1],0,e[2],e[3],0,0,0,1];else if(9!=e.length)throw"can only warp with 2x2 or 3x3 matrix";return a.call(this,it.matrixWarp,{matrix:t?p(e):e,texSize:[this.width,this.height],useTextureSpace:0|n}),this}function et(e,t){var n=d.apply(null,t),i=d.apply(null,e),r=f(p(n),i);return this.matrixWarp(r)}function tt(e,t,n,i){return it.swirl=it.swirl||g("        uniform float radius;        uniform float angle;        uniform vec2 center;    ","        coord -= center;        float distance = length(coord);        if (distance < radius) {            float percent = (radius - distance) / radius;            float theta = percent * percent * angle;            float s = sin(theta);            float c = cos(theta);            coord = vec2(                coord.x * c - coord.y * s,                coord.x * s + coord.y * c            );        }        coord += center;    "),a.call(this,it.swirl,{radius:n,center:[e,t],angle:i,texSize:[this.width,this.height]}),this}var nt={};!function(){function e(e){if(!e.getExtension("OES_texture_float"))return!1;var t=e.createFramebuffer(),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var i=[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.FLOAT,new Float32Array(i));var o=e.createProgram(),a=e.createShader(e.VERTEX_SHADER),s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,"      attribute vec2 vertex;      void main() {        gl_Position = vec4(vertex, 0.0, 1.0);      }    "),e.shaderSource(s,"      uniform sampler2D texture;      void main() {        gl_FragColor = texture2D(texture, vec2(0.5));      }    "),e.compileShader(a),e.compileShader(s),e.attachShader(o,a),e.attachShader(o,s),e.linkProgram(o);var c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STREAM_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0);var l=new Uint8Array(4);return e.useProgram(o),e.viewport(0,0,1,1),e.bindTexture(e.TEXTURE_2D,r),e.drawArrays(e.POINTS,0,1),e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,l),127===l[0]||128===l[0]}function t(){}function n(e){return void 0===e.$OES_texture_float_linear$&&Object.defineProperty(e,"$OES_texture_float_linear$",{enumerable:!1,configurable:!1,writable:!1,value:new t}),e.$OES_texture_float_linear$}function i(e){return"OES_texture_float_linear"===e?n(this):s.call(this,e)}function r(){var e=c.call(this);return-1===e.indexOf("OES_texture_float_linear")&&e.push("OES_texture_float_linear"),e}try{var o=document.createElement("canvas").getContext("experimental-webgl")}catch(a){}if(o&&-1===o.getSupportedExtensions().indexOf("OES_texture_float_linear")&&e(o)){var s=WebGLRenderingContext.prototype.getExtension,c=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getExtension=i,WebGLRenderingContext.prototype.getSupportedExtensions=r}}();var it;nt.canvas=function(){var e=document.createElement("canvas");try{it=e.getContext("experimental-webgl",{premultipliedAlpha:!1})}catch(t){it=null}if(!it)throw"This browser does not support WebGL";return e._={gl:it,isInitialized:!1,texture:null,spareTexture:null,flippedShader:null},e.texture=u(n),e.draw=u(r),e.update=u(o),e.replace=u(s),e.contents=u(c),e.getPixelArray=u(l),e.brightnessContrast=u(m),e.hexagonalPixelate=u(q),e.hueSaturation=u(M),e.colorHalftone=u(Y),e.triangleBlur=u($),e.unsharpMask=u(U),e.perspective=u(et),e.matrixWarp=u(Z),e.bulgePinch=u(K),e.tiltShift=u(z),e.dotScreen=u(Q),e.edgeWork=u(J),e.lensBlur=u(W),e.zoomBlur=u(G),e.noise=u(B),e.denoise=u(_),e.zinc=u(N),e.nightvision=u(x),e.posterize=u(j),e.murica=u(S),e.badtv=u(k),e.snow=u(O),e.fire=u(P),e.rainbow=u(I),e.cocoa=u(L),e.bokeh=u(b),e.flare=u(w),e.magazine=u(R),e.crosshatch=u(D),e.spycam=u(T),e.halo=u(A),e.smoke=u(C),e.berry=u(E),e.curves=u(y),e.swirl=u(tt),e.ink=u(X),e.vignette=u(V),e.vibrance=u(H),e.sepia=u(F),e},nt.splineInterpolate=v;var rt=function(){function e(e){return"[object Array]"==Object.prototype.toString.call(e)}function t(e){return"[object Number]"==Object.prototype.toString.call(e)}function n(e,t){var n=it.createShader(e);if(it.shaderSource(n,t),it.compileShader(n),!it.getShaderParameter(n,it.COMPILE_STATUS))throw"compile error: "+it.getShaderInfoLog(n);return n}function i(e,t){if(this.vertexAttribute=null,this.texCoordAttribute=null,this.program=it.createProgram(),e=e||r,t=t||o,t="precision highp float;"+t,it.attachShader(this.program,n(it.VERTEX_SHADER,e)),it.attachShader(this.program,n(it.FRAGMENT_SHADER,t)),it.linkProgram(this.program),!it.getProgramParameter(this.program,it.LINK_STATUS))throw"link error: "+it.getProgramInfoLog(this.program)}var r="    attribute vec2 vertex;    attribute vec2 _texCoord;    varying vec2 texCoord;    void main() {        texCoord = _texCoord;        gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);    }",o="    uniform sampler2D texture;    varying vec2 texCoord;    void main() {        gl_FragColor = texture2D(texture, texCoord);    }";return i.prototype.destroy=function(){it.deleteProgram(this.program),this.program=null},i.prototype.uniforms=function(n){it.useProgram(this.program);for(var i in n)if(n.hasOwnProperty(i)){var r=it.getUniformLocation(this.program,i);if(null!==r){var o=n[i];if(e(o))switch(o.length){case 1:it.uniform1fv(r,new Float32Array(o));break;case 2:it.uniform2fv(r,new Float32Array(o));break;case 3:it.uniform3fv(r,new Float32Array(o));break;case 4:it.uniform4fv(r,new Float32Array(o));break;case 9:it.uniformMatrix3fv(r,!1,new Float32Array(o));break;case 16:it.uniformMatrix4fv(r,!1,new Float32Array(o));break;default:throw"dont't know how to load uniform \""+i+'" of length '+o.length}else{if(!t(o))throw'attempted to set uniform "'+i+'" to invalid value '+(o||"undefined").toString();it.uniform1f(r,o)}}}return this},i.prototype.textures=function(e){it.useProgram(this.program);for(var t in e)e.hasOwnProperty(t)&&it.uniform1i(it.getUniformLocation(this.program,t),e[t]);return this},i.prototype.drawRect=function(e,t,n,i){var r,o=it.getParameter(it.VIEWPORT);t=t!==r?(t-o[1])/o[3]:0,e=e!==r?(e-o[0])/o[2]:0,n=n!==r?(n-o[0])/o[2]:1,i=i!==r?(i-o[1])/o[3]:1,null==it.vertexBuffer&&(it.vertexBuffer=it.createBuffer()),it.bindBuffer(it.ARRAY_BUFFER,it.vertexBuffer),it.bufferData(it.ARRAY_BUFFER,new Float32Array([e,t,e,i,n,t,n,i]),it.STATIC_DRAW),null==it.texCoordBuffer&&(it.texCoordBuffer=it.createBuffer(),it.bindBuffer(it.ARRAY_BUFFER,it.texCoordBuffer),it.bufferData(it.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),it.STATIC_DRAW)),null==this.vertexAttribute&&(this.vertexAttribute=it.getAttribLocation(this.program,"vertex"),it.enableVertexAttribArray(this.vertexAttribute)),null==this.texCoordAttribute&&(this.texCoordAttribute=it.getAttribLocation(this.program,"_texCoord"),it.enableVertexAttribArray(this.texCoordAttribute)),it.useProgram(this.program),it.bindBuffer(it.ARRAY_BUFFER,it.vertexBuffer),it.vertexAttribPointer(this.vertexAttribute,2,it.FLOAT,!1,0,0),it.bindBuffer(it.ARRAY_BUFFER,it.texCoordBuffer),it.vertexAttribPointer(this.texCoordAttribute,2,it.FLOAT,!1,0,0),it.drawArrays(it.TRIANGLE_STRIP,0,4)},i.getDefaultShader=function(){return it.defaultShader=it.defaultShader||new i,it.defaultShader},i}();h.prototype.interpolate=function(e){for(var t=this.ya.length,n=0,i=t-1;i-n>1;){var r=i+n>>1;this.xa[r]>e?i=r:n=r}var o=this.xa[i]-this.xa[n],a=(this.xa[i]-e)/o,s=(e-this.xa[n])/o;return a*this.ya[n]+s*this.ya[i]+((a*a*a-a)*this.y2[n]+(s*s*s-s)*this.y2[i])*o*o/6};var ot=function(){function e(e,t,n,i){this.gl=it,this.id=it.createTexture(),this.width=e,this.height=t,this.format=n,this.type=i,it.bindTexture(it.TEXTURE_2D,this.id),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_MAG_FILTER,it.LINEAR),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_MIN_FILTER,it.LINEAR),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_WRAP_S,it.CLAMP_TO_EDGE),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_WRAP_T,it.CLAMP_TO_EDGE),e&&t&&it.texImage2D(it.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null)}function t(e){null==n&&(n=document.createElement("canvas")),n.width=e.width,n.height=e.height;var t=n.getContext("2d");return t.clearRect(0,0,n.width,n.height),t}e.fromElement=function(t){var n=new e(0,0,it.RGBA,it.UNSIGNED_BYTE);return n.loadContentsOf(t),n},e.prototype.loadContentsOf=function(e){this.width=e.width||e.videoWidth,this.height=e.height||e.videoHeight,it.bindTexture(it.TEXTURE_2D,this.id),it.texImage2D(it.TEXTURE_2D,0,this.format,this.format,this.type,e)},e.prototype.initFromBytes=function(e,t,n){this.width=e,this.height=t,this.format=it.RGBA,this.type=it.UNSIGNED_BYTE,it.bindTexture(it.TEXTURE_2D,this.id),it.texImage2D(it.TEXTURE_2D,0,it.RGBA,e,t,0,it.RGBA,this.type,new Uint8Array(n))},e.prototype.destroy=function(){it.deleteTexture(this.id),this.id=null},e.prototype.use=function(e){it.activeTexture(it.TEXTURE0+(e||0)),it.bindTexture(it.TEXTURE_2D,this.id)},e.prototype.unuse=function(e){it.activeTexture(it.TEXTURE0+(e||0)),it.bindTexture(it.TEXTURE_2D,null)},e.prototype.ensureFormat=function(e,t,n,i){if(1==arguments.length){var r=arguments[0];e=r.width,t=r.height,n=r.format,i=r.type}(e!=this.width||t!=this.height||n!=this.format||i!=this.type)&&(this.width=e,this.height=t,this.format=n,this.type=i,it.bindTexture(it.TEXTURE_2D,this.id),it.texImage2D(it.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null))},e.prototype.drawTo=function(e){if(it.framebuffer=it.framebuffer||it.createFramebuffer(),it.bindFramebuffer(it.FRAMEBUFFER,it.framebuffer),it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,this.id,0),it.checkFramebufferStatus(it.FRAMEBUFFER)!==it.FRAMEBUFFER_COMPLETE)throw new Error("incomplete framebuffer");it.viewport(0,0,this.width,this.height),e(),it.bindFramebuffer(it.FRAMEBUFFER,null)};var n=null;return e.prototype.fillUsingCanvas=function(e){return e(t(this)),this.format=it.RGBA,this.type=it.UNSIGNED_BYTE,it.bindTexture(it.TEXTURE_2D,this.id),it.texImage2D(it.TEXTURE_2D,0,it.RGBA,it.RGBA,it.UNSIGNED_BYTE,n),this},e.prototype.toImage=function(e){this.use(),rt.getDefaultShader().drawRect();var i=this.width*this.height*4,r=new Uint8Array(i),o=t(this),a=o.createImageData(this.width,this.height);it.readPixels(0,0,this.width,this.height,it.RGBA,it.UNSIGNED_BYTE,r);for(var s=0;i>s;s++)a.data[s]=r[s];o.putImageData(a,0,0),e.src=n.toDataURL()},e.prototype.swapWith=function(e){var t;t=e.id,e.id=this.id,this.id=t,t=e.width,e.width=this.width,this.width=t,t=e.height,e.height=this.height,this.height=t,t=e.format,e.format=this.format,this.format=t},e}(),at="    float random(vec3 scale, float seed) {        /* use the fragment position for a different seed per-pixel */        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);    }";return nt}(),jwplayer=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n=window.webpackJsonpjwplayer;window.webpackJsonpjwplayer=function(i,o){for(var a,s,c=0,l=[];c<i.length;c++)s=i[c],r[s]&&l.push.apply(l,r[s]),r[s]=0;for(a in o)e[a]=o[a];for(n&&n(i,o);l.length;)l.shift().call(null,t)};var i={},r={0:0};return t.e=function(e,n){if(0===r[e])return n.call(null,t);if(void 0!==r[e])r[e].push(n);else{r[e]=[n];var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.src=t.p+""+({1:"polyfills.promise",2:"polyfills.base64",3:"provider.youtube",4:"provider.dashjs",5:"provider.shaka",6:"provider.cast"}[e]||e)+".js",i.appendChild(o)}},t.m=e,t.c=i,t.p="",t(0)}([function(e,t,n){e.exports=n(40)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,r;i=[n(41),n(174),n(45)],r=function(e,t,n){return window.jwplayer?window.jwplayer:n.extend(e,t)}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(42),n(48),n(168)],r=function(e,t){return n.p=t.loadFrom(),e.selectPlayer}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(43),n(98),n(45)],r=function(e,t,n){var i=e.selectPlayer,r=function(){var e=i.apply(this,arguments);return e?e:{registerPlugin:function(e,n,i){"jwpsrv"!==e&&t.registerPlugin(e,n,i)}}};return n.extend(e,{selectPlayer:r})}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(44),n(45),n(86),n(84),n(80),n(98)],r=function(e,t,n,i,r,o){function a(e){var o=e.getName().name;if(!t.find(r,t.matches({name:o}))){if(!t.isFunction(e.supports))throw{message:"Tried to register a provider with an invalid object"};r.unshift({name:o,supports:e.supports})}var a=function(){};a.prototype=n,e.prototype=new a,i[o]=e}var s=[],c=0,l=function(t){var n,i;return t?"string"==typeof t?(n=u(t),n||(i=document.getElementById(t))):"number"==typeof t?n=s[t]:t.nodeType&&(i=t,n=u(i.id)):n=s[0],n?n:i?d(new e(i,p)):{registerPlugin:o.registerPlugin}},u=function(e){for(var t=0;t<s.length;t++)if(s[t].id===e)return s[t];return null},d=function(e){return c++,e.uniqueId=c,s.push(e),e},p=function(e){for(var t=s.length;t--;)if(s[t].uniqueId===e.uniqueId){s.splice(t,1);break}},f={selectPlayer:l,registerProvider:a,availableProviders:r,registerPlugin:o.registerPlugin};return l.api=f,f}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(46),n(62),n(47),n(48),n(61),n(60),n(45),n(63),n(165),n(166),n(167),n(59)],r=function(e,t,n,i,r,o,a,s,c,l,u,d){var p=function(o,p){var f,h=this,g=!1,m={};a.extend(this,n),this.utils=i,this._=a,this.Events=n,this.version=d,this.trigger=function(e,t){return t=a.isObject(t)?a.extend({},t):{},t.type=e,window.jwplayer&&window.jwplayer.debug?n.trigger.call(h,e,t):n.triggerSafe.call(h,e,t)},this.dispatchEvent=this.trigger,this.removeEventListener=this.off.bind(this);var v=function(){f=new s(o),c(h,f),l(h,f),f.on(e.JWPLAYER_PLAYLIST_ITEM,function(){m={}}),f.on(e.JWPLAYER_MEDIA_META,function(e){a.extend(m,e.metadata)}),f.on(e.JWPLAYER_READY,function(e){g=!0,y.tick("ready"),e.setupTime=y.between("setup","ready")}),f.on("all",h.trigger)};v(),u(this),this.id=o.id;var y=this._qoe=new r;y.tick("init");var _=function(){g=!1,m={},h.off(),f&&f.off(),f&&f.playerDestroy&&f.playerDestroy()};return this.getPlugin=function(e){return h.plugins&&h.plugins[e]},this.addPlugin=function(e,t){this.plugins=this.plugins||{},this.plugins[e]=t,this.onReady(t.addToPlayer),t.resize&&this.onResize(t.resizeHandler)},this.setup=function(e){return y.tick("setup"),_(),v(),i.foreach(e.events,function(e,t){var n=h[e];"function"==typeof n&&n.call(h,t)}),e.id=h.id,f.setup(e,this),h},this.qoe=function(){var t=f.getItemQoe(),n=y.between("setup","ready"),i=t.between(e.JWPLAYER_MEDIA_PLAY_ATTEMPT,e.JWPLAYER_MEDIA_FIRST_FRAME);return{setupTime:n,firstFrame:i,player:y.dump(),item:t.dump()}},this.getContainer=function(){return f.getContainer?f.getContainer():o},this.getMeta=this.getItemMeta=function(){return m},this.getPlaylistItem=function(e){if(!i.exists(e))return f._model.get("playlistItem");var t=h.getPlaylist();return t?t[e]:null},this.getRenderingMode=function(){return"html5"},this.load=function(e){var t=this.getPlugin("vast")||this.getPlugin("googima");return t&&t.destroy(),f.load(e),h},this.play=function(e,n){if(a.isBoolean(e)||(n=e),n||(n={reason:"external"}),e===!0)return f.play(n),h;if(e===!1)return f.pause(),h;switch(e=h.getState()){case t.PLAYING:case t.BUFFERING:f.pause();break;default:f.play(n)}return h},this.pause=function(e){return a.isBoolean(e)?this.play(!e):this.play()},this.createInstream=function(){return f.createInstream()},this.castToggle=function(){f&&f.castToggle&&f.castToggle()},this.playAd=this.pauseAd=i.noop,this.remove=function(){return p(h),h.trigger("remove"),_(),h},this};return p}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){var e={},t=Array.prototype,n=Object.prototype,i=Function.prototype,r=t.slice,o=t.concat,a=n.toString,s=n.hasOwnProperty,c=t.map,l=t.reduce,u=t.forEach,d=t.filter,p=t.every,f=t.some,h=t.indexOf,g=Array.isArray,m=Object.keys,v=i.bind,y=function(e){return e instanceof y?e:this instanceof y?void 0:new y(e)},_=y.each=y.forEach=function(t,n,i){if(null==t)return t;if(u&&t.forEach===u)t.forEach(n,i);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(n.call(i,t[r],r,t)===e)return}else for(var a=y.keys(t),r=0,o=a.length;o>r;r++)if(n.call(i,t[a[r]],a[r],t)===e)return;return t};y.map=y.collect=function(e,t,n){var i=[];return null==e?i:c&&e.map===c?e.map(t,n):(_(e,function(e,r,o){i.push(t.call(n,e,r,o))}),i)};var b="Reduce of empty array with no initial value";y.reduce=y.foldl=y.inject=function(e,t,n,i){var r=arguments.length>2;if(null==e&&(e=[]),l&&e.reduce===l)return i&&(t=y.bind(t,i)),r?e.reduce(t,n):e.reduce(t);if(_(e,function(e,o,a){r?n=t.call(i,n,e,o,a):(n=e,r=!0)}),!r)throw new TypeError(b);return n},y.find=y.detect=function(e,t,n){var i;return w(e,function(e,r,o){return t.call(n,e,r,o)?(i=e,!0):void 0}),i},y.filter=y.select=function(e,t,n){var i=[];return null==e?i:d&&e.filter===d?e.filter(t,n):(_(e,function(e,r,o){t.call(n,e,r,o)&&i.push(e)}),i)},y.reject=function(e,t,n){return y.filter(e,function(e,i,r){return!t.call(n,e,i,r)},n)},y.compact=function(e){return y.filter(e,y.identity)},y.every=y.all=function(t,n,i){n||(n=y.identity);var r=!0;return null==t?r:p&&t.every===p?t.every(n,i):(_(t,function(t,o,a){return(r=r&&n.call(i,t,o,a))?void 0:e}),!!r)};var w=y.some=y.any=function(t,n,i){n||(n=y.identity);var r=!1;return null==t?r:f&&t.some===f?t.some(n,i):(_(t,function(t,o,a){return r||(r=n.call(i,t,o,a))?e:void 0}),!!r)};y.size=function(e){return null==e?0:e.length===+e.length?e.length:y.keys(e).length},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}};var A=function(e){return null==e?y.identity:y.isFunction(e)?e:y.property(e)};y.sortedIndex=function(e,t,n,i){n=A(n);for(var r=n.call(i,t),o=0,a=e.length;a>o;){var s=o+a>>>1;n.call(i,e[s])<r?o=s+1:a=s}return o};var w=y.some=y.any=function(t,n,i){n||(n=y.identity);var r=!1;return null==t?r:f&&t.some===f?t.some(n,i):(_(t,function(t,o,a){return r||(r=n.call(i,t,o,a))?e:void 0}),!!r)};y.contains=y.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=y.values(e)),y.indexOf(e,t)>=0)},y.where=function(e,t){return y.filter(e,y.matches(t))},y.findWhere=function(e,t){return y.find(e,y.matches(t))},y.max=function(e,t,n){if(!t&&y.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var i=-(1/0),r=-(1/0);return _(e,function(e,o,a){var s=t?t.call(n,e,o,a):e;s>r&&(i=e,r=s)}),i},y.difference=function(e){var n=o.apply(t,r.call(arguments,1));return y.filter(e,function(e){return!y.contains(n,e)})},y.without=function(e){return y.difference(e,r.call(arguments,1))},y.indexOf=function(e,t,n){if(null==e)return-1;var i=0,r=e.length;if(n){if("number"!=typeof n)return i=y.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,r+n):n}if(h&&e.indexOf===h)return e.indexOf(t,n);for(;r>i;i++)if(e[i]===t)return i;return-1};var C=function(){};y.bind=function(e,t){var n,i;if(v&&e.bind===v)return v.apply(e,r.call(arguments,1));if(!y.isFunction(e))throw new TypeError;return n=r.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(r.call(arguments)));C.prototype=e.prototype;var o=new C;C.prototype=null;var a=e.apply(o,n.concat(r.call(arguments)));return Object(a)===a?a:o}},y.partial=function(e){var t=r.call(arguments,1);return function(){for(var n=0,i=t.slice(),r=0,o=i.length;o>r;r++)i[r]===y&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return e.apply(this,i)}},y.once=y.partial(y.before,2),y.memoize=function(e,t){var n={};return t||(t=y.identity),function(){var i=t.apply(this,arguments);return y.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},y.delay=function(e,t){var n=r.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=function(e){return y.delay.apply(y,[e,1].concat(r.call(arguments,1)))},y.throttle=function(e,t,n){var i,r,o,a=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:y.now(),a=null,o=e.apply(i,r),i=r=null};return function(){var l=y.now();s||n.leading!==!1||(s=l);var u=t-(l-s);return i=this,r=arguments,0>=u?(clearTimeout(a),a=null,s=l,o=e.apply(i,r),i=r=null):a||n.trailing===!1||(a=setTimeout(c,u)),o}},y.keys=function(e){if(!y.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return t},y.invert=function(e){for(var t={},n=y.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},y.defaults=function(e){return _(r.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},y.extend=function(e){return _(r.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},y.pick=function(e){var n={},i=o.apply(t,r.call(arguments,1));return _(i,function(t){t in e&&(n[t]=e[t])}),n},y.omit=function(e){var n={},i=o.apply(t,r.call(arguments,1));for(var a in e)y.contains(i,a)||(n[a]=e[a]);return n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.isArray=g||function(e){return"[object Array]"==a.call(e)},y.isObject=function(e){return e===Object(e)},_(["Arguments","Function","String","Number","Date","RegExp"],function(e){y["is"+e]=function(t){return a.call(t)=="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return!(!e||!y.has(e,"callee"))}),y.isFunction=function(e){return"function"==typeof e},y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!=+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==a.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return s.call(e,t)},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.property=function(e){return function(t){return t[e]}},y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},y.now=Date.now||function(){return(new Date).getTime()},y.result=function(e,t){if(null!=e){var n=e[t];return y.isFunction(n)?n.call(e):n}};var E=0;return y.uniqueId=function(e){var t=++E+"";return e?e+t:t},y}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){var n,i;n=[],i=function(){var e={DRAG:"drag",DRAG_START:"dragStart",DRAG_END:"dragEnd",CLICK:"click",DOUBLE_CLICK:"doubleClick",TAP:"tap",DOUBLE_TAP:"doubleTap",OVER:"over",MOVE:"move",OUT:"out"},t={COMPLETE:"complete",ERROR:"error",JWPLAYER_AD_CLICK:"adClick",JWPLAYER_AD_COMPANIONS:"adCompanions",JWPLAYER_AD_COMPLETE:"adComplete",JWPLAYER_AD_ERROR:"adError",JWPLAYER_AD_IMPRESSION:"adImpression",JWPLAYER_AD_META:"adMeta",JWPLAYER_AD_PAUSE:"adPause",JWPLAYER_AD_PLAY:"adPlay",JWPLAYER_AD_SKIPPED:"adSkipped",JWPLAYER_AD_TIME:"adTime",JWPLAYER_CAST_AD_CHANGED:"castAdChanged",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_READY:"ready",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_BEFOREPLAY:"beforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_DISPLAY_CLICK:"displayClick",JWPLAYER_PLAYLIST_COMPLETE:"playlistComplete",JWPLAYER_CAST_SESSION:"cast",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_FIRST_FRAME:"firstFrame",JWPLAYER_MEDIA_PLAY_ATTEMPT:"playAttempt",JWPLAYER_MEDIA_LOADED:"loaded",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_SETUP_ERROR:"setupError",JWPLAYER_ERROR:"error",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_CAST_AVAILABLE:"castAvailable",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_MEDIA_VOLUME:"volume",JWPLAYER_MEDIA_MUTE:"mute",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_CONTROLS:"controls",JWPLAYER_FULLSCREEN:"fullscreen",JWPLAYER_RESIZE:"resize",JWPLAYER_PLAYLIST_ITEM:"playlistItem",JWPLAYER_PLAYLIST_LOADED:"playlist",JWPLAYER_AUDIO_TRACKS:"audioTracks",JWPLAYER_AUDIO_TRACK_CHANGED:"audioTrackChanged",JWPLAYER_LOGO_CLICK:"logoClick",JWPLAYER_CAPTIONS_LIST:"captionsList",JWPLAYER_CAPTIONS_CHANGED:"captionsChanged",JWPLAYER_PROVIDER_CHANGED:"providerChanged",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame",JWPLAYER_USER_ACTION:"userAction",JWPLAYER_PROVIDER_CLICK:"providerClick",JWPLAYER_VIEW_TAB_FOCUS:"tabFocus",JWPLAYER_CONTROLBAR_DRAGGING:"scrubbing",JWPLAYER_INSTREAM_CLICK:"instreamClick"};return t.touchEvents=e,t}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(45)],r=function(e){var t=[],n=t.slice,i={on:function(e,t,n){if(!o(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n}),this},once:function(t,n,i){if(!o(this,"once",t,[n,i])||!n)return this;var r=this,a=e.once(function(){r.off(t,a),n.apply(this,arguments)});return a._callback=n,this.on(t,a,i)},off:function(t,n,i){var r,a,s,c,l,u,d,p;if(!this._events||!o(this,"off",t,[n,i]))return this;if(!t&&!n&&!i)return this._events=void 0,this;for(c=t?[t]:e.keys(this._events),l=0,u=c.length;u>l;l++)if(t=c[l],s=this._events[t]){if(this._events[t]=r=[],n||i)for(d=0,p=s.length;p>d;d++)a=s[d],(n&&n!==a.callback&&n!==a.callback._callback||i&&i!==a.context)&&r.push(a);r.length||delete this._events[t]}return this},trigger:function(e){if(!this._events)return this;var t=n.call(arguments,1);if(!o(this,"trigger",e,t))return this;var i=this._events[e],r=this._events.all;return i&&a(i,t,this),r&&a(r,arguments,this),this},triggerSafe:function(e){if(!this._events)return this;var t=n.call(arguments,1);if(!o(this,"trigger",e,t))return this;var i=this._events[e],r=this._events.all;return i&&s(i,t,this),r&&s(r,arguments,this),this}},r=/\s+/,o=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(i));return!1}if(r.test(n)){for(var a=n.split(r),s=0,c=a.length;c>s;s++)e[t].apply(e,[a[s]].concat(i));return!1}return!0},a=function(e,t,n){var i,r=-1,o=e.length,a=t[0],s=t[1],c=t[2];switch(t.length){case 0:for(;++r<o;)(i=e[r]).callback.call(i.context||n);return;case 1:for(;++r<o;)(i=e[r]).callback.call(i.context||n,a);return;case 2:for(;++r<o;)(i=e[r]).callback.call(i.context||n,a,s);return;case 3:for(;++r<o;)(i=e[r]).callback.call(i.context||n,a,s,c);return;default:for(;++r<o;)(i=e[r]).callback.apply(i.context||n,t);return}},s=function(e,t,n){for(var i,r=-1,o=e.length;++r<o;)try{(i=e[r]).callback.apply(i.context||n,t)}catch(a){}};return i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(51),n(45),n(52),n(53),n(55),n(49),n(56),n(50),n(57),n(60)],r=function(e,t,n,i,r,o,a,s,c,l){var u={};return u.log=function(){window.console&&("object"==typeof console.log?console.log(Array.prototype.slice.call(arguments,0)):console.log.apply(console,arguments))},u.between=function(e,t,n){return Math.max(Math.min(e,n),t)},u.foreach=function(e,t){var n,i;for(n in e)"function"===u.typeOf(e.hasOwnProperty)?e.hasOwnProperty(n)&&(i=e[n],t(n,i)):(i=e[n],t(n,i))},u.indexOf=t.indexOf,u.noop=function(){},u.seconds=e.seconds,u.prefix=e.prefix,u.suffix=e.suffix,t.extend(u,o,s,n,a,i,r,c,l),u}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(50)],r=function(e,t){function n(e){return/^(?:(?:https?|file)\:)?\/\//.test(e)}function i(t){return e.some(t,function(e){return"parsererror"===e.nodeName})}var r={};return r.getAbsolutePath=function(e,i){if(t.exists(i)||(i=document.location.href),t.exists(e)){if(n(e))return e;var r,o=i.substring(0,i.indexOf("://")+3),a=i.substring(o.length,i.indexOf("/",o.length+1));if(0===e.indexOf("/"))r=e.split("/");else{var s=i.split("?")[0];s=s.substring(o.length+a.length+1,s.lastIndexOf("/")),r=s.split("/").concat(e.split("/"))}for(var c=[],l=0;l<r.length;l++)r[l]&&t.exists(r[l])&&"."!==r[l]&&(".."===r[l]?c.pop():c.push(r[l]));return o+a+"/"+c.join("/")}},r.getScriptPath=e.memoize(function(e){for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++){var i=t[n].src;if(i&&i.indexOf(e)>=0)return i.substr(0,i.indexOf(e))}return""}),r.parseXML=function(e){var t=null;try{"DOMParser"in window?(t=(new window.DOMParser).parseFromString(e,"text/xml"),(i(t.childNodes)||t.childNodes&&i(t.childNodes[0].childNodes))&&(t=null)):(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(n){}return t},r.serialize=function(e){if(void 0===e)return null;if("string"==typeof e&&e.length<6){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if(!isNaN(Number(e))&&!isNaN(parseFloat(e)))return Number(e)}return e},r.parseDimension=function(e){return"string"==typeof e?""===e?0:e.lastIndexOf("%")>-1?e:parseInt(e.replace("px",""),10):e},r.timeFormat=function(e,t){if(0>=e&&!t)return"00:00";var n=0>e?"-":"";e=Math.abs(e);var i=Math.floor(e/3600),r=Math.floor((e-3600*i)/60),o=Math.floor(e%60);return n+(i?i+":":"")+(10>r?"0":"")+r+":"+(10>o?"0":"")+o},r.adaptiveType=function(e){if(0!==e){var t=-120;if(t>=e)return"DVR";if(0>e||e===1/0)return"LIVE"}return"VOD"},r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45)],r=function(e){var t={};return t.exists=function(e){switch(typeof e){case"string":return e.length>0;case"object":return null!==e;case"undefined":return!1}return!0},t.isHTTPS=function(){return 0===window.location.href.indexOf("https")},t.isRtmp=function(e,t){return 0===e.indexOf("rtmp")||"rtmp"===t},t.isYouTube=function(e,t){return"youtube"===t||/^(http|\/\/).*(youtube\.com|youtu\.be)\/.+/.test(e)},t.youTubeID=function(e){var t=/v[=\/]([^?&]*)|youtu\.be\/([^?]*)|^([\w-]*)$/i.exec(e);return t?t.slice(1).join("").replace("?",""):""},t.typeOf=function(t){if(null===t)return"null";var n=typeof t;return"object"===n&&e.isArray(t)?"array":n},t}.apply(t,i),!(void 0!==r&&(e.exports=r))
},function(e,t,n){var i,r;i=[n(45)],r=function(e){function t(e){return e.indexOf("(format=m3u8-")>-1?"m3u8":!1}var n=function(e){return e.replace(/^\s+|\s+$/g,"")},i=function(e,t,n){for(e=""+e,n=n||"0";e.length<t;)e=n+e;return e},r=function(e,t){for(var n=0;n<e.attributes.length;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()===t.toLowerCase())return e.attributes[n].value.toString();return""},o=function(e){if(!e||"rtmp"===e.substr(0,4))return"";var n=t(e);return n?n:(e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0],e.lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0)},a=function(e){var t=parseInt(e/3600),n=parseInt(e/60)%60,r=e%60;return i(t,2)+":"+i(n,2)+":"+i(r.toFixed(3),6)},s=function(t){if(e.isNumber(t))return t;t=t.replace(",",".");var n=t.split(":"),i=0;return"s"===t.slice(-1)?i=parseFloat(t):"m"===t.slice(-1)?i=60*parseFloat(t):"h"===t.slice(-1)?i=3600*parseFloat(t):n.length>1?(i=parseFloat(n[n.length-1]),i+=60*parseFloat(n[n.length-2]),3===n.length&&(i+=3600*parseFloat(n[n.length-3]))):i=parseFloat(t),i},c=function(t,n){return e.map(t,function(e){return n+e})},l=function(t,n){return e.map(t,function(e){return e+n})};return{trim:n,pad:i,xmlAttribute:r,extension:o,hms:a,seconds:s,suffix:l,prefix:c}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45)],r=function(e){function t(e){return function(){return i(e)}}var n={},i=e.memoize(function(e){var t=navigator.userAgent.toLowerCase();return null!==t.match(e)}),r=n.isInt=function(e){return parseFloat(e)%1===0};n.isFlashSupported=function(){var e=n.flashVersion();return e&&e>=11.2},n.isFF=t(/firefox/i),n.isIPod=t(/iP(hone|od)/i),n.isIPad=t(/iPad/i),n.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),n.isOSX=t(/Mac OS X/i),n.isEdge=t(/\sedge\/\d+/i);var o=n.isIETrident=function(e){return n.isEdge()?!0:e?(e=parseFloat(e).toFixed(1),i(new RegExp("trident/.+rv:\\s*"+e,"i"))):i(/trident/i)},a=n.isMSIE=function(e){return e?(e=parseFloat(e).toFixed(1),i(new RegExp("msie\\s*"+e,"i"))):i(/msie/i)},s=t(/chrome/i);n.isChrome=function(){return s()&&!n.isEdge()},n.isIE=function(e){return e?(e=parseFloat(e).toFixed(1),e>=11?o(e):a(e)):a()||o()},n.isSafari=function(){return i(/safari/i)&&!i(/chrome/i)&&!i(/chromium/i)&&!i(/android/i)};var c=n.isIOS=function(e){return i(e?new RegExp("iP(hone|ad|od).+\\s(OS\\s"+e+"|.*\\sVersion/"+e+")","i"):/iP(hone|ad|od)/i)};n.isAndroidNative=function(e){return l(e,!0)};var l=n.isAndroid=function(e,t){return t&&i(/chrome\/[123456789]/i)&&!i(/chrome\/18/)?!1:e?(r(e)&&!/\./.test(e)&&(e=""+e+"."),i(new RegExp("Android\\s*"+e,"i"))):i(/Android/i)};return n.isMobile=function(){return c()||l()},n.isIframe=function(){return window.frameElement&&"IFRAME"===window.frameElement.nodeName},n.flashVersion=function(){if(n.isAndroid())return 0;var e,t=navigator.plugins;if(t&&(e=t["Shockwave Flash"],e&&e.description))return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if("undefined"!=typeof window.ActiveXObject){try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(i){return 0}return e}return 0},n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(51),n(45),n(54)],r=function(e,t,n){var i={};i.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild},i.styleDimension=function(e){return e+(e.toString().indexOf("%")>0?"":"px")};var r=function(e){return t.isString(e.className)?e.className.split(" "):[]},o=function(t,n){n=e.trim(n),t.className!==n&&(t.className=n)};return i.classList=function(e){return e.classList?e.classList:r(e)},i.hasClass=n.hasClass,i.addClass=function(e,n){var i=r(e),a=t.isArray(n)?n:n.split(" ");t.each(a,function(e){t.contains(i,e)||i.push(e)}),o(e,i.join(" "))},i.removeClass=function(e,n){var i=r(e),a=t.isArray(n)?n:n.split(" ");o(e,t.difference(i,a).join(" "))},i.replaceClass=function(e,t,n){var i=e.className||"";t.test(i)?i=i.replace(t,n):n&&(i+=" "+n),o(e,i)},i.toggleClass=function(e,n,r){var o=i.hasClass(e,n);r=t.isBoolean(r)?r:!o,r!==o&&(r?i.addClass(e,n):i.removeClass(e,n))},i.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},i.addStyleSheet=function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},i.empty=function(e){if(e)for(;e.childElementCount>0;)e.removeChild(e.children[0])},i.bounds=function(e){var t={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!e||!document.body.contains(e))return t;var n=e.getBoundingClientRect(e),i=window.pageYOffset,r=window.pageXOffset;return n.width||n.height||n.left||n.top?(t.left=n.left+r,t.right=n.right+r,t.top=n.top+i,t.bottom=n.bottom+i,t.width=n.right-n.left,t.height=n.bottom-n.top,t):t},i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){return{hasClass:function(e,t){var n=" "+t+" ";return 1===e.nodeType&&(" "+e.className+" ").replace(/[\t\r\n\f]/g," ").indexOf(n)>=0}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(51)],r=function(e){function t(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}function n(t,n,i){if(""===n||void 0===n||null===n)return"";var r=i?" !important":"";return"string"==typeof n&&isNaN(n)?/png|gif|jpe?g/i.test(n)&&n.indexOf("url")<0?"url("+n+")":n+r:0===n||"z-index"===t||"opacity"===t?""+n+r:/color/i.test(t)?"#"+e.pad(n.toString(16).replace(/^0x/i,""),6)+r:Math.ceil(n)+"px"+r}var i,r={},o=function(e,t){i||(i=document.createElement("style"),i.type="text/css",document.getElementsByTagName("head")[0].appendChild(i));var n=e+JSON.stringify(t).replace(/"/g,""),o=document.createTextNode(n);r[e]&&i.removeChild(r[e]),r[e]=o,i.appendChild(o)},a=function(e,i){if(void 0!==e&&null!==e){void 0===e.length&&(e=[e]);var r,o={};for(r in i)o[r]=n(r,i[r]);for(var a=0;a<e.length;a++){var s,c=e[a];if(void 0!==c&&null!==c)for(r in o)s=t(r),c.style[s]!==o[r]&&(c.style[s]=o[r])}}},s=function(e){for(var t in r)t.indexOf(e)>=0&&(i.removeChild(r[t]),delete r[t])},c=function(e,t){a(e,{transform:t,webkitTransform:t,msTransform:t,mozTransform:t,oTransform:t})},l=function(e,t){var n="rgb";e?(e=String(e).replace("#",""),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2])):e="000000";var i=[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)];return void 0!==t&&100!==t&&(n+="a",i.push(t/100)),n+"("+i.join(",")+")"};return{css:o,style:a,clearCss:s,transform:c,hexToRgba:l}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(49)],r=function(e,t){function n(e){e.onload=null,e.onprogress=null,e.onreadystatechange=null,e.onerror=null,"abort"in e&&e.abort()}function i(t,i){return function(r){var o=r.currentTarget||i.xhr;if(clearTimeout(i.timeoutId),i.retryWithoutCredentials&&i.xhr.withCredentials){n(o);var a=e.extend({},i,{xhr:null,withCredentials:!1,retryWithoutCredentials:!1});return void d(a)}i.onerror(t,i.url,o)}}function r(e){return function(t){var n=t.currentTarget||e.xhr;if(4===n.readyState){if(clearTimeout(e.timeoutId),n.status>=400){var i;return i=404===n.status?"File not found":""+n.status+"("+n.statusText+")",e.onerror(i,e.url,n)}if(200===n.status)return o(e)(t)}}}function o(e){return function(n){var i=n.currentTarget||e.xhr;if(clearTimeout(e.timeoutId),e.responseType){if("json"===e.responseType)return a(i,e)}else{var r,o=i.responseXML;if(o)try{r=o.firstChild}catch(c){}if(o&&r)return s(i,o,e);if(l&&i.responseText&&!o&&(o=t.parseXML(i.responseText),o&&o.firstChild))return s(i,o,e);if(e.requireValidXML)return void e.onerror("Invalid XML",e.url,i)}e.oncomplete(i)}}function a(t,n){if(!t.response||e.isString(t.response)&&'"'!==t.responseText.substr(1))try{t=e.extend({},t,{response:JSON.parse(t.responseText)})}catch(i){return void n.onerror("Invalid JSON",n.url,t)}return n.oncomplete(t)}function s(t,n,i){var r=n.documentElement;return i.requireValidXML&&("parsererror"===r.nodeName||r.getElementsByTagName("parsererror").length)?void i.onerror("Invalid XML",i.url,t):(t.responseXML||(t=e.extend({},t,{responseXML:n})),i.oncomplete(t))}var c=function(){},l=!1,u=function(e){var t=document.createElement("a"),n=document.createElement("a");t.href=location.href;try{return n.href=e,n.href=n.href,t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(i){}return!0},d=function(t,a,s,d){e.isObject(t)&&(d=t,t=d.url);var p,f=e.extend({xhr:null,url:t,withCredentials:!1,retryWithoutCredentials:!1,timeout:6e4,timeoutId:-1,oncomplete:a||c,onerror:s||c,mimeType:d&&!d.responseType?"text/xml":"",requireValidXML:!1,responseType:d&&d.plainText?"text":""},d);if("XDomainRequest"in window&&u(t))p=f.xhr=new window.XDomainRequest,p.onload=o(f),p.ontimeout=p.onprogress=c,l=!0;else{if(!("XMLHttpRequest"in window))return void f.onerror("",t);p=f.xhr=new window.XMLHttpRequest,p.onreadystatechange=r(f)}var h=i("Error loading file",f);p.onerror=h,"overrideMimeType"in p?f.mimeType&&p.overrideMimeType(f.mimeType):l=!0;try{t=t.replace(/#.*$/,""),p.open("GET",t,!0)}catch(g){return h(g),p}if(f.responseType)try{p.responseType=f.responseType}catch(g){}f.timeout&&(f.timeoutId=setTimeout(function(){n(p),f.onerror("Timeout",t,p)},f.timeout));try{f.withCredentials&&"withCredentials"in p&&(p.withCredentials=!0),p.send()}catch(g){h(g)}return p};return{ajax:d,crossdomain:u}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(58),n(45),n(50),n(49),n(59)],r=function(e,t,n,i,r){var o={};return o.repo=t.memoize(function(){var t=(r.split("+")[0],e.repo);return n.isHTTPS()?t.replace(/^http:/,"https:"):t}),o.versionCheck=function(e){var t=("0"+e).split(/\W/),n=r.split(/\W/),i=parseFloat(t[0]),o=parseFloat(n[0]);return i>o?!1:!(i===o&&parseFloat("0"+t[1])>parseFloat(n[1]))},o.isSDK=function(e){return!(!e.analytics||!e.analytics.sdkplatform)},o.loadFrom=function(){return o.repo()},o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){return{repo:"//"+appServer+"/static/"+self.version+"/",SkinsIncluded:["seven"],SkinsLoadable:["beelden","bekle","five","glow","roundster","six","stormtrooper","vapor"],dvrSeekLimit:-25}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){var n,i;n=[],i=function(){return"7.3.6+commercial_v7-3-6.81.commercial.f002db.jwplayer.ad873d.analytics.c31916.vast.0300bb.googima.e8ba93.plugin-sharing.08a279.plugin-related.909f55.plugin-gapro.0374cd"}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){var n,i;n=[],i=function(){var e=function(e,n,i){if(n=n||this,i=i||[],window.jwplayer&&window.jwplayer.debug)return e.apply(n,i);try{return e.apply(n,i)}catch(r){return new t(e.name,r)}},t=function(e,t){this.name=e,this.message=t.message||t.toString(),this.error=t};return{tryCatch:e,Error:t}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(45)],r=function(e){var t=function(){var t={},n={},i={},r={};return{start:function(n){t[n]=e.now(),i[n]=i[n]+1||1},end:function(i){if(t[i]){var r=e.now()-t[i];n[i]=n[i]+r||r}},dump:function(){return{counts:i,sums:n,events:r}},tick:function(t,n){r[t]=n||e.now()},between:function(e,t){return r[t]&&r[e]?r[t]-r[e]:-1}}};return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){return{BUFFERING:"buffering",IDLE:"idle",COMPLETE:"complete",PAUSED:"paused",PLAYING:"playing",ERROR:"error",LOADING:"loading",STALLED:"stalled"}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(64),n(81),n(158)],r=function(e,t,i){var r=e.prototype.setup;return e.prototype.setup=function(e,o){r.apply(this,arguments);var a=this._model.get("edition"),s=t(a),c=this._model.get("cast"),l=this;s("casting")&&c&&c.appid&&n.e(6,function(){var e=n(159);l._castController=new e(l,l._model),l.castToggle=l._castController.castToggle.bind(l._castController)});var u=i.setup();this.once("ready",u.onReady,this),o.getAdBlock=u.checkAdBlock},e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(73),n(115),n(74),n(45),n(93),n(111),n(77),n(114),n(65),n(48),n(116),n(47),n(76),n(62),n(46),n(156)],r=function(e,t,n,i,r,o,a,s,c,l,u,d,p,f,h,g){function m(e){return function(){var t=Array.prototype.slice.call(arguments,0);this.eventsQueue.push([e,t])}}function v(e){return e===f.LOADING||e===f.STALLED?f.BUFFERING:e}var y=function(e){this.originalContainer=this.currentContainer=e,this.eventsQueue=[],i.extend(this,d),this._model=new a};return y.prototype={play:m("play"),pause:m("pause"),setVolume:m("setVolume"),setMute:m("setMute"),seek:m("seek"),stop:m("stop"),load:m("load"),playlistNext:m("playlistNext"),playlistPrev:m("playlistPrev"),playlistItem:m("playlistItem"),setFullscreen:m("setFullscreen"),setCurrentCaptions:m("setCurrentCaptions"),setCurrentQuality:m("setCurrentQuality"),setup:function(a,d){function g(){G.mediaModel.on("change:state",function(e,t){var n=v(t);G.set("state",n)})}function m(){J=null,k(G.get("item")),G.on("change:state",p,this),G.on("change:castState",function(e,t){et.trigger(h.JWPLAYER_CAST_SESSION,t)}),G.on("change:fullscreen",function(e,t){et.trigger(h.JWPLAYER_FULLSCREEN,{fullscreen:t})}),G.on("itemReady",function(){et.trigger(h.JWPLAYER_PLAYLIST_ITEM,{index:G.get("item"),item:G.get("playlistItem")})}),G.on("change:playlist",function(e,t){t.length&&et.trigger(h.JWPLAYER_PLAYLIST_LOADED,{playlist:t})}),G.on("change:volume",function(e,t){et.trigger(h.JWPLAYER_MEDIA_VOLUME,{volume:t})}),G.on("change:mute",function(e,t){et.trigger(h.JWPLAYER_MEDIA_MUTE,{mute:t})}),G.on("change:controls",function(e,t){et.trigger(h.JWPLAYER_CONTROLS,{controls:t})}),G.on("change:scrubbing",function(e,t){t?E():A()}),G.on("change:captionsList",function(e,t){et.trigger(h.JWPLAYER_CAPTIONS_LIST,{tracks:t,track:V()})}),G.mediaController.on("all",et.trigger.bind(et)),Y.on("all",et.trigger.bind(et)),this.showView(Y.element()),window.addEventListener("beforeunload",function(){J&&J.destroy(),G&&G.destroy()}),i.defer(y)}function y(){for(et.trigger(h.JWPLAYER_READY,{setupTime:0}),et.trigger(h.JWPLAYER_PLAYLIST_LOADED,{playlist:G.get("playlist")}),et.trigger(h.JWPLAYER_PLAYLIST_ITEM,{index:G.get("item"),item:G.get("playlistItem")}),et.trigger(h.JWPLAYER_CAPTIONS_LIST,{tracks:G.get("captionsList"),track:G.get("captionsIndex")}),G.get("autostart")&&A({reason:"autostart"});et.eventsQueue.length>0;){var e=et.eventsQueue.shift(),t=e[0],n=e[1]||[];et[t].apply(et,n)}}function _(e){switch(G.get("state")===f.ERROR&&G.set("state",f.IDLE),C(!0),G.get("autostart")&&G.once("itemReady",A),typeof e){case"string":b(e);break;case"object":var t=j(e);t&&k(0);break;case"number":k(e)}}function b(e){var t=new c;t.on(h.JWPLAYER_PLAYLIST_LOADED,function(e){_(e.playlist)}),t.on(h.JWPLAYER_ERROR,function(e){e.message="Error loading playlist: "+e.message,this.triggerError(e)},this),t.load(e)}function w(){var e=et._instreamAdapter&&et._instreamAdapter.getState();return i.isString(e)?e:G.get("state")}function A(e){var t;if(e&&G.set("playReason",e.reason),G.get("state")!==f.ERROR){var n=et._instreamAdapter&&et._instreamAdapter.getState();if(i.isString(n))return d.pauseAd(!1);if(G.get("state")===f.COMPLETE&&(C(!0),k(0)),!K&&(K=!0,et.trigger(h.JWPLAYER_MEDIA_BEFOREPLAY,{playReason:G.get("playReason")}),K=!1,X))return X=!1,void(q=null);if(T()){if(0===G.get("playlist").length)return!1;t=l.tryCatch(function(){G.loadVideo()})}else G.get("state")===f.PAUSED&&(t=l.tryCatch(function(){G.playVideo()}));return t instanceof l.Error?(et.triggerError(t),q=null,!1):!0}}function C(e){G.off("itemReady",A);var t=!e;q=null;var n=l.tryCatch(function(){G.stopVideo()},et);return n instanceof l.Error?(et.triggerError(n),!1):(t&&(Z=!0),K&&(X=!0),!0)}function E(){q=null;var e=et._instreamAdapter&&et._instreamAdapter.getState();if(i.isString(e))return d.pauseAd(!0);switch(G.get("state")){case f.ERROR:return!1;case f.PLAYING:case f.BUFFERING:var t=l.tryCatch(function(){tt().pause()},this);if(t instanceof l.Error)return et.triggerError(t),!1;break;default:K&&(X=!0)}return!0}function T(){var e=G.get("state");return e===f.IDLE||e===f.COMPLETE||e===f.ERROR}function S(e){G.get("state")!==f.ERROR&&(G.get("scrubbing")||G.get("state")===f.PLAYING||A(!0),tt().seek(e))}function x(e,t){C(!0),k(e),A(t)}function j(e){var t=s(e);return t=s.filterPlaylist(t,G.getProviders(),G.get("androidhls"),G.get("drm"),G.get("preload")),G.set("playlist",t),i.isArray(t)&&0!==t.length?!0:(et.triggerError({message:"Error loading playlist: No playable sources found"}),!1)}function k(e){var t=G.get("playlist");e=(e+t.length)%t.length,G.set("item",e),G.set("playlistItem",t[e]),G.setActiveItem(t[e])}function R(e){x(G.get("item")-1,e||{reason:"external"})}function I(e){x(G.get("item")+1,e||{reason:"external"})}function O(){if(T()){if(Z)return void(Z=!1);q=O;var e=G.get("item");return e===G.get("playlist").length-1?void(G.get("repeat")?I({reason:"repeat"}):(G.set("state",f.COMPLETE),et.trigger(h.JWPLAYER_PLAYLIST_COMPLETE,{}))):void I({reason:"playlist"})}}function P(e){tt().setCurrentQuality(e)}function D(){return tt()?tt().getCurrentQuality():-1}function L(){return this._model?this._model.getConfiguration():void 0}function N(){if(this._model.mediaModel)return this._model.mediaModel.get("visualQuality");var e=M();if(e){var t=D(),n=e[t];if(n)return{level:i.extend({index:t},n),mode:"",reason:""}}return null}function M(){return tt()?tt().getQualityLevels():null}function B(e){tt()&&tt().setCurrentAudioTrack(e)}function F(){return tt()?tt().getCurrentAudioTrack():-1}function U(){return tt()?tt().getAudioTracks():null}function H(e){G.persistVideoSubtitleTrack(e),et.trigger(h.JWPLAYER_CAPTIONS_CHANGED,{tracks:W(),track:e})}function V(){return Q.getCurrentIndex()}function W(){return Q.getCaptionsList()}function z(){var e=G.getVideo();if(e){var t=e.detachMedia();if(t instanceof HTMLVideoElement)return t}return null}function $(){var e=l.tryCatch(function(){G.getVideo().attachMedia()});return e instanceof l.Error?void l.log("Error calling _attachMedia",e):void("function"==typeof q&&q())}var G,Y,Q,J,q,X,K=!1,Z=!1,et=this,tt=function(){return G.getVideo()},nt=new e(a);G=this._model.setup(nt),Y=this._view=new u(d,G),Q=new o(d,G),J=new r(d,G,Y,j),J.on(h.JWPLAYER_READY,m,this),J.on(h.JWPLAYER_SETUP_ERROR,this.setupError,this),G.mediaController.on(h.JWPLAYER_MEDIA_COMPLETE,function(){i.defer(O)}),G.mediaController.on(h.JWPLAYER_MEDIA_ERROR,this.triggerError,this),G.on("change:flashBlocked",function(e,t){if(!t)return void this._model.set("errorEvent",void 0);var n=!!e.get("flashThrottle"),i={message:n?"Click to run Flash":"Flash plugin failed to load"};n||this.trigger(h.JWPLAYER_ERROR,i),this._model.set("errorEvent",i)},this),g(),G.on("change:mediaModel",g),this.play=A,this.pause=E,this.seek=S,this.stop=C,this.load=_,this.playlistNext=I,this.playlistPrev=R,this.playlistItem=x,this.setCurrentCaptions=H,this.setCurrentQuality=P,this.detachMedia=z,this.attachMedia=$,this.getCurrentQuality=D,this.getQualityLevels=M,this.setCurrentAudioTrack=B,this.getCurrentAudioTrack=F,this.getAudioTracks=U,this.getCurrentCaptions=V,this.getCaptionsList=W,this.getVisualQuality=N,this.getConfig=L,this.getState=w,this.setVolume=G.setVolume,this.setMute=G.setMute,this.getProvider=function(){return G.get("provider")},this.getWidth=function(){return G.get("containerWidth")},this.getHeight=function(){return G.get("containerHeight")},this.getContainer=function(){return this.currentContainer},this.resize=Y.resize,this.getSafeRegion=Y.getSafeRegion,this.setCues=Y.addCues,this.setFullscreen=function(e){i.isBoolean(e)||(e=!G.get("fullscreen")),G.set("fullscreen",e),this._instreamAdapter&&this._instreamAdapter._adModel&&this._instreamAdapter._adModel.set("fullscreen",e)},this.addButton=function(e,t,n,r,o){var a={img:e,tooltip:t,callback:n,id:r,btnClass:o},s=G.get("dock");s=s?s.slice(0):[],s=i.reject(s,i.matches({id:a.id})),s.push(a),G.set("dock",s)},this.removeButton=function(e){var t=G.get("dock")||[];t=i.reject(t,i.matches({id:e})),G.set("dock",t)},this.checkBeforePlay=function(){return K},this.getItemQoe=function(){return G._qoeItem},this.setControls=function(e){i.isBoolean(e)||(e=!G.get("controls")),G.set("controls",e);var t=G.getVideo();t&&t.setControls(e)},this.playerDestroy=function(){this.stop(),this.showView(this.originalContainer),Y&&Y.destroy(),G&&G.destroy(),J&&(J.destroy(),J=null)},this.isBeforePlay=this.checkBeforePlay,this.isBeforeComplete=function(){return G.getVideo().checkComplete()},this.createInstream=function(){return this.instreamDestroy(),this._instreamAdapter=new n(this,G,Y),this._instreamAdapter},this.skipAd=function(){this._instreamAdapter&&this._instreamAdapter.skipAd()},this.instreamDestroy=function(){et._instreamAdapter&&et._instreamAdapter.destroy()},t(d,this),J.start()},showView:function(e){(document.documentElement.contains(this.currentContainer)||(this.currentContainer=document.getElementById(this._model.get("id")),this.currentContainer))&&(this.currentContainer.parentElement&&this.currentContainer.parentElement.replaceChild(e,this.currentContainer),this.currentContainer=e)},triggerError:function(e){this._model.set("errorEvent",e),this._model.set("state",f.ERROR),this._model.once("change:state",function(){this._model.set("errorEvent",void 0)},this),this.trigger(h.JWPLAYER_ERROR,e)},setupError:function(e){var t=e.message,n=l.createElement(g(this._model.get("id"),this._model.get("skin"),t)),r=this._model.get("width"),o=this._model.get("height");l.style(n,{width:r.toString().indexOf("%")>0?r:r+"px",height:o.toString().indexOf("%")>0?o:o+"px"}),this.showView(n);var a=this;i.defer(function(){a.trigger(h.JWPLAYER_SETUP_ERROR,{message:t})})}},y}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(66),n(67),n(48),n(46),n(47),n(45)],r=function(e,t,n,i,r,o){var a=function(){function a(r){var a=n.tryCatch(function(){var n,a=r.responseXML?r.responseXML.childNodes:null,s="";if(a){for(var u=0;u<a.length&&(s=a[u],8===s.nodeType);u++);"xml"===e.localName(s)&&(s=s.nextSibling),"rss"===e.localName(s)&&(n=t.parse(s))}if(!n)try{n=JSON.parse(r.responseText),o.isArray(n)||(n=n.playlist)}catch(d){return void c("Not a valid RSS/JSON feed")}l.trigger(i.JWPLAYER_PLAYLIST_LOADED,{playlist:n})});a instanceof n.Error&&c()}function s(e){c("Playlist load error: "+e)}function c(e){l.trigger(i.JWPLAYER_ERROR,{message:e?e:"Error loading file"})}var l=o.extend(this,r);this.load=function(e){n.ajax(e,a,s)},this.destroy=function(){this.off()}};return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(51)],r=function(e){return{localName:function(e){return e?e.localName?e.localName:e.baseName?e.baseName:"":""},textContent:function(t){return t?t.textContent?e.trim(t.textContent):t.text?e.trim(t.text):"":""},getChildNode:function(e,t){return e.childNodes[t]},numChildren:function(e){return e.childNodes?e.childNodes.length:0}}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(51),n(66),n(68),n(69),n(70)],r=function(e,t,n,i,r){function o(t){for(var o={},s=0;s<t.childNodes.length;s++){var c=t.childNodes[s],u=l(c);if(u)switch(u.toLowerCase()){case"enclosure":o.file=e.xmlAttribute(c,"url");break;case"title":o.title=a(c);break;case"guid":o.mediaid=a(c);break;case"pubdate":o.date=a(c);break;case"description":o.description=a(c);break;case"link":o.link=a(c);break;case"category":o.tags?o.tags+=a(c):o.tags=a(c)}}return o=i(t,o),o=n(t,o),new r(o)}var a=t.textContent,s=t.getChildNode,c=t.numChildren,l=t.localName,u={};return u.parse=function(e){for(var t=[],n=0;n<c(e);n++){var i=s(e,n),r=l(i).toLowerCase();if("channel"===r)for(var a=0;a<c(i);a++){var u=s(i,a);"item"===l(u).toLowerCase()&&t.push(o(u))}}return t},u}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(66),n(51),n(48)],r=function(e,t,n){var i="jwplayer",r=function(r,o){for(var a=[],s=[],c=t.xmlAttribute,l="default",u="label",d="file",p="type",f=0;f<r.childNodes.length;f++){var h=r.childNodes[f];if(h.prefix===i){var g=e.localName(h);"source"===g?(delete o.sources,a.push({file:c(h,d),"default":c(h,l),label:c(h,u),type:c(h,p)})):"track"===g?(delete o.tracks,s.push({file:c(h,d),"default":c(h,l),kind:c(h,"kind"),label:c(h,u)})):(o[g]=n.serialize(e.textContent(h)),"file"===g&&o.sources&&delete o.sources)}o[d]||(o[d]=o.link)}if(a.length)for(o.sources=[],f=0;f<a.length;f++)a[f].file.length>0&&(a[f][l]="true"===a[f][l],a[f].label.length||delete a[f].label,o.sources.push(a[f]));if(s.length)for(o.tracks=[],f=0;f<s.length;f++)s[f].file.length>0&&(s[f][l]="true"===s[f][l],s[f].kind=s[f].kind.length?s[f].kind:"captions",s[f].label.length||delete s[f].label,o.tracks.push(s[f]));return o};return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(66),n(51),n(48)],r=function(e,t,n){var i=t.xmlAttribute,r=e.localName,o=e.textContent,a=e.numChildren,s="media",c=function(e,t){function l(e){var t={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish"};return t[e]?t[e]:e}var u,d,p="tracks",f=[];for(d=0;d<a(e);d++)if(u=e.childNodes[d],u.prefix===s){if(!r(u))continue;switch(r(u).toLowerCase()){case"content":i(u,"duration")&&(t.duration=n.seconds(i(u,"duration"))),a(u)>0&&(t=c(u,t)),i(u,"url")&&(t.sources||(t.sources=[]),t.sources.push({file:i(u,"url"),type:i(u,"type"),width:i(u,"width"),label:i(u,"label")}));break;case"title":t.title=o(u);break;case"description":t.description=o(u);break;case"guid":t.mediaid=o(u);break;case"thumbnail":t.image||(t.image=i(u,"url"));break;case"player":break;case"group":c(u,t);break;case"subtitle":var h={};h.file=i(u,"url"),h.kind="captions",i(u,"lang").length>0&&(h.label=l(i(u,"lang"))),f.push(h)}}for(t.hasOwnProperty(p)||(t[p]=[]),d=0;d<f.length;d++)t[p].push(f[d]);return t};return c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(71),n(72)],r=function(e,t,n){var i={sources:[],tracks:[]},r=function(r){r=r||{},e.isArray(r.tracks)||delete r.tracks;var o=e.extend({},i,r);e.isObject(o.sources)&&!e.isArray(o.sources)&&(o.sources=[t(o.sources)]),e.isArray(o.sources)&&0!==o.sources.length||(o.sources=r.levels?r.levels:[t(r)]);for(var a=0;a<o.sources.length;a++){var s=o.sources[a];if(s){var c=s["default"];s["default"]=c?"true"===c.toString():!1,o.sources[a].label||(o.sources[a].label=a.toString()),o.sources[a]=t(o.sources[a])}}return o.sources=e.compact(o.sources),e.isArray(o.tracks)||(o.tracks=[]),e.isArray(o.captions)&&(o.tracks=o.tracks.concat(o.captions),delete o.captions),o.tracks=e.compact(e.map(o.tracks,n)),o};return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(51),n(45)],r=function(e,t,n){var i={"default":!1},r=function(r){if(r&&r.file){var o=n.extend({},i,r);o.file=t.trim(""+o.file);var a=/^[^\/]+\/(?:x-)?([^\/]+)$/;if(e.isYouTube(o.file)?o.type="youtube":e.isRtmp(o.file)?o.type="rtmp":a.test(o.type)?o.type=o.type.replace(a,"$1"):o.type||(o.type=t.extension(o.file)),o.type){switch(o.type){case"m3u8":case"vnd.apple.mpegurl":o.type="hls";break;case"dash+xml":o.type="dash";break;case"smil":o.type="rtmp";break;case"m4a":o.type="aac"}return n.each(o,function(e,t){""===e&&delete o[t]}),o}}};return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45)],r=function(e){var t={kind:"captions","default":!1},n=function(n){return n&&n.file?e.extend({},t,n):void 0};return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(45)],r=function(e,t){function i(n){t.each(n,function(t,i){n[i]=e.serialize(t)})}function r(e){return e.slice&&"px"===e.slice(-2)&&(e=e.slice(0,-2)),e}function o(t,n){if(-1===n.toString().indexOf("%"))return 0;if("string"!=typeof t||!e.exists(t))return 0;if(/^\d*\.?\d+%$/.test(t))return t;var i=t.indexOf(":");if(-1===i)return 0;var r=parseFloat(t.substr(0,i)),o=parseFloat(t.substr(i+1));return 0>=r||0>=o?0:o/r*100+"%"}var a={autostart:!1,controls:!0,displaytitle:!0,displaydescription:!0,mobilecontrols:!1,repeat:!1,castAvailable:!1,skin:"seven",stretching:"uniform",mute:!1,volume:90,width:480,height:270},s=function(s){var c=t.extend({},(window.jwplayer||{}).defaults,s);i(c);var l=t.extend({},a,c);if("."===l.base&&(l.base=e.getScriptPath("jwplayer.js")),l.base=(l.base||e.loadFrom()).replace(/\/?$/,"/"),n.p=l.base,l.width=r(l.width),l.height=r(l.height),l.flashplayer=l.flashplayer||e.getScriptPath("jwplayer.js")+"static/8/jwplayer.flash.swf","http:"===window.location.protocol&&(l.flashplayer=l.flashplayer.replace("https","http")),l.aspectratio=o(l.aspectratio,l.width),t.isObject(l.skin)&&(l.skinUrl=l.skin.url,l.skinColorInactive=l.skin.inactive,l.skinColorActive=l.skin.active,l.skinColorBackground=l.skin.background,l.skin=t.isString(l.skin.name)?l.skin.name:a.skin),t.isString(l.skin)&&l.skin.indexOf(".xml")>0&&(console.log("JW Player does not support XML skins, please update your config"),l.skin=l.skin.replace(".xml","")),l.aspectratio||delete l.aspectratio,!l.playlist){var u=t.pick(l,["title","description","type","mediaid","image","file","sources","tracks","preload"]);l.playlist=[u]}return l};return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(75),n(92),n(46),n(62),n(48),n(47),n(45)],r=function(e,t,n,i,r,o,a){function s(n){var i=n.get("provider").name||"";return i.indexOf("flash")>=0?t:e}var c={skipoffset:null,tag:null},l=function(e,t,o){function l(e,t){t=t||{},b.tag&&!t.tag&&(t.tag=b.tag),this.trigger(e,t)}function u(e){y._adModel.set("duration",e.duration),y._adModel.set("position",e.position)}function d(e){if(p&&_+1<p.length){y._adModel.set("state","buffering"),t.set("skipButton",!1),_++;var i,r=p[_];f&&(i=f[_]),this.loadItem(r,i)}else e.type===n.JWPLAYER_MEDIA_COMPLETE&&(l.call(this,e.type,e),this.trigger(n.JWPLAYER_PLAYLIST_COMPLETE,{})),this.destroy()}var p,f,h,g,m,v=s(t),y=new v(e,t),_=0,b={},w=a.bind(function(e){e=e||{},e.hasControls=!!t.get("controls"),this.trigger(n.JWPLAYER_INSTREAM_CLICK,e),y&&y._adModel&&(y._adModel.get("state")===i.PAUSED?e.hasControls&&y.instreamPlay():y.instreamPause())},this),A=a.bind(function(){y&&y._adModel&&y._adModel.get("state")===i.PAUSED&&t.get("controls")&&(e.setFullscreen(),e.play())},this);this.type="instream",this.init=function(){h=t.getVideo(),g=t.get("position"),m=t.get("playlist")[t.get("item")],y.on("all",l,this),y.on(n.JWPLAYER_MEDIA_TIME,u,this),y.on(n.JWPLAYER_MEDIA_COMPLETE,d,this),y.init(),h.detachMedia(),t.mediaModel.set("state",i.BUFFERING),e.checkBeforePlay()||0===g&&!h.checkComplete()?(g=0,t.set("preInstreamState","instream-preroll")):h&&h.checkComplete()||t.get("state")===i.COMPLETE?t.set("preInstreamState","instream-postroll"):t.set("preInstreamState","instream-midroll");var a=t.get("state");return a!==i.PLAYING&&a!==i.BUFFERING||h.pause(),o.setupInstream(y._adModel),y._adModel.set("state",i.BUFFERING),o.clickHandler().setAlternateClickHandlers(r.noop,null),this.setText("Loading ad"),this},this.loadItem=function(e,i){if(r.isAndroid(2.3))return void this.trigger({type:n.JWPLAYER_ERROR,message:"Error loading instream: Cannot play instream on Android 2.3"});a.isArray(e)&&(p=e,f=i,e=p[_],f&&(i=f[_])),this.trigger(n.JWPLAYER_PLAYLIST_ITEM,{index:_,item:e}),b=a.extend({},c,i),y.load(e),this.addClickHandler();var o=e.skipoffset||b.skipoffset;o&&(y._adModel.set("skipMessage",b.skipMessage),y._adModel.set("skipText",b.skipText),y._adModel.set("skipOffset",o),t.set("skipButton",!0))},this.applyProviderListeners=function(e){y.applyProviderListeners(e),this.addClickHandler()},this.play=function(){y.instreamPlay()},this.pause=function(){y.instreamPause()},this.hide=function(){y.hide()},this.addClickHandler=function(){o.clickHandler().setAlternateClickHandlers(w,A),y.on(n.JWPLAYER_MEDIA_META,this.metaHandler,this)},this.skipAd=function(e){var t=n.JWPLAYER_AD_SKIPPED;this.trigger(t,e),d.call(this,{type:t})},this.metaHandler=function(e){e.width&&e.height&&o.resizeMedia()},this.destroy=function(){if(this.off(),t.set("skipButton",!1),y){o.clickHandler()&&o.clickHandler().revertAlternateClickHandlers(),y.instreamDestroy(),o.destroyInstream(),y=null,e.attachMedia();var n=t.get("preInstreamState");switch(n){case"instream-preroll":case"instream-midroll":var s=a.extend({},m);s.starttime=g,t.loadVideo(s),r.isMobile()&&t.mediaModel.get("state")===i.BUFFERING&&h.setState(i.BUFFERING),h.play();break;case"instream-postroll":case"instream-idle":h.stop()}}},this.getState=function(){return y&&y._adModel?y._adModel.get("state"):!1},this.setText=function(e){o.setAltText(e?e:"")},this.hide=function(){o.useExternalControls()}};return a.extend(l.prototype,o),l}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(47),n(76),n(46),n(62),n(77)],r=function(e,t,n,i,r,o){var a=function(a,s){function c(t){var r=t||p.getVideo();if(f!==r){if(f=r,!r)return;r.off(),r.on("all",function(t,n){n=e.extend({},n,{type:t}),this.trigger(t,n)
},h),r.on(i.JWPLAYER_MEDIA_BUFFER_FULL,d),r.on(i.JWPLAYER_PLAYER_STATE,l),r.attachMedia(),r.volume(s.get("volume")),r.mute(s.get("mute")),p.on("change:state",n,h)}}function l(e){switch(e.newstate){case r.PLAYING:p.set("state",e.newstate);break;case r.PAUSED:p.set("state",e.newstate)}}function u(e){s.trigger(e.type,e),h.trigger(i.JWPLAYER_FULLSCREEN,{fullscreen:e.jwstate})}function d(){p.getVideo().play()}var p,f,h=e.extend(this,t);return a.on(i.JWPLAYER_FULLSCREEN,function(e){this.trigger(i.JWPLAYER_FULLSCREEN,e)},h),this.init=function(){p=(new o).setup({id:s.get("id"),volume:s.get("volume"),fullscreen:s.get("fullscreen"),mute:s.get("mute")}),p.on("fullscreenchange",u),this._adModel=p},h.load=function(e){p.set("item",0),p.set("playlistItem",e),p.setActiveItem(e),c(),p.off(i.JWPLAYER_ERROR),p.on(i.JWPLAYER_ERROR,function(e){this.trigger(i.JWPLAYER_ERROR,e)},h),p.loadVideo(e)},h.applyProviderListeners=function(e){c(e),e.off(i.JWPLAYER_ERROR),e.on(i.JWPLAYER_ERROR,function(e){this.trigger(i.JWPLAYER_ERROR,e)},h),s.on("change:volume",function(e,t){f.volume(t)},h),s.on("change:mute",function(e,t){f.mute(t)},h)},this.instreamDestroy=function(){p&&(p.off(),this.off(),f&&(f.detachMedia(),f.off(),p.getVideo()&&f.destroy()),p=null,a.off(null,null,this),a=null)},h.instreamPlay=function(){p.getVideo()&&p.getVideo().play(!0)},h.instreamPause=function(){p.getVideo()&&p.getVideo().pause(!0)},h};return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(62)],r=function(e){function t(t){return t===e.COMPLETE||t===e.ERROR?e.IDLE:t}return function(e,n,i){if(n=t(n),i=t(i),n!==i){var r=n.replace(/(?:ing|d)$/,""),o={type:r,newstate:n,oldstate:i,reason:e.mediaModel.get("state")};"play"===r&&(o.playReason=e.get("playReason")),this.trigger(r,o)}}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(78),n(89),n(90),n(45),n(47),n(91),n(46),n(62)],r=function(e,t,n,i,r,o,a,s,c){var l=["volume","mute","captionLabel","qualityLabel"],u=function(){function a(e,t){switch(e){case"flashThrottle":var n="resume"!==t.state;this.set("flashThrottle",n),this.set("flashBlocked",n);break;case"flashBlocked":return void this.set("flashBlocked",!0);case"flashUnblocked":return void this.set("flashBlocked",!1);case"volume":case"mute":return void this.set(e,t[e]);case s.JWPLAYER_MEDIA_TYPE:this.mediaModel.set("mediaType",t.mediaType);break;case s.JWPLAYER_PLAYER_STATE:return void this.mediaModel.set("state",t.newstate);case s.JWPLAYER_MEDIA_BUFFER:this.set("buffer",t.bufferPercent);case s.JWPLAYER_MEDIA_META:var i=t.duration;r.isNumber(i)&&(this.mediaModel.set("duration",i),this.set("duration",i));break;case s.JWPLAYER_MEDIA_BUFFER_FULL:this.mediaModel.get("playAttempt")?this.playVideo():this.mediaModel.on("change:playAttempt",function(){this.playVideo()},this);break;case s.JWPLAYER_MEDIA_TIME:this.mediaModel.set("position",t.position),this.set("position",t.position),r.isNumber(t.duration)&&(this.mediaModel.set("duration",t.duration),this.set("duration",t.duration));break;case s.JWPLAYER_PROVIDER_CHANGED:this.set("provider",p.getName());break;case s.JWPLAYER_MEDIA_LEVELS:this.setQualityLevel(t.currentQuality,t.levels),this.mediaModel.set("levels",t.levels);break;case s.JWPLAYER_MEDIA_LEVEL_CHANGED:this.setQualityLevel(t.currentQuality,t.levels),this.persistQualityLevel(t.currentQuality,t.levels);break;case s.JWPLAYER_AUDIO_TRACKS:this.setCurrentAudioTrack(t.currentTrack,t.tracks),this.mediaModel.set("audioTracks",t.tracks);break;case s.JWPLAYER_AUDIO_TRACK_CHANGED:this.setCurrentAudioTrack(t.currentTrack,t.tracks);break;case"subtitlesTrackChanged":this.setVideoSubtitleTrack(t.currentTrack,t.tracks);break;case"visualQuality":var o=r.extend({},t);this.mediaModel.set("visualQuality",o)}var a=r.extend({},t,{type:e});this.mediaController.trigger(e,a)}var u,p,f=this,h=e.noop;this.mediaController=r.extend({},o),this.mediaModel=new d,i.model(this),this.set("mediaModel",this.mediaModel),this.setup=function(t){var i=new n;return i.track(l,this),r.extend(this.attributes,i.getAllItems(),t,{item:0,state:c.IDLE,flashBlocked:!1,fullscreen:!1,compactUI:!1,scrubbing:!1,duration:0,position:0,buffer:0}),e.isMobile()&&!t.mobileSdk&&this.set("autostart",!1),this.updateProviders(),this},this.getConfiguration=function(){return r.omit(this.clone(),["mediaModel"])},this.updateProviders=function(){u=new t(this.getConfiguration())},this.setQualityLevel=function(e,t){e>-1&&t.length>1&&"youtube"!==p.getName().name&&this.mediaModel.set("currentLevel",parseInt(e))},this.persistQualityLevel=function(e,t){var n=t[e]||{},i=n.label;this.set("qualityLabel",i)},this.setCurrentAudioTrack=function(e,t){e>-1&&t.length>0&&e<t.length&&this.mediaModel.set("currentAudioTrack",parseInt(e))},this.onMediaContainer=function(){var e=this.get("mediaContainer");h.setContainer(e)},this.changeVideoProvider=function(e){this.off("change:mediaContainer",this.onMediaContainer),p&&(p.off(null,null,this),p.getContainer()&&p.remove()),h=new e(f.get("id"),f.getConfiguration());var t=this.get("mediaContainer");t?h.setContainer(t):this.once("change:mediaContainer",this.onMediaContainer),this.set("provider",h.getName()),-1===h.getName().name.indexOf("flash")&&(this.set("flashThrottle",void 0),this.set("flashBlocked",!1)),p=h,p.volume(f.get("volume")),p.mute(f.get("mute")),p.on("all",a,this)},this.destroy=function(){this.off(),p&&(p.off(null,null,this),p.destroy())},this.getVideo=function(){return p},this.setFullscreen=function(e){e=!!e,e!==f.get("fullscreen")&&f.set("fullscreen",e)},this.chooseProvider=function(e){return u.choose(e).provider},this.setActiveItem=function(e){this.mediaModel.off(),this.mediaModel=new d,this.set("mediaModel",this.mediaModel);var t=e&&e.sources&&e.sources[0];if(void 0!==t){var n=this.chooseProvider(t);if(!n)throw new Error("No suitable provider found");h instanceof n||f.changeVideoProvider(n),h.init&&h.init(e),this.trigger("itemReady",e)}},this.getProviders=function(){return u},this.resetProvider=function(){h=null},this.setVolume=function(e){e=Math.round(e),f.set("volume",e),p&&p.volume(e);var t=0===e;t!==f.get("mute")&&f.setMute(t)},this.setMute=function(t){if(e.exists(t)||(t=!f.get("mute")),f.set("mute",t),p&&p.mute(t),!t){var n=Math.max(10,f.get("volume"));this.setVolume(n)}},this.loadVideo=function(e){if(this.mediaModel.set("playAttempt",!0),this.mediaController.trigger(s.JWPLAYER_MEDIA_PLAY_ATTEMPT,{playReason:this.get("playReason")}),!e){var t=this.get("item");e=this.get("playlist")[t]}this.set("position",e.starttime||0),this.set("duration",e.duration||0),p.load(e)},this.stopVideo=function(){p&&p.stop()},this.playVideo=function(){p.play()},this.persistCaptionsTrack=function(){var e=this.get("captionsTrack");e?this.set("captionLabel",e.label):this.set("captionLabel","Off")},this.setVideoSubtitleTrack=function(e,t){this.set("captionsIndex",e),e&&t&&e<=t.length&&t[e-1].data&&this.set("captionsTrack",t[e-1]),p&&p.setSubtitlesTrack&&p.setSubtitlesTrack(e)},this.persistVideoSubtitleTrack=function(e){this.setVideoSubtitleTrack(e),this.persistCaptionsTrack()}},d=u.MediaModel=function(){this.set("state",c.IDLE)};return r.extend(u.prototype,a),r.extend(d.prototype,a),u}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(79)],r=function(e){return e.prototype.providerSupports=function(e,t){return e.supports(t,this.config.edition)},e}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(80),n(84),n(45)],r=function(e,t,n){function i(t){this.providers=e.slice(),this.config=t||{},"flash"===this.config.primary&&o(this.providers,"html5","flash")}function r(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t)return n;return-1}function o(e,t,n){var i=r(e,t),o=r(e,n),a=e[i];e[i]=e[o],e[o]=a}return n.extend(i.prototype,{providerSupports:function(e,t){return e.supports(t)},choose:function(e){e=n.isObject(e)?e:{};for(var i=this.providers.length,r=0;i>r;r++){var o=this.providers[r];if(this.providerSupports(o,e)){var a=i-r-1;return{priority:a,name:o.name,type:e.type,provider:t[o.name]}}}return null}}),i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(81),n(45),n(82)],r=function(e,t,n,i){function r(n,i){var r=t(i);if(!r("dash"))return!1;if(n.drm&&!r("drm"))return!1;if(!window.MediaSource)return!1;if(!e.isChrome()&&!e.isIETrident(11))return!1;var o=n.file||"";return"dash"===n.type||"mpd"===n.type||o.indexOf(".mpd")>-1||o.indexOf("mpd-time-csf")>-1}var o=n.find(i,n.matches({name:"flash"})),a=o.supports;return o.supports=function(n,i){if(!e.isFlashSupported())return!1;var r=n&&n.type;if("hls"===r||"m3u8"===r){var o=t(i);return o("hls")}return a.apply(this,arguments)},i.push({name:"dashjs",supports:n.constant(!1)}),i.push({name:"shaka",supports:r}),i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45)],r=function(e){var t="free",n="premium",i="enterprise",r="ads",o="unlimited",a="trial",s={setup:[t,n,i,r,o,a],dash:[t,n,i,r,o,a],drm:[t,n,i,r,o,a],hls:[t,n,i,r,o,a],ads:[t,n,i,r,o,a],casting:[t,n,i,r,o,a],jwpsrv:[t,n,i,r,o,a]},c=function(t){return function(n){return e.contains(s[n],t)}};return c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(45),n(83)],r=function(e,t,n){function i(t){if("hls"===t.type)if(t.androidhls!==!1){var n=e.isAndroidNative;if(n(2)||n(3)||n("4.0"))return!1;if(e.isAndroid())return!0}else if(e.isAndroid())return!1;return null}var r=[{name:"youtube",supports:function(t){return e.isYouTube(t.file,t.type)}},{name:"html5",supports:function(t){var r={aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl"},o=t.file,a=t.type,s=i(t);if(null!==s)return s;if(e.isRtmp(o,a))return!1;if(!r[a])return!1;if(n.canPlayType){var c=n.canPlayType(r[a]);return!!c}return!1}},{name:"flash",supports:function(n){var i={flv:"video",f4v:"video",mov:"video",m4a:"video",m4v:"video",mp4:"video",aac:"video",f4a:"video",mp3:"sound",mpeg:"sound",smil:"rtmp"},r=t.keys(i);if(!e.isFlashSupported())return!1;var o=n.file,a=n.type;return e.isRtmp(o,a)?!0:t.contains(r,a)}}];return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){return document.createElement("video")}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(85),n(87)],r=function(e,t){var n={html5:e,flash:t};return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(55),n(48),n(45),n(46),n(62),n(86),n(47)],r=function(e,t,n,i,r,o,a){function s(e,n){t.foreach(e,function(e,t){n.addEventListener(e,t,!1)})}function c(e,n){t.foreach(e,function(e,t){n.removeEventListener(e,t,!1)})}function l(e,t,n){"addEventListener"in e?e.addEventListener(t,n):e["on"+t]=n}function u(e,t,n){e&&("removeEventListener"in e?e.removeEventListener(t,n):e["on"+t]=null)}function d(e){if("hls"===e.type)if(e.androidhls!==!1){var n=t.isAndroidNative;if(n(2)||n(3)||n("4.0"))return!1;if(t.isAndroid())return!0}else if(t.isAndroid())return!1;return null}function p(p,E){function T(){ft(Gt.audioTracks),vt(Gt.textTracks)}function S(e){jt.trigger("click",e)}function x(){Dt&&!Nt&&(D(P()),I(it(),Tt,Et))}function j(){Dt&&I(it(),Tt,Et)}function k(){f(Ot),Rt=!0,Dt&&(jt.state===r.STALLED?jt.setState(r.PLAYING):jt.state===r.PLAYING&&(Ot=setTimeout(nt,h)),Nt&&Gt.duration===1/0&&0===Gt.currentTime||(D(P()),O(Gt.currentTime),I(it(),Tt,Et),jt.state===r.PLAYING&&(jt.trigger(i.JWPLAYER_MEDIA_TIME,{position:Tt,duration:Et}),R())))}function R(){var e=zt.level;if(e.width!==Gt.videoWidth||e.height!==Gt.videoHeight){if(e.width=Gt.videoWidth,e.height=Gt.videoHeight,bt(),!e.width||!e.height)return;zt.reason=zt.reason||"auto",zt.mode="hls"===xt[Lt].type?"auto":"manual",zt.bitrate=0,e.index=Lt,e.label=xt[Lt].label,jt.trigger("visualQuality",zt),zt.reason=""}}function I(e,t,n){e===Pt&&n===Et||(Pt=e,jt.trigger(i.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*e,position:t,duration:n}))}function O(e){0>Et&&(e=-(Z()-e)),Tt=e}function P(){var e=Gt.duration,t=Z();if(e===1/0&&t){var n=t-Gt.seekable.start(0);n!==1/0&&n>120&&(e=-n)}return e}function D(e){Et=e,It&&e&&e!==1/0&&jt.seek(It)}function L(){var e=P();Nt&&e===1/0&&(e=0),jt.trigger(i.JWPLAYER_MEDIA_META,{duration:e,height:Gt.videoHeight,width:Gt.videoWidth}),D(e)}function N(){Dt&&(Rt=!0,B())}function M(){Dt&&(Gt.muted&&(Gt.muted=!1,Gt.muted=!0),bt(),L())}function B(){St||(St=!0,jt.trigger(i.JWPLAYER_MEDIA_BUFFER_FULL))}function F(){jt.setState(r.PLAYING),Gt.hasAttribute("hasplayed")||Gt.setAttribute("hasplayed",""),jt.trigger(i.JWPLAYER_PROVIDER_FIRST_FRAME,{})}function U(){jt.state!==r.COMPLETE&&Gt.currentTime!==Gt.duration&&jt.setState(r.PAUSED)}function H(){Nt||Gt.paused||Gt.ended||jt.state!==r.LOADING&&jt.state!==r.ERROR&&(jt.seeking||jt.setState(r.STALLED))}function V(){Dt&&(t.log("Error playing media: %o %s",Gt.error,Gt.src||Ct.file),jt.trigger(i.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: File could not be played"}))}function W(e){var i;return"array"===t.typeOf(e)&&e.length>0&&(i=n.map(e,function(e,t){return{label:e.label||t}})),i}function z(e){xt=e,Lt=$(e);var t=W(e);t&&jt.trigger(i.JWPLAYER_MEDIA_LEVELS,{levels:t,currentQuality:Lt})}function $(e){var t=Math.max(0,Lt),n=E.qualityLabel;if(e)for(var i=0;i<e.length;i++)if(e[i]["default"]&&(t=i),n&&e[i].label===n)return i;return zt.reason="initial choice",zt.level={width:0,height:0},t}function G(){return v||y}function Y(e,n,i){Ct=xt[Lt],It=0,f(Ot);var o=document.createElement("source");o.src=Ct.file;var a=Gt.src!==o.src;a||G()?(Et=n,Q(i),Gt.load()):(0===e&&0!==Gt.currentTime&&(It=-1,jt.seek(e)),Gt.play()),Tt=Gt.currentTime,v&&(B(),Gt.paused||jt.state===r.PLAYING||jt.setState(r.LOADING)),t.isIOS()&&jt.getFullScreen()&&(Gt.controls=!0),e>0&&jt.seek(e)}function Q(e){if(Ft=null,Ut=null,Vt=-1,Ht=-1,Wt=-1,zt.reason||(zt.reason="initial choice",zt.level={width:0,height:0}),Rt=!1,St=!1,Nt=d(Ct),Gt.src=Ct.file,Ct.preload&&Gt.setAttribute("preload",Ct.preload),e&&e.tracks){var n=t.isIOS()&&!t.isSDK(E);n&&q(e.tracks)}}function J(){Gt&&(Gt.removeAttribute("src"),!m&&Gt.load&&Gt.load())}function q(e){for(;Gt.firstChild;)Gt.removeChild(Gt.firstChild);X(e)}function X(e){if(e){Gt.setAttribute("crossorigin","anonymous");for(var t=0;t<e.length;t++)if(-1!==e[t].file.indexOf(".vtt")&&/subtitles|captions|descriptions|chapters|metadata/.test(e[t].kind)){var n=document.createElement("track");n.src=e[t].file,n.kind=e[t].kind,n.srclang=e[t].language||"",n.label=e[t].label,n.mode="disabled",Gt.appendChild(n)}}}function K(){for(var e=Gt.seekable?Gt.seekable.length:0,t=1/0;e--;)t=Math.min(t,Gt.seekable.start(e));return t}function Z(){for(var e=Gt.seekable?Gt.seekable.length:0,t=0;e--;)t=Math.max(t,Gt.seekable.end(e));return t}function et(){jt.seeking=!1,jt.trigger(i.JWPLAYER_MEDIA_SEEKED)}function tt(){jt.trigger("volume",{volume:Math.round(100*Gt.volume)}),jt.trigger("mute",{mute:Gt.muted})}function nt(){Gt.currentTime===Tt&&H()}function it(){var e=Gt.buffered,n=Gt.duration;return!e||0===e.length||0>=n||n===1/0?0:t.between(e.end(e.length-1)/n,0,1)}function rt(){if(Dt&&jt.state!==r.IDLE&&jt.state!==r.COMPLETE){if(f(Ot),Lt=-1,Mt=!0,jt.trigger(i.JWPLAYER_MEDIA_BEFORECOMPLETE),!Dt)return;ot()}}function ot(){f(Ot),jt.setState(r.COMPLETE),Mt=!1,jt.trigger(i.JWPLAYER_MEDIA_COMPLETE)}function at(e){Bt=!0,pt(e),t.isIOS()&&(Gt.controls=!1)}function st(){var e=-1,t=0;if(Ft)for(t;t<Ft.length;t++)if("showing"===Ft[t].mode){e=t;break}yt(e+1)}function ct(){for(var e=-1,t=0;t<Gt.audioTracks.length;t++)if(Gt.audioTracks[t].enabled){e=t;break}ht(e)}function lt(e){ut(e.currentTarget.activeCues)}function ut(e){if(e&&e.length&&Wt!==e[0].startTime){var t={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"},i=function(e,t){var n,i,r,o,a,s;for(n="",r=e.length,i=t||0;r>i;)switch(o=e[i++],o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(o);break;case 12:case 13:a=e[i++],n+=String.fromCharCode((31&o)<<6|63&a);break;case 14:a=e[i++],s=e[i++],n+=String.fromCharCode((15&o)<<12|(63&a)<<6|(63&s)<<0)}return n},r=function(e,t){var n,i,r;for(n="",r=e.length,i=t||0;r>i;)254===e[i]&&255===e[i+1]||(n+=String.fromCharCode((e[i]<<8)+e[i+1])),i+=2;return n},o=n.reduce(e,function(e,o){if(!("value"in o)&&"data"in o&&o.data instanceof ArrayBuffer){var a=o,s=new Uint8Array(a.data);o={value:{key:"",data:""}};for(var c=10;14>c&&c<s.length&&0!==s[c];)o.value.key+=String.fromCharCode(s[c]),c++;var l=s[20];o.value.data=1===l||2===l?r(s,21):i(s,21)}if(t.hasOwnProperty(o.value.key)&&(e[t[o.value.key]]=o.value.data),o.value.info){var u=e[o.value.key];n.isObject(u)||(u={},e[o.value.key]=u),u[o.value.info]=o.value.data}else e[o.value.key]=o.value.data;return e},{});Wt=e[0].startTime,jt.trigger("meta",{metadataTime:Wt,metadata:o})}}function dt(e){Bt=!1,pt(e),t.isIOS()&&(Gt.controls=!1)}function pt(e){jt.trigger("fullscreenchange",{target:e.target,jwstate:Bt})}function ft(e){if(Ut=null,e){if(e.length){for(var t=0;t<e.length;t++)if(e[t].enabled){Vt=t;break}-1===Vt&&(Vt=0,e[Vt].enabled=!0),Ut=n.map(e,function(e){var t={name:e.label||e.language,language:e.language};return t})}l(e,"change",ct),Ut&&jt.trigger("audioTracks",{currentTrack:Vt,tracks:Ut})}}function ht(e){Gt&&Gt.audioTracks&&Ut&&e>-1&&e<Gt.audioTracks.length&&e!==Vt&&(Gt.audioTracks[Vt].enabled=!1,Vt=e,Gt.audioTracks[Vt].enabled=!0,jt.trigger("audioTrackChanged",{currentTrack:Vt,tracks:Ut}))}function gt(){return Ut||[]}function mt(){return Vt}function vt(e){if(Ft=null,e){if(e.length){var t=0,n=e.length;for(t;n>t;t++)"metadata"===e[t].kind?(e[t].oncuechange=lt,e[t].mode="showing"):"subtitles"!==e[t].kind&&"captions"!==e[t].kind||(e[t].mode="disabled",Ft||(Ft=[]),Ft.push(e[t]))}l(e,"change",st),Ft&&Ft.length&&jt.trigger("subtitlesTracks",{tracks:Ft})}}function yt(e){Ft&&Ht!==e-1&&(Ht>-1&&Ht<Ft.length?Ft[Ht].mode="disabled":n.each(Ft,function(e){e.mode="disabled"}),e>0&&e<=Ft.length?(Ht=e-1,Ft[Ht].mode="showing"):Ht=-1,jt.trigger("subtitlesTrackChanged",{currentTrack:Ht+1,tracks:Ft}))}function _t(){return Ht}function bt(){if("hls"===xt[0].type){var e="video";0===Gt.videoWidth&&(e="audio"),jt.trigger("mediaType",{mediaType:e})}}function wt(){Ft&&Ft[Ht]&&(Ft[Ht].mode="disabled")}this.state=r.IDLE,this.seeking=!1,n.extend(this,a),this.trigger=function(e,t){return Dt?a.trigger.call(this,e,t):void 0},this.setState=function(e){return Dt?o.setState.call(this,e):void 0};var At,Ct,Et,Tt,St,xt,jt=this,kt={click:S,durationchange:x,ended:rt,error:V,loadeddata:T,loadedmetadata:M,canplay:N,playing:F,progress:j,pause:U,seeked:et,timeupdate:k,volumechange:tt,webkitbeginfullscreen:at,webkitendfullscreen:dt},Rt=!1,It=0,Ot=-1,Pt=-1,Dt=!0,Lt=-1,Nt=null,Mt=!1,Bt=!1,Ft=null,Ut=null,Ht=-1,Vt=-1,Wt=-1,zt={level:{}},$t=document.getElementById(p),Gt=$t?$t.querySelector("video"):void 0;Gt=Gt||document.createElement("video"),Gt.className="jw-video jw-reset",s(kt,Gt),w||(Gt.controls=!0,Gt.controls=!1),Gt.setAttribute("x-webkit-airplay","allow"),Gt.setAttribute("webkit-playsinline",""),this.stop=function(){f(Ot),Dt&&(J(),t.isIETrident()&&Gt.pause(),Lt=-1,this.setState(r.IDLE))},this.destroy=function(){c(kt,Gt),u(Gt.audioTracks,"change",ct),u(Gt.textTracks,"change",st),this.remove(),this.off()},this.init=function(e){Dt&&(xt=e.sources,Lt=$(e.sources),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),Ct=xt[Lt],Tt=e.starttime||0,Et=e.duration||0,zt.reason="",Q(e))},this.load=function(e){Dt&&(z(e.sources),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources),v&&!Gt.hasAttribute("hasplayed")||jt.setState(r.LOADING),Y(e.starttime||0,e.duration||0,e))},this.play=function(){return jt.seeking?(jt.setState(r.LOADING),void jt.once(i.JWPLAYER_MEDIA_SEEKED,jt.play)):void Gt.play()},this.pause=function(){f(Ot),Gt.pause(),this.setState(r.PAUSED)},this.seek=function(e){if(Dt)if(0>e&&(e+=K()+Z()),0===It&&this.trigger(i.JWPLAYER_MEDIA_SEEK,{position:Gt.currentTime,offset:e}),Rt||(Rt=!!Z()),Rt){It=0;try{jt.seeking=!0,Gt.currentTime=e}catch(t){jt.seeking=!1,It=e}}else It=e,_&&Gt.paused&&Gt.play()},this.volume=function(e){e=t.between(e/100,0,1),Gt.volume=e},this.mute=function(e){Gt.muted=!!e},this.checkComplete=function(){return Mt},this.detachMedia=function(){return f(Ot),wt(),Dt=!1,Gt},this.attachMedia=function(){Dt=!0,Rt=!1,this.seeking=!1,Gt.loop=!1,Mt&&ot()},this.setContainer=function(e){At=e,e.appendChild(Gt)},this.getContainer=function(){return At},this.remove=function(){J(),f(Ot),Lt=-1,At===Gt.parentNode&&At.removeChild(Gt)},this.setVisibility=function(t){t=!!t,t||b?e.style(At,{visibility:"visible",opacity:1}):e.style(At,{visibility:"",opacity:0})},this.resize=function(t,n,i){if(!(t&&n&&Gt.videoWidth&&Gt.videoHeight))return!1;var r={objectFit:""};if("uniform"===i){var o=t/n,a=Gt.videoWidth/Gt.videoHeight;Math.abs(o-a)<.09&&(r.objectFit="fill",i="exactfit")}var s=g||b||w||A;if(s){var c=-Math.floor(Gt.videoWidth/2+1),l=-Math.floor(Gt.videoHeight/2+1),u=Math.ceil(100*t/Gt.videoWidth)/100,d=Math.ceil(100*n/Gt.videoHeight)/100;"none"===i?u=d=1:"fill"===i?u=d=Math.max(u,d):"uniform"===i&&(u=d=Math.min(u,d)),r.width=Gt.videoWidth,r.height=Gt.videoHeight,r.top=r.left="50%",r.margin=0,e.transform(Gt,"translate("+c+"px, "+l+"px) scale("+u.toFixed(2)+", "+d.toFixed(2)+")")}return e.style(Gt,r),!1},this.setFullscreen=function(e){if(e=!!e){var n=t.tryCatch(function(){var e=Gt.webkitEnterFullscreen||Gt.webkitEnterFullScreen;e&&e.apply(Gt)});return n instanceof t.Error?!1:jt.getFullScreen()}var i=Gt.webkitExitFullscreen||Gt.webkitExitFullScreen;return i&&i.apply(Gt),e},jt.getFullScreen=function(){return Bt||!!Gt.webkitDisplayingFullscreen},this.setCurrentQuality=function(e){if(Lt!==e&&(e=parseInt(e,10),e>=0&&xt&&xt.length>e)){Lt=e,zt.reason="api",zt.level={width:0,height:0},this.trigger(i.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:W(xt)}),E.qualityLabel=xt[e].label;var t=Gt.currentTime||0,n=Gt.duration||0;0>=n&&(n=Et),jt.setState(r.LOADING),Y(t,n)}},this.getCurrentQuality=function(){return Lt},this.getQualityLevels=function(){return W(xt)},this.getName=function(){return{name:C}},this.setCurrentAudioTrack=ht,this.getAudioTracks=gt,this.getCurrentAudioTrack=mt,this.setSubtitlesTrack=yt,this.getSubtitlesTrack=_t}var f=window.clearTimeout,h=256,g=t.isIE(),m=t.isMSIE(),v=t.isMobile(),y=t.isSafari(),_=t.isFF(),b=t.isAndroidNative(),w=t.isIOS(7),A=t.isIOS(8),C="html5",E=function(){};return E.prototype=o,p.prototype=new E,p}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(46),n(62),n(45)],r=function(e,t,n,i){var r=e.noop,o=i.constant(!1),a={supports:o,play:r,load:r,stop:r,volume:r,mute:r,seek:r,resize:r,remove:r,destroy:r,setVisibility:r,setFullscreen:o,getFullscreen:r,getContainer:r,setContainer:o,getName:r,getQualityLevels:r,getCurrentQuality:r,setCurrentQuality:r,getAudioTracks:r,getCurrentAudioTrack:r,setCurrentAudioTrack:r,checkComplete:r,setControls:r,attachMedia:r,detachMedia:r,setState:function(e){var i=this.state||n.IDLE;this.state=e,e!==i&&this.trigger(t.JWPLAYER_PLAYER_STATE,{newstate:e})},sendMediaType:function(e){var n=e[0].type,i="oga"===n||"aac"===n||"mp3"===n||"mpeg"===n||"vorbis"===n;this.trigger(t.JWPLAYER_MEDIA_TYPE,{mediaType:i?"audio":"video"})}};return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(45),n(46),n(62),n(88),n(86),n(47)],r=function(e,t,n,i,r,o,a){function s(e){return e+"_swf_"+u++}function c(t){var n=document.createElement("a");n.href=t.flashplayer;var i=n.hostname===window.location.host;return e.isChrome()&&!i}function l(l,u){function d(e){if(O)for(var t=0;t<e.length;t++){var n=e[t];if(n.bitrate){var i=Math.round(n.bitrate/1e3);n.label=p(i)}}}function p(e){var t=O[e];if(!t){for(var n=1/0,i=O.bitrates.length;i--;){var r=Math.abs(O.bitrates[i]-e);if(r>n)break;n=r}t=O.labels[O.bitrates[i+1]],O[e]=t}return t}function f(){var e=u.hlslabels;if(!e)return null;var t={},n=[];for(var i in e){var r=parseFloat(i);if(!isNaN(r)){var o=Math.round(r);t[o]=e[i],n.push(o)}}return 0===n.length?null:(n.sort(function(e,t){return e-t}),{labels:t,bitrates:n})}function h(){w=setTimeout(function(){a.trigger.call(k,"flashBlocked")},4e3),y.once("embedded",function(){m(),a.trigger.call(k,"flashUnblocked")},k)}function g(){m(),h()}function m(){clearTimeout(w),window.removeEventListener("focus",g)}var v,y,_,b=null,w=-1,A=!1,C=-1,E=null,T=-1,S=null,x=!0,j=!1,k=this,R=function(){return y&&y.__ready},I=function(){y&&y.triggerFlash.apply(y,arguments)},O=f();t.extend(this,a,{init:function(e){e.preload&&"none"!==e.preload&&!u.autostart&&(b=e)},load:function(e){b=e,A=!1,this.setState(i.LOADING),I("load",e),e.sources.length&&"hls"!==e.sources[0].type&&this.sendMediaType(e.sources)},play:function(){I("play")},pause:function(){I("pause"),this.setState(i.PAUSED)},stop:function(){I("stop"),C=-1,b=null,this.setState(i.IDLE)},seek:function(e){I("seek",e)},volume:function(e){if(t.isNumber(e)){var n=Math.min(Math.max(0,e),100);R()&&I("volume",n)}},mute:function(e){R()&&I("mute",e)},setState:function(){return o.setState.apply(this,arguments)},checkComplete:function(){return A},attachMedia:function(){x=!0,A&&(this.setState(i.COMPLETE),this.trigger(n.JWPLAYER_MEDIA_COMPLETE),A=!1)},detachMedia:function(){return x=!1,null},getSwfObject:function(e){var t=e.getElementsByTagName("object")[0];return t?(t.off(null,null,this),t):r.embed(u.flashplayer,e,s(l),u.wmode)},getContainer:function(){return v},setContainer:function(r){if(v!==r){v=r,y=this.getSwfObject(r),document.hasFocus()?h():window.addEventListener("focus",g),y.once("ready",function(){m(),y.once("pluginsLoaded",function(){y.queueCommands=!1,I("setupCommandQueue",y.__commandQueue),y.__commandQueue=[]});var e=t.extend({},u),i=y.triggerFlash("setup",e);i===y?y.__ready=!0:this.trigger(n.JWPLAYER_MEDIA_ERROR,i),b&&I("init",b)},this);var o=[n.JWPLAYER_MEDIA_META,n.JWPLAYER_MEDIA_ERROR,n.JWPLAYER_MEDIA_SEEK,n.JWPLAYER_MEDIA_SEEKED,"subtitlesTracks","subtitlesTrackChanged","subtitlesTrackData","mediaType"],s=[n.JWPLAYER_MEDIA_BUFFER,n.JWPLAYER_MEDIA_TIME],l=[n.JWPLAYER_MEDIA_BUFFER_FULL];y.on(n.JWPLAYER_MEDIA_LEVELS,function(e){d(e.levels),C=e.currentQuality,E=e.levels,this.trigger(e.type,e)},this),y.on(n.JWPLAYER_MEDIA_LEVEL_CHANGED,function(e){d(e.levels),C=e.currentQuality,E=e.levels,this.trigger(e.type,e)},this),y.on(n.JWPLAYER_AUDIO_TRACKS,function(e){T=e.currentTrack,S=e.tracks,this.trigger(e.type,e)},this),y.on(n.JWPLAYER_AUDIO_TRACK_CHANGED,function(e){T=e.currentTrack,S=e.tracks,this.trigger(e.type,e)},this),y.on(n.JWPLAYER_PLAYER_STATE,function(e){var t=e.newstate;t!==i.IDLE&&this.setState(t)},this),y.on(s.join(" "),function(e){"Infinity"===e.duration&&(e.duration=1/0),this.trigger(e.type,e)},this),y.on(o.join(" "),function(e){this.trigger(e.type,e)},this),y.on(l.join(" "),function(e){this.trigger(e.type)},this),y.on(n.JWPLAYER_MEDIA_BEFORECOMPLETE,function(e){A=!0,this.trigger(e.type),x===!0&&(A=!1)},this),y.on(n.JWPLAYER_MEDIA_COMPLETE,function(e){A||(this.setState(i.COMPLETE),this.trigger(e.type))},this),y.on("visualQuality",function(e){e.reason=e.reason||"api",this.trigger("visualQuality",e),this.trigger(n.JWPLAYER_PROVIDER_FIRST_FRAME,{})},this),y.on(n.JWPLAYER_PROVIDER_CHANGED,function(e){_=e.message,this.trigger(n.JWPLAYER_PROVIDER_CHANGED,e)},this),y.on(n.JWPLAYER_ERROR,function(t){e.log("Error playing media: %o %s",t.code,t.message,t),this.trigger(n.JWPLAYER_MEDIA_ERROR,t)},this),c(u)&&y.on("throttle",function(e){m(),"resume"===e.state?a.trigger.call(k,"flashThrottle",e):w=setTimeout(function(){a.trigger.call(k,"flashThrottle",e)},250)},this)}},remove:function(){C=-1,E=null,r.remove(y)},setVisibility:function(e){e=!!e,v.style.opacity=e?1:0},resize:function(e,t,n){n&&I("stretch",n)},setControls:function(e){I("setControls",e)},setFullscreen:function(e){j=e,I("fullscreen",e)},getFullScreen:function(){return j},setCurrentQuality:function(e){I("setCurrentQuality",e)},getCurrentQuality:function(){return C},setSubtitlesTrack:function(e){I("setSubtitlesTrack",e)},getName:function(){return _?{name:"flash_"+_}:{name:"flash"}},getQualityLevels:function(){return E||b.sources},getAudioTracks:function(){return S},getCurrentAudioTrack:function(){return T},setCurrentAudioTrack:function(e){I("setCurrentAudioTrack",e)},destroy:function(){m(),this.remove(),y&&(y.off(),y=null),v=null,b=null,this.off()}}),this.trigger=function(e,t){return x?a.trigger.call(this,e,t):void 0}}var u=0,d=function(){};return d.prototype=o,l.prototype=new d,l}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(47),n(45)],r=function(e,t,n){function i(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function r(r,o,c,l){var u;if(l=l||"opaque",e.isMSIE()){var d=document.createElement("div");o.appendChild(d),d.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+c+'" name="'+c+'" tabindex="0"><param name="movie" value="'+r+'"><param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always"><param name="wmode" value="'+l+'"><param name="bgcolor" value="'+s+'"><param name="menu" value="false"></object>';for(var p=o.getElementsByTagName("object"),f=p.length;f--;)p[f].id===c&&(u=p[f])}else u=document.createElement("object"),u.setAttribute("type","application/x-shockwave-flash"),u.setAttribute("data",r),u.setAttribute("width","100%"),u.setAttribute("height","100%"),u.setAttribute("bgcolor",s),u.setAttribute("id",c),u.setAttribute("name",c),i(u,"allowfullscreen","true"),i(u,"allowscriptaccess","always"),i(u,"wmode",l),i(u,"menu","false"),o.appendChild(u,o);return u.className="jw-swf jw-reset",u.style.display="block",u.style.position="absolute",u.style.left=0,u.style.right=0,u.style.top=0,u.style.bottom=0,n.extend(u,t),u.queueCommands=!0,u.triggerFlash=function(t){var i=this;if("setup"!==t&&i.queueCommands||!i.__externalCall){for(var r=i.__commandQueue,o=r.length;o--;)r[o][0]===t&&r.splice(o,1);return r.push(Array.prototype.slice.call(arguments)),i}var s=Array.prototype.slice.call(arguments,1),c=e.tryCatch(function(){if(s.length){for(var e=s.length;e--;)"object"==typeof s[e]&&n.each(s[e],a);var r=JSON.stringify(s);i.__externalCall(t,r)}else i.__externalCall(t)});return c instanceof e.Error&&(console.error(t,c),"setup"===t)?(c.name="Failed to setup flash",c):i},u.__commandQueue=[],u}function o(e){e&&e.parentNode&&(e.style.display="none",e.parentNode.removeChild(e))}function a(e,t,n){e instanceof window.HTMLElement&&delete n[t]}var s="#000000";return{embed:r,remove:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(48)],r=function(e,t){function n(e){return"jwplayer."+e}function i(){return e.reduce(this.persistItems,function(e,i){var r=l[n(i)];return r&&(e[i]=t.serialize(r)),e},{})}function r(e,t){try{l[n(e)]=t}catch(i){c&&c.debug&&console.error(i)}}function o(){e.each(this.persistItems,function(e){l.removeItem(n(e))})}function a(){}function s(t,n){this.persistItems=t,e.each(this.persistItems,function(e){n.on("change:"+e,function(t,n){r(e,n)})})}var c=window.jwplayer,l={removeItem:t.noop};try{l=window.localStorage}catch(u){}return e.extend(a.prototype,{getAllItems:i,track:s,clear:o}),a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(61),n(46),n(45)],r=function(e,t,n){function i(e){e.mediaController.off(t.JWPLAYER_MEDIA_PLAY_ATTEMPT,e._onPlayAttempt),e.mediaController.off(t.JWPLAYER_PROVIDER_FIRST_FRAME,e._triggerFirstFrame),e.mediaController.off(t.JWPLAYER_MEDIA_TIME,e._onTime)}function r(e){i(e),e._triggerFirstFrame=n.once(function(){var n=e._qoeItem;n.tick(t.JWPLAYER_MEDIA_FIRST_FRAME);var r=n.between(t.JWPLAYER_MEDIA_PLAY_ATTEMPT,t.JWPLAYER_MEDIA_FIRST_FRAME);e.mediaController.trigger(t.JWPLAYER_MEDIA_FIRST_FRAME,{loadTime:r}),i(e)}),e._onTime=a(e._triggerFirstFrame),e._onPlayAttempt=function(){e._qoeItem.tick(t.JWPLAYER_MEDIA_PLAY_ATTEMPT)},e.mediaController.on(t.JWPLAYER_MEDIA_PLAY_ATTEMPT,e._onPlayAttempt),e.mediaController.once(t.JWPLAYER_PROVIDER_FIRST_FRAME,e._triggerFirstFrame),e.mediaController.on(t.JWPLAYER_MEDIA_TIME,e._onTime)}function o(n){function i(n,i,o){n._qoeItem&&o&&n._qoeItem.end(o.get("state")),n._qoeItem=new e,n._qoeItem.tick(t.JWPLAYER_PLAYLIST_ITEM),n._qoeItem.start(i.get("state")),r(n),i.on("change:state",function(e,t,i){n._qoeItem.end(i),n._qoeItem.start(t)})}n.on("change:mediaModel",i)}var a=function(e){var t=Number.MIN_VALUE;return function(n){n.position>t&&e(),t=n.position}};return{model:o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(47)],r=function(e,t){var n=e.extend({get:function(e){return this.attributes=this.attributes||{},this.attributes[e]
},set:function(e,t){if(this.attributes=this.attributes||{},this.attributes[e]!==t){var n=this.attributes[e];this.attributes[e]=t,this.trigger("change:"+e,this,t,n)}},clone:function(){return e.clone(this.attributes)}},t);return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(47),n(77),n(76),n(46),n(62),n(48),n(45)],r=function(e,t,n,i,r,o,a){var s=function(e,i){this.model=i,this._adModel=(new t).setup({id:i.get("id"),volume:i.get("volume"),fullscreen:i.get("fullscreen"),mute:i.get("mute")}),this._adModel.on("change:state",n,this);var r=e.getContainer();this.swf=r.querySelector("object")};return s.prototype=a.extend({init:function(){if(o.isChrome()){var e=-1,t=!1;this.swf.on("throttle",function(n){if(clearTimeout(e),"resume"===n.state)t&&(t=!1,this.instreamPlay());else{var i=this;e=setTimeout(function(){i._adModel.get("state")===r.PLAYING&&(t=!0,i.instreamPause())},250)}},this)}this.swf.on("instream:state",function(e){switch(e.newstate){case r.PLAYING:this._adModel.set("state",e.newstate);break;case r.PAUSED:this._adModel.set("state",e.newstate)}},this).on("instream:time",function(e){this._adModel.set("position",e.position),this._adModel.set("duration",e.duration),this.trigger(i.JWPLAYER_MEDIA_TIME,e)},this).on("instream:complete",function(e){this.trigger(i.JWPLAYER_MEDIA_COMPLETE,e)},this).on("instream:error",function(e){this.trigger(i.JWPLAYER_MEDIA_ERROR,e)},this),this.swf.triggerFlash("instream:init"),this.applyProviderListeners=function(e){this.model.on("change:volume",function(t,n){e.volume(n)},this),this.model.on("change:mute",function(t,n){e.mute(n)},this)}},instreamDestroy:function(){this._adModel&&(this.off(),this.swf.off(null,null,this),this.swf.triggerFlash("instream:destroy"),this.swf=null,this._adModel.off(),this._adModel=null,this.model=null)},load:function(e){this.swf.triggerFlash("instream:load",e)},instreamPlay:function(){this.swf.triggerFlash("instream:play")},instreamPause:function(){this.swf.triggerFlash("instream:pause")}},e),s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(94),n(47),n(45),n(46)],r=function(e,t,n,i){var r=function(t,r,o,a){function s(){p("Setup Timeout Error","Setup took longer than "+m+" seconds to complete.")}function c(){n.each(g,function(e){e.complete!==!0&&e.running!==!0&&null!==t&&u(e.depends)&&(e.running=!0,l(e))})}function l(e){var n=function(t){t=t||{},d(e,t)};e.method(n,r,t,o,a)}function u(e){return n.all(e,function(e){return g[e].complete})}function d(e,t){"error"===t.type?p(t.msg,t.reason):"complete"===t.type?(clearTimeout(f),h.trigger(i.JWPLAYER_READY)):(e.complete=!0,c())}function p(e,t){clearTimeout(f),h.trigger(i.JWPLAYER_SETUP_ERROR,{message:e+": "+t}),h.destroy()}var f,h=this,g=e.getQueue(),m=30;this.start=function(){f=setTimeout(s,1e3*m),c()},this.destroy=function(){clearTimeout(f),this.off(),g.length=0,t=null,r=null,o=null}};return r.prototype=t,r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(95),n(81),n(80),n(45),n(48),n(57),n(97)],r=function(e,t,i,r,o,a,s){function c(e,t,n){if(t){var i=t.client;delete t.client,/\.(js|swf)$/.test(i||"")||(i=a.repo()+n),e[i]=t}}function l(e,n){var i=r.clone(n.get("plugins"))||{},o=n.get("edition"),s=t(o),l=/^(vast|googima)$/,u=/\.(js|swf)$/,d=a.repo(),p=n.get("advertising");if(p&&(u.test(p.client)?i[p.client]=p:l.test(p.client)&&(i[d+p.client+".js"]=p),delete p.client),s("jwpsrv")){var f=n.get("analytics");r.isObject(f)||(f={}),c(i,f,"jwpsrv.js")}c(i,n.get("ga"),"gapro.js"),c(i,n.get("sharing"),"sharing.js"),c(i,n.get("related"),"related.js"),n.set("plugins",i),e()}function u(t,i){var r=i.get("key")||window.jwplayer&&window.jwplayer.key,c=new e(r),l=c.edition();if(i.set("key",r),i.set("edition",l),"unlimited"===l){var u=o.getScriptPath("jwplayer.js");if(!u)return void s.error(t,"Error setting up player","Could not locate jwplayer.js script tag");n.p=u,o.repo=a.repo=a.loadFrom=function(){return u}}t()}function d(e,t,i){"dashjs"===e?n.e(4,function(){var e=n(107);e.register(window.jwplayer),i.updateProviders(),t()}):n.e(5,function(){var e=n(109);e.register(window.jwplayer),i.updateProviders(),t()})}function p(e,t){var n=t.get("playlist"),o=t.get("edition"),a=t.get("dash");r.contains(["shaka","dashjs"],a)||(a="shaka");var s=r.where(i,{name:a})[0].supports,c=r.some(n,function(e){return s(e,o)});c?d(a,e,t):e()}function f(){var e=s.getQueue();return e.LOAD_DASH={method:p,depends:["CHECK_KEY","FILTER_PLAYLIST"]},e.CHECK_KEY={method:u,depends:["LOADED_POLYFILLS"]},e.FILTER_PLUGINS={method:l,depends:["CHECK_KEY"]},e.FILTER_PLAYLIST.depends.push("CHECK_KEY"),e.LOAD_PLUGINS.depends.push("FILTER_PLUGINS"),e.SETUP_VIEW.depends.push("CHECK_KEY"),e.SEND_READY.depends.push("LOAD_DASH"),e}return{getQueue:f}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(96),n(81)],r=function(e,t,n){var i="invalid",r="RnXcsftYjWRDA^Uy",o=function(o){function a(o){e.exists(o)||(o="");try{o=t.decrypt(o,r);var a=o.split("/");s=a[0],"pro"===s&&(s="premium");var u=n(s);if(a.length>2&&u("setup")){c=a[1];var d=parseInt(a[2]);d>0&&(l=new Date,l.setTime(d))}else s=i}catch(p){s=i}}var s,c,l;this.edition=function(){return l&&l.getTime()<(new Date).getTime()?i:s},this.token=function(){return c},this.expiration=function(){return l},a(o)};return o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){var e=function(e){return window.atob(e)},t=function(e){return unescape(encodeURIComponent(e))},n=function(e){try{return decodeURIComponent(escape(e))}catch(t){return e}},i=function(e){for(var t=new Array(Math.ceil(e.length/4)),n=0;n<t.length;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t},r=function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(255&e[n],e[n]>>>8&255,e[n]>>>16&255,e[n]>>>24&255);return t.join("")};return{decrypt:function(o,a){if(o=String(o),a=String(a),0==o.length)return"";for(var s,c,l=i(e(o)),u=i(t(a).slice(0,16)),d=l.length,p=l[d-1],f=l[0],h=2654435769,g=Math.floor(6+52/d),m=g*h;0!=m;){c=m>>>2&3;for(var v=d-1;v>=0;v--)p=l[v>0?v-1:d-1],s=(p>>>5^f<<2)+(f>>>3^p<<4)^(m^f)+(u[3&v^c]^p),f=l[v]-=s;m-=h}var y=r(l);return y=y.replace(/\0+$/,""),n(y)}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(98),n(65),n(101),n(58),n(45),n(48),n(46)],r=function(e,t,i,r,o,a,s){function c(){var e={LOAD_PROMISE_POLYFILL:{method:l,depends:[]},LOAD_BASE64_POLYFILL:{method:u,depends:[]},LOADED_POLYFILLS:{method:d,depends:["LOAD_PROMISE_POLYFILL","LOAD_BASE64_POLYFILL"]},LOAD_PLUGINS:{method:p,depends:["LOADED_POLYFILLS"]},INIT_PLUGINS:{method:f,depends:["LOAD_PLUGINS","SETUP_VIEW"]},LOAD_YOUTUBE:{method:w,depends:["FILTER_PLAYLIST"]},LOAD_SKIN:{method:b,depends:["LOADED_POLYFILLS"]},LOAD_PLAYLIST:{method:g,depends:["LOADED_POLYFILLS"]},FILTER_PLAYLIST:{method:m,depends:["LOAD_PLAYLIST"]},SETUP_VIEW:{method:A,depends:["LOAD_SKIN"]},SEND_READY:{method:C,depends:["INIT_PLUGINS","LOAD_YOUTUBE","SETUP_VIEW"]}};return e}function l(e){window.Promise?e():n.e(1,function(){n(104),e()})}function u(e){window.btoa&&window.atob?e():n.e(2,function(){n(105),e()})}function d(e){e()}function p(t,n){T=e.loadPlugins(n.get("id"),n.get("plugins")),T.on(s.COMPLETE,t),T.on(s.ERROR,o.partial(h,t)),T.load()}function f(e,t,n){T.setupPlugins(n,t),e()}function h(e,t){E(e,"Could not load plugin",t.message)}function g(e,n){var i=n.get("playlist");o.isString(i)?(S=new t,S.on(s.JWPLAYER_PLAYLIST_LOADED,function(t){n.set("playlist",t.playlist),e()}),S.on(s.JWPLAYER_ERROR,o.partial(v,e)),S.load(i)):e()}function m(e,t,n,i,r){var o=t.get("playlist"),a=r(o);a?e():v(e)}function v(e,t){t&&t.message?E(e,"Error loading playlist",t.message):E(e,"Error loading player","No playable sources found")}function y(e,t){return o.contains(r.SkinsLoadable,e)?t+"skins/"+e+".css":void 0}function _(e){for(var t=document.styleSheets,n=0,i=t.length;i>n;n++)if(t[n].href===e)return!0;return!1}function b(e,t){var n=t.get("skin"),a=t.get("skinUrl");if(o.contains(r.SkinsIncluded,n))return void e();if(a||(a=y(n,t.get("base"))),o.isString(a)&&!_(a)){t.set("skin-loading",!0);var c=!0,l=new i(a,c);l.addEventListener(s.COMPLETE,function(){t.set("skin-loading",!1)}),l.addEventListener(s.ERROR,function(){t.set("skin","seven"),t.set("skin-loading",!1)}),l.load()}o.defer(function(){e()})}function w(e,t){var i=t.get("playlist"),r=o.some(i,function(e){var t=a.isYouTube(e.file,e.type);if(t&&!e.image){var n=e.file,i=a.youTubeID(n);e.image="//i.ytimg.com/vi/"+i+"/0.jpg"}return t});r?n.e(3,function(){var t=n(106);t.register(window.jwplayer),e()}):e()}function A(e,t,n,i){i.setup(),e()}function C(e){e({type:"complete"})}function E(e,t,n){e({type:"error",msg:t,reason:n})}var T,S;return{getQueue:c,error:E}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(99),n(102),n(103),n(100)],r=function(e,t,n,i){var r={},o={},a=function(n,i){return o[n]=new e(new t(r),i),o[n]},s=function(e,t,o,a){var s=i.getPluginName(e);r[s]||(r[s]=new n(e)),r[s].registerPlugin(e,t,o,a)};return{loadPlugins:a,registerPlugin:s}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(100),n(48),n(46),n(47),n(45),n(101)],r=function(e,t,n,i,r,o){function a(e,t,n){return function(){var i=e.getContainer().getElementsByClassName("jw-overlays")[0];i&&(i.appendChild(n),n.left=i.style.left,n.top=i.style.top,t.displayArea=i)}}function s(e){function t(){var t=e.displayArea;t&&e.resize(t.clientWidth,t.clientHeight)}return function(){t(),setTimeout(t,400)}}var c=function(c,l){function u(){m||(m=!0,g=o.loaderstatus.COMPLETE,h.trigger(n.COMPLETE))}function d(){if(!y&&(l&&0!==r.keys(l).length||u(),!m)){var i=c.getPlugins();f=r.after(v,u),r.each(l,function(r,a){var s=e.getPluginName(a),c=i[s],l=c.getJS(),u=c.getTarget(),d=c.getStatus();d!==o.loaderstatus.LOADING&&d!==o.loaderstatus.NEW&&(l&&!t.versionCheck(u)&&h.trigger(n.ERROR,{message:"Incompatible player version"}),f())})}}function p(e){if(!y){var i="File not found";e.url&&t.log(i,e.url),this.off(),this.trigger(n.ERROR,{message:i}),d()}}var f,h=r.extend(this,i),g=o.loaderstatus.NEW,m=!1,v=r.size(l),y=!1;this.setupPlugins=function(n,i){var o=[],l=c.getPlugins(),u=i.get("plugins");r.each(u,function(i,c){var d=e.getPluginName(c),p=l[d],f=p.getFlashPath(),h=p.getJS(),g=p.getURL();if(f){var m=r.extend({name:d,swf:f,pluginmode:p.getPluginmode()},i);o.push(m)}var v=t.tryCatch(function(){if(h&&u[g]){var e=document.createElement("div");e.id=n.id+"_"+d,e.className="jw-plugin jw-reset";var t=r.extend({},u[g]),i=p.getNewInstance(n,t,e);i.addToPlayer=a(n,i,e),i.resizeHandler=s(i),n.addPlugin(d,i,e)}});v instanceof t.Error&&t.log("ERROR: Failed to load "+d+".")}),i.set("flashPlugins",o)},this.load=function(){if(t.exists(l)&&"object"!==t.typeOf(l))return void d();g=o.loaderstatus.LOADING,r.each(l,function(e,i){if(t.exists(i)){var r=c.addPlugin(i);r.on(n.COMPLETE,d),r.on(n.ERROR,p)}});var e=c.getPlugins();r.each(e,function(e){e.load()}),d()},this.destroy=function(){y=!0,this.off()},this.getStatus=function(){return g}};return c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(51)],r=function(e){var t={},n=t.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};return t.getPluginPathType=function(t){if("string"==typeof t){t=t.split("?")[0];var i=t.indexOf("://");if(i>0)return n.ABSOLUTE;var r=t.indexOf("/"),o=e.extension(t);return!(0>i&&0>r)||o&&isNaN(o)?n.RELATIVE:n.CDN}},t.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},t.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(46),n(47),n(45)],r=function(e,t,n){var i={},r={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},o=function(o,a){function s(t){u=r.ERROR,l.trigger(e.ERROR,t)}function c(t){u=r.COMPLETE,l.trigger(e.COMPLETE,t)}var l=n.extend(this,t),u=r.NEW;this.addEventListener=this.on,this.removeEventListener=this.off,this.makeStyleLink=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},this.makeScriptTag=function(e){var t=document.createElement("script");return t.src=e,t},this.makeTag=a?this.makeStyleLink:this.makeScriptTag,this.load=function(){if(u===r.NEW){var t=i[o];if(t&&(u=t.getStatus(),2>u))return t.on(e.ERROR,s),void t.on(e.COMPLETE,c);var n=document.getElementsByTagName("head")[0]||document.documentElement,l=this.makeTag(o),d=!1;l.onload=l.onreadystatechange=function(e){d||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(d=!0,c(e),l.onload=l.onreadystatechange=null,n&&l.parentNode&&!a&&n.removeChild(l))},l.onerror=s,n.insertBefore(l,n.firstChild),u=r.LOADING,i[o]=this}},this.getStatus=function(){return u}};return o.loaderstatus=r,o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(100),n(103)],r=function(e,t){var n=function(n){this.addPlugin=function(i){var r=e.getPluginName(i);return n[r]||(n[r]=new t(i)),n[r]},this.getPlugins=function(){return n}};return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(100),n(46),n(47),n(101),n(45)],r=function(e,t,n,i,r,o){var a={FLASH:0,JAVASCRIPT:1,HYBRID:2},s=function(s){function c(){switch(t.getPluginPathType(s)){case t.pluginPathType.ABSOLUTE:return s;case t.pluginPathType.RELATIVE:return e.getAbsolutePath(s,window.location.href)}}function l(){o.defer(function(){m=r.loaderstatus.COMPLETE,g.trigger(n.COMPLETE)})}function u(){m=r.loaderstatus.ERROR,g.trigger(n.ERROR,{url:s})}var d,p,f,h,g=o.extend(this,i),m=r.loaderstatus.NEW;this.load=function(){if(m===r.loaderstatus.NEW){if(s.lastIndexOf(".swf")>0)return d=s,m=r.loaderstatus.COMPLETE,void g.trigger(n.COMPLETE);if(t.getPluginPathType(s)===t.pluginPathType.CDN)return m=r.loaderstatus.COMPLETE,void g.trigger(n.COMPLETE);m=r.loaderstatus.LOADING;var e=new r(c());e.on(n.COMPLETE,l),e.on(n.ERROR,u),e.load()}},this.registerPlugin=function(e,t,i,o){h&&(clearTimeout(h),h=void 0),f=t,i&&o?(d=o,p=i):"string"==typeof i?d=i:"function"==typeof i?p=i:i||o||(d=e),m=r.loaderstatus.COMPLETE,g.trigger(n.COMPLETE)},this.getStatus=function(){return m},this.getPluginName=function(){return t.getPluginName(s)},this.getFlashPath=function(){if(d)switch(t.getPluginPathType(d)){case t.pluginPathType.ABSOLUTE:return d;case t.pluginPathType.RELATIVE:return s.lastIndexOf(".swf")>0?e.getAbsolutePath(d,window.location.href):e.getAbsolutePath(d,c())}return null},this.getJS=function(){return p},this.getTarget=function(){return f},this.getPluginmode=function(){return void 0!==typeof d&&void 0!==typeof p?a.HYBRID:void 0!==typeof d?a.FLASH:void 0!==typeof p?a.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,n){return new p(e,t,n)},this.getURL=function(){return s}};return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},,,,,,,,function(e,t,n){var i,r;i=[n(66),n(112),n(113),n(48)],r=function(e,t,n,i){var r=function(r,o){function a(e){if(e.tracks.length){o.mediaController.off("meta",s),y=[],_={},b={},w=0;for(var t=e.tracks||[],n=0;n<t.length;n++){var i=t[n];i.id=i.name,i.label=i.name||i.language,d(i)}var r=h();this.setCaptionsList(r),g()}}function s(e){var t=e.metadata;if(t&&"textdata"===t.type){if(!t.text)return;var n=_[t.trackid];if(!n){n={kind:"captions",id:t.trackid,data:[]},d(n);var i=h();this.setCaptionsList(i)}var r,a;t.useDTS?(n.source||(n.source=t.source||"mpegts"),r=t.begin,a=t.begin+"_"+t.text):(r=e.position||o.get("position"),a=""+Math.round(10*r)+"_"+t.text);var s=b[a];s||(s={begin:r,text:t.text},t.end&&(s.end=t.end),b[a]=s,n.data.push(s))}}function c(e){i.log("CAPTIONS("+e+")")}function l(e,t){v=t,y=[],_={},b={},w=0,o.mediaController.off("meta",s),o.mediaController.off("subtitlesTracks",a);var n,r,c,l=t.tracks;for(c=0;c<l.length;c++)if(n=l[c],r=n.kind.toLowerCase(),"captions"===r||"subtitles"===r)if(n.file){var u=i.isIOS()&&!i.isSDK(o.getConfiguration())&&-1!==n.file.indexOf(".vtt");u||(d(n),p(n))}else n.data&&d(n);0===y.length&&(o.mediaController.on("meta",s,this),o.mediaController.on("subtitlesTracks",a,this));var f=h();this.setCaptionsList(f),g()}function u(e,t){var n=null;0!==t&&(n=y[t-1]),e.set("captionsTrack",n)}function d(e){"number"!=typeof e.id&&(e.id=e.name||e.file||"cc"+y.length),e.data=e.data||[],e.label||(e.label="Unknown CC",w++,w>1&&(e.label+=" ("+w+")")),y.push(e),_[e.id]=e}function p(e){i.ajax(e.file,function(t){f(t,e)},c)}function f(r,o){var a,s=r.responseXML?r.responseXML.firstChild:null;if(s)for("xml"===e.localName(s)&&(s=s.nextSibling);s.nodeType===s.COMMENT_NODE;)s=s.nextSibling;a=i.tryCatch(s&&"tt"===e.localName(s)?function(){o.data=n(r.responseXML)}:function(){o.data=t(r.responseText)}),a instanceof i.Error&&c(a.message+": "+o.file)}function h(){for(var e=[{id:"off",label:"Off"}],t=0;t<y.length;t++)e.push({id:y[t].id,label:y[t].label||"Unknown CC"});return e}function g(){var e=0,t=o.get("captionLabel");if("Off"===t)return void o.set("captionsIndex",0);for(var n=0;n<y.length;n++){var i=y[n];if(t&&t===i.label){e=n+1;break}i["default"]||i.defaulttrack?e=n+1:i.autoselect}m(e)}function m(e){y.length?o.setVideoSubtitleTrack(e,y):o.set("captionsIndex",e)}o.on("change:playlistItem",l,this),o.on("change:captionsIndex",u,this),o.mediaController.on("subtitlesTracks",a,this),o.mediaController.on("subtitlesTrackData",function(e){var t=_[e.name];if(t){t.source=e.source;for(var n=e.captions||[],i=!1,r=0;r<n.length;r++){var o=n[r],a=e.name+"_"+o.begin+"_"+o.end;b[a]||(b[a]=o,t.data.push(o),i=!0)}i&&t.data.sort(function(e,t){return e.begin-t.begin})}},this),o.mediaController.on("meta",s,this);var v={},y=[],_={},b={},w=0;this.getCurrentIndex=function(){return o.get("captionsIndex")},this.getCaptionsList=function(){return o.get("captionsList")},this.setCaptionsList=function(e){o.set("captionsList",e)}};return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(51)],r=function(e,t){function n(e){var t={},n=e.split("\r\n");1===n.length&&(n=e.split("\n"));var r=1;if(n[0].indexOf(" --> ")>0&&(r=0),n.length>r+1&&n[r+1]){var o=n[r],a=o.indexOf(" --> ");a>0&&(t.begin=i(o.substr(0,a)),t.end=i(o.substr(a+5)),t.text=n.slice(r+1).join("<br/>"))}return t}var i=e.seconds;return function(e){var i=[];e=t.trim(e);var r=e.split("\r\n\r\n");1===r.length&&(r=e.split("\n\n"));for(var o=0;o<r.length;o++)if("WEBVTT"!==r[o]){var a=n(r[o]);a.text&&i.push(a)}if(!i.length)throw new Error("Invalid SRT file");return i}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(51)],r=function(e){function t(e){e||n()}function n(){throw new Error("Invalid DFXP file")}var i=e.seconds;return function(r){t(r);var o=[],a=r.getElementsByTagName("p");t(a),a.length||(a=r.getElementsByTagName("tt:p"),a.length||(a=r.getElementsByTagName("tts:p")));for(var s=0;s<a.length;s++){var c=a[s],l=c.innerHTML||c.textContent||c.text||"",u=e.trim(l).replace(/>\s+</g,"><").replace(/tts?:/g,"");if(u){var d=c.getAttribute("begin"),p=c.getAttribute("dur"),f=c.getAttribute("end"),h={begin:i(d),text:u};f?h.end=i(f):p&&(h.end=h.begin+i(p)),o.push(h)}}return o.length||n(),o}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(70),n(71),n(45),n(78)],r=function(e,t,n,i){function r(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=t.choose(i);if(r)return i.type}return null}var o=function(t){return t=n.isArray(t)?t:[t],n.compact(n.map(t,e))};o.filterPlaylist=function(e,t,i,r,o){var c=[];return n.each(e,function(e){e=n.extend({},e),e.allSources=a(e.sources,i,e.drm||r,e.preload||o),e.sources=s(e.allSources,t),e.sources.length&&(e.file=e.sources[0].file,(e.preload||o)&&(e.preload=e.preload||o),c.push(e))}),c};var a=function(e,i,r,o){return n.compact(n.map(e,function(e){return n.isObject(e)?(void 0!==i&&null!==i&&(e.androidhls=i),(e.drm||r)&&(e.drm=e.drm||r),(e.preload||o)&&(e.preload=e.preload||o),t(e)):void 0}))},s=function(e,t){t&&t.choose||(t=new i({primary:t?"flash":null}));var o=r(e,t);return n.where(e,{type:o})};return o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){return function(e,t){e.getPlaylistIndex=e.getItem;var n={jwPlay:t.play,jwPause:t.pause,jwSetMute:t.setMute,jwLoad:t.load,jwPlaylistItem:t.item,jwGetAudioTracks:t.getAudioTracks,jwDetachMedia:t.detachMedia,jwAttachMedia:t.attachMedia,jwAddEventListener:t.on,jwRemoveEventListener:t.off,jwStop:t.stop,jwSeek:t.seek,jwSetVolume:t.setVolume,jwPlaylistNext:t.next,jwPlaylistPrev:t.prev,jwSetFullscreen:t.setFullscreen,jwGetQualityLevels:t.getQualityLevels,jwGetCurrentQuality:t.getCurrentQuality,jwSetCurrentQuality:t.setCurrentQuality,jwSetCurrentAudioTrack:t.setCurrentAudioTrack,jwGetCurrentAudioTrack:t.getCurrentAudioTrack,jwGetCaptionsList:t.getCaptionsList,jwGetCurrentCaptions:t.getCurrentCaptions,jwSetCurrentCaptions:t.setCurrentCaptions,jwSetCues:t.setCues};e.callInternal=function(e){console.log("You are using the deprecated callInternal method for "+e);var i=Array.prototype.slice.call(arguments,1);n[e].apply(t,i)}}}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(117),n(46),n(154)],r=function(e,t,n){var i=function(i,r){var o=new e(i,r),a=o.setup;return o.setup=function(){if(a.call(this),"trial"===r.get("edition")){var e=document.createElement("div");e.className="jw-icon jw-watermark",this.element().appendChild(e)}r.on("change:skipButton",this.onSkipButton,this),r.on("change:castActive change:playlistItem",this.showDisplayIconImage,this)},o.showDisplayIconImage=function(e){var t=e.get("castActive"),n=e.get("playlistItem"),i=o.controlsContainer().getElementsByClassName("jw-display-icon-container")[0];t&&n&&n.image?(i.style.backgroundImage='url("'+n.image+'")',i.style.backgroundSize="contain"):(i.style.backgroundImage="",i.style.backgroundSize="")},o.onSkipButton=function(e,t){t?this.addSkipButton():this._skipButton&&(this._skipButton.destroy(),this._skipButton=null)},o.addSkipButton=function(){this._skipButton=new n(this.instreamModel),this._skipButton.on(t.JWPLAYER_AD_SKIPPED,function(){this.api.skipAd()},this),this.controlsContainer().appendChild(this._skipButton.element())},o};return i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(46),n(47),n(58),n(62),n(128),n(129),n(130),n(118),n(132),n(134),n(148),n(149),n(152),n(45),n(153)],r=function(e,t,n,i,r,o,a,s,c,l,u,d,p,f,h,g){var m=e.style,v=e.bounds,y=e.isMobile(),_=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],b=function(b,w){function A(t){var n=0,r=w.get("duration"),o=w.get("position");"DVR"===e.adaptiveType(r)&&(n=r,r=Math.max(o,i.dvrSeekLimit));var a=e.between(o+t,n,r);b.seek(a)}function C(t){var n=e.between(w.get("volume")+t,0,100);b.setVolume(n)}function E(e){return e.ctrlKey||e.metaKey?!1:!!w.get("controls")}function T(e){if(!E(e))return!0;switch(Ot||et(),e.keyCode){case 27:b.setFullscreen(!1);break;case 13:case 32:b.play({reason:"interaction"});break;case 37:Ot||A(-5);break;case 39:Ot||A(5);break;case 38:C(10);break;case 40:C(-10);break;case 77:b.setMute();break;case 70:b.setFullscreen();break;default:if(e.keyCode>=48&&e.keyCode<=59){var t=e.keyCode-48,n=t/10*w.get("duration");b.seek(n)}}return/13|32|37|38|39|40/.test(e.keyCode)?(e.preventDefault(),!1):void 0}function S(){Mt=!1,e.removeClass(lt,"jw-no-focus")}function x(){Mt=!0,e.addClass(lt,"jw-no-focus")}function j(){Mt||S(),Ot||et()}function k(){var e=v(lt),n=Math.round(e.width),i=Math.round(e.height);return document.body.contains(lt)?n&&i&&(n===pt&&i===ft||(pt=n,ft=i,clearTimeout(Dt),Dt=setTimeout(J,50),w.set("containerWidth",n),w.set("containerHeight",i),Bt.trigger(t.JWPLAYER_RESIZE,{width:n,height:i}))):(window.removeEventListener("resize",k),y&&window.removeEventListener("orientationchange",k)),e}function R(t,n){n=n||!1,e.toggleClass(lt,"jw-flag-casting",n)}function I(t,n){e.toggleClass(lt,"jw-flag-cast-available",n),e.toggleClass(ut,"jw-flag-cast-available",n)}function O(t,n){e.replaceClass(lt,/jw-stretch-\S+/,"jw-stretch-"+n)}function P(t,n){e.toggleClass(lt,"jw-flag-compact-player",n)}function D(e){e&&!y&&(e.element().addEventListener("mousemove",M,!1),e.element().addEventListener("mouseout",B,!1))}function L(){w.get("state")!==r.IDLE&&w.get("state")!==r.COMPLETE&&w.get("state")!==r.PAUSED||!w.get("controls")||b.play({reason:"interaction"}),Pt?Z():et()}function N(e){e.link?(b.pause(!0),b.setFullscreen(!1),window.open(e.link,e.linktarget)):w.get("controls")&&b.play({reason:"interaction"})}function M(){clearTimeout(kt)}function B(){et()}function F(e){Bt.trigger(e.type,e)}function U(t,n){n?(Et&&Et.destroy(),e.addClass(lt,"jw-flag-flash-blocked")):(Et&&Et.setup(w,lt,lt),e.removeClass(lt,"jw-flag-flash-blocked"))}function H(){w.get("controls")&&b.setFullscreen()}function V(){var n=lt.getElementsByClassName("jw-overlays")[0];n.addEventListener("mousemove",et),vt=new a(w,dt,{useHover:!0}),vt.on("click",function(){F({type:t.JWPLAYER_DISPLAY_CLICK}),w.get("controls")&&b.play({reason:"interaction"})}),vt.on("tap",function(){F({type:t.JWPLAYER_DISPLAY_CLICK}),L()}),vt.on("doubleClick",H),vt.on("move",et),vt.on("over",et);var i=new s(w);i.on("click",function(){F({type:t.JWPLAYER_DISPLAY_CLICK}),b.play({reason:"interaction"})}),i.on("tap",function(){F({type:t.JWPLAYER_DISPLAY_CLICK}),L()}),e.isChrome()&&i.el.addEventListener("mousedown",function(){var e=w.getVideo(),t=e&&0===e.getName().name.indexOf("flash");if(t){var n=function(){document.removeEventListener("mouseup",n),i.el.style.pointerEvents="auto"};this.style.pointerEvents="none",document.addEventListener("mouseup",n)}}),ut.appendChild(i.element()),_t=new c(w),bt=new l(w),bt.on(t.JWPLAYER_LOGO_CLICK,N);var r=document.createElement("div");r.className="jw-controls-right jw-reset",bt.setup(r),r.appendChild(_t.element()),ut.appendChild(r),At=new o(w),At.setup(w.get("captions")),ut.parentNode.insertBefore(At.element(),wt.element());var d=w.get("height");y&&("string"==typeof d||d>=1.5*It)?e.addClass(lt,"jw-flag-touch"):(Et=new p,Et.setup(w,lt,lt)),gt=new u(b,w),gt.on(t.JWPLAYER_USER_ACTION,et),w.on("change:scrubbing",z),w.on("change:compactUI",P),ut.appendChild(gt.element()),lt.addEventListener("focus",j),lt.addEventListener("blur",S),lt.addEventListener("keydown",T),lt.onmousedown=x}function W(t){return t.get("state")===r.PAUSED?void t.once("change:state",W):void(t.get("scrubbing")===!1&&e.removeClass(lt,"jw-flag-dragging"))}function z(t,n){t.off("change:state",W),n?e.addClass(lt,"jw-flag-dragging"):W(t)}function $(t,n,i){var r,o=lt.className;i=!!i,i&&(o=o.replace(/\s*aspectMode/,""),lt.className!==o&&(lt.className=o),m(lt,{display:"block"},i)),e.exists(t)&&e.exists(n)&&(w.set("width",t),w.set("height",n)),r={width:t},e.hasClass(lt,"jw-flag-aspect-mode")||(r.height=n),m(lt,r,!0),G(n),J(t,n)}function G(t){if(Ct=Y(t),gt&&!Ct){var n=Ot?ht:w;ct(n,n.get("state"))}e.toggleClass(lt,"jw-flag-audio-player",Ct)}function Y(e){if(w.get("aspectratio"))return!1;if(h.isString(e)&&e.indexOf("%")>-1)return!1;var t=h.isNumber(e)?e:w.get("containerHeight");return Q(t)}function Q(e){return e&&It*(y?1.75:1)>=e}function J(t,n){if(!t||isNaN(Number(t))){if(!dt)return;t=dt.clientWidth}if(!n||isNaN(Number(n))){if(!dt)return;n=dt.clientHeight}e.isMSIE(9)&&document.all&&!window.atob&&(t=n="100%");var i=w.getVideo();if(i){var r=i.resize(t,n,w.get("stretching"));r&&(clearTimeout(Dt),Dt=setTimeout(J,250)),At.resize(),gt.checkCompactMode(t)}}function q(){if(Nt){var e=document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement;return!(!e||e.id!==w.get("id"))}return Ot?ht.getVideo().getFullScreen():w.getVideo().getFullScreen()}function X(e){var t=w.get("fullscreen"),n=void 0!==e.jwstate?e.jwstate:q();t!==n&&w.set("fullscreen",n),clearTimeout(Dt),Dt=setTimeout(J,200)}function K(t,n){n?(e.addClass(t,"jw-flag-fullscreen"),m(document.body,{"overflow-y":"hidden"}),et()):(e.removeClass(t,"jw-flag-fullscreen"),m(document.body,{"overflow-y":""})),J()}function Z(){Pt=!1,clearTimeout(kt),gt.hideComponents(),e.addClass(lt,"jw-flag-user-inactive")}function et(){Pt||(e.removeClass(lt,"jw-flag-user-inactive"),gt.checkCompactMode(dt.clientWidth)),Pt=!0,clearTimeout(kt),kt=setTimeout(Z,Rt)}function tt(){b.setFullscreen(!1)}function nt(){yt&&yt.setState(w.get("state")),it(w,w.mediaModel.get("mediaType")),w.mediaModel.on("change:mediaType",it,this)}function it(t,n){var i="audio"===n;e.toggleClass(lt,"jw-flag-media-audio",i)}function rt(t,n){var i="LIVE"===e.adaptiveType(n);e.toggleClass(lt,"jw-flag-live",i),Bt.setAltText(i?"Live Broadcast":"")}function ot(e,t){return t?void(t.name?wt.updateText(t.name,t.message):wt.updateText(t.message,"")):void wt.playlistItem(e,e.get("playlistItem"))}function at(){var e=w.getVideo();return e?e.isCaster:!1}function st(){e.replaceClass(lt,/jw-state-\S+/,"jw-state-"+Tt)}function ct(t,n){if(Tt=n,clearTimeout(Lt),n===r.COMPLETE||n===r.IDLE?Lt=setTimeout(st,100):st(),at())return void e.addClass(dt,"jw-media-show");switch(n){case r.PLAYING:J();break;case r.PAUSED:et()}}var lt,ut,dt,pt,ft,ht,gt,mt,vt,yt,_t,bt,wt,At,Ct,Et,Tt,St,xt,jt,kt=-1,Rt=y?4e3:2e3,It=40,Ot=!1,Pt=!1,Dt=-1,Lt=-1,Nt=!1,Mt=!1,Bt=h.extend(this,n);this.model=w,this.api=b,lt=e.createElement(g({id:w.get("id")})),e.isIE()&&e.addClass(lt,"jw-ie");var Ft=w.get("width"),Ut=w.get("height");m(lt,{width:Ft.toString().indexOf("%")>0?Ft:Ft+"px",height:Ut.toString().indexOf("%")>0?Ut:Ut+"px"}),xt=lt.requestFullscreen||lt.webkitRequestFullscreen||lt.webkitRequestFullScreen||lt.mozRequestFullScreen||lt.msRequestFullscreen,jt=document.exitFullscreen||document.webkitExitFullscreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen,Nt=xt&&jt,this.onChangeSkin=function(t,n){e.replaceClass(lt,/jw-skin-\S+/,n?"jw-skin-"+n:"")},this.handleColorOverrides=function(){function t(t,i,r){if(r){t=e.prefix(t,"#"+n+" ");var o={};o[i]=r,e.css(t.join(", "),o)}}var n=w.get("id"),i=w.get("skinColorActive"),r=w.get("skinColorInactive"),o=w.get("skinColorBackground");t([".jw-toggle",".jw-button-color:hover"],"color",i),t([".jw-active-option",".jw-progress",".jw-playlist-container .jw-option.jw-active-option",".jw-playlist-container .jw-option:hover"],"background",i),t([".jw-text",".jw-option",".jw-button-color",".jw-toggle.jw-off",".jw-tooltip-title",".jw-skip .jw-skip-icon",".jw-playlist-container .jw-icon"],"color",r),t([".jw-cue",".jw-knob"],"background",r),t([".jw-playlist-container .jw-option"],"border-bottom-color",r),t([".jw-background-color",".jw-tooltip-title",".jw-playlist",".jw-playlist-container .jw-option"],"background",o),t([".jw-playlist-container ::-webkit-scrollbar"],"border-color",o)},this.setup=function(){this.handleColorOverrides(),w.get("skin-loading")===!0&&(e.addClass(lt,"jw-flag-skin-loading"),w.once("change:skin-loading",function(){e.removeClass(lt,"jw-flag-skin-loading")})),this.onChangeSkin(w,w.get("skin"),""),w.on("change:skin",this.onChangeSkin,this),dt=lt.getElementsByClassName("jw-media")[0],ut=lt.getElementsByClassName("jw-controls")[0];var n=lt.getElementsByClassName("jw-preview")[0];mt=new d(w),mt.setup(n);var i=lt.getElementsByClassName("jw-title")[0];wt=new f(w),wt.setup(i),V(),et(),w.set("mediaContainer",dt),w.mediaController.on("fullscreenchange",X);for(var o=_.length;o--;)document.addEventListener(_[o],X,!1);window.removeEventListener("resize",k),window.addEventListener("resize",k,!1),y&&(window.removeEventListener("orientationchange",k),window.addEventListener("orientationchange",k,!1)),w.on("change:errorEvent",ot),w.on("change:controls",Ht),Ht(w,w.get("controls")),w.on("change:state",ct),w.on("change:duration",rt,this),w.on("change:flashBlocked",U),U(w,w.get("flashBlocked")),b.onPlaylistComplete(tt),b.onPlaylistItem(nt),w.on("change:castAvailable",I),I(w,w.get("castAvailable")),w.on("change:castActive",R),R(w,w.get("castActive")),w.get("stretching")&&O(w,w.get("stretching")),w.on("change:stretching",O),ct(w,r.IDLE),w.on("change:fullscreen",Vt),D(gt),D(bt);var a=w.get("aspectratio");if(a){e.addClass(lt,"jw-flag-aspect-mode");var s=lt.getElementsByClassName("jw-aspect")[0];m(s,{paddingTop:a})}b.on(t.JWPLAYER_READY,function(){k(),$(w.get("width"),w.get("height"))})};var Ht=function(t,n){if(n){var i=Ot?ht.get("state"):w.get("state");ct(t,i)}e.toggleClass(lt,"jw-flag-controls-disabled",!n)},Vt=function(t,n){var i=w.getVideo();Nt?(n?xt.apply(lt):jt.apply(document),K(lt,n)):e.isIE()?K(lt,n):(ht&&ht.getVideo()&&ht.getVideo().setFullscreen(n),i.setFullscreen(n)),i&&0===i.getName().name.indexOf("flash")&&i.setFullscreen(n)};this.resize=function(e,t){var n=!0;$(e,t,n),k()},this.resizeMedia=J,this.reset=function(){document.contains(lt)&&lt.parentNode.replaceChild(St,lt),e.emptyElement(lt)},this.setupInstream=function(t){this.instreamModel=ht=t,ht.on("change:controls",Ht,this),ht.on("change:state",ct,this),Ot=!0,e.addClass(lt,"jw-flag-ads"),et()},this.setAltText=function(e){gt.setAltText(e)
},this.useExternalControls=function(){e.addClass(lt,"jw-flag-ads-hide-controls")},this.destroyInstream=function(){if(Ot=!1,ht&&(ht.off(null,null,this),ht=null),this.setAltText(""),e.removeClass(lt,"jw-flag-ads"),e.removeClass(lt,"jw-flag-ads-hide-controls"),w.getVideo){var t=w.getVideo();t.setContainer(dt)}rt(w,w.get("duration")),vt.revertAlternateClickHandlers()},this.addCues=function(e){gt&&gt.addCues(e)},this.clickHandler=function(){return vt},this.controlsContainer=function(){return ut},this.getContainer=this.element=function(){return lt},this.getSafeRegion=function(t){var n={x:0,y:0,width:w.get("containerWidth")||0,height:w.get("containerHeight")||0},i=w.get("dock");return i&&i.length&&w.get("controls")&&(n.y=_t.element().clientHeight,n.height-=n.y),t=t||!e.exists(t),t&&w.get("controls")&&(n.height-=gt.element().clientHeight),n},this.destroy=function(){window.removeEventListener("resize",k),window.removeEventListener("orientationchange",k);for(var t=_.length;t--;)document.removeEventListener(_[t],X,!1);w.mediaController&&w.mediaController.off("fullscreenchange",X),lt.removeEventListener("keydown",T,!1),Et&&Et.destroy(),yt&&(w.off("change:state",yt.statusDelegate),yt.destroy(),yt=null),Ot&&this.destroyInstream(),bt&&bt.destroy(),e.clearCss("#"+w.get("id"))}};return b}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(119),n(48),n(45),n(127)],r=function(e,t,n,i){var r=function(e){this.model=e,this.setup(),this.model.on("change:dock",this.render,this)};return n.extend(r.prototype,{setup:function(){var n=this.model.get("dock"),r=this.click.bind(this),o=e(n);this.el=t.createElement(o),new i(this.el).on("click tap",r)},getDockButton:function(e){return t.hasClass(e.target,"jw-dock-button")?e.target:t.hasClass(e.target,"jw-dock-text")?e.target.parentElement.parentElement:e.target.parentElement},click:function(e){var t=this.getDockButton(e),i=t.getAttribute("button"),r=this.model.get("dock"),o=n.findWhere(r,{id:i});o&&o.callback&&o.callback(e)},render:function(){var n=this.model.get("dock"),i=e(n),r=t.createElement(i);this.el.innerHTML=r.innerHTML},element:function(){return this.el}}),r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,c=this.escapeExpression,l='    <div class="jw-dock-button jw-background-color jw-reset';return r=t["if"].call(e,null!=e?e.btnClass:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=r&&(l+=r),l+='" button="'+c((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'">\n        <div class="jw-icon jw-dock-image jw-reset" ',r=t["if"].call(e,null!=e?e.img:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=r&&(l+=r),l+='></div>\n        <div class="jw-arrow jw-reset"></div>\n',r=t["if"].call(e,null!=e?e.tooltip:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"    </div>\n"},2:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return" "+s((r=null!=(r=t.btnClass||(null!=e?e.btnClass:e))?r:a,typeof r===o?r.call(e,{name:"btnClass",hash:{},data:i}):r))},4:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return"style='background-image: url(\""+s((r=null!=(r=t.img||(null!=e?e.img:e))?r:a,typeof r===o?r.call(e,{name:"img",hash:{},data:i}):r))+"\")'"},6:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'        <div class="jw-overlay jw-background-color jw-reset">\n            <span class="jw-text jw-dock-text jw-reset">'+s((r=null!=(r=t.tooltip||(null!=e?e.tooltip:e))?r:a,typeof r===o?r.call(e,{name:"tooltip",hash:{},data:i}):r))+"</span>\n        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o='<div class="jw-dock jw-reset">\n';return r=t.each.call(e,e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"</div>"},useData:!0})},function(e,t,n){e.exports=n(121)},function(e,t,n){"use strict";var i=n(122),r=n(124)["default"],o=n(125)["default"],a=n(123),s=n(126),c=function(){var e=new i.HandlebarsEnvironment;return a.extend(e,i),e.SafeString=r,e.Exception=o,e.Utils=a,e.escapeExpression=a.escapeExpression,e.VM=s,e.template=function(t){return s.template(t,e)},e},l=c();l.create=c,l["default"]=l,t["default"]=l},function(e,t,n){"use strict";function i(e,t){this.helpers=e||{},this.partials=t||{},r(this)}function r(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,r=n.fn;if(t===!0)return r(this);if(t===!1||null==t)return i(this);if(u(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var a=m(n.data);a.contextPath=o.appendContextPath(n.data.contextPath,n.name),n={data:a}}return r(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new a("Must pass iterator to #each");var n,i,r=t.fn,s=t.inverse,c=0,l="";if(t.data&&t.ids&&(i=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),d(e)&&(e=e.call(this)),t.data&&(n=m(t.data)),e&&"object"==typeof e)if(u(e))for(var p=e.length;p>c;c++)n&&(n.index=c,n.first=0===c,n.last=c===e.length-1,i&&(n.contextPath=i+c)),l+=r(e[c],{data:n});else for(var f in e)e.hasOwnProperty(f)&&(n&&(n.key=f,n.index=c,n.first=0===c,i&&(n.contextPath=i+f)),l+=r(e[f],{data:n}),c++);return 0===c&&(l=s(this)),l}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){d(e)&&(e=e.call(this));var n=t.fn;if(o.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=m(t.data);i.contextPath=o.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var o=n(123),a=n(125)["default"],s="2.0.0";t.VERSION=s;var c=6;t.COMPILER_REVISION=c;var l={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};t.REVISION_CHANGES=l;var u=o.isArray,d=o.isFunction,p=o.toString,f="[object Object]";t.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:h,log:g,registerHelper:function(e,t){if(p.call(e)===f){if(t)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){p.call(e)===f?o.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var h={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(h.level<=e){var n=h.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};t.logger=h;var g=h.log;t.log=g;var m=function(e){var t=o.extend({},e);return t._parent=e,t};t.createFrame=m},function(e,t,n){"use strict";function i(e){return l[e]}function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function o(e){return e instanceof c?e.toString():null==e?"":e?(e=""+e,d.test(e)?e.replace(u,i):e):e+""}function a(e){return e||0===e?!(!h(e)||0!==e.length):!0}function s(e,t){return(e?e+".":"")+t}var c=n(124)["default"],l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,d=/[&<>"'`]/;t.extend=r;var p=Object.prototype.toString;t.toString=p;var f=function(e){return"function"==typeof e};f(/x/)&&(f=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)});var f;t.isFunction=f;var h=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===p.call(e):!1};t.isArray=h,t.escapeExpression=o,t.isEmpty=a,t.appendContextPath=s},function(e,t){"use strict";function n(e){this.string=e}n.prototype.toString=function(){return""+this.string},t["default"]=n},function(e,t){"use strict";function n(e,t){var n;t&&t.firstLine&&(n=t.firstLine,e+=" - "+n+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),o=0;o<i.length;o++)this[i[o]]=r[i[o]];n&&(this.lineNumber=n,this.column=t.firstColumn)}var i=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,t["default"]=n},function(e,t,n){"use strict";function i(e){var t=e&&e[0]||1,n=d;if(t!==n){if(n>t){var i=p[n],r=p[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new u("No environment passed to template");if(!e||!e.main)throw new u("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,i,r,o,a,s,c,d,p){a&&(o=l.extend({},o,a));var f=t.VM.invokePartial.call(this,n,r,o,s,c,d,p);if(null==f&&t.compile){var h={helpers:s,partials:c,data:d,depths:p};c[r]=t.compile(n,{data:void 0!==d,compat:e.compat},t),f=c[r](o,h)}if(null!=f){if(i){for(var g=f.split("\n"),m=0,v=g.length;v>m&&(g[m]||m+1!==v);m++)g[m]=i+g[m];f=g.join("\n")}return f}throw new u("The partial "+r+" could not be compiled when running in runtime-only mode")},i={lookup:function(e,t){for(var n=e.length,i=0;n>i;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:l.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var i=this.programs[e],r=this.fn(e);return t||n?i=o(this,e,r,t,n):i||(i=this.programs[e]=o(this,e,r)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=l.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},r=function(t,n){n=n||{};var o=n.data;r._setup(n),!n.partial&&e.useData&&(o=c(t,o));var a;return e.useDepths&&(a=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,o,a)};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},r._child=function(t,n,r){if(e.useDepths&&!r)throw new u("must pass parent depths");return o(i,t,e[t],n,r)},r}function o(e,t,n,i,r){var o=function(t,o){return o=o||{},n.call(e,t,e.helpers,e.partials,o.data||i,r&&[t].concat(r))};return o.program=t,o.depth=r?r.length:0,o}function a(e,t,n,i,r,o,a){var s={partial:!0,helpers:i,partials:r,data:o,depths:a};if(void 0===e)throw new u("The partial "+t+" could not be found");return e instanceof Function?e(n,s):void 0}function s(){return""}function c(e,t){return t&&"root"in t||(t=t?f(t):{},t.root=e),t}var l=n(123),u=n(125)["default"],d=n(122).COMPILER_REVISION,p=n(122).REVISION_CHANGES,f=n(122).createFrame;t.checkRevision=i,t.template=r,t.program=o,t.invokePartial=a,t.noop=s},function(e,t,n){var i,r;i=[n(47),n(46),n(45),n(48)],r=function(e,t,n,i){function r(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]}function o(e){var t=e||window.event;return e instanceof MouseEvent?"which"in t?3===t.which:"button"in t?2===t.button:!1:!1}function a(e,t,n){var i;return i=t instanceof MouseEvent||!t.touches&&!t.changedTouches?t:t.touches&&t.touches.length?t.touches[0]:t.changedTouches[0],{type:e,target:t.target,currentTarget:n,pageX:i.pageX,pageY:i.pageY}}function s(e){(e instanceof MouseEvent||e instanceof window.TouchEvent)&&(e.preventManipulation&&e.preventManipulation(),e.cancelable&&e.preventDefault&&e.preventDefault())}var c=!n.isUndefined(window.PointerEvent),l=!c&&i.isMobile(),u=!c&&!l,d=i.isFF()&&i.isOSX(),p=function(e,i){function l(e){(u||c&&"touch"!==e.pointerType)&&v(t.touchEvents.OVER,e)}function p(e){(u||c&&"touch"!==e.pointerType)&&v(t.touchEvents.MOVE,e)}function f(n){(u||c&&"touch"!==n.pointerType&&!e.contains(document.elementFromPoint(n.x,n.y)))&&v(t.touchEvents.OUT,n)}function h(t){y=t.target,A=r(t,"X"),C=r(t,"Y"),o(t)||(c?t.isPrimary&&(i.preventScrolling&&(_=t.pointerId,e.setPointerCapture(_)),e.addEventListener("pointermove",g),e.addEventListener("pointercancel",m),e.addEventListener("pointerup",m)):u&&(document.addEventListener("mousemove",g),d&&"object"===t.target.nodeName.toLowerCase()?e.addEventListener("click",m):document.addEventListener("mouseup",m)),y.addEventListener("touchmove",g),y.addEventListener("touchcancel",m),y.addEventListener("touchend",m))}function g(e){var n=t.touchEvents,o=6;if(w)v(n.DRAG,e);else{var a=r(e,"X"),c=r(e,"Y"),l=a-A,u=c-C;l*l+u*u>o*o&&(v(n.DRAG_START,e),w=!0,v(n.DRAG,e))}i.preventScrolling&&s(e)}function m(n){var r=t.touchEvents;c?(i.preventScrolling&&e.releasePointerCapture(_),e.removeEventListener("pointermove",g),e.removeEventListener("pointercancel",m),e.removeEventListener("pointerup",m)):u&&(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m)),y.removeEventListener("touchmove",g),y.removeEventListener("touchcancel",m),y.removeEventListener("touchend",m),w?v(r.DRAG_END,n):i.directSelect&&n.target!==e||-1!==n.type.indexOf("cancel")||(c&&n instanceof window.PointerEvent?"touch"===n.pointerType?v(r.TAP,n):v(r.CLICK,n):u?v(r.CLICK,n):(v(r.TAP,n),s(n))),y=null,w=!1}function v(e,r){var o;if(i.enableDoubleTap&&(e===t.touchEvents.CLICK||e===t.touchEvents.TAP))if(n.now()-E<T){var s=e===t.touchEvents.CLICK?t.touchEvents.DOUBLE_CLICK:t.touchEvents.DOUBLE_TAP;o=a(s,r,b),S.trigger(s,o),E=0}else E=n.now();o=a(e,r,b),S.trigger(e,o)}var y,_,b=e,w=!1,A=0,C=0,E=0,T=300;i=i||{},c?(e.addEventListener("pointerdown",h),i.useHover&&(e.addEventListener("pointerover",l),e.addEventListener("pointerout",f)),i.useMove&&e.addEventListener("pointermove",p)):u&&(e.addEventListener("mousedown",h),i.useHover&&(e.addEventListener("mouseover",l),e.addEventListener("mouseout",f)),i.useMove&&e.addEventListener("mousemove",p)),e.addEventListener("touchstart",h);var S=this;return this.triggerEvent=v,this.destroy=function(){e.removeEventListener("touchstart",h),e.removeEventListener("mousedown",h),y&&(y.removeEventListener("touchmove",g),y.removeEventListener("touchcancel",m),y.removeEventListener("touchend",m)),c&&(i.preventScrolling&&e.releasePointerCapture(_),e.removeEventListener("pointerover",l),e.removeEventListener("pointerdown",h),e.removeEventListener("pointermove",g),e.removeEventListener("pointermove",p),e.removeEventListener("pointercancel",m),e.removeEventListener("pointerout",f),e.removeEventListener("pointerup",m)),e.removeEventListener("click",m),e.removeEventListener("mouseover",l),e.removeEventListener("mousemove",p),e.removeEventListener("mouseout",f),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",m)},this};return n.extend(p.prototype,e),p}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(55),n(62),n(45)],r=function(e,t,n,i){var r=t.style,o={back:!0,fontSize:15,fontFamily:"Arial,sans-serif",fontOpacity:100,color:"#FFF",backgroundColor:"#000",backgroundOpacity:100,edgeStyle:null,windowColor:"#FFF",windowOpacity:0,preprocessor:i.identity},a=function(a){function s(t){t=t||"";var n="jw-captions-window jw-reset";t?(y.innerHTML=t,v.className=n+" jw-captions-window-active"):(v.className=n,e.empty(y))}function c(e){g=e,u(f,g)}function l(e,t){var n=e.source,r=t.metadata;return n?r&&i.isNumber(r[n])?r[n]:!1:t.position}function u(e,t){if(e&&e.data&&t){var n=l(e,t);if(n!==!1){var i=e.data;if(!(h>=0&&d(i,h,n))){for(var r=-1,o=0;o<i.length;o++)if(d(i,o,n)){r=o;break}-1===r?s(""):r!==h&&(h=r,s(_.preprocessor(i[h].text)))}}}}function d(e,t,n){return e[t].begin<=n&&(!e[t].end||e[t].end>=n)&&(t===e.length-1||e[t+1].begin>=n)}function p(e,n,i){var r=t.hexToRgba("#000000",i);"dropshadow"===e?n.textShadow="0 2px 1px "+r:"raised"===e?n.textShadow="0 0 5px "+r+", 0 1px 5px "+r+", 0 2px 5px "+r:"depressed"===e?n.textShadow="0 -2px 1px "+r:"uniform"===e&&(n.textShadow="-2px 0 1px "+r+",2px 0 1px "+r+",0 -2px 1px "+r+",0 2px 1px "+r+",-1px 1px 1px "+r+",1px 1px 1px "+r+",1px -1px 1px "+r+",1px 1px 1px "+r)}var f,h,g,m,v,y,_={};m=document.createElement("div"),m.className="jw-captions jw-reset",this.show=function(){m.className="jw-captions jw-captions-enabled jw-reset"},this.hide=function(){m.className="jw-captions jw-reset"},this.populate=function(e){return h=-1,f=e,e?void u(e,g):void s("")},this.resize=function(){var e=m.clientWidth,t=Math.pow(e/400,.6);if(t){var n=_.fontSize*t;r(m,{fontSize:Math.round(n)+"px"})}},this.setup=function(e){if(v=document.createElement("div"),y=document.createElement("span"),v.className="jw-captions-window jw-reset",y.className="jw-captions-text jw-reset",_=i.extend({},o,e),e){var n=_.fontOpacity,s=_.windowOpacity,c=_.edgeStyle,l=_.backgroundColor,u={},d={color:t.hexToRgba(_.color,n),fontFamily:_.fontFamily,fontStyle:_.fontStyle,fontWeight:_.fontWeight,textDecoration:_.textDecoration};s&&(u.backgroundColor=t.hexToRgba(_.windowColor,s)),p(c,d,n),_.back?d.backgroundColor=t.hexToRgba(l,_.backgroundOpacity):null===c&&p("uniform",d),r(v,u),r(y,d)}v.appendChild(y),m.appendChild(v),this.populate(a.get("captionsTrack"))},this.element=function(){return m},a.on("change:playlistItem",function(){g=null,h=-1,s("")},this),a.on("change:captionsTrack",function(e,t){this.populate(t)},this),a.mediaController.on("seek",function(){h=-1},this),a.mediaController.on("time seek",c,this),a.mediaController.on("subtitlesTrackData",function(){u(f,g)},this),a.on("change:state",function(e,t){switch(t){case n.IDLE:case n.ERROR:case n.COMPLETE:this.hide();break;default:this.show()}},this)};return a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(127),n(46),n(47),n(45)],r=function(e,t,n,i){var r=function(r,o,a){function s(e){return r.get("flashBlocked")?void 0:u?void u(e):void h.trigger(e.type===t.touchEvents.CLICK?"click":"tap")}function c(){return d?void d():void h.trigger("doubleClick")}var l,u,d,p={enableDoubleTap:!0,useMove:!0};i.extend(this,n),l=o,this.element=function(){return l};var f=new e(l,i.extend(p,a));f.on("click tap",s),f.on("doubleClick doubleTap",c),f.on("move",function(){h.trigger("move")}),f.on("over",function(){h.trigger("over")}),f.on("out",function(){h.trigger("out")}),this.clickHandler=s;var h=this;this.setAlternateClickHandlers=function(e,t){u=e,d=t||null},this.revertAlternateClickHandlers=function(){u=null,d=null}};return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(47),n(127),n(131),n(45)],r=function(e,t,n,i,r){var o=function(o){r.extend(this,t),this.model=o,this.el=e.createElement(i({}));var a=this;this.iconUI=new n(this.el).on("click tap",function(e){a.trigger(e.type)})};return r.extend(o.prototype,{element:function(){return this.el}}),o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="jw-display-icon-container jw-background-color jw-reset">\n    <div class="jw-icon jw-icon-display jw-button-color jw-reset"></div>\n</div>\n'},useData:!0})},function(e,t,n){var i,r;i=[n(127),n(48),n(46),n(45),n(47),n(133)],r=function(e,t,n,i,r,o){var a=t.style,s={linktarget:"_blank",margin:8,hide:!1,position:"top-right"},c=function(c){var l,u,d=new Image,p=i.extend({},c.get("logo"));return i.extend(this,r),this.setup=function(r){if(u=i.extend({},s,p),u.hide="true"===u.hide.toString(),l=t.createElement(o()),u.file){u.hide&&t.addClass(l,"jw-hide"),t.addClass(l,"jw-logo-"+(u.position||s.position)),"top-right"===u.position&&(c.on("change:dock",this.topRight,this),c.on("change:controls",this.topRight,this),this.topRight(c)),c.set("logo",u),d.onload=function(){var e={backgroundImage:'url("'+this.src+'")',width:this.width,height:this.height};if(u.margin!==s.margin){var t=/(\w+)-(\w+)/.exec(u.position);3===t.length&&(e["margin-"+t[1]]=u.margin,e["margin-"+t[2]]=u.margin)}a(l,e),c.set("logoWidth",e.width)},d.src=u.file;var f=new e(l);f.on("click tap",function(e){t.exists(e)&&e.stopPropagation&&e.stopPropagation(),this.trigger(n.JWPLAYER_LOGO_CLICK,{link:u.link,linktarget:u.linktarget})},this),r.appendChild(l)}},this.topRight=function(e){var t=e.get("controls"),n=e.get("dock"),i=t&&(n&&n.length||e.get("sharing")||e.get("related"));a(l,{top:i?"3.5em":0})},this.element=function(){return l},this.position=function(){return u.position},this.destroy=function(){d.onload=null},this};return c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="jw-logo jw-reset"></div>'},useData:!0})},function(e,t,n){var i,r;i=[n(48),n(45),n(47),n(58),n(127),n(136),n(135),n(142),n(144),n(146),n(147)],r=function(e,t,n,i,r,o,a,s,c,l,u){function d(e,t){var n=document.createElement("div");return n.className="jw-icon jw-icon-inline jw-button-color jw-reset "+e,n.style.display="none",t&&new r(n).on("click tap",function(){t()}),{element:function(){return n},toggle:function(e){e?this.show():this.hide()},show:function(){n.style.display=""},hide:function(){n.style.display="none"}}}function p(e){var t=document.createElement("span");return t.className="jw-text jw-reset "+e,t}function f(e){var t=new s(e);return t}function h(e,n){var i=document.createElement("div");return i.className="jw-group jw-controlbar-"+e+"-group jw-reset",t.each(n,function(e){e.element&&(e=e.element()),i.appendChild(e)}),i}function g(t,n){this._api=t,this._model=n,this._isMobile=e.isMobile(),this._compactModeMaxSize=400,this._maxCompactWidth=-1,this.setup()}return t.extend(g.prototype,n,{setup:function(){this.build(),this.initialize()},build:function(){var e,n,i,r,s=new a(this._model,this._api),g=new u("jw-icon-more");this._model.get("visualplaylist")!==!1&&(e=new c("jw-icon-playlist")),this._isMobile||(r=d("jw-icon-volume",this._api.setMute),n=new o("jw-slider-volume","horizontal"),i=new l(this._model,"jw-icon-volume")),this.elements={alt:p("jw-text-alt"),play:d("jw-icon-playback",this._api.play.bind(this,{reason:"interaction"})),prev:d("jw-icon-prev",this._api.playlistPrev.bind(this,{reason:"interaction"})),next:d("jw-icon-next",this._api.playlistNext.bind(this,{reason:"interaction"})),playlist:e,elapsed:p("jw-text-elapsed"),time:s,duration:p("jw-text-duration"),drawer:g,hd:f("jw-icon-hd"),cc:f("jw-icon-cc"),audiotracks:f("jw-icon-audio-tracks"),mute:r,volume:n,volumetooltip:i,cast:d("jw-icon-cast jw-off",this._api.castToggle),fullscreen:d("jw-icon-fullscreen",this._api.setFullscreen)},this.layout={left:[this.elements.play,this.elements.prev,this.elements.playlist,this.elements.next,this.elements.elapsed],center:[this.elements.time,this.elements.alt],right:[this.elements.duration,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.drawer,this.elements.mute,this.elements.cast,this.elements.volume,this.elements.volumetooltip,this.elements.fullscreen],drawer:[this.elements.hd,this.elements.cc,this.elements.audiotracks]},this.menus=t.compact([this.elements.playlist,this.elements.hd,this.elements.cc,this.elements.audiotracks,this.elements.volumetooltip]),this.layout.left=t.compact(this.layout.left),this.layout.center=t.compact(this.layout.center),this.layout.right=t.compact(this.layout.right),this.layout.drawer=t.compact(this.layout.drawer),this.el=document.createElement("div"),this.el.className="jw-controlbar jw-background-color jw-reset",this.elements.left=h("left",this.layout.left),this.elements.center=h("center",this.layout.center),this.elements.right=h("right",this.layout.right),this.el.appendChild(this.elements.left),this.el.appendChild(this.elements.center),this.el.appendChild(this.elements.right)},initialize:function(){this.elements.play.show(),this.elements.fullscreen.show(),this.elements.mute&&this.elements.mute.show(),this.onVolume(this._model,this._model.get("volume")),this.onPlaylist(this._model,this._model.get("playlist")),this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.onMediaModel(this._model,this._model.get("mediaModel")),this.onCastAvailable(this._model,this._model.get("castAvailable")),this.onCastActive(this._model,this._model.get("castActive")),this.onCaptionsList(this._model,this._model.get("captionsList")),this._model.on("change:volume",this.onVolume,this),this._model.on("change:mute",this.onMute,this),this._model.on("change:playlist",this.onPlaylist,this),this._model.on("change:playlistItem",this.onPlaylistItem,this),this._model.on("change:mediaModel",this.onMediaModel,this),this._model.on("change:castAvailable",this.onCastAvailable,this),this._model.on("change:castActive",this.onCastActive,this),this._model.on("change:duration",this.onDuration,this),this._model.on("change:position",this.onElapsed,this),this._model.on("change:fullscreen",this.onFullscreen,this),this._model.on("change:captionsList",this.onCaptionsList,this),this._model.on("change:captionsIndex",this.onCaptionsIndex,this),this._model.on("change:compactUI",this.onCompactUI,this),this.elements.volume&&this.elements.volume.on("update",function(e){var t=e.percentage;this._api.setVolume(t)},this),this.elements.volumetooltip&&(this.elements.volumetooltip.on("update",function(e){var t=e.percentage;this._api.setVolume(t)},this),this.elements.volumetooltip.on("toggleValue",function(){this._api.setMute()},this)),this.elements.playlist&&this.elements.playlist.on("select",function(e){this._model.once("itemReady",function(){this._api.play({reason:"interaction"})},this),this._api.load(e)},this),this.elements.hd.on("select",function(e){this._model.getVideo().setCurrentQuality(e)},this),this.elements.hd.on("toggleValue",function(){this._model.getVideo().setCurrentQuality(0===this._model.getVideo().getCurrentQuality()?1:0)},this),this.elements.cc.on("select",function(e){this._api.setCurrentCaptions(e)},this),this.elements.cc.on("toggleValue",function(){var e=this._model.get("captionsIndex");this._api.setCurrentCaptions(e?0:1)},this),this.elements.audiotracks.on("select",function(e){this._model.getVideo().setCurrentAudioTrack(e)},this),new r(this.elements.duration).on("click tap",function(){if("DVR"===e.adaptiveType(this._model.get("duration"))){var t=this._model.get("position");this._api.seek(Math.max(i.dvrSeekLimit,t))}},this),new r(this.el).on("click tap drag",function(){this.trigger("userAction")},this),this.elements.drawer.on("open-drawer close-drawer",function(t,n){e.toggleClass(this.el,"jw-drawer-expanded",n.isOpen),n.isOpen||this.closeMenus()},this),t.each(this.menus,function(e){e.on("open-tooltip",this.closeMenus,this)},this)},onCaptionsList:function(e,t){var n=e.get("captionsIndex");this.elements.cc.setup(t,n),this.clearCompactMode()},onCaptionsIndex:function(e,t){this.elements.cc.selectItem(t)},onPlaylist:function(e,t){var n=t.length>1;this.elements.next.toggle(n),this.elements.prev.toggle(n),this.elements.playlist&&this.elements.playlist.setup(t,e.get("item"))},onPlaylistItem:function(e){this.elements.time.updateBuffer(0),this.elements.time.render(0),this.elements.duration.innerHTML="00:00",this.elements.elapsed.innerHTML="00:00",this.clearCompactMode();var t=e.get("item");this.elements.playlist&&this.elements.playlist.selectItem(t),this.elements.audiotracks.setup()},onMediaModel:function(n,i){i.on("change:levels",function(e,t){this.elements.hd.setup(t,e.get("currentLevel")),this.clearCompactMode()},this),i.on("change:currentLevel",function(e,t){this.elements.hd.selectItem(t)},this),i.on("change:audioTracks",function(e,n){var i=t.map(n,function(e){return{label:e.name}});this.elements.audiotracks.setup(i,e.get("currentAudioTrack"),{toggle:!1}),this.clearCompactMode()},this),i.on("change:currentAudioTrack",function(e,t){this.elements.audiotracks.selectItem(t)},this),i.on("change:state",function(t,n){"complete"===n&&(this.elements.drawer.closeTooltip(),e.removeClass(this.el,"jw-drawer-expanded"))},this)},onVolume:function(e,t){this.renderVolume(e.get("mute"),t)},onMute:function(e,t){this.renderVolume(t,e.get("volume"))},renderVolume:function(t,n){this.elements.mute&&e.toggleClass(this.elements.mute.element(),"jw-off",t),this.elements.volume&&this.elements.volume.render(t?0:n),this.elements.volumetooltip&&(this.elements.volumetooltip.volumeSlider.render(t?0:n),e.toggleClass(this.elements.volumetooltip.element(),"jw-off",t))},onCastAvailable:function(e,t){this.elements.cast.toggle(t),this.clearCompactMode()},onCastActive:function(t,n){e.toggleClass(this.elements.cast.element(),"jw-off",!n)},onElapsed:function(t,n){var i,r=t.get("duration");i="DVR"===e.adaptiveType(r)?"-"+e.timeFormat(-r):e.timeFormat(n),this.elements.elapsed.innerHTML=i},onDuration:function(t,n){var i;"DVR"===e.adaptiveType(n)?(i="Live",this.clearCompactMode()):i=e.timeFormat(n),this.elements.duration.innerHTML=i},onFullscreen:function(t,n){e.toggleClass(this.elements.fullscreen.element(),"jw-off",n)},element:function(){return this.el},getVisibleBounds:function(){var t,n=this.el,i=getComputedStyle?getComputedStyle(n):n.currentStyle;return"table"===i.display?e.bounds(n):(n.style.visibility="hidden",n.style.display="table",t=e.bounds(n),n.style.visibility=n.style.display="",t)},setAltText:function(e){this.elements.alt.innerHTML=e},addCues:function(e){this.elements.time&&(t.each(e,function(e){this.elements.time.addCue(e)},this),this.elements.time.drawCues())},closeMenus:function(e){t.each(this.menus,function(t){e&&e.target===t.el||t.closeTooltip(e)})},hideComponents:function(){this.closeMenus(),this.elements.drawer.closeTooltip(),e.removeClass(this.el,"jw-drawer-expanded")},clearCompactMode:function(){this._maxCompactWidth=-1,this._model.set("compactUI",!1),this._containerWidth&&this.checkCompactMode(this._containerWidth)},setCompactModeBounds:function(){if(this.element().offsetWidth>0){var t=this.elements.left.offsetWidth+this.elements.right.offsetWidth;if("LIVE"===e.adaptiveType(this._model.get("duration")))this._maxCompactWidth=t+this.elements.alt.offsetWidth;else{var n=t+(this.elements.center.offsetWidth-this.elements.time.el.offsetWidth),i=.2;this._maxCompactWidth=n/(1-i)}}},checkCompactMode:function(e){-1===this._maxCompactWidth&&this.setCompactModeBounds(),this._containerWidth=e,-1!==this._maxCompactWidth&&(e>=this._compactModeMaxSize&&e>this._maxCompactWidth?this._model.set("compactUI",!1):(e<this._compactModeMaxSize||e<=this._maxCompactWidth)&&this._model.set("compactUI",!0))},onCompactUI:function(n,i){e.removeClass(this.el,"jw-drawer-expanded"),this.elements.drawer.setup(this.layout.drawer,i),(!i||this.elements.drawer.activeContents.length<2)&&t.each(this.layout.drawer,function(e){this.elements.right.insertBefore(e.el,this.elements.drawer.el)},this)}}),g}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(48),n(58),n(136),n(139),n(140),n(141)],r=function(e,t,n,i,r,o,a){var s=r.extend({setup:function(){this.text=document.createElement("span"),this.text.className="jw-text jw-reset",this.img=document.createElement("div"),this.img.className="jw-reset";var e=document.createElement("div");e.className="jw-time-tip jw-background-color jw-reset",e.appendChild(this.img),e.appendChild(this.text),t.removeClass(this.el,"jw-hidden"),this.addContent(e)},image:function(e){t.style(this.img,e)},update:function(e){this.text.innerHTML=e}}),c=i.extend({constructor:function(t,n){this._model=t,this._api=n,this.timeTip=new s("jw-tooltip-time"),this.timeTip.setup(),this.cues=[],this.seekThrottled=e.throttle(this.performSeek,400),this._model.on("change:playlistItem",this.onPlaylistItem,this).on("change:position",this.onPosition,this).on("change:duration",this.onDuration,this).on("change:buffer",this.onBuffer,this),i.call(this,"jw-slider-time","horizontal")},setup:function(){i.prototype.setup.apply(this,arguments),this._model.get("playlistItem")&&this.onPlaylistItem(this._model,this._model.get("playlistItem")),this.elementRail.appendChild(this.timeTip.element()),this.el.addEventListener("mousemove",this.showTimeTooltip.bind(this),!1),this.el.addEventListener("mouseout",this.hideTimeTooltip.bind(this),!1)},limit:function(i){if(this.activeCue&&e.isNumber(this.activeCue.pct))return this.activeCue.pct;var r=this._model.get("duration"),o=t.adaptiveType(r);if("DVR"===o){var a=(1-i/100)*r,s=this._model.get("position"),c=Math.min(a,Math.max(n.dvrSeekLimit,s)),l=100*c/r;return 100-l}return i},update:function(e){this.seekTo=e,this.seekThrottled(),i.prototype.update.apply(this,arguments)
},dragStart:function(){this._model.set("scrubbing",!0),i.prototype.dragStart.apply(this,arguments)},dragEnd:function(){i.prototype.dragEnd.apply(this,arguments),this._model.set("scrubbing",!1)},onSeeked:function(){this._model.get("scrubbing")&&this.performSeek()},onBuffer:function(e,t){this.updateBuffer(t)},onPosition:function(e,t){this.updateTime(t,e.get("duration"))},onDuration:function(e,t){this.updateTime(e.get("position"),t)},updateTime:function(e,n){var i=0;if(n){var r=t.adaptiveType(n);"DVR"===r?i=(n-e)/n*100:"VOD"===r&&(i=e/n*100)}this.render(i)},onPlaylistItem:function(t,n){this.reset(),t.mediaModel.on("seeked",this.onSeeked,this);var i=n.tracks;e.each(i,function(e){e&&e.kind&&"thumbnails"===e.kind.toLowerCase()?this.loadThumbnails(e.file):e&&e.kind&&"chapters"===e.kind.toLowerCase()&&this.loadChapters(e.file)},this)},performSeek:function(){var e,n=this.seekTo,i=this._model.get("duration"),r=t.adaptiveType(i);0===i?this._api.play():"DVR"===r?(e=(100-n)/100*i,this._api.seek(e)):(e=n/100*i,this._api.seek(Math.min(e,i-.25)))},showTimeTooltip:function(e){var i=this._model.get("duration");if(0!==i){var r=t.bounds(this.elementRail),o=e.pageX?e.pageX-r.left:e.x;o=t.between(o,0,r.width);var a=o/r.width,s=i*a;0>i&&(s=i-s);var c;if(this.activeCue)c=this.activeCue.text;else{var l=!0;c=t.timeFormat(s,l),0>i&&s>n.dvrSeekLimit&&(c="Live")}this.timeTip.update(c),this.showThumbnail(s),t.addClass(this.timeTip.el,"jw-open"),this.timeTip.el.style.left=100*a+"%"}},hideTimeTooltip:function(){t.removeClass(this.timeTip.el,"jw-open")},reset:function(){this.resetChapters(),this.resetThumbnails()}});return e.extend(c.prototype,o,a),c}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(137),n(127),n(138),n(48)],r=function(e,t,n,i){var r=e.extend({constructor:function(e,t){this.className=e+" jw-background-color jw-reset",this.orientation=t,this.dragStartListener=this.dragStart.bind(this),this.dragMoveListener=this.dragMove.bind(this),this.dragEndListener=this.dragEnd.bind(this),this.tapListener=this.tap.bind(this),this.setup()},setup:function(){var e={"default":this["default"],className:this.className,orientation:"jw-slider-"+this.orientation};this.el=i.createElement(n(e)),this.elementRail=this.el.getElementsByClassName("jw-slider-container")[0],this.elementBuffer=this.el.getElementsByClassName("jw-buffer")[0],this.elementProgress=this.el.getElementsByClassName("jw-progress")[0],this.elementThumb=this.el.getElementsByClassName("jw-knob")[0],this.userInteract=new t(this.element(),{preventScrolling:!0}),this.userInteract.on("dragStart",this.dragStartListener),this.userInteract.on("drag",this.dragMoveListener),this.userInteract.on("dragEnd",this.dragEndListener),this.userInteract.on("tap click",this.tapListener)},dragStart:function(){this.trigger("dragStart"),this.railBounds=i.bounds(this.elementRail)},dragEnd:function(e){this.dragMove(e),this.trigger("dragEnd")},dragMove:function(e){var t,n,r=this.railBounds=this.railBounds?this.railBounds:i.bounds(this.elementRail);"horizontal"===this.orientation?(t=e.pageX,n=t<r.left?0:t>r.right?100:100*i.between((t-r.left)/r.width,0,1)):(t=e.pageY,n=t>=r.bottom?0:t<=r.top?100:100*i.between((r.height-(t-r.top))/r.height,0,1));var o=this.limit(n);return this.render(o),this.update(o),!1},tap:function(e){this.railBounds=i.bounds(this.elementRail),this.dragMove(e)},limit:function(e){return e},update:function(e){this.trigger("update",{percentage:e})},render:function(e){e=Math.max(0,Math.min(e,100)),"horizontal"===this.orientation?(this.elementThumb.style.left=e+"%",this.elementProgress.style.width=e+"%"):(this.elementThumb.style.bottom=e+"%",this.elementProgress.style.height=e+"%")},updateBuffer:function(e){this.elementBuffer.style.width=e+"%"},element:function(){return this.el}});return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(47),n(45)],r=function(e,t){function n(){}var i=function(e,n){var i,r=this;i=e&&t.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},t.extend(i,r,n);var o=function(){this.constructor=i};return o.prototype=r.prototype,i.prototype=new o,e&&t.extend(i.prototype,e),i.__super__=r.prototype,i};return n.extend=i,t.extend(n.prototype,e),n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="'+s((r=null!=(r=t.className||(null!=e?e.className:e))?r:a,typeof r===o?r.call(e,{name:"className",hash:{},data:i}):r))+" "+s((r=null!=(r=t.orientation||(null!=e?e.orientation:e))?r:a,typeof r===o?r.call(e,{name:"orientation",hash:{},data:i}):r))+' jw-reset">\n    <div class="jw-slider-container jw-reset">\n        <div class="jw-rail jw-reset"></div>\n        <div class="jw-buffer jw-reset"></div>\n        <div class="jw-progress jw-reset"></div>\n        <div class="jw-knob jw-reset"></div>\n    </div>\n</div>'},useData:!0})},function(e,t,n){var i,r;i=[n(137),n(48)],r=function(e,t){var n=e.extend({constructor:function(e){this.el=document.createElement("div"),this.el.className="jw-icon jw-icon-tooltip "+e+" jw-button-color jw-reset jw-hidden",this.container=document.createElement("div"),this.container.className="jw-overlay jw-reset",this.openClass="jw-open",this.componentType="tooltip",this.el.appendChild(this.container)},addContent:function(e){this.content&&this.removeContent(),this.content=e,this.container.appendChild(e)},removeContent:function(){this.content&&(this.container.removeChild(this.content),this.content=null)},hasContent:function(){return!!this.content},element:function(){return this.el},openTooltip:function(e){this.trigger("open-"+this.componentType,e,{isOpen:!0}),this.isOpen=!0,t.toggleClass(this.el,this.openClass,this.isOpen)},closeTooltip:function(e){this.trigger("close-"+this.componentType,e,{isOpen:!1}),this.isOpen=!1,t.toggleClass(this.el,this.openClass,this.isOpen)},toggleOpenState:function(e){this.isOpen?this.closeTooltip(e):this.openTooltip(e)}});return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(48),n(112)],r=function(e,t,n){function i(e,t){this.time=e,this.text=t,this.el=document.createElement("div"),this.el.className="jw-cue jw-reset"}e.extend(i.prototype,{align:function(e){if("%"===this.time.toString().slice(-1))this.pct=this.time;else{var t=this.time/e*100;this.pct=t+"%"}this.el.style.left=this.pct}});var r={loadChapters:function(e){t.ajax(e,this.chaptersLoaded.bind(this),this.chaptersFailed,{plainText:!0})},chaptersLoaded:function(t){var i=n(t.responseText);e.isArray(i)&&(e.each(i,this.addCue,this),this.drawCues())},chaptersFailed:function(){},addCue:function(e){this.cues.push(new i(e.begin,e.text))},drawCues:function(){var t=this._model.mediaModel.get("duration");if(!t||0>=t)return void this._model.mediaModel.once("change:duration",this.drawCues,this);var n=this;e.each(this.cues,function(e){e.align(t),e.el.addEventListener("mouseover",function(){n.activeCue=e}),e.el.addEventListener("mouseout",function(){n.activeCue=null}),n.elementRail.appendChild(e.el)})},resetChapters:function(){e.each(this.cues,function(e){e.el.parentNode&&e.el.parentNode.removeChild(e.el)},this),this.cues=[]}};return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(48),n(112)],r=function(e,t,n){function i(e){this.begin=e.begin,this.end=e.end,this.img=e.text}var r={loadThumbnails:function(e){e&&(this.vttPath=e.split("?")[0].split("/").slice(0,-1).join("/"),this.individualImage=null,t.ajax(e,this.thumbnailsLoaded.bind(this),this.thumbnailsFailed.bind(this),{plainText:!0}))},thumbnailsLoaded:function(t){var r=n(t.responseText);e.isArray(r)&&(e.each(r,function(e){this.thumbnails.push(new i(e))},this),this.drawCues())},thumbnailsFailed:function(){},chooseThumbnail:function(t){var n=e.sortedIndex(this.thumbnails,{end:t},e.property("end"));n>=this.thumbnails.length&&(n=this.thumbnails.length-1);var i=this.thumbnails[n].img;return i.indexOf("://")<0&&(i=this.vttPath?this.vttPath+"/"+i:i),i},loadThumbnail:function(t){var n=this.chooseThumbnail(t),i={display:"block",margin:"0 auto",backgroundPosition:"0 0"},r=n.indexOf("#xywh");if(r>0)try{var o=/(.+)\#xywh=(\d+),(\d+),(\d+),(\d+)/.exec(n);n=o[1],i.backgroundPosition=-1*o[2]+"px "+-1*o[3]+"px",i.width=o[4],i.height=o[5]}catch(a){return}else this.individualImage||(this.individualImage=new Image,this.individualImage.onload=e.bind(function(){this.individualImage.onload=null,this.timeTip.image({width:this.individualImage.width,height:this.individualImage.height})},this),this.individualImage.src=n);return i.backgroundImage='url("'+n+'")',i},showThumbnail:function(e){this.thumbnails.length<1||this.timeTip.image(this.loadThumbnail(e))},resetThumbnails:function(){this.timeTip.image({backgroundImage:"",width:0,height:0}),this.thumbnails=[]}};return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(139),n(48),n(45),n(127),n(143)],r=function(e,t,n,i,r){var o=e.extend({setup:function(e,o,a){this.iconUI||(this.iconUI=new i(this.el,{useHover:!0,directSelect:!0}),this.toggleValueListener=this.toggleValue.bind(this),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.select.bind(this)),this.reset(),e=n.isArray(e)?e:[],t.toggleClass(this.el,"jw-hidden",e.length<2);var s=e.length>2||2===e.length&&a&&a.toggle===!1,c=!s&&2===e.length;if(t.toggleClass(this.el,"jw-toggle",c),t.toggleClass(this.el,"jw-button-color",!c),this.isActive=s||c,s){t.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener);var l=r(e),u=t.createElement(l);this.addContent(u),this.contentUI=new i(this.content).on("click tap",this.selectListener)}else c&&this.iconUI.on("click tap",this.toggleValueListener);this.selectItem(o)},toggleValue:function(){this.trigger("toggleValue")},select:function(e){if(e.target.parentElement===this.content){var i=t.classList(e.target),r=n.find(i,function(e){return 0===e.indexOf("jw-item")});r&&(this.trigger("select",parseInt(r.split("-")[2])),this.closeTooltipListener())}},selectItem:function(e){if(this.content)for(var n=0;n<this.content.children.length;n++)t.toggleClass(this.content.children[n],"jw-active-option",e===n);else t.toggleClass(this.el,"jw-off",0===e)},reset:function(){t.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}});return o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var r=this.lambda,o=this.escapeExpression;return"        <li class='jw-text jw-option jw-item-"+o(r(i&&i.index,e))+" jw-reset'>"+o(r(null!=e?e.label:e,e))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o='<ul class="jw-menu jw-background-color jw-reset">\n';return r=t.each.call(e,e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"</ul>"},useData:!0})},function(e,t,n){var i,r;i=[n(48),n(45),n(139),n(127),n(145)],r=function(e,t,n,i,r){var o=n.extend({setup:function(n,r){if(this.iconUI||(this.iconUI=new i(this.el,{useHover:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this),this.selectListener=this.onSelect.bind(this)),this.reset(),n=t.isArray(n)?n:[],e.toggleClass(this.el,"jw-hidden",n.length<2),n.length>=2){this.iconUI=new i(this.el,{useHover:!0}).on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener);var o=this.menuTemplate(n,r),a=e.createElement(o);this.addContent(a),this.contentUI=new i(this.content),this.contentUI.on("click tap",this.selectListener)}this.originalList=n},menuTemplate:function(e,n){var i=t.map(e,function(e,t){return{active:t===n,label:t+1+".",title:e.title}});return r(i)},onSelect:function(n){var i=n.target;if("UL"!==i.tagName){"LI"!==i.tagName&&(i=i.parentElement);var r=e.classList(i),o=t.find(r,function(e){return 0===e.indexOf("jw-item")});o&&(this.trigger("select",parseInt(o.split("-")[2])),this.closeTooltip())}},selectItem:function(e){this.setup(this.originalList,e)},reset:function(){this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}});return o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var r,o="";return r=t["if"].call(e,null!=e?e.active:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),null!=r&&(o+=r),o},2:function(e,t,n,i){var r=this.lambda,o=this.escapeExpression;return"                <li class='jw-option jw-text jw-active-option jw-item-"+o(r(i&&i.index,e))+' jw-reset\'>\n                    <span class="jw-label jw-reset"><span class="jw-icon jw-icon-play jw-reset"></span></span>\n                    <span class="jw-name jw-reset">'+o(r(null!=e?e.title:e,e))+"</span>\n                </li>\n"},4:function(e,t,n,i){var r=this.lambda,o=this.escapeExpression;return"                <li class='jw-option jw-text jw-item-"+o(r(i&&i.index,e))+' jw-reset\'>\n                    <span class="jw-label jw-reset">'+o(r(null!=e?e.label:e,e))+'</span>\n                    <span class="jw-name jw-reset">'+o(r(null!=e?e.title:e,e))+"</span>\n                </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o='<div class="jw-menu jw-playlist-container jw-background-color jw-reset">\n\n    <div class="jw-tooltip-title jw-reset">\n        <span class="jw-icon jw-icon-inline jw-icon-playlist jw-reset"></span>\n        <span class="jw-text jw-reset">PLAYLIST</span>\n    </div>\n\n    <ul class="jw-playlist jw-reset">\n';return r=t.each.call(e,e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"    </ul>\n</div>"},useData:!0})},function(e,t,n){var i,r;i=[n(139),n(136),n(127),n(48)],r=function(e,t,n,i){var r=e.extend({constructor:function(r,o){this._model=r,e.call(this,o),this.volumeSlider=new t("jw-slider-volume jw-volume-tip","vertical"),this.addContent(this.volumeSlider.element()),this.volumeSlider.on("update",function(e){this.trigger("update",e)},this),i.removeClass(this.el,"jw-hidden"),new n(this.el,{useHover:!0,directSelect:!0}).on("click",this.toggleValue,this).on("tap",this.toggleOpenState,this).on("over",this.openTooltip,this).on("out",this.closeTooltip,this),this._model.on("change:volume",this.onVolume,this)},toggleValue:function(){this.trigger("toggleValue")}});return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(139),n(48),n(45),n(127)],r=function(e,t,n,i){var r=e.extend({constructor:function(t){e.call(this,t),this.container.className="jw-overlay-horizontal jw-reset",this.openClass="jw-open-drawer",this.componentType="drawer"},setup:function(e,r){this.iconUI||(this.iconUI=new i(this.el,{useHover:!0,directSelect:!0}),this.toggleOpenStateListener=this.toggleOpenState.bind(this),this.openTooltipListener=this.openTooltip.bind(this),this.closeTooltipListener=this.closeTooltip.bind(this)),this.reset(),e=n.isArray(e)?e:[],this.activeContents=n.filter(e,function(e){return e.isActive}),t.toggleClass(this.el,"jw-hidden",!r||this.activeContents.length<2),r&&this.activeContents.length>1&&(t.removeClass(this.el,"jw-off"),this.iconUI.on("tap",this.toggleOpenStateListener).on("over",this.openTooltipListener).on("out",this.closeTooltipListener),n.each(e,function(e){this.container.appendChild(e.el)},this))},reset:function(){t.addClass(this.el,"jw-off"),this.iconUI.off(),this.contentUI&&this.contentUI.off().destroy(),this.removeContent()}});return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(48)],r=function(e,t){function n(e,t){t.off("change:mediaType",null,this),t.on("change:mediaType",function(t,n){"audio"===n&&this.setImage(e.get("playlistItem").image)},this)}function i(e,n){var i=e.get("autostart")&&!t.isMobile()||e.get("item")>0;return i?(this.setImage(null),e.off("change:state",null,this),void e.on("change:state",function(e,t){"complete"!==t&&"idle"!==t&&"error"!==t||this.setImage(n.image)},this)):void this.setImage(n.image)}var r=function(e){this.model=e,e.on("change:playlistItem",i,this),e.on("change:mediaModel",n,this)};return e.extend(r.prototype,{setup:function(e){this.el=e;var t=this.model.get("playlistItem");t&&this.setImage(t.image)},setImage:function(n){this.model.off("change:state",null,this);var i="";e.isString(n)&&(i='url("'+n+'")'),t.style(this.el,{backgroundImage:i})},element:function(){return this.el}}),r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(150),n(45),n(59)],r=function(e,t){var n=function(){};return t.extend(n.prototype,e.prototype,{buildArray:function(){var t=e.prototype.buildArray.apply(this,arguments),n=(this.model.get("edition"),"http://www.cameratag.com");if(t.items[0].link=n,this.model.get("abouttext")){t.items[0].showLogo=!1,t.items.push(t.items.shift());var i={title:this.model.get("abouttext"),link:this.model.get("aboutlink")||n};t.items.unshift(i)}return t}}),n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(48),n(151),n(45),n(127),n(59)],r=function(e,t,n,i,r){var o=function(){};return n.extend(o.prototype,{buildArray:function(){var t=r.split("+"),n=t[0],i={items:[{title:"Powered by CameraTag",featured:!1,showLogo:!1,link:"http://www.cameratag.com"}]},o=n.indexOf("-")>0,a=t[1];if(o&&a){var s=a.split(".");i.items.push({title:"build: ("+s[0]+"."+s[1]+")",link:"#"})}var c=this.model.get("provider").name;if(c.indexOf("flash")>=0){var l="Flash Version "+e.flashVersion();i.items.push({title:l,link:"http://www.adobe.com/software/flash/about/"})}return i},buildMenu:function(){var n=this.buildArray();return e.createElement(t(n))},updateHtml:function(){this.el.innerHTML=this.buildMenu().innerHTML},rightClick:function(e){return this.lazySetup(),this.mouseOverContext?!1:(this.hideMenu(),this.showMenu(e),!1)},getOffset:function(e){for(var t=e.target,n=e.offsetX||e.layerX,i=e.offsetY||e.layerY;t!==this.playerElement;)n+=t.offsetLeft,i+=t.offsetTop,t=t.parentNode;return{x:n,y:i}},showMenu:function(t){var n=this.getOffset(t);return this.el.style.left=n.x+"px",this.el.style.top=n.y+"px",e.addClass(this.playerElement,"jw-flag-rightclick-open"),e.addClass(this.el,"jw-open"),!1},hideMenu:function(){this.mouseOverContext||(e.removeClass(this.playerElement,"jw-flag-rightclick-open"),e.removeClass(this.el,"jw-open"))},lazySetup:function(){this.el||(this.el=this.buildMenu(),this.layer.appendChild(this.el),this.hideMenuHandler=this.hideMenu.bind(this),this.addOffListener(this.playerElement),this.addOffListener(document),this.model.on("change:provider",this.updateHtml,this),this.elementUI=new i(this.el,{useHover:!0}).on("over",function(){this.mouseOverContext=!0},this).on("out",function(){this.mouseOverContext=!1},this))},setup:function(e,t,n){this.playerElement=t,this.model=e,this.mouseOverContext=!1,this.layer=n,t.oncontextmenu=this.rightClick.bind(this)},addOffListener:function(e){e.addEventListener("mousedown",this.hideMenuHandler),e.addEventListener("touchstart",this.hideMenuHandler),e.addEventListener("pointerdown",this.hideMenuHandler)},removeOffListener:function(e){e.removeEventListener("mousedown",this.hideMenuHandler),e.removeEventListener("touchstart",this.hideMenuHandler),e.removeEventListener("pointerdown",this.hideMenuHandler)},destroy:function(){this.el&&(this.hideMenu(),this.elementUI.off(),this.removeOffListener(this.playerElement),this.removeOffListener(document),this.hideMenuHandler=null,this.el=null),this.playerElement&&(this.playerElement.oncontextmenu=null,this.playerElement=null),this.model&&(this.model.off("change:provider",this.updateHtml),this.model=null)}}),o}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({1:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,c=this.escapeExpression,l='        <li class="jw-reset';return r=t["if"].call(e,null!=e?e.featured:e,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=r&&(l+=r),l+='">\n            <a href="'+c((o=null!=(o=t.link||(null!=e?e.link:e))?o:s,typeof o===a?o.call(e,{name:"link",hash:{},data:i}):o))+'" class="jw-reset" target="_top">\n',r=t["if"].call(e,null!=e?e.showLogo:e,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=r&&(l+=r),l+"                "+c((o=null!=(o=t.title||(null!=e?e.title:e))?o:s,typeof o===a?o.call(e,{name:"title",hash:{},data:i}):o))+"\n            </a>\n        </li>\n"},2:function(){return" jw-featured"},4:function(){return'                <span class="jw-icon jw-rightclick-logo jw-reset"></span>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o='<div class="jw-rightclick jw-reset">\n    <ul class="jw-reset">\n';return r=t.each.call(e,null!=e?e.items:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(o+=r),o+"    </ul>\n</div>"},useData:!0})},function(e,t,n){var i,r;i=[n(45),n(48)],r=function(e,t){var n=function(e){this.model=e,this.model.on("change:playlistItem",this.playlistItem,this)};return e.extend(n.prototype,{hide:function(){this.el.style.display="none"},show:function(){this.el.style.display=""},setup:function(e){this.el=e;var t=this.el.getElementsByTagName("div");this.title=t[0],this.description=t[1],this.model.get("playlistItem")&&this.playlistItem(this.model,this.model.get("playlistItem")),this.model.on("change:logoWidth",this.update,this),this.model.on("change:dock",this.update,this)},update:function(e){var n={paddingLeft:0,paddingRight:0},i=e.get("controls"),r=e.get("dock"),o=e.get("logo");if(o){var a=1*(""+o.margin).replace("px",""),s=e.get("logoWidth")+(isNaN(a)?0:a);"top-left"===o.position?n.paddingLeft=s:"top-right"===o.position&&(n.paddingRight=s)}if(i&&r&&r.length){var c=56*r.length;n.paddingRight=Math.max(n.paddingRight,c)}t.style(this.el,n)},playlistItem:function(e,t){if(e.get("displaytitle")||e.get("displaydescription")){var n="",i="";t.title&&e.get("displaytitle")&&(n=t.title),t.description&&e.get("displaydescription")&&(i=t.description),this.updateText(n,i)}else this.hide()},updateText:function(e,t){this.title.innerHTML=e,this.description.innerHTML=t,this.title.firstChild||this.description.firstChild?this.show():this.hide()},element:function(){return this.el}}),n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="jwplayer jw-reset" tabindex="0">\n    <div class="jw-aspect jw-reset"></div>\n    <div class="jw-media jw-reset"></div>\n    <div class="jw-preview jw-reset"></div>\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset"></div>\n        <div class="jw-title-secondary jw-reset"></div>\n    </div>\n    <div class="jw-overlays jw-reset"></div>\n    <div class="jw-controls jw-reset"></div>\n</div>'},useData:!0})},function(e,t,n){var i,r;i=[n(48),n(46),n(127),n(47),n(45),n(155)],r=function(e,t,n,i,r,o){var a=function(e){this.model=e,this.setup()};return r.extend(a.prototype,i,{setup:function(){this.destroy(),this.skipMessage=this.model.get("skipText"),this.skipMessageCountdown=this.model.get("skipMessage"),this.setWaitTime(this.model.get("skipOffset"));var t=o();this.el=e.createElement(t),this.skiptext=this.el.getElementsByClassName("jw-skiptext")[0],this.skipAdOnce=r.once(this.skipAd.bind(this)),new n(this.el).on("click tap",r.bind(function(){this.skippable&&this.skipAdOnce()},this)),this.model.on("change:duration",this.onChangeDuration,this),this.model.on("change:position",this.onChangePosition,this),this.onChangeDuration(this.model,this.model.get("duration")),this.onChangePosition(this.model,this.model.get("position"))},updateMessage:function(e){this.skiptext.innerHTML=e},updateCountdown:function(e){this.updateMessage(this.skipMessageCountdown.replace(/xx/gi,Math.ceil(this.waitTime-e)))},onChangeDuration:function(t,n){if(n){if(this.waitPercentage){if(!n)return;this.itemDuration=n,this.setWaitTime(this.waitPercentage),delete this.waitPercentage}e.removeClass(this.el,"jw-hidden")}},onChangePosition:function(t,n){this.waitTime-n>0?this.updateCountdown(n):(this.updateMessage(this.skipMessage),this.skippable=!0,e.addClass(this.el,"jw-skippable"))},element:function(){return this.el},setWaitTime:function(t){if(r.isString(t)&&"%"===t.slice(-1)){var n=parseFloat(t);return void(this.itemDuration&&!isNaN(n)?this.waitTime=this.itemDuration*n/100:this.waitPercentage=t)}this.waitTime=r.isNumber(t)?t:"string"===e.typeOf(t)?e.seconds(t):isNaN(Number(t))?0:Number(t)},skipAd:function(){this.trigger(t.JWPLAYER_AD_SKIPPED)},destroy:function(){this.el&&(this.el.removeEventListener("click",this.skipAdOnce),this.el.parentElement&&this.el.parentElement.removeChild(this.el)),delete this.skippable,delete this.itemDuration,delete this.waitPercentage}}),a}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="jw-skip jw-background-color jw-hidden jw-reset">\n    <span class="jw-text jw-skiptext jw-reset"></span>\n    <span class="jw-icon-inline jw-skip-icon jw-reset"></span>\n</div>'},useData:!0})},function(e,t,n){var i,r;i=[n(157)],r=function(e){function t(t,n,i,r){return e({id:t,skin:n,title:i,body:r})}return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(120);e.exports=(i["default"]||i).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'"class="jw-skin-'+s((r=null!=(r=t.skin||(null!=e?e.skin:e))?r:a,typeof r===o?r.call(e,{name:"skin",hash:{},data:i}):r))+' jw-error jw-reset">\n    <div class="jw-title jw-reset">\n        <div class="jw-title-primary jw-reset">'+s((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,typeof r===o?r.call(e,{name:"title",hash:{},data:i}):r))+'</div>\n        <div class="jw-title-secondary jw-reset">'+s((r=null!=(r=t.body||(null!=e?e.body:e))?r:a,typeof r===o?r.call(e,{name:"body",hash:{},data:i}):r))+'</div>\n    </div>\n\n    <div class="jw-icon-container jw-reset">\n        <div class="jw-display-icon-container jw-background-color jw-reset">\n            <div class="jw-icon jw-icon-display jw-reset"></div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},function(e,t){var n,i;n=[],i=function(){function e(){var e=document.createElement("div");return e.className=n,e.innerHTML="&nbsp;",e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.background="transparent",e}function t(){function t(){var e=this,t=e._view.element();t.appendChild(o),i()&&e.trigger("adBlock")}function i(){return r?!0:(""!==o.innerHTML&&o.className===n&&null!==o.offsetParent&&0!==o.clientHeight||(r=!0),r)}var r=!1,o=e();return{onReady:t,checkAdBlock:i}}var n="afs_ads";return{setup:t}}.apply(t,n),!(void 0!==i&&(e.exports=i))},,,,function(e,t){var n,i;n=[],i=function(){var e=window.chrome,t={};return t.NS="urn:x-cast:com.longtailvideo.jwplayer",t.debug=!1,t.availability=null,t.available=function(n){n=n||t.availability;var i="available";return e&&e.cast&&e.cast.ReceiverAvailability&&(i=e.cast.ReceiverAvailability.AVAILABLE),n===i},t.log=function(){if(t.debug){var e=Array.prototype.slice.call(arguments,0);console.log.apply(console,e)}},t.error=function(){var e=Array.prototype.slice.call(arguments,0);console.error.apply(console,e)},t}.apply(t,n),!(void 0!==i&&(e.exports=i))},,,function(e,t,n){var i,r;i=[n(98),n(45)],r=function(e,t){return function(n,i){var r=["seek","skipAd","stop","playlistNext","playlistPrev","playlistItem","resize","addButton","removeButton","registerPlugin","attachMedia"];t.each(r,function(e){n[e]=function(){return i[e].apply(i,arguments),n}}),n.registerPlugin=e.registerPlugin}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45)],r=function(e){return function(t,n){var i=["buffer","controls","position","duration","fullscreen","volume","mute","item","stretching","playlist"];e.each(i,function(e){var i=e.slice(0,1).toUpperCase()+e.slice(1);t["get"+i]=function(){return n._model.get(e)}});var r=["getAudioTracks","getCaptionsList","getWidth","getHeight","getCurrentAudioTrack","setCurrentAudioTrack","getCurrentCaptions","setCurrentCaptions","getCurrentQuality","setCurrentQuality","getQualityLevels","getVisualQuality","getConfig","getState","getSafeRegion","isBeforeComplete","isBeforePlay","getProvider","detachMedia"],o=["setControls","setFullscreen","setVolume","setMute","setCues"];e.each(r,function(e){t[e]=function(){return n[e]?n[e].apply(n,arguments):null}}),e.each(o,function(e){t[e]=function(){return n[e].apply(n,arguments),t}})}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(45),n(46)],r=function(e,t){return function(n){var i={onBufferChange:t.JWPLAYER_MEDIA_BUFFER,onBufferFull:t.JWPLAYER_MEDIA_BUFFER_FULL,onError:t.JWPLAYER_ERROR,onSetupError:t.JWPLAYER_SETUP_ERROR,onFullscreen:t.JWPLAYER_FULLSCREEN,onMeta:t.JWPLAYER_MEDIA_META,onMute:t.JWPLAYER_MEDIA_MUTE,onPlaylist:t.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:t.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:t.JWPLAYER_PLAYLIST_COMPLETE,onReady:t.JWPLAYER_READY,onResize:t.JWPLAYER_RESIZE,onComplete:t.JWPLAYER_MEDIA_COMPLETE,onSeek:t.JWPLAYER_MEDIA_SEEK,onTime:t.JWPLAYER_MEDIA_TIME,onVolume:t.JWPLAYER_MEDIA_VOLUME,onBeforePlay:t.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:t.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:t.JWPLAYER_DISPLAY_CLICK,onControls:t.JWPLAYER_CONTROLS,onQualityLevels:t.JWPLAYER_MEDIA_LEVELS,onQualityChange:t.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:t.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:t.JWPLAYER_CAPTIONS_CHANGED,onAdError:t.JWPLAYER_AD_ERROR,onAdClick:t.JWPLAYER_AD_CLICK,onAdImpression:t.JWPLAYER_AD_IMPRESSION,onAdTime:t.JWPLAYER_AD_TIME,onAdComplete:t.JWPLAYER_AD_COMPLETE,onAdCompanions:t.JWPLAYER_AD_COMPANIONS,onAdSkipped:t.JWPLAYER_AD_SKIPPED,onAdPlay:t.JWPLAYER_AD_PLAY,onAdPause:t.JWPLAYER_AD_PAUSE,onAdMeta:t.JWPLAYER_AD_META,onCast:t.JWPLAYER_CAST_SESSION,onAudioTrackChange:t.JWPLAYER_AUDIO_TRACK_CHANGED,onAudioTracks:t.JWPLAYER_AUDIO_TRACKS},r={onBuffer:"buffer",onPause:"pause",onPlay:"play",onIdle:"idle"};e.each(r,function(t,i){n[i]=e.partial(n.on,t,e)}),e.each(i,function(t,i){n[i]=e.partial(n.on,t,e)})}}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(169);"string"==typeof i&&(i=[[e.id,i,""]]),n(173)(i,{}),i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(170)(),t.push([e.id,".jw-reset{color:inherit;background-color:transparent;padding:0;margin:0;float:none;font-family:Arial,Helvetica,sans-serif;font-size:1em;line-height:1em;list-style:none;text-align:left;text-transform:none;vertical-align:baseline;border:0;direction:ltr;font-variant:inherit;font-stretch:inherit;-webkit-tap-highlight-color:rgba(255,255,255,0)}@font-face{font-family:'jw-icons';src:url("+n(171)+") format('woff'),url("+n(172)+') format(\'truetype\');font-weight:normal;font-style:normal}.jw-icon-inline,.jw-icon-tooltip,.jw-icon-display,.jw-controlbar .jw-menu .jw-option:before{font-family:\'jw-icons\';-webkit-font-smoothing:antialiased;font-style:normal;font-weight:normal;text-transform:none;background-color:transparent;font-variant:normal;-webkit-font-feature-settings:"liga";-ms-font-feature-settings:"liga" 1;-o-font-feature-settings:"liga";font-feature-settings:"liga";-moz-osx-font-smoothing:grayscale}.jw-icon-audio-tracks:before{content:"\\E600"}.jw-icon-buffer:before{content:"\\E601"}.jw-icon-cast:before{content:"\\E603"}.jw-icon-cast.jw-off:before{content:"\\E602"}.jw-icon-cc:before{content:"\\E605"}.jw-icon-cue:before{content:"\\E606"}.jw-icon-menu-bullet:before{content:"\\E606"}.jw-icon-error:before{content:"\\E607"}.jw-icon-fullscreen:before{content:"\\E608"}.jw-icon-fullscreen.jw-off:before{content:"\\E613"}.jw-icon-hd:before{content:"\\E60A"}.jw-watermark:before,.jw-rightclick-logo:before{content:"\\E60B"}.jw-icon-next:before{content:"\\E60C"}.jw-icon-pause:before{content:"\\E60D"}.jw-icon-play:before{content:"\\E60E"}.jw-icon-prev:before{content:"\\E60F"}.jw-icon-replay:before{content:"\\E610"}.jw-icon-volume:before{content:"\\E612"}.jw-icon-volume.jw-off:before{content:"\\E611"}.jw-icon-more:before{content:"\\E614"}.jw-icon-close:before{content:"\\E615"}.jw-icon-playlist:before{content:"\\E616"}.jwplayer{width:100%;font-size:16px;position:relative;display:block;min-height:0;overflow:hidden;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;background-color:#000;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jwplayer *{box-sizing:inherit}.jwplayer.jw-flag-aspect-mode{height:auto !important}.jwplayer.jw-flag-aspect-mode .jw-aspect{display:block}.jwplayer .jw-aspect{display:none}.jwplayer.jw-no-focus:focus,.jwplayer .jw-swf{outline:none}.jwplayer.jw-ie:focus{outline:#585858 dotted 1px}.jwplayer:hover .jw-display-icon-container{background-color:#333;background:#333;background-size:#333}.jw-media,.jw-preview,.jw-overlays,.jw-controls{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jw-media{overflow:hidden;cursor:pointer}.jw-overlays{cursor:auto}.jw-media.jw-media-show{visibility:visible;opacity:1}.jw-controls.jw-controls-disabled{display:none}.jw-controls .jw-controls-right{position:absolute;top:0;right:0;left:0;bottom:2em}.jw-text{height:1em;font-family:Arial,Helvetica,sans-serif;font-size:.75em;font-style:normal;font-weight:normal;color:white;text-align:center;font-variant:normal;font-stretch:normal}.jw-plugin{position:absolute;bottom:2.5em}.jw-plugin .jw-banner{max-width:100%;opacity:0;cursor:pointer;position:absolute;margin:auto auto 0 auto;left:0;right:0;bottom:0;display:block}.jw-cast-screen{width:100%;height:100%}.jw-instream{position:absolute;top:0;right:0;bottom:0;left:0;display:none}.jw-icon-playback:before{content:"\\E60E"}.jw-preview,.jw-captions,.jw-title,.jw-overlays,.jw-controls{pointer-events:none}.jw-overlays>div,.jw-media,.jw-controlbar,.jw-dock,.jw-logo,.jw-skip,.jw-display-icon-container{pointer-events:all}.jwplayer video{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;margin:auto;background:transparent}.jwplayer video::-webkit-media-controls-start-playback-button{display:none}.jwplayer video::-webkit-media-text-track-display{-webkit-transform:translateY(-1.5em);transform:translateY(-1.5em)}.jwplayer.jw-flag-user-inactive.jw-state-playing video::-webkit-media-text-track-display{-webkit-transform:translateY(0);transform:translateY(0)}.jwplayer.jw-stretch-uniform video{-o-object-fit:contain;object-fit:contain}.jwplayer.jw-stretch-none video{-o-object-fit:none;object-fit:none}.jwplayer.jw-stretch-fill video{-o-object-fit:cover;object-fit:cover}.jwplayer.jw-stretch-exactfit video{-o-object-fit:fill;object-fit:fill}.jw-click{position:absolute;width:100%;height:100%}.jw-preview{position:absolute;display:none;opacity:1;visibility:visible;width:100%;height:100%;background:#000 no-repeat 50% 50%}.jwplayer .jw-preview,.jw-error .jw-preview,.jw-stretch-uniform .jw-preview{background-size:contain}.jw-stretch-none .jw-preview{background-size:auto auto}.jw-stretch-fill .jw-preview{background-size:cover}.jw-stretch-exactfit .jw-preview{background-size:100% 100%}.jw-display-icon-container{position:relative;top:50%;display:table;height:3.5em;width:3.5em;margin:-1.75em auto 0;cursor:pointer}.jw-display-icon-container .jw-icon-display{position:relative;display:table-cell;text-align:center;vertical-align:middle !important;background-position:50% 50%;background-repeat:no-repeat;font-size:2em}.jw-flag-audio-player .jw-display-icon-container,.jw-flag-dragging .jw-display-icon-container{display:none}.jw-icon{font-family:\'jw-icons\';-webkit-font-smoothing:antialiased;font-style:normal;font-weight:normal;text-transform:none;background-color:transparent;font-variant:normal;-webkit-font-feature-settings:"liga";-ms-font-feature-settings:"liga" 1;-o-font-feature-settings:"liga";font-feature-settings:"liga";-moz-osx-font-smoothing:grayscale}.jw-controlbar{display:table;position:absolute;right:0;left:0;bottom:0;height:2em;padding:0 .25em}.jw-controlbar .jw-hidden{display:none}.jw-controlbar.jw-drawer-expanded .jw-controlbar-left-group,.jw-controlbar.jw-drawer-expanded .jw-controlbar-center-group{opacity:0}.jw-background-color{background-color:#414040}.jw-group{display:table-cell}.jw-controlbar-center-group{width:100%;padding:0 .25em}.jw-controlbar-center-group .jw-slider-time,.jw-controlbar-center-group .jw-text-alt{padding:0}.jw-controlbar-center-group .jw-text-alt{display:none}.jw-controlbar-left-group,.jw-controlbar-right-group{white-space:nowrap}.jw-knob:hover,.jw-icon-inline:hover,.jw-icon-tooltip:hover,.jw-icon-display:hover,.jw-option:before:hover{color:#eee}.jw-icon-inline,.jw-icon-tooltip,.jw-slider-horizontal,.jw-text-elapsed,.jw-text-duration{display:inline-block;height:2em;position:relative;line-height:2em;vertical-align:middle;cursor:pointer}.jw-icon-inline,.jw-icon-tooltip{min-width:1.25em;text-align:center}.jw-icon-playback{min-width:2.25em}.jw-icon-volume{min-width:1.75em;text-align:left}.jw-time-tip{line-height:1em;pointer-events:none}.jw-icon-inline:after,.jw-icon-tooltip:after{width:100%;height:100%;font-size:1em}.jw-icon-cast{display:none}.jw-slider-volume.jw-slider-horizontal,.jw-icon-inline.jw-icon-volume{display:none}.jw-dock{margin:.75em;display:block;opacity:1;clear:right}.jw-dock:after{content:\'\';clear:both;display:block}.jw-dock-button{cursor:pointer;float:right;position:relative;width:2.5em;height:2.5em;margin:.5em}.jw-dock-button .jw-arrow{display:none;position:absolute;bottom:-0.2em;width:.5em;height:.2em;left:50%;margin-left:-0.25em}.jw-dock-button .jw-overlay{display:none;position:absolute;top:2.5em;right:0;margin-top:.25em;padding:.5em;white-space:nowrap}.jw-dock-button:hover .jw-overlay,.jw-dock-button:hover .jw-arrow{display:block}.jw-dock-image{width:100%;height:100%;background-position:50% 50%;background-repeat:no-repeat;opacity:.75}.jw-title{display:none;position:absolute;top:0;width:100%;font-size:.875em;height:8em;background:-webkit-linear-gradient(top, #000 0, #000 18%, rgba(0,0,0,0) 100%);background:linear-gradient(to bottom, #000 0, #000 18%, rgba(0,0,0,0) 100%)}.jw-title-primary,.jw-title-secondary{padding:.75em 1.5em;min-height:2.5em;width:100%;color:white;white-space:nowrap;text-overflow:ellipsis;overflow-x:hidden}.jw-title-primary{font-weight:bold}.jw-title-secondary{margin-top:-0.5em}.jw-slider-container{display:inline-block;height:1em;position:relative;touch-action:none}.jw-rail,.jw-buffer,.jw-progress{position:absolute;cursor:pointer}.jw-progress{background-color:#fff}.jw-rail{background-color:#aaa}.jw-buffer{background-color:#202020}.jw-cue,.jw-knob{position:absolute;cursor:pointer}.jw-cue{background-color:#fff;width:.1em;height:.4em}.jw-knob{background-color:#aaa;width:.4em;height:.4em}.jw-slider-horizontal{width:4em;height:1em}.jw-slider-horizontal.jw-slider-volume{margin-right:5px}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-buffer,.jw-slider-horizontal .jw-progress{width:100%;height:.4em}.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-buffer{width:0}.jw-slider-horizontal .jw-rail,.jw-slider-horizontal .jw-progress,.jw-slider-horizontal .jw-slider-container{width:100%;}.jw-slider-horizontal .jw-knob{left:0;margin-left:-0.325em}.jw-slider-vertical{width:.75em;height:4em;bottom:0;position:absolute;padding:1em}.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-buffer,.jw-slider-vertical .jw-progress{bottom:0;height:100%}.jw-slider-vertical .jw-progress,.jw-slider-vertical .jw-buffer{height:0}.jw-slider-vertical .jw-slider-container,.jw-slider-vertical .jw-rail,.jw-slider-vertical .jw-progress{bottom:0;width:.75em;height:100%;left:0;right:0;margin:0 auto}.jw-slider-vertical .jw-slider-container{height:4em;position:relative}.jw-slider-vertical .jw-knob{bottom:0;left:0;right:0;margin:0 auto}.jw-slider-time{right:0;left:0;width:100%}.jw-tooltip-time{position:absolute}.jw-slider-volume .jw-buffer{display:none}.jw-captions{position:absolute;display:none;margin:0 auto;width:100%;left:0;bottom:3em;right:0;max-width:90%;text-align:center}.jw-captions.jw-captions-enabled{display:block}.jw-captions-window{display:none;padding:.25em;border-radius:.25em}.jw-captions-window.jw-captions-window-active{display:inline-block}.jw-captions-text{display:inline-block;color:white;background-color:black;word-wrap:break-word;white-space:pre-line;font-style:normal;font-weight:normal;text-align:center;text-decoration:none;line-height:1.3em;padding:.1em .8em}.jw-rightclick{display:none;position:absolute;white-space:nowrap}.jw-rightclick.jw-open{display:block}.jw-rightclick ul{list-style:none;font-weight:bold;border-radius:.15em;margin:0;border:1px solid #444;padding:0}.jw-rightclick .jw-rightclick-logo{font-size:2em;color:#ff0147;vertical-align:middle;padding-right:.3em;margin-right:.3em;border-right:1px solid #444}.jw-rightclick li{background-color:#000;border-bottom:1px solid #444;margin:0}.jw-rightclick a{color:#fff;text-decoration:none;padding:1em;display:block;font-size:.6875em}.jw-rightclick li:last-child{border-bottom:none}.jw-rightclick li:hover{background-color:#1a1a1a;cursor:pointer}.jw-rightclick .jw-featured{background-color:#252525;vertical-align:middle}.jw-rightclick .jw-featured a{color:#777}.jw-logo{position:absolute;margin:.75em;cursor:pointer;pointer-events:all;background-repeat:no-repeat;background-size:contain;top:auto;right:auto;left:auto;bottom:auto}.jw-logo .jw-flag-audio-player{display:none}.jw-logo-top-right{top:0;right:0}.jw-logo-top-left{top:0;left:0}.jw-logo-bottom-left{bottom:0;left:0}.jw-logo-bottom-right{bottom:0;right:0}.jw-watermark{position:absolute;top:50%;left:0;right:0;bottom:0;text-align:center;font-size:14em;color:#eee;opacity:.33;pointer-events:none}.jw-icon-tooltip.jw-open .jw-overlay{opacity:1;visibility:visible}.jw-icon-tooltip.jw-hidden{display:none}.jw-overlay-horizontal{display:none}.jw-icon-tooltip.jw-open-drawer:before{display:none}.jw-icon-tooltip.jw-open-drawer .jw-overlay-horizontal{opacity:1;display:inline-block;vertical-align:top}.jw-overlay:before{position:absolute;top:0;bottom:0;left:-50%;width:100%;background-color:rgba(0,0,0,0);content:" "}.jw-slider-time .jw-overlay:before{height:1em;top:auto}.jw-time-tip,.jw-volume-tip,.jw-menu{position:relative;left:-50%;border:solid 1px #000;margin:0}.jw-volume-tip{width:100%;height:100%;display:block}.jw-time-tip{text-align:center;font-family:inherit;color:#aaa;bottom:1em;border:solid 4px #000}.jw-time-tip .jw-text{line-height:1em}.jw-controlbar .jw-overlay{margin:0;position:absolute;bottom:2em;left:50%;opacity:0;visibility:hidden}.jw-controlbar .jw-overlay .jw-contents{position:relative}.jw-controlbar .jw-option{position:relative;white-space:nowrap;cursor:pointer;list-style:none;height:1.5em;font-family:inherit;line-height:1.5em;color:#aaa;padding:0 .5em;font-size:.8em}.jw-controlbar .jw-option:hover,.jw-controlbar .jw-option:before:hover{color:#eee}.jw-controlbar .jw-option:before{padding-right:.125em}.jw-playlist-container ::-webkit-scrollbar-track{background-color:#333;border-radius:10px}.jw-playlist-container ::-webkit-scrollbar{width:5px;border:10px solid black;border-bottom:0;border-top:0}.jw-playlist-container ::-webkit-scrollbar-thumb{background-color:white;border-radius:5px}.jw-tooltip-title{border-bottom:1px solid #444;text-align:left;padding-left:.7em}.jw-playlist{max-height:11em;min-height:4.5em;overflow-x:hidden;overflow-y:scroll;width:calc(100% - 4px)}.jw-playlist .jw-option{height:3em;margin-right:5px;color:white;padding-left:1em;font-size:.8em}.jw-playlist .jw-label,.jw-playlist .jw-name{display:inline-block;line-height:3em;text-align:left;overflow:hidden;white-space:nowrap}.jw-playlist .jw-label{width:1em}.jw-playlist .jw-name{width:11em}.jw-skip{cursor:default;position:absolute;float:right;display:inline-block;right:.75em;bottom:3em}.jw-skip.jw-skippable{cursor:pointer}.jw-skip.jw-hidden{visibility:hidden}.jw-skip .jw-skip-icon{display:none;margin-left:-0.75em}.jw-skip .jw-skip-icon:before{content:"\\E60C"}.jw-skip .jw-text,.jw-skip .jw-skip-icon{color:#aaa;vertical-align:middle;line-height:1.5em;font-size:.7em}.jw-skip.jw-skippable:hover{cursor:pointer}.jw-skip.jw-skippable:hover .jw-text,.jw-skip.jw-skippable:hover .jw-skip-icon{color:#eee}.jw-skip.jw-skippable .jw-skip-icon{display:inline;margin:0}.jwplayer.jw-state-playing.jw-flag-casting .jw-display-icon-container,.jwplayer.jw-state-paused.jw-flag-casting .jw-display-icon-container{display:table}.jwplayer.jw-flag-casting .jw-display-icon-container{border-radius:0;border:1px solid white;position:absolute;top:auto;left:.5em;right:.5em;bottom:50%;margin-bottom:-12.5%;height:50%;width:50%;padding:0;background-repeat:no-repeat;background-position:center}.jwplayer.jw-flag-casting .jw-display-icon-container .jw-icon{font-size:3em}.jwplayer.jw-flag-casting.jw-state-complete .jw-preview{display:none}.jw-cast{position:absolute;width:100%;height:100%;background-repeat:no-repeat;background-size:auto;background-position:50% 50%}.jw-cast-label{position:absolute;left:.5em;right:.5em;bottom:75%;margin-bottom:1.5em;text-align:center}.jw-cast-name{color:#ccc}.jw-state-idle .jw-preview{display:block}.jw-state-idle .jw-icon-display:before{content:"\\E60E"}.jw-state-idle .jw-controlbar{display:none}.jw-state-idle .jw-captions{display:none}.jw-state-idle .jw-title{display:block}.jwplayer.jw-state-playing .jw-display-icon-container{display:none}.jwplayer.jw-state-playing .jw-display-icon-container .jw-icon-display:before{content:"\\E60D"}.jwplayer.jw-state-playing .jw-icon-playback:before{content:"\\E60D"}.jwplayer.jw-state-paused .jw-display-icon-container{display:none}.jwplayer.jw-state-paused .jw-display-icon-container .jw-icon-display:before{content:"\\E60E"}.jwplayer.jw-state-paused .jw-icon-playback:before{content:"\\E60E"}.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}.jwplayer.jw-state-buffering .jw-display-icon-container .jw-icon-display:before{content:"\\E601"}@-webkit-keyframes spin{100%{-webkit-transform:rotate(360deg)}}@keyframes spin{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.jwplayer.jw-state-buffering .jw-display-icon-container .jw-text{display:none}.jwplayer.jw-state-buffering .jw-icon-playback:before{content:"\\E60D"}.jwplayer.jw-state-complete .jw-preview{display:block}.jwplayer.jw-state-complete .jw-display-icon-container .jw-icon-display:before{content:"\\E610"}.jwplayer.jw-state-complete .jw-display-icon-container .jw-text{display:none}.jwplayer.jw-state-complete .jw-icon-playback:before{content:"\\E60E"}.jwplayer.jw-state-complete .jw-captions{display:none}body .jw-error .jw-title,.jwplayer.jw-state-error .jw-title{display:block}body .jw-error .jw-title .jw-title-primary,.jwplayer.jw-state-error .jw-title .jw-title-primary{white-space:normal}body .jw-error .jw-preview,.jwplayer.jw-state-error .jw-preview{display:block}body .jw-error .jw-controlbar,.jwplayer.jw-state-error .jw-controlbar{display:none}body .jw-error .jw-captions,.jwplayer.jw-state-error .jw-captions{display:none}body .jw-error:hover .jw-display-icon-container,.jwplayer.jw-state-error:hover .jw-display-icon-container{cursor:default;color:#fff;background:#000}body .jw-error .jw-icon-display,.jwplayer.jw-state-error .jw-icon-display{cursor:default;font-family:\'jw-icons\';-webkit-font-smoothing:antialiased;font-style:normal;font-weight:normal;text-transform:none;background-color:transparent;font-variant:normal;-webkit-font-feature-settings:"liga";-ms-font-feature-settings:"liga" 1;-o-font-feature-settings:"liga";font-feature-settings:"liga";-moz-osx-font-smoothing:grayscale}body .jw-error .jw-icon-display:before,.jwplayer.jw-state-error .jw-icon-display:before{content:"\\E607"}body .jw-error .jw-icon-display:hover,.jwplayer.jw-state-error .jw-icon-display:hover{color:#fff}body .jw-error{font-size:16px;background-color:#000;color:#eee;width:100%;height:100%;display:table;opacity:1;position:relative}body .jw-error .jw-icon-container{position:absolute;width:100%;height:100%;top:0;left:0;bottom:0;right:0}.jwplayer.jw-flag-cast-available .jw-controlbar{display:table}.jwplayer.jw-flag-cast-available .jw-icon-cast{display:inline-block}.jwplayer.jw-flag-skin-loading .jw-captions,.jwplayer.jw-flag-skin-loading .jw-controls,.jwplayer.jw-flag-skin-loading .jw-title{display:none}.jwplayer.jw-flag-fullscreen{width:100% !important;height:100% !important;top:0;right:0;bottom:0;left:0;z-index:1000;margin:0;position:fixed}.jwplayer.jw-flag-fullscreen.jw-flag-user-inactive{cursor:none;-webkit-cursor-visibility:auto-hide}.jwplayer.jw-flag-live .jw-controlbar .jw-text-elapsed,.jwplayer.jw-flag-live .jw-controlbar .jw-text-duration,.jwplayer.jw-flag-live .jw-controlbar .jw-slider-time{display:none}.jwplayer.jw-flag-live .jw-controlbar .jw-text-alt{display:inline}.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-controlbar,.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-dock{display:none}.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-logo.jw-hide{display:none}.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-plugin,.jwplayer.jw-flag-user-inactive.jw-state-playing .jw-captions{bottom:.5em}.jwplayer.jw-flag-user-inactive.jw-state-buffering .jw-controlbar{display:none}.jwplayer.jw-flag-media-audio .jw-controlbar{display:table}.jwplayer.jw-flag-media-audio.jw-flag-user-inactive .jw-controlbar{display:table}.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-plugin,.jwplayer.jw-flag-media-audio.jw-flag-user-inactive.jw-state-playing .jw-captions{bottom:3em}.jw-flag-media-audio .jw-preview{display:block}.jwplayer.jw-flag-ads .jw-preview,.jwplayer.jw-flag-ads .jw-dock{display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip,.jwplayer.jw-flag-ads .jw-controlbar .jw-text,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-horizontal{display:none}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-playback,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-volume,.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-fullscreen{display:inline-block}.jwplayer.jw-flag-ads .jw-controlbar .jw-text-alt{display:inline}.jwplayer.jw-flag-ads .jw-controlbar .jw-slider-volume.jw-slider-horizontal,.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-inline.jw-icon-volume{display:inline-block}.jwplayer.jw-flag-ads .jw-controlbar .jw-icon-tooltip.jw-icon-volume{display:none}.jwplayer.jw-flag-ads .jw-logo,.jwplayer.jw-flag-ads .jw-captions{display:none}.jwplayer.jw-flag-ads-googleima .jw-controlbar{display:table;bottom:0}.jwplayer.jw-flag-ads-googleima.jw-flag-touch .jw-controlbar{font-size:1em}.jwplayer.jw-flag-ads-googleima.jw-flag-touch.jw-state-paused .jw-display-icon-container{display:none}.jwplayer.jw-flag-ads-googleima.jw-skin-seven .jw-controlbar{font-size:.9em}.jwplayer.jw-flag-ads-vpaid .jw-controlbar{display:none}.jwplayer.jw-flag-ads-hide-controls .jw-controls{display:none !important}.jwplayer.jw-flag-ads.jw-flag-touch .jw-controlbar{display:table}.jwplayer.jw-flag-overlay-open .jw-title{display:none}.jwplayer.jw-flag-overlay-open .jw-controls-right .jw-logo{display:none}.jwplayer.jw-flag-overlay-open-sharing .jw-controls,.jwplayer.jw-flag-overlay-open-related .jw-controls,.jwplayer.jw-flag-overlay-open-sharing .jw-title,.jwplayer.jw-flag-overlay-open-related .jw-title{display:none}.jwplayer.jw-flag-rightclick-open{overflow:visible}.jwplayer.jw-flag-rightclick-open .jw-rightclick{z-index:16777215}.jw-flag-controls-disabled .jw-controls{visibility:hidden}.jw-flag-controls-disabled .jw-logo{visibility:visible}.jw-flag-controls-disabled .jw-media{cursor:auto}body .jwplayer.jw-flag-flash-blocked .jw-title{display:block}body .jwplayer.jw-flag-flash-blocked .jw-controls,body .jwplayer.jw-flag-flash-blocked .jw-overlays,body .jwplayer.jw-flag-flash-blocked .jw-preview{display:none}.jw-flag-touch .jw-controlbar,.jw-flag-touch .jw-skip,.jw-flag-touch .jw-plugin{font-size:1.5em}.jw-flag-touch .jw-captions{bottom:4.25em}.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before{display:inline}.jw-flag-touch .jw-icon-tooltip.jw-open-drawer:before{content:"\\E615"}.jw-flag-touch .jw-display-icon-container{pointer-events:none}.jw-flag-touch.jw-state-paused .jw-display-icon-container{display:table}.jw-flag-touch.jw-state-paused.jw-flag-dragging .jw-display-icon-container{display:none}.jw-flag-compact-player .jw-icon-playlist,.jw-flag-compact-player .jw-text-elapsed,.jw-flag-compact-player .jw-text-duration{display:none}.jwplayer.jw-flag-audio-player{background-color:transparent}.jwplayer.jw-flag-audio-player .jw-media{visibility:hidden}.jwplayer.jw-flag-audio-player .jw-media object{width:1px;height:1px}.jwplayer.jw-flag-audio-player .jw-preview,.jwplayer.jw-flag-audio-player .jw-display-icon-container{display:none}.jwplayer.jw-flag-audio-player .jw-controlbar{display:table;height:auto;left:0;bottom:0;margin:0;width:100%;min-width:100%;opacity:1}.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-fullscreen,.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip{display:none}.jwplayer.jw-flag-audio-player .jw-controlbar .jw-slider-volume.jw-slider-horizontal,.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-inline.jw-icon-volume{display:inline-block}.jwplayer.jw-flag-audio-player .jw-controlbar .jw-icon-tooltip.jw-icon-volume{display:none}.jwplayer.jw-flag-audio-player.jw-flag-user-inactive .jw-controlbar{display:table}.jw-skin-seven .jw-background-color{background:#000}.jw-skin-seven .jw-controlbar{border-top:#333 1px solid;height:2.5em}.jw-skin-seven .jw-group{vertical-align:middle}.jw-skin-seven .jw-playlist{background-color:rgba(0,0,0,0.5)}.jw-skin-seven .jw-playlist-container{left:-43%;background-color:rgba(0,0,0,0.5)}.jw-skin-seven .jw-playlist-container .jw-option{border-bottom:1px solid #444}.jw-skin-seven .jw-playlist-container .jw-option:hover,.jw-skin-seven .jw-playlist-container .jw-option.jw-active-option{background-color:black}.jw-skin-seven .jw-playlist-container .jw-option:hover .jw-label{color:#FF0046}.jw-skin-seven .jw-playlist-container .jw-icon-playlist{margin-left:0}.jw-skin-seven .jw-playlist-container .jw-label .jw-icon-play{color:#FF0046}.jw-skin-seven .jw-playlist-container .jw-label .jw-icon-play:before{padding-left:0}.jw-skin-seven .jw-tooltip-title{background-color:#000;color:#fff}.jw-skin-seven .jw-text{color:#fff}.jw-skin-seven .jw-button-color{color:#fff}.jw-skin-seven .jw-button-color:hover{color:#FF0046}.jw-skin-seven .jw-toggle{color:#FF0046}.jw-skin-seven .jw-toggle.jw-off{color:#fff}.jw-skin-seven .jw-controlbar .jw-icon:before,.jw-skin-seven .jw-text-elapsed,.jw-skin-seven .jw-text-duration{padding:0 .7em}.jw-skin-seven .jw-controlbar .jw-icon-prev:before{padding-right:.25em}.jw-skin-seven .jw-controlbar .jw-icon-playlist:before{padding:0 .45em}.jw-skin-seven .jw-controlbar .jw-icon-next:before{padding-left:.25em}.jw-skin-seven .jw-icon-prev,.jw-skin-seven .jw-icon-next{font-size:.7em}.jw-skin-seven .jw-icon-prev:before{border-left:1px solid #666}.jw-skin-seven .jw-icon-next:before{border-right:1px solid #666}.jw-skin-seven .jw-icon-display{color:#fff}.jw-skin-seven .jw-icon-display:before{padding-left:0}.jw-skin-seven .jw-display-icon-container{border-radius:50%;border:1px solid #333}.jw-skin-seven .jw-rail{background-color:#384154;box-shadow:none}.jw-skin-seven .jw-buffer{background-color:#666F82}.jw-skin-seven .jw-progress{background:#FF0046}.jw-skin-seven .jw-knob{width:.6em;height:.6em;background-color:#fff;box-shadow:0 0 0 1px #000;border-radius:1em}.jw-skin-seven .jw-slider-horizontal .jw-slider-container{height:.95em}.jw-skin-seven .jw-slider-horizontal .jw-rail,.jw-skin-seven .jw-slider-horizontal .jw-buffer,.jw-skin-seven .jw-slider-horizontal .jw-progress{height:.2em;border-radius:0}.jw-skin-seven .jw-slider-horizontal .jw-knob{top:-0.2em}.jw-skin-seven .jw-slider-horizontal .jw-cue{top:-0.05em;width:.3em;height:.3em;background-color:#fff;border-radius:50%}.jw-skin-seven .jw-slider-vertical .jw-rail,.jw-skin-seven .jw-slider-vertical .jw-buffer,.jw-skin-seven .jw-slider-vertical .jw-progress{width:.2em}.jw-skin-seven .jw-slider-vertical .jw-knob{margin-bottom:-0.3em}.jw-skin-seven .jw-volume-tip{width:100%;left:-45%;padding-bottom:.7em}.jw-skin-seven .jw-text-duration{color:#666F82}.jw-skin-seven .jw-controlbar-right-group .jw-icon-tooltip:before,.jw-skin-seven .jw-controlbar-right-group .jw-icon-inline:before{border-left:1px solid #666}.jw-skin-seven .jw-controlbar-right-group .jw-icon-inline:first-child:before{border:none}.jw-skin-seven .jw-dock .jw-dock-button{border-radius:50%;border:1px solid #333}.jw-skin-seven .jw-dock .jw-overlay{border-radius:2.5em}.jw-skin-seven .jw-icon-tooltip .jw-active-option{background-color:#FF0046;color:#fff}.jw-skin-seven .jw-icon-volume{min-width:2.6em}.jw-skin-seven .jw-time-tip,.jw-skin-seven .jw-menu,.jw-skin-seven .jw-volume-tip,.jw-skin-seven .jw-skip{border:1px solid #333}.jw-skin-seven .jw-time-tip{padding:.2em;bottom:1.3em}.jw-skin-seven .jw-menu,.jw-skin-seven .jw-volume-tip{bottom:.24em}.jw-skin-seven .jw-skip{padding:.4em;border-radius:1.75em}.jw-skin-seven .jw-skip .jw-text,.jw-skin-seven .jw-skip .jw-icon-inline{color:#fff;line-height:1.75em}.jw-skin-seven .jw-skip.jw-skippable:hover .jw-text,.jw-skin-seven .jw-skip.jw-skippable:hover .jw-icon-inline{color:#FF0046}.jw-skin-seven.jw-flag-touch .jw-controlbar .jw-icon:before,.jw-skin-seven.jw-flag-touch .jw-text-elapsed,.jw-skin-seven.jw-flag-touch .jw-text-duration{padding:0 .35em}.jw-skin-seven.jw-flag-touch .jw-controlbar .jw-icon-prev:before{padding:0 .125em 0 .7em}.jw-skin-seven.jw-flag-touch .jw-controlbar .jw-icon-next:before{padding:0 .7em 0 .125em}.jw-skin-seven.jw-flag-touch .jw-controlbar .jw-icon-playlist:before{padding:0 .225em}',""])
},function(e){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];e.push(n[2]?"@media "+n[2]+"{"+n[1]+"}":n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e){e.exports="data:application/font-woff;base64,d09GRgABAAAAABQ4AAsAAAAAE+wAAQABAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxID2WNtYXAAAAFoAAAAVAAAAFQaVsydZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAD3AAAA9wKJaoQ2hlYWQAABE0AAAANgAAADYIhqKNaGhlYQAAEWwAAAAkAAAAJAmCBdxobXR4AAARkAAAAGwAAABscmAHPWxvY2EAABH8AAAAOAAAADg2EDnwbWF4cAAAEjQAAAAgAAAAIAAiANFuYW1lAAASVAAAAcIAAAHCwZOZtHBvc3QAABQYAAAAIAAAACAAAwAAAAMEmQGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA5hYDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOYW//3//wAAAAAAIOYA//3//wAB/+MaBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAABABgAAAFoAOAADoAPwBEAEkAACUVIi4CNTQ2Ny4BNTQ+AjMyHgIVFAYHHgEVFA4CIxEyFhc+ATU0LgIjIg4CFRQWFz4BMxExARUhNSEXFSE1IRcVITUhAUAuUj0jCgoKCkZ6o11do3pGCgoKCiM9Ui4qSh4BAjpmiE1NiGY6AQIeSioCVQIL/fWWAXX+i0oBK/7VHh4jPVIuGS4VH0MiXaN6RkZ6o10iQx8VLhkuUj0jAcAdGQ0bDk2IZjo6ZohNDhsNGR3+XgNilZXglZXglZUAAAABAEAAAAPAA4AAIQAAExQeAjMyPgI1MxQOAiMiLgI1ND4CMxUiDgIVMYs6ZohNTYhmOktGeqNdXaN6RkZ6o11NiGY6AcBNiGY6OmaITV2jekZGeqNdXaN6Rks6ZohNAAAEAEAAAATAA4AADgAcACoAMQAAJS4BJyERIREuAScRIREhByMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAn8DBQQCDPxGCysLBDz9v1NaCERrjE9irINTCLVbByc6Sio9a1I1CLaBL0YMQgsoCgLB/ukDCgIBSPzCQk6HaEIIWAhQgKdgKUg5JgdYBzRRZzx9C0QuAAAAAAUAQAAABMADgAAOABkAJwA1ADwAACUuASchESERLgEnESERIQE1IREhLgMnMQEjLgMnNR4DFzErAS4DJzUeAxcxKwE1HgEXMQKAAgYFAg38QAwqCgRA/cD+gANA/iAYRVlsPgEtWghFa4xPYq2DUgmzWgcnO0oqPGpSNgm6gDBEDEAMKAwCwP7tAggDAUb8wAHQ8P3APWdUQRf98E2IaEIHWghQgKhgKUg4JgdaCDVRZzt9DEMuAAAEAEAAAAXAA4AABAAJAGcAxQAANxEhESEBIREhEQU+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzEhPgE3PgEzMhYXHgEXHgEXHgEXIy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNzMOAQcOAQcOAQcOASMiJicuAScuAScuATU0Njc+ATcxQAWA+oAFNvsUBOz8Iw4hExQsGBIhEA8cDQwUCAgLAlsBBQUECgYHDggIEAkQGgsLEgcHCgMDAwMDAwoHBxILCxoQFiEMDA8DWgIJBwgTDQwcERAkFBgsFBMhDg0VBwcHBwcHFQ0Bug0hFBMsGREhEBAcDAwVCAgKAloCBQQECwYGDggIEQgQGwsLEgcHCgMDAwMDAwoHBxILCxsQFSIMDA4DWwIJCAcUDAwdEBEkExksExQhDQ4UBwcICAcHFA4AA4D8gAM1/RYC6tcQGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPEBgICQkFBQUPCgoYDw4hEwkOBwcMBQUIAwMCBgYGEQoKGA0NHA4NGg0NFwoKEQYGBg0NDiIWFCQREBwLCxIGBgYJCAkXDw8kFBQsFxgtFRQkDwAAAAADAEAAAAXAA4AAEABvAM4AACUhIiY1ETQ2MyEyFhURFAYjAT4BNz4BNz4BMzIWFx4BFx4BFx4BFzMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATc+ATc+ATcjDgEHDgEjIiYnLgEnLgEnLgE1NDY3OQEhPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5AQUs+6g9V1c9BFg9V1c9/JoDCgcGEgsLGxAJEAgIDgYHCgQEBgFaAgoICBQNDBwQDyESGCwUEyEODRUHBwcHBwcVDQ4hExQrGRQkEBAdDAwUCAcJAloDDwwMIhUQGwsLEgYHCgMEAwMEAbkDCgcHEgsLGxAIEQgHDwYGCwQEBQFbAgoICBUMDBwQECERGSwTFCENDhQHBwgIBwcUDg0hFBMsGRMkERAdDAwUBwgJAlsDDgwNIRUQGwsLEgcHCgMDAwMDAFc+AlY+V1c+/ao+VwH0DRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQ0YCgsQBgYGAgMDCAUFDAcHDgkTIQ4PGAoKDgYFBQkJCBgQDyQUFS0YFywUFCQPDxcJCAkGBgYSCwscEBEkFBYiDg0NBgYGEQoKFw0NGg4OGw0AAAABAOAAoAMgAuAAFAAAARQOAiMiLgI1ND4CMzIeAhUDIC1OaTw8aU4tLU5pPDxpTi0BwDxpTi0tTmk8PGlOLS1OaTwAAAMAQAAQBEADkAADABAAHwAANwkBISUyNjU0JiMiBhUUFjMTNCYjIgYVERQWMzI2NRFAAgACAPwAAgAOFRUODhUVDiMVDg4VFQ4OFRADgPyAcBYQDxgWERAWAeYPGBYR/tcPGBYRASkAAgBAAAADwAOAAAcADwAANxEXNxcHFyEBIREnByc3J0CAsI2wgP5zAfMBjYCwjbCAAAGNgLCNsIADgP5zgLCNsIAAAAAFAEAAAAXAA4AABAAJABYAMwBPAAA3ESERIQEhESERATM1MxEjNSMVIxEzFSUeARceARceARUUBgcOAQcOAQcOASsBETMeARcxBxEzMjY3PgE3PgE3PgE1NCYnLgEnLgEnLgErAUAFgPqABTb7FATs/FS2YGC2ZGQCXBQeDg8UBwcJBgcHEwwMIRMTLBuwsBYqE6BHCRcJChIIBw0FBQUEAwINBwcTDAwgETcAA4D8gAM2/RcC6f7Arf5AwMABwK2dBxQODyIWFTAbGC4TFiIPDhgKCQcBwAIHB0P+5gQDAg0HBxcMDCETER0PDhgKCQ8EBQUABAA9AAAFwAOAABAAHQA7AFkAACUhIiY1ETQ2MyEyFhURFAYjASMVIzUjETM1MxUzEQUuAScuAScuASsBETMyNjc+ATc+ATc+ATUuASc5AQcOAQcOASsBETMyFhceARceARceARUUBgcOAQc5AQUq+6k+WFg+BFc+WFg+/bNgs2Rks2ABsAcXDA4fExMnFrCwGywTEx4PDBMHBwYCCAl3CBIKCRQMRzcTHgwMEwcHCwQDBAUFBQ0HAFg+AlQ+WFg+/aw+WAKdra3+QMDAAcB9FiIODxQHBwb+QAkHCRgPDiUTFiwYHTAW4ggNAgMEAR8EBQUPCgoYDw4fERMfDwwXBwAAAAABAEMABgOgA3oAjwAAExQiNScwJic0JicuAQcOARUcARUeARceATc+ATc+ATE2MhUwFAcUFhceARceATMyNjc+ATc+ATc+AzE2MhUwDgIVFBYXHgEXFjY3PgE3PgE3PgE3PgM3PAE1NCYnJgYHDgMxBiI1MDwCNTQmJyYGBw4BBw4DMQYiNTAmJy4BJyYGBw4BMRWQBgQIBAgCBQ4KBwkDFgcHIQ8QDwcHNgUEAwMHBQsJChcMBQ0FBwsHDBMICR8cFQUFAwQDCAUHFRERJBEMEwgJEgUOGQwGMjgvBAkHDBYEAz1IPAQFLyQRIhEQFgoGIiUcBQUEAgMYKCcmCgcsAboFBQwYDwUKBwUEAgMNBwcLBxRrDhENBwggDxOTCgqdMBM1EQwTCAcFBAIFCgcPIw4UQ0IxCgpTc3glEyMREBgIBwEKBxUKESUQJ00mE6/JrA8FBgIHDQMECAkGla2PCQk1VGYxNTsHAgUKChwQC2BqVQoKehYfTwUDRx8TkAMAAAAAAgBGAAAENgOAAAQACAAAJREzESMJAhEDxnBw/IADgPyAAAOA/IADgP5A/kADgAAAAgCAAAADgAOAAAQACQAAJREhESEBIREhEQKAAQD/AP4AAQD/AAADgPyAA4D8gAOAAAAAAAEAgAAABAADgAADAAAJAREBBAD8gAOAAcD+QAOA/kAAAgBKAAAEOgOAAAQACAAANxEjETMJAhG6cHADgPyAA4AAA4D8gAOA/kD+QAOAAAAAAQBDACADQwOgACkAAAEeARUUDgIjIi4CNTQ+AjM1DQE1Ig4CFRQeAjMyPgI1NCYnNwMNGhw8aYxPT4xoPT1ojE8BQP7APGlOLS1OaTw8aU4tFhNTAmMrYzVPjGg9PWiMT0+MaD2ArbOALU5pPDxpTi0tTmk8KUsfMAAAAAEAQABmAiADEwAGAAATETMlESUjQM0BE/7tzQEzARPN/VPNAAQAQAAABJADgAAXACsAOgBBAAAlJz4DNTQuAic3HgMVFA4CBzEvAT4BNTQmJzceAxUOAwcxJz4BNTQmJzceARUUBgcnBREzJRElIwPaKiY+KxcXKz4mKipDMBkZMEMqpCk5REQ5KSE0JBQBFCQzIcMiKCgiKiYwMCYq/c3NARP+7c0AIyheaXI8PHFpXikjK2ZyfEFBfHJmK4MjNZFUVJE1Ix5IUFgvL1lRRx2zFkgpK0YVIxxcNDVZHykDARPN/VPNAAACAEAAAAPDA4AABwAPAAABFyERFzcXBwEHJzcnIREnAypw/qlwl3mZ/iaWepZwAVdtAnNwAVdwlnqT/iOWepZw/qpsAAMAQAETBcACYAAMABkAJgAAARQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUhFAYjIiY1NDYzMhYVAY1iRUVhYUVFYgIWYUVFYmJFRWECHWFFRWJiRUVhAbpFYmJFRWFhRUViYkVFYWFFRWJiRUVhYUUAAAAAAQBmACYDmgNaACAAAAEXFhQHBiIvAQcGIicmND8BJyY0NzYyHwE3NjIXFhQPAQKj9yQkJGMd9vYkYx0kJPf3JCQkYx329iRjHSQk9wHA9iRjHSQk9/ckJCRjHfb2JGMdJCT39yQkJGMd9gAABgBEAAQDvAN8AAQACQAOABMAGAAdAAABIRUhNREhFSE1ESEVITUBMxUjNREzFSM1ETMVIzUBpwIV/esCFf3rAhX96/6dsrKysrKyA3xZWf6dWVn+nVlZAsaysv6dsrL+nbKyAAEAAAABGZqh06s/Xw889QALBAAAAAAA0dQiKwAAAADR1CIrAAAAAAXAA6AAAAAIAAIAAAAAAAAAAQAAA8D/wAAABgAAAAAABcAAAQAAAAAAAAAAAAAAAAAAABsEAAAAAAAAAAAAAAACAAAABgAAYAQAAEAFAABABQAAQAYAAEAGAABABAAA4ASAAEAEAABABgAAQAYAAD0D4ABDBIAARgQAAIAEAACABIAASgOAAEMEwABABMAAQAQAAEAGAABABAAAZgQAAEQAAAAAAAoAFAAeAIgAuAEEAWAChgOyA9QECAQqBKQFJgXoBgAGGgYqBkIGgAaSBvQHFgdQB4YHuAABAAAAGwDPAAYAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEADAAAAAEAAAAAAAIABwCNAAEAAAAAAAMADABFAAEAAAAAAAQADACiAAEAAAAAAAUACwAkAAEAAAAAAAYADABpAAEAAAAAAAoAGgDGAAMAAQQJAAEAGAAMAAMAAQQJAAIADgCUAAMAAQQJAAMAGABRAAMAAQQJAAQAGACuAAMAAQQJAAUAFgAvAAMAAQQJAAYAGAB1AAMAAQQJAAoANADganctc2l4LWljb25zAGoAdwAtAHMAaQB4AC0AaQBjAG8AbgBzVmVyc2lvbiAxLjEAVgBlAHIAcwBpAG8AbgAgADEALgAxanctc2l4LWljb25zAGoAdwAtAHMAaQB4AC0AaQBjAG8AbgBzanctc2l4LWljb25zAGoAdwAtAHMAaQB4AC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQByanctc2l4LWljb25zAGoAdwAtAHMAaQB4AC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="},function(e){e.exports="data:application/octet-stream;base64,AAEAAAALAIAAAwAwT1MvMg8SA9kAAAC8AAAAYGNtYXAaVsydAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZiiWqEMAAAF4AAAPcGhlYWQIhqKNAAAQ6AAAADZoaGVhCYIF3AAAESAAAAAkaG10eHJgBz0AABFEAAAAbGxvY2E2EDnwAAARsAAAADhtYXhwACIA0QAAEegAAAAgbmFtZcGTmbQAABIIAAABwnBvc3QAAwAAAAATzAAAACAAAwSZAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADmFgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg5hb//f//AAAAAAAg5gD//f//AAH/4xoEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAAEAGAAAAWgA4AAOgA/AEQASQAAJRUiLgI1NDY3LgE1ND4CMzIeAhUUBgceARUUDgIjETIWFz4BNTQuAiMiDgIVFBYXPgEzETEBFSE1IRcVITUhFxUhNSEBQC5SPSMKCgoKRnqjXV2jekYKCgoKIz1SLipKHgECOmaITU2IZjoBAh5KKgJVAgv99ZYBdf6LSgEr/tUeHiM9Ui4ZLhUfQyJdo3pGRnqjXSJDHxUuGS5SPSMBwB0ZDRsOTYhmOjpmiE0OGw0ZHf5eA2KVleCVleCVlQAAAAEAQAAAA8ADgAAhAAATFB4CMzI+AjUzFA4CIyIuAjU0PgIzFSIOAhUxizpmiE1NiGY6S0Z6o11do3pGRnqjXU2IZjoBwE2IZjo6ZohNXaN6RkZ6o11do3pGSzpmiE0AAAQAQAAABMADgAAOABwAKgAxAAAlLgEnIREhES4BJxEhESEHIy4DJzUeAxcxKwEuAyc1HgMXMSsBNR4BFzECfwMFBAIM/EYLKwsEPP2/U1oIRGuMT2Ksg1MItVsHJzpKKj1rUjUItoEvRgxCCygKAsH+6QMKAgFI/MJCTodoQghYCFCAp2ApSDkmB1gHNFFnPH0LRC4AAAAABQBAAAAEwAOAAA4AGQAnADUAPAAAJS4BJyERIREuAScRIREhATUhESEuAycxASMuAyc1HgMXMSsBLgMnNR4DFzErATUeARcxAoACBgUCDfxADCoKBED9wP6AA0D+IBhFWWw+AS1aCEVrjE9irYNSCbNaByc7Sio8alI2CbqAMEQMQAwoDALA/u0CCAMBRvzAAdDw/cA9Z1RBF/3wTYhoQgdaCFCAqGApSDgmB1oINVFnO30MQy4AAAQAQAAABcADgAAEAAkAZwDFAAA3ESERIQEhESERBT4BNz4BMzIWFx4BFx4BFx4BFyMuAScuAScuAScuASMiBgcOAQcOAQcOARUUFhceARceARceATMyNjc+ATczDgEHDgEHDgEHDgEjIiYnLgEnLgEnLgE1NDY3PgE3MSE+ATc+ATMyFhceARceARceARcjLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3Mw4BBw4BBw4BBw4BIyImJy4BJy4BJy4BNTQ2Nz4BNzFABYD6gAU2+xQE7PwjDiETFCwYEiEQDxwNDBQICAsCWwEFBQQKBgcOCAgQCRAaCwsSBwcKAwMDAwMDCgcHEgsLGhAWIQwMDwNaAgkHCBMNDBwRECQUGCwUEyEODRUHBwcHBwcVDQG6DSEUEywZESEQEBwMDBUICAoCWgIFBAQLBgYOCAgRCBAbCwsSBwcKAwMDAwMDCgcHEgsLGxAVIgwMDgNbAgkIBxQMDB0QESQTGSwTFCENDhQHBwgIBwcUDgADgPyAAzX9FgLq1xAYCAkJBQUFDwoKGA8OIRMJDgcHDAUFCAMDAgYGBhEKChgNDRwODRoNDRcKChEGBgYNDQ4iFhQkERAcCwsSBgYGCQgJFw8PJBQULBcYLRUUJA8QGAgJCQUFBQ8KChgPDiETCQ4HBwwFBQgDAwIGBgYRCgoYDQ0cDg0aDQ0XCgoRBgYGDQ0OIhYUJBEQHAsLEgYGBgkICRcPDyQUFCwXGC0VFCQPAAAAAAMAQAAABcADgAAQAG8AzgAAJSEiJjURNDYzITIWFREUBiMBPgE3PgE3PgEzMhYXHgEXHgEXHgEXMy4BJy4BJy4BJy4BIyIGBw4BBw4BBw4BFRQWFx4BFx4BFx4BMzI2Nz4BNz4BNz4BNyMOAQcOASMiJicuAScuAScuATU0Njc5ASE+ATc+ATc+ATMyFhceARceARceARczLgEnLgEnLgEnLgEjIgYHDgEHDgEHDgEVFBYXHgEXHgEXHgEzMjY3PgE3PgE3PgE3Iw4BBw4BIyImJy4BJy4BJy4BNTQ2NzkBBSz7qD1XVz0EWD1XVz38mgMKBwYSCwsbEAkQCAgOBgcKBAQGAVoCCggIFA0MHBAPIRIYLBQTIQ4NFQcHBwcHBxUNDiETFCsZFCQQEB0MDBQIBwkCWgMPDAwiFRAbCwsSBgcKAwQDAwQBuQMKBwcSCwsbEAgRCAcPBgYLBAQFAVsCCggIFQwMHBAQIREZLBMUIQ0OFAcHCAgHBxQODSEUEywZEyQREB0MDBQHCAkCWwMODA0hFRAbCwsSBwcKAwMDAwMAVz4CVj5XVz79qj5XAfQNGAoLEAYGBgIDAwgFBQwHBw4JEyEODxgKCg4GBQUJCQgYEA8kFBUtGBcsFBQkDw8XCQgJBgYGEgsLHBARJBQWIg4NDQYGBhEKChcNDRoODhsNDRgKCxAGBgYCAwMIBQUMBwcOCRMhDg8YCgoOBgUFCQkIGBAPJBQVLRgXLBQUJA8PFwkICQYGBhILCxwQESQUFiIODQ0GBgYRCgoXDQ0aDg4bDQAAAAEA4ACgAyAC4AAUAAABFA4CIyIuAjU0PgIzMh4CFQMgLU5pPDxpTi0tTmk8PGlOLQHAPGlOLS1OaTw8aU4tLU5pPAAAAwBAABAEQAOQAAMAEAAfAAA3CQEhJTI2NTQmIyIGFRQWMxM0JiMiBhURFBYzMjY1EUACAAIA/AACAA4VFQ4OFRUOIxUODhUVDg4VEAOA/IBwFhAPGBYREBYB5g8YFhH+1w8YFhEBKQACAEAAAAPAA4AABwAPAAA3ERc3FwcXIQEhEScHJzcnQICwjbCA/nMB8wGNgLCNsIAAAY2AsI2wgAOA/nOAsI2wgAAAAAUAQAAABcADgAAEAAkAFgAzAE8AADcRIREhASERIREBMzUzESM1IxUjETMVJR4BFx4BFx4BFRQGBw4BBw4BBw4BKwERMx4BFzEHETMyNjc+ATc+ATc+ATU0JicuAScuAScuASsBQAWA+oAFNvsUBOz8VLZgYLZkZAJcFB4ODxQHBwkGBwcTDAwhExMsG7CwFioToEcJFwkKEggHDQUFBQQDAg0HBxMMDCARNwADgPyAAzb9FwLp/sCt/kDAwAHArZ0HFA4PIhYVMBsYLhMWIg8OGAoJBwHAAgcHQ/7mBAMCDQcHFwwMIRMRHQ8OGAoJDwQFBQAEAD0AAAXAA4AAEAAdADsAWQAAJSEiJjURNDYzITIWFREUBiMBIxUjNSMRMzUzFTMRBS4BJy4BJy4BKwERMzI2Nz4BNz4BNz4BNS4BJzkBBw4BBw4BKwERMzIWFx4BFx4BFx4BFRQGBw4BBzkBBSr7qT5YWD4EVz5YWD79s2CzZGSzYAGwBxcMDh8TEycWsLAbLBMTHg8MEwcHBgIICXcIEgoJFAxHNxMeDAwTBwcLBAMEBQUFDQcAWD4CVD5YWD79rD5YAp2trf5AwMABwH0WIg4PFAcHBv5ACQcJGA8OJRMWLBgdMBbiCA0CAwQBHwQFBQ8KChgPDh8REx8PDBcHAAAAAAEAQwAGA6ADegCPAAATFCI1JzAmJzQmJy4BBw4BFRwBFR4BFx4BNz4BNz4BMTYyFTAUBxQWFx4BFx4BMzI2Nz4BNz4BNz4DMTYyFTAOAhUUFhceARcWNjc+ATc+ATc+ATc+Azc8ATU0JicmBgcOAzEGIjUwPAI1NCYnJgYHDgEHDgMxBiI1MCYnLgEnJgYHDgExFZAGBAgECAIFDgoHCQMWBwchDxAPBwc2BQQDAwcFCwkKFwwFDQUHCwcMEwgJHxwVBQUDBAMIBQcVEREkEQwTCAkSBQ4ZDAYyOC8ECQcMFgQDPUg8BAUvJBEiERAWCgYiJRwFBQQCAxgoJyYKBywBugUFDBgPBQoHBQQCAw0HBwsHFGsOEQ0HCCAPE5MKCp0wEzURDBMIBwUEAgUKBw8jDhRDQjEKClNzeCUTIxEQGAgHAQoHFQoRJRAnTSYTr8msDwUGAgcNAwQICQaVrY8JCTVUZjE1OwcCBQoKHBALYGpVCgp6Fh9PBQNHHxOQAwAAAAACAEYAAAQ2A4AABAAIAAAlETMRIwkCEQPGcHD8gAOA/IAAA4D8gAOA/kD+QAOAAAACAIAAAAOAA4AABAAJAAAlESERIQEhESERAoABAP8A/gABAP8AAAOA/IADgPyAA4AAAAAAAQCAAAAEAAOAAAMAAAkBEQEEAPyAA4ABwP5AA4D+QAACAEoAAAQ6A4AABAAIAAA3ESMRMwkCEbpwcAOA/IADgAADgPyAA4D+QP5AA4AAAAABAEMAIANDA6AAKQAAAR4BFRQOAiMiLgI1ND4CMzUNATUiDgIVFB4CMzI+AjU0Jic3Aw0aHDxpjE9PjGg9PWiMTwFA/sA8aU4tLU5pPDxpTi0WE1MCYytjNU+MaD09aIxPT4xoPYCts4AtTmk8PGlOLS1OaTwpSx8wAAAAAQBAAGYCIAMTAAYAABMRMyURJSNAzQET/u3NATMBE839U80ABABAAAAEkAOAABcAKwA6AEEAACUnPgM1NC4CJzceAxUUDgIHMS8BPgE1NCYnNx4DFQ4DBzEnPgE1NCYnNx4BFRQGBycFETMlESUjA9oqJj4rFxcrPiYqKkMwGRkwQyqkKTlERDkpITQkFAEUJDMhwyIoKCIqJjAwJir9zc0BE/7tzQAjKF5pcjw8cWleKSMrZnJ8QUF8cmYrgyM1kVRUkTUjHkhQWC8vWVFHHbMWSCkrRhUjHFw0NVkfKQMBE839U80AAAIAQAAAA8MDgAAHAA8AAAEXIREXNxcHAQcnNychEScDKnD+qXCXeZn+JpZ6lnABV20Cc3ABV3CWepP+I5Z6lnD+qmwAAwBAARMFwAJgAAwAGQAmAAABFAYjIiY1NDYzMhYVIRQGIyImNTQ2MzIWFSEUBiMiJjU0NjMyFhUBjWJFRWFhRUViAhZhRUViYkVFYQIdYUVFYmJFRWEBukViYkVFYWFFRWJiRUVhYUVFYmJFRWFhRQAAAAABAGYAJgOaA1oAIAAAARcWFAcGIi8BBwYiJyY0PwEnJjQ3NjIfATc2MhcWFA8BAqP3JCQkYx329iRjHSQk9/ckJCRjHfb2JGMdJCT3AcD2JGMdJCT39yQkJGMd9vYkYx0kJPf3JCQkYx32AAAGAEQABAO8A3wABAAJAA4AEwAYAB0AAAEhFSE1ESEVITURIRUhNQEzFSM1ETMVIzURMxUjNQGnAhX96wIV/esCFf3r/p2ysrKysrIDfFlZ/p1ZWf6dWVkCxrKy/p2ysv6dsrIAAQAAAAEZmqHTqz9fDzz1AAsEAAAAAADR1CIrAAAAANHUIisAAAAABcADoAAAAAgAAgAAAAAAAAABAAADwP/AAAAGAAAAAAAFwAABAAAAAAAAAAAAAAAAAAAAGwQAAAAAAAAAAAAAAAIAAAAGAABgBAAAQAUAAEAFAABABgAAQAYAAEAEAADgBIAAQAQAAEAGAABABgAAPQPgAEMEgABGBAAAgAQAAIAEgABKA4AAQwTAAEAEwABABAAAQAYAAEAEAABmBAAARAAAAAAACgAUAB4AiAC4AQQBYAKGA7ID1AQIBCoEpAUmBegGAAYaBioGQgaABpIG9AcWB1AHhge4AAEAAAAbAM8ABgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAMAAAAAQAAAAAAAgAHAI0AAQAAAAAAAwAMAEUAAQAAAAAABAAMAKIAAQAAAAAABQALACQAAQAAAAAABgAMAGkAAQAAAAAACgAaAMYAAwABBAkAAQAYAAwAAwABBAkAAgAOAJQAAwABBAkAAwAYAFEAAwABBAkABAAYAK4AAwABBAkABQAWAC8AAwABBAkABgAYAHUAAwABBAkACgA0AOBqdy1zaXgtaWNvbnMAagB3AC0AcwBpAHgALQBpAGMAbwBuAHNWZXJzaW9uIDEuMQBWAGUAcgBzAGkAbwBuACAAMQAuADFqdy1zaXgtaWNvbnMAagB3AC0AcwBpAHgALQBpAGMAbwBuAHNqdy1zaXgtaWNvbnMAagB3AC0AcwBpAHgALQBpAGMAbwBuAHNSZWd1bGFyAFIAZQBnAHUAbABhAHJqdy1zaXgtaWNvbnMAagB3AC0AcwBpAHgALQBpAGMAbwBuAHNGb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"},function(e){function t(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=l[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(o(i.parts[a],t))}else{for(var s=[],a=0;a<i.parts.length;a++)s.push(o(i.parts[a],t));l[i.id]={id:i.id,refs:1,parts:s}}}}function n(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],o=r[0],a=r[1],s=r[2],c=r[3],l={css:a,media:s,sourceMap:c};n[o]?n[o].parts.push(l):t.push(n[o]={id:o,parts:[l]})}return t}function i(){var e=document.createElement("style"),t=p();return e.type="text/css",t.appendChild(e),e}function r(){var e=document.createElement("link"),t=p();return e.rel="stylesheet",t.appendChild(e),e}function o(e,t){var n,o,l;if(t.singleton){var u=h++;n=f||(f=i()),o=a.bind(null,n,u,!1),l=a.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=r(),o=c.bind(null,n),l=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(),o=s.bind(null,n),l=function(){n.parentNode.removeChild(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else l()}}function a(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function s(e,t){var n=t.css,i=t.media;if(t.sourceMap,i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function c(e,t){var n=t.css,i=(t.media,t.sourceMap);i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var l={},u=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},d=u(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),p=u(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,h=0;e.exports=function(e,i){i=i||{},"undefined"==typeof i.singleton&&(i.singleton=d());var r=n(e);return t(r,i),function(e){for(var o=[],a=0;a<r.length;a++){var s=r[a],c=l[s.id];c.refs--,o.push(c)}if(e){var u=n(e);t(u,i)}for(var a=0;a<o.length;a++){var c=o[a];if(0===c.refs){for(var d=0;d<c.parts.length;d++)c.parts[d]();delete l[c.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var i,r;i=[n(42),n(45),n(59),n(48),n(89),n(51),n(127),n(95),n(101),n(96),n(83),n(46),n(62),n(114),n(70),n(162),n(67),n(98)],r=function(e,t,n,i,r,o,a,s,c,l,u,d,p,f,h,g,m,v){var y={};return y.api=e,y._=t,y.version=n,y.utils=t.extend(i,o,{canCast:g.available,key:s,extend:t.extend,scriptloader:c,rssparser:m,tea:l,UI:a}),y.utils.css.style=y.utils.style,y.vid=u,y.events=t.extend({},d,{state:p}),y.playlist=t.extend({},f,{item:h}),y.plugins=v,y.cast=g,y}.apply(t,i),!(void 0!==r&&(e.exports=r))}]);/*! jQuery v1.11.3 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=rt.type(e);return"function"===n||rt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(rt.isFunction(t))return rt.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return rt.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(pt.test(t))return rt.filter(t,e,n);t=rt.filter(t,e)}return rt.grep(e,function(e){return rt.inArray(e,t)>=0!==n})}function r(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=bt[e]={};return rt.each(e.match(_t)||[],function(e,n){t[n]=!0}),t}function a(){ht.addEventListener?(ht.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(ht.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(ht.addEventListener||"load"===event.type||"complete"===ht.readyState)&&(a(),rt.ready())}function c(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(Tt,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Et.test(n)?rt.parseJSON(n):n}catch(r){}rt.data(e,t,n)}else n=void 0}return n}function l(e){var t;for(t in e)if(("data"!==t||!rt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,n,i){if(rt.acceptData(e)){var r,o,a=rt.expando,s=e.nodeType,c=s?rt.cache:e,l=s?e[a]:e[a]&&a;if(l&&c[l]&&(i||c[l].data)||void 0!==n||"string"!=typeof t)return l||(l=s?e[a]=Q.pop()||rt.guid++:a),c[l]||(c[l]=s?{}:{toJSON:rt.noop}),("object"==typeof t||"function"==typeof t)&&(i?c[l]=rt.extend(c[l],t):c[l].data=rt.extend(c[l].data,t)),o=c[l],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[rt.camelCase(t)]=n),"string"==typeof t?(r=o[t],null==r&&(r=o[rt.camelCase(t)])):r=o,r}}function d(e,t,n){if(rt.acceptData(e)){var i,r,o=e.nodeType,a=o?rt.cache:e,s=o?e[rt.expando]:rt.expando;if(a[s]){if(t&&(i=n?a[s]:a[s].data)){rt.isArray(t)?t=t.concat(rt.map(t,rt.camelCase)):t in i?t=[t]:(t=rt.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!l(i):!rt.isEmptyObject(i))return}(n||(delete a[s].data,l(a[s])))&&(o?rt.cleanData([e],!0):nt.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function p(){return!0}function f(){return!1}function h(){try{return ht.activeElement}catch(e){}}function g(e){var t=Nt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function m(e,t){var n,i,r=0,o=typeof e.getElementsByTagName!==Ct?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Ct?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||rt.nodeName(i,t)?o.push(i):rt.merge(o,m(i,t));return void 0===t||t&&rt.nodeName(e,t)?rt.merge([e],o):o}function v(e){Rt.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return rt.nodeName(e,"table")&&rt.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _(e){return e.type=(null!==rt.find.attr(e,"type"))+"/"+e.type,e}function b(e){var t=Yt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,i=0;null!=(n=e[i]);i++)rt._data(n,"globalEval",!t||rt._data(t[i],"globalEval"))}function A(e,t){if(1===t.nodeType&&rt.hasData(e)){var n,i,r,o=rt._data(e),a=rt._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)rt.event.add(t,n,s[n][i])}a.data&&(a.data=rt.extend({},a.data))}}function C(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[rt.expando]){r=rt._data(t);for(i in r.events)rt.removeEvent(t,i,r.handle);t.removeAttribute(rt.expando)}"script"===n&&t.text!==e.text?(_(t).text=e.text,b(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!rt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Rt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function E(t,n){var i,r=rt(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:rt.css(r[0],"display");return r.detach(),o}function T(e){var t=ht,n=Zt[e];return n||(n=E(e,t),"none"!==n&&n||(Kt=(Kt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Kt[0].contentWindow||Kt[0].contentDocument).document,t.write(),t.close(),n=E(e,t),Kt.detach()),Zt[e]=n),n}function S(e,t){return{get:function(){var n=e();return null!=n?n?void delete this.get:(this.get=t).apply(this,arguments):void 0}}}function x(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=fn.length;r--;)if(t=fn[r]+n,t in e)return t;return i}function j(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(o[a]=rt._data(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&jt(i)&&(o[a]=rt._data(i,"olddisplay",T(i.nodeName)))):(r=jt(i),(n&&"none"!==n||!r)&&rt._data(i,"olddisplay",r?n:rt.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function k(e,t,n){var i=ln.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function R(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=rt.css(e,n+xt[o],!0,r)),i?("content"===n&&(a-=rt.css(e,"padding"+xt[o],!0,r)),"margin"!==n&&(a-=rt.css(e,"border"+xt[o]+"Width",!0,r))):(a+=rt.css(e,"padding"+xt[o],!0,r),"padding"!==n&&(a+=rt.css(e,"border"+xt[o]+"Width",!0,r)));return a}function I(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=en(e),a=nt.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=tn(e,t,o),(0>r||null==r)&&(r=e.style[t]),rn.test(r))return r;i=a&&(nt.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+R(e,t,n||(a?"border":"content"),i,o)+"px"}function O(e,t,n,i,r){return new O.prototype.init(e,t,n,i,r)}function P(){return setTimeout(function(){hn=void 0}),hn=rt.now()}function D(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=xt[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function L(e,t,n){for(var i,r=(bn[t]||[]).concat(bn["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,t,e))return i}function N(e,t,n){var i,r,o,a,s,c,l,u,d=this,p={},f=e.style,h=e.nodeType&&jt(e),g=rt._data(e,"fxshow");n.queue||(s=rt._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,rt.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],l=rt.css(e,"display"),u="none"===l?rt._data(e,"olddisplay")||T(e.nodeName):l,"inline"===u&&"none"===rt.css(e,"float")&&(nt.inlineBlockNeedsLayout&&"inline"!==T(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",nt.shrinkWrapBlocks()||d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],mn.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;h=!0}p[i]=g&&g[i]||rt.style(e,i)}else l=void 0;if(rt.isEmptyObject(p))"inline"===("none"===l?T(e.nodeName):l)&&(f.display=l);else{g?"hidden"in g&&(h=g.hidden):g=rt._data(e,"fxshow",{}),o&&(g.hidden=!h),h?rt(e).show():d.done(function(){rt(e).hide()}),d.done(function(){var t;rt._removeData(e,"fxshow");for(t in p)rt.style(e,t,p[t])});for(i in p)a=L(h?g[i]:0,i,d),i in g||(g[i]=a.start,h&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function M(e,t){var n,i,r,o,a;for(n in e)if(i=rt.camelCase(n),r=t[i],o=e[n],rt.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=rt.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function B(e,t,n){var i,r,o=0,a=_n.length,s=rt.Deferred().always(function(){delete c.elem}),c=function(){if(r)return!1;for(var t=hn||P(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,o=1-i,a=0,c=l.tweens.length;c>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&c?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:rt.extend({},t),opts:rt.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:hn||P(),duration:n.duration,tweens:[],createTween:function(t,n){var i=rt.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),u=l.props;for(M(u,l.opts.specialEasing);a>o;o++)if(i=_n[o].call(l,e,u,l.opts))return i;return rt.map(u,L,l),rt.isFunction(l.opts.start)&&l.opts.start.call(e,l),rt.fx.timer(rt.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(_t)||[];if(rt.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function U(e,t,n,i){function r(s){var c;return o[s]=!0,rt.each(e[s]||[],function(e,s){var l=s(t,n,i);return"string"!=typeof l||a||o[l]?a?!(c=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),c}var o={},a=e===zn;return r(t.dataTypes[0])||!o["*"]&&r("*")}function H(e,t){var n,i,r=rt.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&rt.extend(!0,e,n),e}function V(e,t,n){for(var i,r,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){c.unshift(a);break}if(c[0]in n)o=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){o=a;break}i||(i=a)}o=o||i}return o?(o!==c[0]&&c.unshift(o),n[o]):void 0}function W(e,t,n,i){var r,o,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(a=l[c+" "+o]||l["* "+o],!a)for(r in l)if(s=r.split(" "),s[1]===o&&(a=l[c+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[r]:l[r]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function z(e,t,n,i){var r;if(rt.isArray(t))rt.each(t,function(t,r){n||Qn.test(e)?i(e,r):z(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==rt.type(t))i(e,t);else for(r in t)z(e+"["+r+"]",t[r],n,i)}function $(){try{return new e.XMLHttpRequest}catch(t){}}function G(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Y(e){return rt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var Q=[],J=Q.slice,q=Q.concat,X=Q.push,K=Q.indexOf,Z={},et=Z.toString,tt=Z.hasOwnProperty,nt={},it="1.11.3",rt=function(e,t){return new rt.fn.init(e,t)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,st=/-([\da-z])/gi,ct=function(e,t){return t.toUpperCase()};rt.fn=rt.prototype={jquery:it,constructor:rt,selector:"",length:0,toArray:function(){return J.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:J.call(this)},pushStack:function(e){var t=rt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return rt.each(this,e,t)},map:function(e){return this.pushStack(rt.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:Q.sort,splice:Q.splice},rt.extend=rt.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||rt.isFunction(a)||(a={}),s===c&&(a=this,s--);c>s;s++)if(null!=(r=arguments[s]))for(i in r)e=a[i],n=r[i],a!==n&&(l&&n&&(rt.isPlainObject(n)||(t=rt.isArray(n)))?(t?(t=!1,o=e&&rt.isArray(e)?e:[]):o=e&&rt.isPlainObject(e)?e:{},a[i]=rt.extend(l,o,n)):void 0!==n&&(a[i]=n));return a},rt.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===rt.type(e)},isArray:Array.isArray||function(e){return"array"===rt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!rt.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==rt.type(e)||e.nodeType||rt.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[et.call(e)]||"object":typeof e},globalEval:function(t){t&&rt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(at,"ms-").replace(st,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,a=e.length,s=n(e);if(i){if(s)for(;a>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(s)for(;a>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ot,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?rt.merge(i,"string"==typeof e?[e]:e):X.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(K)return K.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,a=e.length,s=!n;a>o;o++)i=!t(e[o],o),i!==s&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,a=e.length,s=n(e),c=[];if(s)for(;a>o;o++)r=t(e[o],o,i),null!=r&&c.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&c.push(r);return q.apply([],c)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(r=e[t],t=e,e=r),rt.isFunction(e)?(n=J.call(arguments,2),i=function(){return e.apply(t||this,n.concat(J.call(arguments)))},i.guid=e.guid=e.guid||rt.guid++,i):void 0},now:function(){return+new Date},support:nt}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var lt=function(e){function t(e,t,n,i){var r,o,a,s,c,l,d,f,h,g;if((t?t.ownerDocument||t:U)!==O&&I(t),t=t||O,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!i&&D){if(11!==s&&(r=yt.exec(e)))if(a=r[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&B(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return K.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&w.getElementsByClassName)return K.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!L||!L.test(e))){if(f=d=F,h=t,g=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=T(e),(d=t.getAttribute("id"))?f=d.replace(bt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",c=l.length;c--;)l[c]=f+p(l[c]);h=_t.test(e)&&u(t.parentNode)||t,g=l.join(",")}if(g)try{return K.apply(n,h.querySelectorAll(g)),n}catch(m){}finally{d||t.removeAttribute("id")}}}return x(e.replace(ct,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>A.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[F]=!0,e}function r(e){var t=O.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)A.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=V++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,c,l=[H,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(c=t[F]||(t[F]={}),(s=c[i])&&s[0]===H&&s[1]===o)return l[2]=s[2];if(c[i]=l,l[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function g(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function m(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,l=null!=t;c>s;s++)(o=e[s])&&(!n||n(o,i,r))&&(a.push(o),l&&t.push(s));return a}function v(e,t,n,r,o,a){return r&&!r[F]&&(r=v(r)),o&&!o[F]&&(o=v(o,a)),i(function(i,a,s,c){var l,u,d,p=[],f=[],h=a.length,v=i||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?v:m(v,p,e,s,c),_=n?o||(i?e:h||r)?[]:a:y;if(n&&n(y,_,s,c),r)for(l=m(_,f),r(l,[],s,c),u=l.length;u--;)(d=l[u])&&(_[f[u]]=!(y[f[u]]=d));if(i){if(o||e){if(o){for(l=[],u=_.length;u--;)(d=_[u])&&l.push(y[u]=d);o(null,_=[],l,c)}for(u=_.length;u--;)(d=_[u])&&(l=o?et(i,d):p[u])>-1&&(i[l]=!(a[l]=d))}}else _=m(_===a?_.splice(h,_.length):_),o?o(null,a,_,c):K.apply(a,_)})}function y(e){for(var t,n,i,r=e.length,o=A.relative[e[0].type],a=o||A.relative[" "],s=o?1:0,c=f(function(e){return e===t},a,!0),l=f(function(e){return et(t,e)>-1},a,!0),u=[function(e,n,i){var r=!o&&(i||n!==j)||((t=n).nodeType?c(e,n,i):l(e,n,i));return t=null,r}];r>s;s++)if(n=A.relative[e[s].type])u=[f(h(u),n)];else{if(n=A.filter[e[s].type].apply(null,e[s].matches),n[F]){for(i=++s;r>i&&!A.relative[e[i].type];i++);return v(s>1&&h(u),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ct,"$1"),n,i>s&&y(e.slice(s,i)),r>i&&y(e=e.slice(i)),r>i&&p(e))}u.push(n)}return h(u)}function _(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,c,l){var u,d,p,f=0,h="0",g=i&&[],v=[],y=j,_=i||o&&A.find.TAG("*",l),b=H+=null==y?1:Math.random()||.1,w=_.length;for(l&&(j=a!==O&&a);h!==w&&null!=(u=_[h]);h++){if(o&&u){for(d=0;p=e[d++];)if(p(u,a,s)){c.push(u);break}l&&(H=b)}r&&((u=!p&&u)&&f--,i&&g.push(u))}if(f+=h,r&&h!==f){for(d=0;p=n[d++];)p(g,v,a,s);if(i){if(f>0)for(;h--;)g[h]||v[h]||(v[h]=q.call(c));v=m(v)}K.apply(c,v),l&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(c)}return l&&(H=b,j=y),g};return r?i(a):a}var b,w,A,C,E,T,S,x,j,k,R,I,O,P,D,L,N,M,B,F="sizzle"+1*new Date,U=e.document,H=0,V=0,W=n(),z=n(),$=n(),G=function(e,t){return e===t&&(R=!0),0},Y=1<<31,Q={}.hasOwnProperty,J=[],q=J.pop,X=J.push,K=J.push,Z=J.slice,et=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=it.replace("w","w#"),ot="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",at=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),ct=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),dt=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),pt=new RegExp(at),ft=new RegExp("^"+rt+"$"),ht={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/[+~]/,bt=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),At=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ct=function(){I()};try{K.apply(J=Z.call(U.childNodes),U.childNodes),J[U.childNodes.length].nodeType}catch(Et){K={apply:J.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},I=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:U;return i!==O&&9===i.nodeType&&i.documentElement?(O=i,P=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ct,!1):n.attachEvent&&n.attachEvent("onunload",Ct)),D=!E(i),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(i.getElementsByClassName),w.getById=r(function(e){return P.appendChild(e).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),w.getById?(A.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},A.filter.ID=function(e){var t=e.replace(wt,At);return function(e){return e.getAttribute("id")===t}}):(delete A.find.ID,A.filter.ID=function(e){var t=e.replace(wt,At);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),A.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},A.find.CLASS=w.getElementsByClassName&&function(e,t){return D?t.getElementsByClassName(e):void 0},N=[],L=[],(w.qsa=vt.test(i.querySelectorAll))&&(r(function(e){P.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+nt+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+F+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||L.push(".#.+[+~]")}),r(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(w.matchesSelector=vt.test(M=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(e){w.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),N.push("!=",at)}),L=L.length&&new RegExp(L.join("|")),N=N.length&&new RegExp(N.join("|")),t=vt.test(P.compareDocumentPosition),B=t||vt.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return R=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===U&&B(U,e)?-1:t===i||t.ownerDocument===U&&B(U,t)?1:k?et(k,e)-et(k,t):0:4&n?-1:1)}:function(e,t){if(e===t)return R=!0,0;var n,r=0,o=e.parentNode,s=t.parentNode,c=[e],l=[t];if(!o||!s)return e===i?-1:t===i?1:o?-1:s?1:k?et(k,e)-et(k,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)c.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;c[r]===l[r];)r++;return r?a(c[r],l[r]):c[r]===U?-1:l[r]===U?1:0},i):O},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&I(e),n=n.replace(dt,"='$1']"),!(!w.matchesSelector||!D||N&&N.test(n)||L&&L.test(n)))try{var i=M.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&I(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&I(e);var n=A.attrHandle[t.toLowerCase()],i=n&&Q.call(A.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==i?i:w.attributes||!D?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(R=!w.detectDuplicates,k=!w.sortStable&&e.slice(0),e.sort(G),R){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return k=null,e},C=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},A=t.selectors={cacheLength:50,createPseudo:i,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,At),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,At),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ht.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pt.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,At).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(st," ")+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,p,f,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!c&&!s;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&y){for(u=m[F]||(m[F]={}),l=u[e]||[],f=l[0]===H&&l[1],p=l[0]===H&&l[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(p=f=0)||h.pop();)if(1===d.nodeType&&++p&&d===t){u[e]=[H,f,p];break}}else if(y&&(l=(t[F]||(t[F]={}))[e])&&l[0]===H)p=l[1];else for(;(d=++f&&d&&d[g]||(p=f=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++p||(y&&((d[F]||(d[F]={}))[e]=[H,p]),d!==t)););return p-=r,p===i||p%i===0&&p/i>=0}}},PSEUDO:function(e,n){var r,o=A.pseudos[e]||A.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(n):o.length>1?(r=[e,e,"",n],A.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=et(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=S(e.replace(ct,"$1"));return r[F]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(wt,At),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return ft.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,At).toLowerCase(),function(t){var n;do if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!A.pseudos.empty(e)},header:function(e){return mt.test(e.nodeName)},input:function(e){return gt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},A.pseudos.nth=A.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})A.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})A.pseudos[b]=c(b);return d.prototype=A.filters=A.pseudos,A.setFilters=new d,T=t.tokenize=function(e,n){var i,r,o,a,s,c,l,u=z[e+" "];if(u)return n?0:u.slice(0);for(s=e,c=[],l=A.preFilter;s;){(!i||(r=lt.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),c.push(o=[])),i=!1,(r=ut.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ct," ")}),s=s.slice(i.length));for(a in A.filter)!(r=ht[a].exec(s))||l[a]&&!(r=l[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):z(e,c).slice(0)},S=t.compile=function(e,t){var n,i=[],r=[],o=$[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)o=y(t[n]),o[F]?i.push(o):r.push(o);o=$(e,_(r,i)),o.selector=e}return o},x=t.select=function(e,t,n,i){var r,o,a,s,c,l="function"==typeof e&&e,d=!i&&T(e=l.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&D&&A.relative[o[1].type]){if(t=(A.find.ID(a.matches[0].replace(wt,At),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=ht.needsContext.test(e)?0:o.length;r--&&(a=o[r],!A.relative[s=a.type]);)if((c=A.find[s])&&(i=c(a.matches[0].replace(wt,At),_t.test(o[0].type)&&u(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&p(o),!e)return K.apply(n,i),n;
break}}return(l||S(e,d))(i,t,!D,n,_t.test(e)&&u(t.parentNode)||t),n},w.sortStable=F.split("").sort(G).join("")===F,w.detectDuplicates=!!R,I(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(O.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(tt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);rt.find=lt,rt.expr=lt.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=lt.uniqueSort,rt.text=lt.getText,rt.isXMLDoc=lt.isXML,rt.contains=lt.contains;var ut=rt.expr.match.needsContext,dt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pt=/^.[^:#\[\.,]*$/;rt.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?rt.find.matchesSelector(i,e)?[i]:[]:rt.find.matches(e,rt.grep(t,function(e){return 1===e.nodeType}))},rt.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(rt(e).filter(function(){for(t=0;r>t;t++)if(rt.contains(i[t],this))return!0}));for(t=0;r>t;t++)rt.find(e,i[t],n);return n=this.pushStack(r>1?rt.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ut.test(e)?rt(e):e||[],!1).length}});var ft,ht=e.document,gt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,mt=rt.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:gt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ft).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof rt?t[0]:t,rt.merge(this,rt.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ht,!0)),dt.test(n[1])&&rt.isPlainObject(t))for(n in t)rt.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=ht.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return ft.find(e);this.length=1,this[0]=i}return this.context=ht,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):rt.isFunction(e)?"undefined"!=typeof ft.ready?ft.ready(e):e(rt):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),rt.makeArray(e,this))};mt.prototype=rt.fn,ft=rt(ht);var vt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!rt(r).is(n));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),rt.fn.extend({has:function(e){var t,n=rt(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(rt.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=ut.test(e)||"string"!=typeof e?rt(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&rt.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?rt.unique(o):o)},index:function(e){return e?"string"==typeof e?rt.inArray(this[0],rt(e)):rt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(rt.unique(rt.merge(this.get(),rt(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),rt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return rt.dir(e,"parentNode")},parentsUntil:function(e,t,n){return rt.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return rt.dir(e,"nextSibling")},prevAll:function(e){return rt.dir(e,"previousSibling")},nextUntil:function(e,t,n){return rt.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return rt.dir(e,"previousSibling",n)},siblings:function(e){return rt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return rt.sibling(e.firstChild)},contents:function(e){return rt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:rt.merge([],e.childNodes)}},function(e,t){rt.fn[e]=function(n,i){var r=rt.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=rt.filter(i,r)),this.length>1&&(yt[e]||(r=rt.unique(r)),vt.test(e)&&(r=r.reverse())),this.pushStack(r)}});var _t=/\S+/g,bt={};rt.Callbacks=function(e){e="string"==typeof e?bt[e]||o(e):rt.extend({},e);var t,n,i,r,a,s,c=[],l=!e.once&&[],u=function(o){for(n=e.memory&&o,i=!0,a=s||0,s=0,r=c.length,t=!0;c&&r>a;a++)if(c[a].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,c&&(l?l.length&&u(l.shift()):n?c=[]:d.disable())},d={add:function(){if(c){var i=c.length;!function o(t){rt.each(t,function(t,n){var i=rt.type(n);"function"===i?e.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),t?r=c.length:n&&(s=i,u(n))}return this},remove:function(){return c&&rt.each(arguments,function(e,n){for(var i;(i=rt.inArray(n,c,i))>-1;)c.splice(i,1),t&&(r>=i&&r--,a>=i&&a--)}),this},has:function(e){return e?rt.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],r=0,this},disable:function(){return c=l=n=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,n||d.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!c||i&&!l||(n=n||[],n=[e,n.slice?n.slice():n],t?l.push(n):u(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},rt.extend({Deferred:function(e){var t=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return rt.Deferred(function(n){rt.each(t,function(t,o){var a=rt.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&rt.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?rt.extend(e,i):i}},r={};return i.pipe=i.then,rt.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=J.call(arguments),a=o.length,s=1!==a||e&&rt.isFunction(e.promise)?a:0,c=1===s?e:rt.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?J.call(arguments):r,i===t?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&rt.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(c.reject).progress(l(r,n,t)):--s;return s||c.resolveWith(i,o),c.promise()}});var wt;rt.fn.ready=function(e){return rt.ready.promise().done(e),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(e){e?rt.readyWait++:rt.ready(!0)},ready:function(e){if(e===!0?!--rt.readyWait:!rt.isReady){if(!ht.body)return setTimeout(rt.ready);rt.isReady=!0,e!==!0&&--rt.readyWait>0||(wt.resolveWith(ht,[rt]),rt.fn.triggerHandler&&(rt(ht).triggerHandler("ready"),rt(ht).off("ready")))}}}),rt.ready.promise=function(t){if(!wt)if(wt=rt.Deferred(),"complete"===ht.readyState)setTimeout(rt.ready);else if(ht.addEventListener)ht.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{ht.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&ht.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!rt.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}a(),rt.ready()}}()}return wt.promise(t)};var At,Ct="undefined";for(At in rt(nt))break;nt.ownLast="0"!==At,nt.inlineBlockNeedsLayout=!1,rt(function(){var e,t,n,i;n=ht.getElementsByTagName("body")[0],n&&n.style&&(t=ht.createElement("div"),i=ht.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=ht.createElement("div");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),rt.acceptData=function(e){var t=rt.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Tt=/([A-Z])/g;rt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?rt.cache[e[rt.expando]]:e[rt.expando],!!e&&!l(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),rt.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=rt.data(o),1===o.nodeType&&!rt._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=rt.camelCase(i.slice(5)),c(o,i,r[i])));rt._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){rt.data(this,e)}):arguments.length>1?this.each(function(){rt.data(this,e,t)}):o?c(o,e,rt.data(o,e)):void 0},removeData:function(e){return this.each(function(){rt.removeData(this,e)})}}),rt.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=rt._data(e,t),n&&(!i||rt.isArray(n)?i=rt._data(e,t,rt.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=rt.queue(e,t),i=n.length,r=n.shift(),o=rt._queueHooks(e,t),a=function(){rt.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return rt._data(e,n)||rt._data(e,n,{empty:rt.Callbacks("once memory").add(function(){rt._removeData(e,t+"queue"),rt._removeData(e,n)})})}}),rt.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?rt.queue(this[0],e):void 0===t?this:this.each(function(){var n=rt.queue(this,e,t);rt._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&rt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){rt.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=rt.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=rt._data(o[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var St=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xt=["Top","Right","Bottom","Left"],jt=function(e,t){return e=t||e,"none"===rt.css(e,"display")||!rt.contains(e.ownerDocument,e)},kt=rt.access=function(e,t,n,i,r,o,a){var s=0,c=e.length,l=null==n;if("object"===rt.type(n)){r=!0;for(s in n)rt.access(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,rt.isFunction(i)||(a=!0),l&&(a?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(rt(e),n)})),t))for(;c>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:l?t.call(e):c?t(e[0],n):o},Rt=/^(?:checkbox|radio)$/i;!function(){var e=ht.createElement("input"),t=ht.createElement("div"),n=ht.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName("tbody").length,nt.htmlSerialize=!!t.getElementsByTagName("link").length,nt.html5Clone="<:nav></:nav>"!==ht.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(i){nt.deleteExpando=!1}}}(),function(){var t,n,i=ht.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(nt[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),nt[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var It=/^(?:input|select|textarea)$/i,Ot=/^key/,Pt=/^(?:mouse|pointer|contextmenu)|click/,Dt=/^(?:focusinfocus|focusoutblur)$/,Lt=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(e,t,n,i,r){var o,a,s,c,l,u,d,p,f,h,g,m=rt._data(e);if(m){for(n.handler&&(c=n,n=c.handler,r=c.selector),n.guid||(n.guid=rt.guid++),(a=m.events)||(a=m.events={}),(u=m.handle)||(u=m.handle=function(e){return typeof rt===Ct||e&&rt.event.triggered===e.type?void 0:rt.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(_t)||[""],s=t.length;s--;)o=Lt.exec(t[s])||[],f=g=o[1],h=(o[2]||"").split(".").sort(),f&&(l=rt.event.special[f]||{},f=(r?l.delegateType:l.bindType)||f,l=rt.event.special[f]||{},d=rt.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&rt.expr.match.needsContext.test(r),namespace:h.join(".")},c),(p=a[f])||(p=a[f]=[],p.delegateCount=0,l.setup&&l.setup.call(e,i,h,u)!==!1||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,d):p.push(d),rt.event.global[f]=!0);e=null}},remove:function(e,t,n,i,r){var o,a,s,c,l,u,d,p,f,h,g,m=rt.hasData(e)&&rt._data(e);if(m&&(u=m.events)){for(t=(t||"").match(_t)||[""],l=t.length;l--;)if(s=Lt.exec(t[l])||[],f=g=s[1],h=(s[2]||"").split(".").sort(),f){for(d=rt.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,p=u[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=o=p.length;o--;)a=p[o],!r&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(p.splice(o,1),a.selector&&p.delegateCount--,d.remove&&d.remove.call(e,a));c&&!p.length&&(d.teardown&&d.teardown.call(e,h,m.handle)!==!1||rt.removeEvent(e,f,m.handle),delete u[f])}else for(f in u)rt.event.remove(e,f+t[l],n,i,!0);rt.isEmptyObject(u)&&(delete m.handle,rt._removeData(e,"events"))}},trigger:function(t,n,i,r){var o,a,s,c,l,u,d,p=[i||ht],f=tt.call(t,"type")?t.type:t,h=tt.call(t,"namespace")?t.namespace.split("."):[];if(s=u=i=i||ht,3!==i.nodeType&&8!==i.nodeType&&!Dt.test(f+rt.event.triggered)&&(f.indexOf(".")>=0&&(h=f.split("."),f=h.shift(),h.sort()),a=f.indexOf(":")<0&&"on"+f,t=t[rt.expando]?t:new rt.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:rt.makeArray(n,[t]),l=rt.event.special[f]||{},r||!l.trigger||l.trigger.apply(i,n)!==!1)){if(!r&&!l.noBubble&&!rt.isWindow(i)){for(c=l.delegateType||f,Dt.test(c+f)||(s=s.parentNode);s;s=s.parentNode)p.push(s),u=s;u===(i.ownerDocument||ht)&&p.push(u.defaultView||u.parentWindow||e)}for(d=0;(s=p[d++])&&!t.isPropagationStopped();)t.type=d>1?c:l.bindType||f,o=(rt._data(s,"events")||{})[t.type]&&rt._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&rt.acceptData(s)&&(t.result=o.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=f,!r&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),n)===!1)&&rt.acceptData(i)&&a&&i[f]&&!rt.isWindow(i)){u=i[a],u&&(i[a]=null),rt.event.triggered=f;try{i[f]()}catch(g){}rt.event.triggered=void 0,u&&(i[a]=u)}return t.result}},dispatch:function(e){e=rt.event.fix(e);var t,n,i,r,o,a=[],s=J.call(arguments),c=(rt._data(this,"events")||{})[e.type]||[],l=rt.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=rt.event.handlers.call(this,e,c),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((rt.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(r=[],o=0;s>o;o++)i=t[o],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?rt(n,this).index(c)>=0:rt.find(n,this,null,[c]).length),r[n]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[rt.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Pt.test(r)?this.mouseHooks:Ot.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new rt.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||ht),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||ht,r=i.documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return rt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return rt.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=rt.extend(new rt.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?rt.event.trigger(r,null,t):rt.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},rt.removeEvent=ht.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===Ct&&(e[i]=null),e.detachEvent(i,n))},rt.Event=function(e,t){return this instanceof rt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:f):this.type=e,t&&rt.extend(this,t),this.timeStamp=e&&e.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(e,t)},rt.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){rt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!rt.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(rt.event.special.submit={setup:function(){return rt.nodeName(this,"form")?!1:void rt.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=rt.nodeName(t,"input")||rt.nodeName(t,"button")?t.form:void 0;n&&!rt._data(n,"submitBubbles")&&(rt.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),rt._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&rt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return rt.nodeName(this,"form")?!1:void rt.event.remove(this,"._submit")}}),nt.changeBubbles||(rt.event.special.change={setup:function(){return It.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(rt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),rt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),rt.event.simulate("change",this,e,!0)})),!1):void rt.event.add(this,"beforeactivate._change",function(e){var t=e.target;It.test(t.nodeName)&&!rt._data(t,"changeBubbles")&&(rt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||rt.event.simulate("change",this.parentNode,e,!0)}),rt._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return rt.event.remove(this,"._change"),!It.test(this.nodeName)}}),nt.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){rt.event.simulate(t,e.target,rt.event.fix(e),!0)};rt.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=rt._data(i,t);r||i.addEventListener(e,n,!0),rt._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=rt._data(i,t)-1;r?rt._data(i,t,r):(i.removeEventListener(e,n,!0),rt._removeData(i,t))}}}),rt.fn.extend({on:function(e,t,n,i,r){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=f;else if(!i)return this;return 1===r&&(a=i,i=function(e){return rt().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=rt.guid++)),this.each(function(){rt.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,rt(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=f),this.each(function(){rt.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){rt.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?rt.event.trigger(e,t,n,!0):void 0}});var Nt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Mt=/ jQuery\d+="(?:null|\d+)"/g,Bt=new RegExp("<(?:"+Nt+")[\\s/>]","i"),Ft=/^\s+/,Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ht=/<([\w:]+)/,Vt=/<tbody/i,Wt=/<|&#?\w+;/,zt=/<(?:script|style|link)/i,$t=/checked\s*(?:[^=]|=\s*.checked.)/i,Gt=/^$|\/(?:java|ecma)script/i,Yt=/^true\/(.*)/,Qt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Jt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:nt.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},qt=g(ht),Xt=qt.appendChild(ht.createElement("div"));Jt.optgroup=Jt.option,Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td,rt.extend({clone:function(e,t,n){var i,r,o,a,s,c=rt.contains(e.ownerDocument,e);if(nt.html5Clone||rt.isXMLDoc(e)||!Bt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Xt.innerHTML=e.outerHTML,Xt.removeChild(o=Xt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||rt.isXMLDoc(e)))for(i=m(o),s=m(e),a=0;null!=(r=s[a]);++a)i[a]&&C(r,i[a]);if(t)if(n)for(s=s||m(e),i=i||m(o),a=0;null!=(r=s[a]);a++)A(r,i[a]);else A(e,o);return i=m(o,"script"),i.length>0&&w(i,!c&&m(e,"script")),i=s=r=null,o},buildFragment:function(e,t,n,i){for(var r,o,a,s,c,l,u,d=e.length,p=g(t),f=[],h=0;d>h;h++)if(o=e[h],o||0===o)if("object"===rt.type(o))rt.merge(f,o.nodeType?[o]:o);else if(Wt.test(o)){for(s=s||p.appendChild(t.createElement("div")),c=(Ht.exec(o)||["",""])[1].toLowerCase(),u=Jt[c]||Jt._default,s.innerHTML=u[1]+o.replace(Ut,"<$1></$2>")+u[2],r=u[0];r--;)s=s.lastChild;if(!nt.leadingWhitespace&&Ft.test(o)&&f.push(t.createTextNode(Ft.exec(o)[0])),!nt.tbody)for(o="table"!==c||Vt.test(o)?"<table>"!==u[1]||Vt.test(o)?0:s:s.firstChild,r=o&&o.childNodes.length;r--;)rt.nodeName(l=o.childNodes[r],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(rt.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else f.push(t.createTextNode(o));for(s&&p.removeChild(s),nt.appendChecked||rt.grep(m(f,"input"),v),h=0;o=f[h++];)if((!i||-1===rt.inArray(o,i))&&(a=rt.contains(o.ownerDocument,o),s=m(p.appendChild(o),"script"),a&&w(s),n))for(r=0;o=s[r++];)Gt.test(o.type||"")&&n.push(o);return s=null,p},cleanData:function(e,t){for(var n,i,r,o,a=0,s=rt.expando,c=rt.cache,l=nt.deleteExpando,u=rt.event.special;null!=(n=e[a]);a++)if((t||rt.acceptData(n))&&(r=n[s],o=r&&c[r])){if(o.events)for(i in o.events)u[i]?rt.event.remove(n,i):rt.removeEvent(n,i,o.handle);c[r]&&(delete c[r],l?delete n[s]:typeof n.removeAttribute!==Ct?n.removeAttribute(s):n[s]=null,Q.push(r))}}}),rt.fn.extend({text:function(e){return kt(this,function(e){return void 0===e?rt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ht).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?rt.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||rt.cleanData(m(n)),n.parentNode&&(t&&rt.contains(n.ownerDocument,n)&&w(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&rt.cleanData(m(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&rt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return rt.clone(this,e,t)})},html:function(e){return kt(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Mt,""):void 0;if(!("string"!=typeof e||zt.test(e)||!nt.htmlSerialize&&Bt.test(e)||!nt.leadingWhitespace&&Ft.test(e)||Jt[(Ht.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ut,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(rt.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,rt.cleanData(m(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=q.apply([],e);var n,i,r,o,a,s,c=0,l=this.length,u=this,d=l-1,p=e[0],f=rt.isFunction(p);if(f||l>1&&"string"==typeof p&&!nt.checkClone&&$t.test(p))return this.each(function(n){var i=u.eq(n);f&&(e[0]=p.call(this,n,i.html())),i.domManip(e,t)});if(l&&(s=rt.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=rt.map(m(s,"script"),_),r=o.length;l>c;c++)i=s,c!==d&&(i=rt.clone(i,!0,!0),r&&rt.merge(o,m(i,"script"))),t.call(this[c],i,c);if(r)for(a=o[o.length-1].ownerDocument,rt.map(o,b),c=0;r>c;c++)i=o[c],Gt.test(i.type||"")&&!rt._data(i,"globalEval")&&rt.contains(a,i)&&(i.src?rt._evalUrl&&rt._evalUrl(i.src):rt.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Qt,"")));s=n=null}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){rt.fn[e]=function(e){for(var n,i=0,r=[],o=rt(e),a=o.length-1;a>=i;i++)n=i===a?this:this.clone(!0),rt(o[i])[t](n),X.apply(r,n.get());return this.pushStack(r)}});var Kt,Zt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=ht.getElementsByTagName("body")[0],n&&n.style?(t=ht.createElement("div"),i=ht.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ht.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var en,tn,nn=/^margin/,rn=new RegExp("^("+St+")(?!px)[a-z%]+$","i"),on=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},tn=function(e,t,n){var i,r,o,a,s=e.style;return n=n||en(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||rt.contains(e.ownerDocument,e)||(a=rt.style(e,t)),rn.test(a)&&nn.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):ht.documentElement.currentStyle&&(en=function(e){return e.currentStyle},tn=function(e,t,n){var i,r,o,a,s=e.style;return n=n||en(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),rn.test(a)&&!on.test(t)&&(i=s.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),!function(){function t(){var t,n,i,r;n=ht.getElementsByTagName("body")[0],n&&n.style&&(t=ht.createElement("div"),i=ht.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,c=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,r=t.appendChild(ht.createElement("div")),r.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",t.style.width="1px",c=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight),t.removeChild(r)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=t.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===r[0].offsetHeight,s&&(r[0].style.display="",r[1].style.display="none",s=0===r[0].offsetHeight),n.removeChild(i))
}var n,i,r,o,a,s,c;n=ht.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=n.getElementsByTagName("a")[0],(i=r&&r.style)&&(i.cssText="float:left;opacity:.5",nt.opacity="0.5"===i.opacity,nt.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",nt.clearCloneStyle="content-box"===n.style.backgroundClip,nt.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,rt.extend(nt,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==c&&t(),c}}))}(),rt.swap=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r};var an=/alpha\([^)]*\)/i,sn=/opacity\s*=\s*([^)]*)/,cn=/^(none|table(?!-c[ea]).+)/,ln=new RegExp("^("+St+")(.*)$","i"),un=new RegExp("^([+-])=("+St+")","i"),dn={position:"absolute",visibility:"hidden",display:"block"},pn={letterSpacing:"0",fontWeight:"400"},fn=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":nt.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=rt.camelCase(t),c=e.style;if(t=rt.cssProps[s]||(rt.cssProps[s]=x(c,s)),a=rt.cssHooks[t]||rt.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:c[t];if(o=typeof n,"string"===o&&(r=un.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(rt.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||rt.cssNumber[s]||(n+="px"),nt.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,i)))))try{c[t]=n}catch(l){}}},css:function(e,t,n,i){var r,o,a,s=rt.camelCase(t);return t=rt.cssProps[s]||(rt.cssProps[s]=x(e.style,s)),a=rt.cssHooks[t]||rt.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=tn(e,t,i)),"normal"===o&&t in pn&&(o=pn[t]),""===n||n?(r=parseFloat(o),n===!0||rt.isNumeric(r)?r||0:o):o}}),rt.each(["height","width"],function(e,t){rt.cssHooks[t]={get:function(e,n,i){return n?cn.test(rt.css(e,"display"))&&0===e.offsetWidth?rt.swap(e,dn,function(){return I(e,t,i)}):I(e,t,i):void 0},set:function(e,n,i){var r=i&&en(e);return k(e,n,i?R(e,t,i,nt.boxSizing&&"border-box"===rt.css(e,"boxSizing",!1,r),r):0)}}}),nt.opacity||(rt.cssHooks.opacity={get:function(e,t){return sn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=rt.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===rt.trim(o.replace(an,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=an.test(o)?o.replace(an,r):o+" "+r)}}),rt.cssHooks.marginRight=S(nt.reliableMarginRight,function(e,t){return t?rt.swap(e,{display:"inline-block"},tn,[e,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(e,t){rt.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+xt[i]+t]=o[i]||o[i-2]||o[0];return r}},nn.test(e)||(rt.cssHooks[e+t].set=k)}),rt.fn.extend({css:function(e,t){return kt(this,function(e,t,n){var i,r,o={},a=0;if(rt.isArray(t)){for(i=en(e),r=t.length;r>a;a++)o[t[a]]=rt.css(e,t[a],!1,i);return o}return void 0!==n?rt.style(e,t,n):rt.css(e,t)},e,t,arguments.length>1)},show:function(){return j(this,!0)},hide:function(){return j(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){jt(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=O,O.prototype={constructor:O,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(rt.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.pos=t=this.options.duration?rt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=rt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){rt.fx.step[e.prop]?rt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[rt.cssProps[e.prop]]||rt.cssHooks[e.prop])?rt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},rt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},rt.fx=O.prototype.init,rt.fx.step={};var hn,gn,mn=/^(?:toggle|show|hide)$/,vn=new RegExp("^(?:([+-])=|)("+St+")([a-z%]*)$","i"),yn=/queueHooks$/,_n=[N],bn={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=vn.exec(t),o=r&&r[3]||(rt.cssNumber[e]?"":"px"),a=(rt.cssNumber[e]||"px"!==o&&+i)&&vn.exec(rt.css(n.elem,e)),s=1,c=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do s=s||".5",a/=s,rt.style(n.elem,e,a+o);while(s!==(s=n.cur()/i)&&1!==s&&--c)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};rt.Animation=rt.extend(B,{tweener:function(e,t){rt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],bn[n]=bn[n]||[],bn[n].unshift(t)},prefilter:function(e,t){t?_n.unshift(e):_n.push(e)}}),rt.speed=function(e,t,n){var i=e&&"object"==typeof e?rt.extend({},e):{complete:n||!n&&t||rt.isFunction(e)&&e,duration:e,easing:n&&t||t&&!rt.isFunction(t)&&t};return i.duration=rt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in rt.fx.speeds?rt.fx.speeds[i.duration]:rt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){rt.isFunction(i.old)&&i.old.call(this),i.queue&&rt.dequeue(this,i.queue)},i},rt.fn.extend({fadeTo:function(e,t,n,i){return this.filter(jt).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=rt.isEmptyObject(e),o=rt.speed(t,n,i),a=function(){var t=B(this,rt.extend({},e),o);(r||rt._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=rt.timers,a=rt._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&yn.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&rt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=rt._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=rt.timers,a=i?i.length:0;for(n.finish=!0,rt.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),rt.each(["toggle","show","hide"],function(e,t){var n=rt.fn[t];rt.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(D(t,!0),e,i,r)}}),rt.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){rt.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),rt.timers=[],rt.fx.tick=function(){var e,t=rt.timers,n=0;for(hn=rt.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||rt.fx.stop(),hn=void 0},rt.fx.timer=function(e){rt.timers.push(e),e()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){gn||(gn=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(gn),gn=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(e,t){return e=rt.fx?rt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,r;t=ht.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=ht.createElement("select"),r=n.appendChild(ht.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",nt.getSetAttribute="t"!==t.className,nt.style=/top/.test(i.getAttribute("style")),nt.hrefNormalized="/a"===i.getAttribute("href"),nt.checkOn=!!e.value,nt.optSelected=r.selected,nt.enctype=!!ht.createElement("form").enctype,n.disabled=!0,nt.optDisabled=!r.disabled,e=ht.createElement("input"),e.setAttribute("value",""),nt.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),nt.radioValue="t"===e.value}();var wn=/\r/g;rt.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=rt.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,rt(this).val()):e,null==r?r="":"number"==typeof r?r+="":rt.isArray(r)&&(r=rt.map(r,function(e){return null==e?"":e+""})),t=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=rt.valHooks[r.type]||rt.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(wn,""):null==n?"":n)):void 0}}),rt.extend({valHooks:{option:{get:function(e){var t=rt.find.attr(e,"value");return null!=t?t:rt.trim(rt.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,c=0>r?s:o?r:0;s>c;c++)if(n=i[c],!(!n.selected&&c!==r||(nt.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&rt.nodeName(n.parentNode,"optgroup"))){if(t=rt(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=rt.makeArray(t),a=r.length;a--;)if(i=r[a],rt.inArray(rt.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(e,t){return rt.isArray(t)?e.checked=rt.inArray(rt(e).val(),t)>=0:void 0}},nt.checkOn||(rt.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var An,Cn,En=rt.expr.attrHandle,Tn=/^(?:checked|selected)$/i,Sn=nt.getSetAttribute,xn=nt.input;rt.fn.extend({attr:function(e,t){return kt(this,rt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){rt.removeAttr(this,e)})}}),rt.extend({attr:function(e,t,n){var i,r,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?typeof e.getAttribute===Ct?rt.prop(e,t,n):(1===o&&rt.isXMLDoc(e)||(t=t.toLowerCase(),i=rt.attrHooks[t]||(rt.expr.match.bool.test(t)?Cn:An)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=rt.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void rt.removeAttr(e,t)):void 0},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(_t);if(o&&1===e.nodeType)for(;n=o[r++];)i=rt.propFix[n]||n,rt.expr.match.bool.test(n)?xn&&Sn||!Tn.test(n)?e[i]=!1:e[rt.camelCase("default-"+n)]=e[i]=!1:rt.attr(e,n,""),e.removeAttribute(Sn?n:i)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&"radio"===t&&rt.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Cn={set:function(e,t,n){return t===!1?rt.removeAttr(e,n):xn&&Sn||!Tn.test(n)?e.setAttribute(!Sn&&rt.propFix[n]||n,n):e[rt.camelCase("default-"+n)]=e[n]=!0,n}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(e,t){var n=En[t]||rt.find.attr;En[t]=xn&&Sn||!Tn.test(t)?function(e,t,i){var r,o;return i||(o=En[t],En[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,En[t]=o),r}:function(e,t,n){return n?void 0:e[rt.camelCase("default-"+t)]?t.toLowerCase():null}}),xn&&Sn||(rt.attrHooks.value={set:function(e,t,n){return rt.nodeName(e,"input")?void(e.defaultValue=t):An&&An.set(e,t,n)}}),Sn||(An={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},En.id=En.name=En.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},rt.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:An.set},rt.attrHooks.contenteditable={set:function(e,t,n){An.set(e,""===t?!1:t,n)}},rt.each(["width","height"],function(e,t){rt.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),nt.style||(rt.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var jn=/^(?:input|select|textarea|button|object)$/i,kn=/^(?:a|area)$/i;rt.fn.extend({prop:function(e,t){return kt(this,rt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=rt.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),rt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,a=e.nodeType;return e&&3!==a&&8!==a&&2!==a?(o=1!==a||!rt.isXMLDoc(e),o&&(t=rt.propFix[t]||t,r=rt.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]):void 0},propHooks:{tabIndex:{get:function(e){var t=rt.find.attr(e,"tabindex");return t?parseInt(t,10):jn.test(e.nodeName)||kn.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||rt.each(["href","src"],function(e,t){rt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(rt.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this}),nt.enctype||(rt.propFix.enctype="encoding");var Rn=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(e){var t,n,i,r,o,a,s=0,c=this.length,l="string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(_t)||[];c>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Rn," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=rt.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,i,r,o,a,s=0,c=this.length,l=0===arguments.length||"string"==typeof e&&e;if(rt.isFunction(e))return this.each(function(t){rt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(_t)||[];c>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Rn," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=e?rt.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(rt.isFunction(e)?function(n){rt(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=rt(this),o=e.match(_t)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===Ct||"boolean"===n)&&(this.className&&rt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":rt._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Rn," ").indexOf(t)>=0)return!0;return!1}}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){rt.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),rt.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var In=rt.now(),On=/\?/,Pn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;rt.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=rt.trim(t+"");return r&&!rt.trim(r.replace(Pn,function(e,t,r,o){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!o-!r,"")}))?Function("return "+r)():rt.error("Invalid JSON: "+t)},rt.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||rt.error("Invalid XML: "+t),n};var Dn,Ln,Nn=/#.*$/,Mn=/([?&])_=[^&]*/,Bn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Un=/^(?:GET|HEAD)$/,Hn=/^\/\//,Vn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Wn={},zn={},$n="*/".concat("*");try{Ln=location.href}catch(Gn){Ln=ht.createElement("a"),Ln.href="",Ln=Ln.href}Dn=Vn.exec(Ln.toLowerCase())||[],rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ln,type:"GET",isLocal:Fn.test(Dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$n,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,rt.ajaxSettings),t):H(rt.ajaxSettings,e)},ajaxPrefilter:F(Wn),ajaxTransport:F(zn),ajax:function(e,t){function n(e,t,n,i){var r,u,v,y,b,A=t;2!==_&&(_=2,s&&clearTimeout(s),l=void 0,a=i||"",w.readyState=e>0?4:0,r=e>=200&&300>e||304===e,n&&(y=V(d,w,n)),y=W(d,y,w,r),r?(d.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(rt.lastModified[o]=b),b=w.getResponseHeader("etag"),b&&(rt.etag[o]=b)),204===e||"HEAD"===d.type?A="nocontent":304===e?A="notmodified":(A=y.state,u=y.data,v=y.error,r=!v)):(v=A,(e||!A)&&(A="error",0>e&&(e=0))),w.status=e,w.statusText=(t||A)+"",r?h.resolveWith(p,[u,A,w]):h.rejectWith(p,[w,A,v]),w.statusCode(m),m=void 0,c&&f.trigger(r?"ajaxSuccess":"ajaxError",[w,d,r?u:v]),g.fireWith(p,[w,A]),c&&(f.trigger("ajaxComplete",[w,d]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,a,s,c,l,u,d=rt.ajaxSetup({},t),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?rt(p):rt.event,h=rt.Deferred(),g=rt.Callbacks("once memory"),m=d.statusCode||{},v={},y={},_=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!u)for(u={};t=Bn.exec(a);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return _||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return l&&l.abort(t),n(0,t),this}};if(h.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||Ln)+"").replace(Nn,"").replace(Hn,Dn[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=rt.trim(d.dataType||"*").toLowerCase().match(_t)||[""],null==d.crossDomain&&(i=Vn.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===Dn[1]&&i[2]===Dn[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Dn[3]||("http:"===Dn[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=rt.param(d.data,d.traditional)),U(Wn,d,t,w),2===_)return w;c=rt.event&&d.global,c&&0===rt.active++&&rt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Un.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(On.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Mn.test(o)?o.replace(Mn,"$1_="+In++):o+(On.test(o)?"&":"?")+"_="+In++)),d.ifModified&&(rt.lastModified[o]&&w.setRequestHeader("If-Modified-Since",rt.lastModified[o]),rt.etag[o]&&w.setRequestHeader("If-None-Match",rt.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+$n+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)w.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(d.beforeSend.call(p,w,d)===!1||2===_))return w.abort();b="abort";for(r in{success:1,error:1,complete:1})w[r](d[r]);if(l=U(zn,d,t,w)){w.readyState=1,c&&f.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{_=1,l.send(v,n)}catch(A){if(!(2>_))throw A;n(-1,A)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return rt.get(e,t,n,"json")},getScript:function(e,t){return rt.get(e,void 0,t,"script")}}),rt.each(["get","post"],function(e,t){rt[t]=function(e,n,i,r){return rt.isFunction(n)&&(r=r||i,i=n,n=void 0),rt.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),rt._evalUrl=function(e){return rt.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},rt.fn.extend({wrapAll:function(e){if(rt.isFunction(e))return this.each(function(t){rt(this).wrapAll(e.call(this,t))});if(this[0]){var t=rt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(rt.isFunction(e)?function(t){rt(this).wrapInner(e.call(this,t))}:function(){var t=rt(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=rt.isFunction(e);return this.each(function(n){rt(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!nt.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||rt.css(e,"display"))},rt.expr.filters.visible=function(e){return!rt.expr.filters.hidden(e)};var Yn=/%20/g,Qn=/\[\]$/,Jn=/\r?\n/g,qn=/^(?:submit|button|image|reset|file)$/i,Xn=/^(?:input|select|textarea|keygen)/i;rt.param=function(e,t){var n,i=[],r=function(e,t){t=rt.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(e)||e.jquery&&!rt.isPlainObject(e))rt.each(e,function(){r(this.name,this.value)});else for(n in e)z(n,e[n],t,r);return i.join("&").replace(Yn,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=rt.prop(this,"elements");return e?rt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!rt(this).is(":disabled")&&Xn.test(this.nodeName)&&!qn.test(e)&&(this.checked||!Rt.test(e))}).map(function(e,t){var n=rt(this).val();return null==n?null:rt.isArray(n)?rt.map(n,function(e){return{name:t.name,value:e.replace(Jn,"\r\n")}}):{name:t.name,value:n.replace(Jn,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$()||G()}:$;var Kn=0,Zn={},ei=rt.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Zn)Zn[e](void 0,!0)}),nt.cors=!!ei&&"withCredentials"in ei,ei=nt.ajax=!!ei,ei&&rt.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,i){var r,o=e.xhr(),a=++Kn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&o.setRequestHeader(r,n[r]+"");o.send(e.hasContent&&e.data||null),t=function(n,r){var s,c,l;if(t&&(r||4===o.readyState))if(delete Zn[a],t=void 0,o.onreadystatechange=rt.noop,r)4!==o.readyState&&o.abort();else{l={},s=o.status,"string"==typeof o.responseText&&(l.text=o.responseText);try{c=o.statusText}catch(u){c=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=l.text?200:404}l&&i(s,c,l,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Zn[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return rt.globalEval(e),e}}}),rt.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),rt.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=ht.head||rt("head")[0]||ht.documentElement;return{send:function(i,r){t=ht.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ti=[],ni=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ti.pop()||rt.expando+"_"+In++;return this[e]=!0,e}}),rt.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=rt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ni,"$1"+r):t.jsonp!==!1&&(t.url+=(On.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||rt.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,ti.push(r)),a&&rt.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),rt.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||ht;var i=dt.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=rt.buildFragment([e],t,r),r&&r.length&&rt(r).remove(),rt.merge([],i.childNodes))};var ii=rt.fn.load;rt.fn.load=function(e,t,n){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>=0&&(i=rt.trim(e.slice(s,e.length)),e=e.slice(0,s)),rt.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&rt.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?rt("<div>").append(rt.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){a.each(n,r||[e.responseText,t,e])}),this},rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){rt.fn[t]=function(e){return this.on(t,e)}}),rt.expr.filters.animated=function(e){return rt.grep(rt.timers,function(t){return e===t.elem}).length};var ri=e.document.documentElement;rt.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,l,u=rt.css(e,"position"),d=rt(e),p={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=rt.css(e,"top"),c=rt.css(e,"left"),l=("absolute"===u||"fixed"===u)&&rt.inArray("auto",[o,c])>-1,l?(i=d.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(c)||0),rt.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+r),"using"in t?t.using.call(e,p):d.css(p)}},rt.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){rt.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;return o?(t=o.documentElement,rt.contains(t,r)?(typeof r.getBoundingClientRect!==Ct&&(i=r.getBoundingClientRect()),n=Y(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===rt.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),rt.nodeName(e[0],"html")||(n=e.offset()),n.top+=rt.css(e[0],"borderTopWidth",!0),n.left+=rt.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-rt.css(i,"marginTop",!0),left:t.left-n.left-rt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ri;e&&!rt.nodeName(e,"html")&&"static"===rt.css(e,"position");)e=e.offsetParent;return e||ri})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);rt.fn[e]=function(i){return kt(this,function(e,i,r){var o=Y(e);return void 0===r?o?t in o?o[t]:o.document.documentElement[i]:e[i]:void(o?o.scrollTo(n?rt(o).scrollLeft():r,n?r:rt(o).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),rt.each(["top","left"],function(e,t){rt.cssHooks[t]=S(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),rn.test(n)?rt(e).position()[t]+"px":n):void 0})}),rt.each({Height:"height",Width:"width"},function(e,t){rt.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){rt.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return kt(this,function(t,n,i){var r;return rt.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?rt.css(t,n,a):rt.style(t,n,i,a)},t,o?i:void 0,o,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return rt});var oi=e.jQuery,ai=e.$;return rt.noConflict=function(t){return e.$===rt&&(e.$=ai),t&&e.jQuery===rt&&(e.jQuery=oi),rt},typeof t===Ct&&(e.jQuery=e.$=rt),rt});var $=jQuery.noConflict(!0);/*! jQuery UI - v1.11.4 - 2016-03-18 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e($)}(function(e){function t(t,i){var r,o,a,s=t.nodeName.toLowerCase();return"area"===s?(r=t.parentNode,o=r.name,t.href&&o&&"map"===r.nodeName.toLowerCase()?(a=e("img[usemap='#"+o+"']")[0],!!a&&n(a)):!1):(/^(input|select|textarea|button|object)$/.test(s)?!t.disabled:"a"===s?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return i&&"static"===t.css("position")?!1:r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var i=e.attr(n,"tabindex"),r=isNaN(i);return(r||i>=0)&&t(n,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function i(t,n,i,o){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?a["inner"+n].call(this):this.each(function(){e(this).css(o,i(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,i,r=e(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(i=parseInt(r.css("zIndex"),10),!isNaN(i)&&0!==i))return i;r=r.parent()}return 0}}),e.ui.plugin={add:function(t,n,i){var r,o=e.ui[t].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;o.length>r;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}};var i=0,r=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=e._data(r,"events"),i&&i.remove&&e(r).triggerHandler("remove")}catch(a){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var r,o,a,s,c={},l=t.split(".")[0];return t=t.split(".")[1],r=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(c[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(c[t]=i)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},c,{constructor:a,namespace:l,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var n,i,o=r.call(arguments,1),a=0,s=o.length;s>a;a++)for(n in o[a])i=o[a][n],o[a].hasOwnProperty(n)&&void 0!==i&&(t[n]=e.isPlainObject(i)?e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=r.call(arguments,1),c=this;return a?this.each(function(){var n,r=e.data(this,i);return"instance"===o?(c=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s),n!==r&&void 0!==n?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each(function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new n(o,this))})),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(r=a[t]=e.widget.extend({},this.options[t]),o=0;i.length-1>o;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var c=i.match(/^([\w:-]*)\s*(.*)$/),l=c[1]+o.eventNamespace,u=c[2];u?r.delegate(u,l,s):n.bind(l,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}}),e.widget;var o=!1;e(document).mouseup(function(){o=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,i=1===t.which,r="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return i&&!r&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),o=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(this.handleElement.is(t.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&e(n.activeElement).blur()}catch(i){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),r=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options,o=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=e(r.containment),i=n[0],void(i&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),c=e.pageX,l=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(c=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(c=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((c-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,c=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(c=this.originalPageX),"x"===a.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var r=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,r))})},stop:function(t,n,i){var r=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(t,n,i){e.each(i.sortables,function(){var r=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(r=!1),r})),r?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",t),i.dropped=o.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(t),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var r=e("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(t,n,i){var r=i.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(t,n,i){var r=i.options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var r=i.options,o=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+a.offsetHeight-t.pageY<r.scrollSensitivity?a.scrollTop=o=a.scrollTop+r.scrollSpeed:t.pageY-i.overflowOffset.top<r.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+a.offsetWidth-t.pageX<r.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+r.scrollSpeed:t.pageX-i.overflowOffset.left<r.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(s).scrollTop()<r.scrollSensitivity?o=e(s).scrollTop(e(s).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(s).scrollTop())<r.scrollSensitivity&&(o=e(s).scrollTop(e(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(s).scrollLeft()<r.scrollSensitivity?o=e(s).scrollLeft(e(s).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(s).scrollLeft())<r.scrollSensitivity&&(o=e(s).scrollLeft(e(s).scrollLeft()+r.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var r=i.options;i.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var r,o,a,s,c,l,u,d,p,f,h=i.options,g=h.snapTolerance,m=n.offset.left,v=m+i.helperProportions.width,y=n.offset.top,_=y+i.helperProportions.height;for(p=i.snapElements.length-1;p>=0;p--)c=i.snapElements[p].left-i.margins.left,l=c+i.snapElements[p].width,u=i.snapElements[p].top-i.margins.top,d=u+i.snapElements[p].height,c-g>v||m>l+g||u-g>_||y>d+g||!e.contains(i.snapElements[p].item.ownerDocument,i.snapElements[p].item)?(i.snapElements[p].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[p].item})),i.snapElements[p].snapping=!1):("inner"!==h.snapMode&&(r=g>=Math.abs(u-_),o=g>=Math.abs(d-y),a=g>=Math.abs(c-v),s=g>=Math.abs(l-m),r&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left)),f=r||o||a||s,"outer"!==h.snapMode&&(r=g>=Math.abs(u-y),o=g>=Math.abs(d-_),a=g>=Math.abs(c-m),s=g>=Math.abs(l-v),r&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left)),!i.snapElements[p].snapping&&(r||o||a||s||f)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[p].item})),i.snapElements[p].snapping=r||o||a||s||f)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var r,o=i.options,a=e.makeArray(e(o.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});a.length&&(r=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each(function(t){e(this).css("zIndex",r+t)}),this.css("zIndex",r+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var r=e(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(t,n,i){var r=i.options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}}),e.ui.draggable,e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",a=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),t=r.length;n>t;t++)a.push(o);this.handles=r.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)
})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,r,o,a,s,c,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-u.values(t));(r>n||r===n&&(t===u._lastChangedValue||u.values(t)===d.min))&&(r=n,o=e(this),a=t)}),s=this._start(t,a),s===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),c=o.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-c.left-o.width()/2,top:t.pageY-c.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,r,o;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,r,o;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(r=this.values(),r[t]=n,o=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),i=this.values(t?0:1),o!==!1&&this.values(t,n))):n!==this.value()&&(o=this._trigger("slide",e,{handle:this.handles[t],value:n}),o!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,n){var i,r,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,r=arguments[0],o=0;i.length>o;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,n){var i,r=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(r=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!n),this._super(t,n),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;n.length>i;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,i=Math.floor(+(e-t).toFixed(this._precision())/n)*n;e=i+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,n,i,r,o,a=this.options.range,s=this.options,c=this,l=this._animateOff?!1:s.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((c.values(i)-c._valueMin())/(c._valueMax()-c._valueMin())),u["horizontal"===c.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[l?"animate":"css"](u,s.animate),c.options.range===!0&&("horizontal"===c.orientation?(0===i&&c.range.stop(1,1)[l?"animate":"css"]({left:n+"%"},s.animate),1===i&&c.range[l?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:s.animate})):(0===i&&c.range.stop(1,1)[l?"animate":"css"]({bottom:n+"%"},s.animate),1===i&&c.range[l?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:s.animate}))),t=n}):(i=this.value(),r=this._valueMin(),o=this._valueMax(),n=o!==r?100*((i-r)/(o-r)):0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[l?"animate":"css"](u,s.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:n+"%"},s.animate),"max"===a&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:n+"%"},s.animate),"max"===a&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(t){var n,i,r,o,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,a),n===!1))return}switch(o=this.options.step,i=r=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;r=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;r=this._trimAlignValue(i-o)}this._slide(t,a,r)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}),function(){$.jQT=function(){function e(e){var l,u,d,p,f,h,g,m,v,y,_,b,w,A,C,E,T,S;this.tapHandlers=this.tapHandlers.concat([{name:"external-link",isSupported:function(e,t){return m(t.$el)},fn:function(e,t){return t.$el.removeClass("active"),!0}},{name:"back-selector",isSupported:function(e){return function(t,n){return n.$el.is(e.settings.backSelector)}}(this),fn:function(e){return function(t,n){return e.goBack(n.hash),!1}}(this)},{name:"submit-selector",isSupported:function(e){return function(t,n){return n.$el.is(e.settings.submitSelector)}}(this),fn:function(e,t){C(t.$el)}},{name:"webapp",isSupported:function(e,t){return"_webapp"===t.target},fn:function(e,t){return window.location=t.href,!1}},{name:"no-op",isSupported:function(e,t){return"#"===t.href},fn:function(e,t){return t.$el.removeClass("active"),!0}},{name:"standard",isSupported:function(e,t){return t.hash&&"#"!==t.hash},fn:function(e){return function(t,n){var i;return i=p(n.$el),n.$el.addClass("active"),e.goTo($(n.hash).data("referrer",n.$el),i,n.$el.hasClass("reverse")),!1}}(this)},{name:"external",isSupported:function(){return!0},fn:function(e,t){var n;return n=p(t.$el),t.$el.addClass("loading active"),b(t.$el.attr("href"),{animation:n,callback:function(){return t.$el.removeClass("loading"),setTimeout(function(){return t.$el.removeClass("active")},250)},$referrer:t.$el}),!1}}]),this.goTo=function(){return function(e,t){var n,i,a,s,c;if(i=o[0].page,"string"==typeof t)for(s=0,c=r.length;c>s;s++)if(n=r[s],n.name===t){t=n;break}if("string"==typeof e){if(a=$(e),!a.length)return void b(e,{animation:t});e=a}return d(i,e,t)?void 0:(console.warn("Could not animate pages."),!1)}}(this),this.goBack=function(){return function(e){var t,n,i,r,a,s,c;if(o.length<1&&console.warn("History is empty."),1===o.length&&(console.warn("You are on the first panel."),window.history.go(-1)),"number"==typeof e)e>0?o.splice(1,e):0>e&&o.splice(1,o.length+e-1);else if(/^#.+/.test(e)){for(t=0,r=s=0,c=o.length;c>s;r=++s)if(i=o[r],i.hash===e){t=r;break}o.splice(1,t-1)}return n=o[0],a=o[1],null!=n&&null!=a?d(n.page,a.page,n.animation,!0)?void 0:(console.warn("Could not go back."),!1):void 0}}(this),this.history=o,h=function(e){return function(){var t,n,r,o,a,s,c;for(c=e.settings.preloadImages,a=0,s=c.length;s>a;a++)n=c[a],(new Image).src=e.settings.preloadImages[n];return t=[],r=e.settings.addGlossToIcon?"":"-precomposed",e.settings.icon&&t.push('<link rel="apple-touch-icon'+r+'" href="'+e.settings.icon+'">'),e.settings.icon4&&t.push('<link rel="apple-touch-icon'+r+'" sizes="114x114" href="'+e.settings.icon4+'">'),e.settings.startupScreen&&t.push('<link rel="apple-touch-startup-image" href="'+e.settings.startupScreen+'">'),o=[],e.settings.fixedViewport&&o.push("initial-scale=1.0","maximum-scale=1.0","user-scalable=0"),e.settings.minimalUIViewport&&o.push("minimal-ui"),o&&t.push('<meta name="viewport" content="'+o.join(", ")+'">'),e.settings.fullScreen&&(t.push('<meta name="apple-mobile-web-app-capable" content="yes" />'),e.settings.statusBar&&t.push('<meta name="apple-mobile-web-app-status-bar-style" content="'+e.settings.statusBar+'">')),t.length?i.prepend(t.join("")):void 0}}(this),g=function(e){return function(n,i){var r;return r=null,$(n).each(function(){var e;return e=$(this),e.attr("id")||e.attr("id","page-"+ ++a),$("#"+e.attr("id")).remove(),t.append(e),t.trigger("pageInserted",{page:e}),e.hasClass("current")||!r?r=e:void 0}),null==r?!1:void e.goTo(r,i)}}(this),l=function(e,t){var n;return n=e.attr("id"),o.unshift({page:e,animation:t,hash:"#"+n,id:n})},u=function(){return function(e){var t;t=$(e.target),t.is(c.join(", "))||(t=t.closest(c.join(", "))),t&&t.attr("href")&&!m(t)?(console.warn("Need to prevent default click behavior."),e.preventDefault()):console.warn("No need to prevent default click behavior."),E.touch||(console.warn("Converting click event to a tap event because touch handlers are not present or off."),$(e.target).trigger("tap",e))}}(this),f=function(e){return function(){return location.hash===o[0].hash?(console.log("We are on the right panel."),!0):""===location.hash?(e.goBack(),!0):o[1]&&location.hash===o[1].hash?(e.goBack(),!0):(console.warn("Could not find ID in history, just forwarding to DOM element."),void e.goTo($(location.hash),e.settings.defaultAnimation))}}(this),m=function(e){return"_blank"===e.attr("target")||"external"===e.attr("rel")||e.is('a[href^="http://maps.google.com"], a[href^="mailto:"], a[href^="tel:"], a[href^="javascript:"], a[href*="youtube.com/v"], a[href*="youtube.com/watch"]')},p=function(e){return function(t){var n,i,o,a;for(o=0,a=r.length;a>o;o++)if(n=r[o],t.is(n.selector)){i=n;break}return i||(console.warn("Animation could not be found. Using "+e.settings.defaultAnimation+"."),i=e.settings.defaultAnimation),i}}(this),b=function(e){return function(t,n){return n=$.extend({},{data:null,method:"GET",animation:null,$referrer:null},n),"#"!==t.charAt(0)?$.ajax({url:t,data:n.data,type:n.method,success:function(t){var i;return i=g(t,n.animation),i&&"GET"===n.method&&e.settings.cacheGetRequests===!0&&n.$referrer?n.$referrer.attr("href","#"+i.attr("id")):void 0},error:function(){return n.$referrer?n.$referrer.removeClass("active"):void 0}}):n.$referrer?n.$referrer.removeClass("active"):void 0}}(this),E=void 0,w=function(e){return function(){var r,o,a,s,d,p,h;for(E=$.support||{},$.extend(E,{animationEvents:"undefined"!=typeof window.WebKitAnimationEvent,touch:"undefined"!=typeof window.TouchEvent&&window.navigator.userAgent.indexOf("Mobile")>-1&&e.settings.useFastTouch,transform3d:function(){var e,t,n,r,o;return n=i.get(0),e=document.body,o=document.createElement("style"),o.textContent="@media (transform-3d),(-o-transform-3d),(-moz-transform-3d),(-webkit-transform-3d){#jqt-3dtest{height:3px}}",t=document.createElement("div"),t.id="jqt-3dtest",n.appendChild(o),e.appendChild(t),r=3===t.offsetHeight,o.parentNode.removeChild(o),t.parentNode.removeChild(t),console.warn("Support for 3d transforms: "+r+"."),r}}),E.touch||console.warn("This device does not support touch interaction, or it has been deactivated by the developer. Some features might be unavailable."),E.transform3d||console.warn("This device does not support 3d animation. 2d animations will be used instead."),h=e.extensions,d=0,p=h.length;p>d;d++)a=h[d],$.isFunction(a)&&$.extend(e,a(e));return c.push(e.settings.touchSelector.concat(e.settings.backSelector,e.settings.submitSelector)),r=$(c.join(", ")).css("-webkit-touch-callout","none"),t=$("#jqt"),o=[],t.length||(console.warn('Could not find an element with the id \u201cjqt\u201d, so the body id has been set to "jqt". If you are having any problems, wrapping your panels in a div with the id \u201cjqt\u201d might help.'),t=$(document.body).attr("id","jqt")),E.transform3d&&o.push("supports3d"),o.push(e.settings.useTouchScroll?"touchscroll":"autoscroll"),e.settings.fullScreenClass&&window.navigator.standalone&&o.push(e.settings.fullScreenClass,e.settings.statusBar),t.addClass(o.join(" ")).on("click",u).on("orientationchange",v).on("submit",A).on("tap",T).on(E.touch?"touchstart":"mousedown",S).trigger("orientationchange"),e.settings.updateHash&&$(window).on("hashchange",f),s=location.hash,n=$("#jqt > .current").length?$("#jqt > .current"):$("#jqt > *:first-child").addClass("current"),_(n.attr("id")),l(n),e.settings.updateHash&&$(s).length?e.goTo(s):void 0}}(this),v=function(){var e;return scrollTo(0,0),e=90===Math.abs(window.orientation)?"landscape":"portrait",t.removeClass("portrait landscape").addClass(e).trigger("turn",{orientation:e})},y=function(e){var t;return t={up:"down",down:"up",left:"right",right:"left","in":"out",out:"in"},t[e]||e},_=function(e){return function(t){return e.settings.updateHash?location.hash="#"+t.replace(/^#/,""):void 0}}(this),A=function(e){return function(t,n){var i;return $(":focus").trigger("blur"),i="string"==typeof t?$(t).eq(0):$(t.target?t.target:t),i.length&&i.is(e.settings.formSelector)&&i.attr("action")?(t.preventDefault(),b(i.attr("action"),{data:i.serialize(),method:i.attr("method")||"POST",animation:p(i),callback:n})):void 0}}(this),C=function(e){var t;return t=e.closest("form"),t.length?(console.warn("About to submit parent form."),t.trigger("submit"),!1):(console.warn("No parent form found."),!0)},T=function(e){return function(t){var n,i,r,o,a,s,l,u,d,p,f;if(t.isDefaultPrevented())return!0;if(n=$(t.target),l=c.join(","),n.is(l)||(n=n.closest(l)),!n.length||!n.attr("href"))return console.warn("Could not find a link related to tapped element."),!0;for(u=n.attr("target"),o=n.prop("hash"),a=n.attr("href"),s={e:t,$el:n,target:u,hash:o,href:a},f=e.tapHandlers,d=0,p=f.length;p>d;d++)if(r=f[d],r.isSupported(t,s))return i=r.fn(t,s)}}(this),S=function(e){var t,n;return t=$(e.target),n=c.join(", "),t.is(n)||(t=t.closest(n)),t.length&&t.attr("href")&&t.addClass("active"),t.on(E.touch?"touchmove":"mousemove",function(){return t.removeClass("active")}),t.on("touchend",function(){return t.off("touchend mouseup"),t.off("touchmove mousemove")})},d=function(e){return function(i,r,a,c){var u,d,p;return null==c&&(c=!1),p=function(){return E.animationEvents&&a&&e.settings.useAnimations?(i.off("webkitAnimationEnd",p),i.removeClass(u+" out"),u&&r.removeClass(u),t.removeClass("animating animating3d")):(i.removeClass(u+" out"),u&&r.removeClass(u)),setTimeout(function(){return r.removeClass("in"),window.scroll(0,0)},s),i.find(".active").removeClass("active"),r.trigger("pageAnimationEnd",{direction:"in",animation:a,back:c}),i.trigger("pageAnimationEnd",{direction:"out",animation:a,back:c})},r.length?r.hasClass("current")?($(".active").removeClass("active"),console.warn("You are already on the page you are trying to navigate to."),!1):($(":focus").trigger("blur"),i.trigger("pageAnimationStart",{direction:"out",back:c}),r.trigger("pageAnimationStart",{direction:"in",back:c}),E.animationEvents&&a&&e.settings.useAnimations?(u=a.name,d=a.is3d?" animating3d":"",!E.transform3d&&a.is3d&&(console.warn("Did not detect support for 3d animations, falling back to "+e.settings.defaultAnimation+"."),u=e.settings.defaultAnimation,d=""),c&&(u=u.replace(/left|right|up|down|in|out/,y)),null==u&&(u=e.settings.defaultAnimation),console.warn("finalAnimationName:",u),i.on("webkitAnimationEnd",p),t.addClass("animating"+d),r.addClass(u+" in current"),i.removeClass("current").addClass(u+" out")):(r.addClass("current in"),i.removeClass("current"),p()),n=r,c?o.shift():l(n,a),_(n.attr("id")),!0):($(".active").removeClass("active"),console.warn("Target element is missing."),!1)}}(this),this.settings=$.extend({},this.defaults,e),h(),this.settings.starter(w)}var t,n,i,r,o,a,s,c;return e.prototype.extensions=[],e.prototype.animations=[{name:"cubeleft",selector:".cubeleft, .cube",is3d:!0},{name:"cuberight",selector:".cuberight",is3d:!0},{name:"dissolve",selector:".dissolve"},{name:"fade",selector:".fade"},{name:"flipleft",selector:".flipleft, .flip",is3d:!0},{name:"flipright",selector:".flipright",is3d:!0},{name:"pop",selector:".pop",is3d:!0},{name:"swapleft",selector:".swapleft, .swap",is3d:!0},{name:"swapright",selector:".swapright",is3d:!0},{name:"slidedown",selector:".slidedown"},{name:"slideright",selector:".slideright"},{name:"slideup",selector:".slideup"},{name:"slideleft",selector:".slideleft, .slide, #jqt > * > ul li a"}],e.prototype.orientation="portrait",e.prototype.tapHandlers=[],e.prototype.defaults={addGlossToIcon:!0,backSelector:".back, .cancel, .goback",cacheGetRequests:!0,defaultAnimation:"slideleft",fixedViewport:!0,formSelector:"form",fullScreen:!0,fullScreenClass:"fullscreen",icon:null,icon4:null,minimalUIViewport:!0,preloadImages:!1,starter:$(document).ready,startupScreen:null,statusBar:"default",submitSelector:".submit",touchSelector:"a, .touch",updateHash:!0,useAnimations:!0,useFastTouch:!0,useTouchScroll:!0},e.addExtension=function(e){return this.prototype.extensions.push(e)},e.addTapHandler=function(e){return"string"==typeof e.name&&"function"==typeof e.isSupported&&"function"==typeof e.fn?this.prototype.tapHandlers.push(e):void 0},e.addAnimation=function(e){return"string"==typeof e.selector&&"string"==typeof e.name?this.animations.push(e):void 0},t=void 0,i=$("head"),r=e.prototype.animations,o=[],a=0,n="",c=[],s=100,e}(),$.jQTouch=$.jQT}.call(this),!function(e){if(e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return e;var t=/^(https?:)?\/\//i,n=/^get|post$/i,i=new RegExp("^(//|"+location.protocol+")","i");return e.ajaxTransport("* text html xml json",function(r,o){if(r.crossDomain&&r.async&&n.test(r.type)&&t.test(r.url)&&i.test(r.url)){var a=null;return{send:function(t,n){var i="",s=(o.dataType||"").toLowerCase();a=new XDomainRequest,/^\d+$/.test(o.timeout)&&(a.timeout=o.timeout),a.ontimeout=function(){n(500,"timeout")},a.onload=function(){var t="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,i={code:200,message:"success"},r={text:a.responseText};try{if("html"===s||/text\/html/i.test(a.contentType))r.html=a.responseText;else if("json"===s||"text"!==s&&/\/json/i.test(a.contentType))try{r.json=e.parseJSON(a.responseText)}catch(o){i.code=500,i.message="parseerror"}else if("xml"===s||"text"!==s&&/\/xml/i.test(a.contentType)){var c=new ActiveXObject("Microsoft.XMLDOM");c.async=!1;try{c.loadXML(a.responseText)}catch(o){c=void 0}if(!c||!c.documentElement||c.getElementsByTagName("parsererror").length)throw i.code=500,i.message="parseerror","Invalid XML: "+a.responseText;r.xml=c}}catch(l){throw l}finally{n(i.code,i.message,r,t)}},a.onprogress=function(){},a.onerror=function(){n(500,"error",{text:a.responseText})},o.data&&(i="string"===e.type(o.data)?o.data:e.param(o.data)),a.open(r.type,r.url),a.send(i)},abort:function(){a&&a.abort()}}}}),e}($);var global=window;/**
 * @license OpenTok.js 2.12.2 7d8c59b Detached: 7d8c59bd3d71cbb294373e652b62d3c18ffc89e6
 *
 * Copyright (c) 2010-2017 TokBox, Inc.
 * Subject to the applicable Software Development Kit (SDK) License Agreement:
 * https://tokbox.com/support/sdk_license
 *
 * Date: November 13 20:09:24 2017
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.OT=e()}}(function(){var define,module,exports;return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t){(function(n){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function i(e,t){if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);o>r;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return i>n?-1:n>i?1:0}function r(e){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function a(e){return r(e)?!1:"function"!=typeof n.ArrayBuffer?!1:"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e?e instanceof DataView?!0:e.buffer&&e.buffer instanceof ArrayBuffer?!0:!1:!1}function s(e){if(b.isFunction(e)){if(C)return e.name;var t=e.toString(),n=t.match(T);return n&&n[1]}}function c(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function l(e){if(C||!b.isFunction(e))return b.inspect(e);var t=s(e),n=t?": "+t:"";return"[Function"+n+"]"}function u(e){return c(l(e.actual),128)+" "+e.operator+" "+c(l(e.expected),128)}function d(e,t,n,i,r){throw new E.AssertionError({message:n,actual:e,expected:t,operator:i,stackStartFunction:r})}function p(e,t){e||d(e,!0,t,"==",E.ok)}function f(e,t,n,s){if(e===t)return!0;if(r(e)&&r(t))return 0===i(e,t);if(b.isDate(e)&&b.isDate(t))return e.getTime()===t.getTime();if(b.isRegExp(e)&&b.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(a(e)&&a(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(r(e)!==r(t))return!1;s=s||{actual:[],expected:[]};var c=s.actual.indexOf(e);return-1!==c&&c===s.expected.indexOf(t)?!0:(s.actual.push(e),s.expected.push(t),g(e,t,n,s))}return n?e===t:e==t}function h(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function g(e,t,n,i){if(null===e||void 0===e||null===t||void 0===t)return!1;if(b.isPrimitive(e)||b.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var r=h(e),o=h(t);if(r&&!o||!r&&o)return!1;if(r)return e=A.call(e),t=A.call(t),f(e,t,n);var a,s,c=S(e),l=S(t);if(c.length!==l.length)return!1;for(c.sort(),l.sort(),s=c.length-1;s>=0;s--)if(c[s]!==l[s])return!1;for(s=c.length-1;s>=0;s--)if(a=c[s],!f(e[a],t[a],n,i))return!1;return!0}function m(e,t,n){f(e,t,!0)&&d(e,t,n,"notDeepStrictEqual",m)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function y(e){var t;try{e()}catch(n){t=n}return t}function _(e,t,n,i){var r;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=y(t),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),e&&!r&&d(r,n,"Missing expected exception"+i);var o="string"==typeof i,a=!e&&b.isError(r),s=!e&&r&&!n;if((a&&o&&v(r,n)||s)&&d(r,n,"Got unwanted exception"+i),e&&r&&n&&!v(r,n)||!e&&r)throw r}// Copyright (c) 2009 Thomas Robinson <280north.com>
// The above copyright notice and this permission notice shall be included in
var b=e("util/"),w=Object.prototype.hasOwnProperty,A=Array.prototype.slice,C=function(){return"foo"===function(){}.name}(),E=t.exports=p,T=/\s*function\s+([^\(\s]*)\s*/;E.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=u(this),this.generatedMessage=!0);var t=e.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var i=n.stack,r=s(t),o=i.indexOf("\n"+r);if(o>=0){var a=i.indexOf("\n",o+1);i=i.substring(a+1)}this.stack=i}}},b.inherits(E.AssertionError,Error),E.fail=d,E.ok=p,E.equal=function(e,t,n){e!=t&&d(e,t,n,"==",E.equal)},E.notEqual=function(e,t,n){e==t&&d(e,t,n,"!=",E.notEqual)},E.deepEqual=function(e,t,n){f(e,t,!1)||d(e,t,n,"deepEqual",E.deepEqual)},E.deepStrictEqual=function(e,t,n){f(e,t,!0)||d(e,t,n,"deepStrictEqual",E.deepStrictEqual)},E.notDeepEqual=function(e,t,n){f(e,t,!1)&&d(e,t,n,"notDeepEqual",E.notDeepEqual)},E.notDeepStrictEqual=m,E.strictEqual=function(e,t,n){e!==t&&d(e,t,n,"===",E.strictEqual)},E.notStrictEqual=function(e,t,n){e===t&&d(e,t,n,"!==",E.notStrictEqual)},E["throws"]=function(e,t,n){_(!0,e,t,n)},E.doesNotThrow=function(e,t,n){_(!1,e,t,n)},E.ifError=function(e){if(e)throw e};var S=Object.keys||function(e){var t=[];for(var n in e)w.call(e,n)&&t.push(n);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":200}],2:[function(e,t,n){(function(e,i){/* @preserve
 * The MIT License (MIT)
 *
 * Copyright (c) 2013-2017 Petka Antonov
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 */
!function(e){if("object"==typeof n&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof i?r=i:"undefined"!=typeof self&&(r=self),r.Promise=e()}}(function(){var t,n,r;return function o(e,t,n){function i(a,s){if(!t[a]){if(!e[a]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=t[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,o,e,t,n)}return t[a].exports}for(var r="function"==typeof _dereq_&&_dereq_,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t){"use strict";t.exports=function(e){function t(e){var t=new n(e),i=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),i}var n=e._SomePromiseArray;e.any=function(e){return t(e)},e.prototype.any=function(){return t(this)}}},{}],2:[function(t,n){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new u(16),this._normalQueue=new u(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=l}function r(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function o(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function a(e){this._normalQueue._pushOne(e),this._queueTick()}var s;try{throw new Error}catch(c){s=c}var l=t("./schedule"),u=t("./queue"),d=t("./util");i.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){d.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},d.hasDevTools?(i.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?r.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},i.prototype.invoke=function(e,t,n){this._trampolineEnabled?o.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},i.prototype.settlePromises=function(e){this._trampolineEnabled?a.call(this,e):this._schedule(function(){e._settlePromises()})}):(i.prototype.invokeLater=r,i.prototype.invoke=o,i.prototype.settlePromises=a),i.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),i=e.shift();t.call(n,i)}else t._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=s},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t){"use strict";t.exports=function(e,t,n,i){var r=!1,o=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0===(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){r||(r=!0,e.prototype._propagateFrom=i.propagateFromFunction(),e.prototype._boundValue=i.boundValueFunction());var l=n(o),u=new e(t);u._propagateFrom(this,1);var d=this._target();if(u._setBoundTo(l),l instanceof e){var p={promiseRejectionQueued:!1,promise:u,target:d,bindingPromise:l};d._then(t,a,void 0,u,p),l._then(s,c,void 0,u,p),u._setOnCancel(l)}else u._resolveCallback(d);return u},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t){"use strict";function n(){try{Promise===r&&(Promise=i)}catch(e){}return r}var i;"undefined"!=typeof Promise&&(i=Promise);var r=e("./promise")();r.noConflict=n,t.exports=r},{"./promise":22}],5:[function(e,t){"use strict";var n=Object.create;if(n){var i=n(null),r=n(null);i[" size"]=r[" size"]=0}t.exports=function(t){function n(e,n){var i;if(null!=e&&(i=e[n]),"function"!=typeof i){var r="Object "+s.classString(e)+" has no method '"+s.toString(n)+"'";throw new t.TypeError(r)}return i}function i(e){var t=this.pop(),i=n(e,t);return i.apply(e,this)}function r(e){return e[this]}function o(e){var t=+this;return 0>t&&(t=Math.max(0,t+e.length)),e[t]}{var a,s=e("./util"),c=s.canEvaluate;s.isIdentifier}t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(i,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=o;else if(c){var i=a(e);t=null!==i?i:r}else t=r;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t){"use strict";t.exports=function(t,n,i,r){var o=e("./util"),a=o.tryCatch,s=o.errorObj,c=t._async;t.prototype["break"]=t.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var i=a(e).call(this._boundValue());i===s&&(this._attachExtraTrace(i.e),c.throwLater(i.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t){"use strict";t.exports=function(t){function n(e,n,s){return function(c){var l=s._boundValue();e:for(var u=0;u<e.length;++u){var d=e[u];if(d===Error||null!=d&&d.prototype instanceof Error){if(c instanceof d)return o(n).call(l,c)}else if("function"==typeof d){var p=o(d).call(l,c);if(p===a)return p;if(p)return o(n).call(l,c)}else if(i.isObject(c)){for(var f=r(d),h=0;h<f.length;++h){var g=f[h];if(d[g]!=c[g])continue e}return o(n).call(l,c)}}return t}}var i=e("./util"),r=e("./es5").keys,o=i.tryCatch,a=i.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(e,t){"use strict";t.exports=function(e){function t(){this._trace=new t.CapturedTrace(i())}function n(){return r?new t:void 0}function i(){var e=o.length-1;return e>=0?o[e]:void 0}var r=!1,o=[];return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},t.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},t.prototype._popContext=function(){if(void 0!==this._trace){var e=o.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},t.CapturedTrace=null,t.create=n,t.deactivateLongStackTraces=function(){},t.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,c=e.prototype._promiseCreated;t.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=c,r=!1},r=!0,e.prototype._pushContext=t.prototype._pushContext,e.prototype._popContext=t.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},t}},{}],9:[function(t,n){"use strict";n.exports=function(n,i){function r(e,t){return{promise:t}}function o(){return!1}function a(e,t,n){var i=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+F.toString(e));i._attachCancellationCallback(e)})}catch(r){return r}}function s(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?F.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function c(){return this._onCancelField}function l(e){this._onCancelField=e}function u(){this._cancellationParent=void 0,this._onCancelField=void 0}function d(e,t){if(0!==(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function p(e,t){0!==(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}function f(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function h(){this._trace=new O(this._peekContext())}function g(e,t){if(U(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var i=E(e);F.notEnumerableProp(e,"stack",i.message+"\n"+i.stack.join("\n")),F.notEnumerableProp(e,"__stackCleaned__",!0)}}}function m(e,t,n,i,r){if(void 0===e&&null!==t&&q){if(void 0!==r&&r._returnedNonUndefined())return;if(0===(65535&i._bitField))return;n&&(n+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),c=A(s),l=c.length-1;l>=0;--l){var u=c[l];if(!V.test(u)){var d=u.match(W);d&&(o="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(c.length>0)for(var p=c[0],l=0;l<s.length;++l)if(s[l]===p){l>0&&(a="\n"+s[l-1]);break}}var f="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;i._warn(f,!0,t)}}function v(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),y(n)}function y(e,t,i){if(at.warnings){var r,o=new B(e);if(t)i._attachExtraTrace(o);else if(at.longStackTraces&&(r=n._peekContext()))r.attachExtraTrace(o);else{var a=E(o);o.stack=a.message+"\n"+a.stack.join("\n")}tt("warning",o)||T(o,"",!0)}}function _(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}function b(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}function w(e){for(var t=e[0],n=1;n<e.length;++n){for(var i=e[n],r=t.length-1,o=t[r],a=-1,s=i.length-1;s>=0;--s)if(i[s]===o){a=s;break}for(var s=a;s>=0;--s){var c=i[s];if(t[r]!==c)break;t.pop(),r--}t=i}}function A(e){for(var t=[],n=0;n<e.length;++n){var i=e[n],r="    (No stack trace)"===i||z.test(i),o=r&&it(i);r&&!o&&(G&&" "!==i.charAt(0)&&(i="    "+i),t.push(i))}return t}function C(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var i=t[n];if("    (No stack trace)"===i||z.test(i))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}function E(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?C(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:A(t)}}function T(e,t,n){if("undefined"!=typeof console){var i;if(F.isObject(e)){var r=e.stack;i=t+$(r,e)}else i=t+String(e);"function"==typeof L?L(i,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(i)}}function S(e,t,n,i){var r=!1;try{"function"==typeof t&&(r=!0,"rejectionHandled"===e?t(i):t(n,i))}catch(o){M.throwLater(o)}"unhandledRejection"===e?tt(e,n,i)||r||T(n,"Unhandled rejection "):tt(e,i)}function x(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():F.toString(e);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(t))try{var i=JSON.stringify(e);t=i}catch(r){}0===t.length&&(t="(empty array)")}return"(<"+j(t)+">, no stack trace)"}function j(e){var t=41;return e.length<t?e:e.substr(0,t-3)+"..."}function k(){return"function"==typeof ot}function R(e){var t=e.match(rt);return t?{fileName:t[1],line:parseInt(t[2],10)}:void 0}function I(e,t){if(k()){for(var n,i,r=e.stack.split("\n"),o=t.stack.split("\n"),a=-1,s=-1,c=0;c<r.length;++c){var l=R(r[c]);if(l){n=l.fileName,a=l.line;break}}for(var c=0;c<o.length;++c){var l=R(o[c]);if(l){i=l.fileName,s=l.line;break}}0>a||0>s||!n||!i||n!==i||a>=s||(it=function(e){if(H.test(e))return!0;var t=R(e);return t&&t.fileName===n&&a<=t.line&&t.line<=s?!0:!1})}}function O(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);ot(this,O),t>32&&this.uncycle()}var P,D,L,N=n._getDomain,M=n._async,B=t("./errors").Warning,F=t("./util"),U=F.canAttachTrace,H=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,V=/\((?:timers\.js):\d+:\d+\)/,W=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,z=null,$=null,G=!1,Y=!(0==F.env("BLUEBIRD_DEBUG")),Q=!(0==F.env("BLUEBIRD_WARNINGS")||!Y&&!F.env("BLUEBIRD_WARNINGS")),J=!(0==F.env("BLUEBIRD_LONG_STACK_TRACES")||!Y&&!F.env("BLUEBIRD_LONG_STACK_TRACES")),q=0!=F.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Q||!!F.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){S("rejectionHandled",P,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),S("unhandledRejection",D,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return y(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=N();D="function"==typeof e?null===t?e:F.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=N();P="function"==typeof e?null===t?e:F.domainBind(t,e):void 0};var X=function(){};n.longStackTraces=function(){if(M.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!at.longStackTraces&&k()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;at.longStackTraces=!0,X=function(){if(M.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,i.deactivateLongStackTraces(),M.enableTrampoline(),at.longStackTraces=!1},n.prototype._captureStackTrace=h,n.prototype._attachExtraTrace=g,i.activateLongStackTraces(),M.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return at.longStackTraces&&k()};var K=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return F.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!F.global.dispatchEvent(n)}}if("function"==typeof Event){var e=new Event("CustomEvent");return F.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!F.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),F.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!F.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),Z=function(){return F.isNode?function(){return e.emit.apply(e,arguments)}:F.global?function(e){var t="on"+e.toLowerCase(),n=F.global[t];return n?(n.apply(F.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),et={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:r},tt=function(e){var t=!1;try{t=Z.apply(null,arguments)}catch(n){M.throwLater(n),t=!0}var i=!1;try{i=K(e,et[e].apply(null,arguments))}catch(n){M.throwLater(n),i=!0}return i||t};n.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&X()),"warnings"in e){var t=e.warnings;at.warnings=!!t,q=at.warnings,F.isObject(t)&&"wForgottenReturn"in t&&(q=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!at.cancellation){if(M.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=u,n.prototype._propagateFrom=d,n.prototype._onCancel=c,n.prototype._setOnCancel=l,n.prototype._attachCancellationCallback=s,n.prototype._execute=a,nt=d,at.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!at.monitoring?(at.monitoring=!0,n.prototype._fireEvent=tt):!e.monitoring&&at.monitoring&&(at.monitoring=!1,n.prototype._fireEvent=o)),n},n.prototype._fireEvent=o,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(i){return i}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(){},n.prototype._attachCancellationCallback=function(){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(){};var nt=p,it=function(){return!1},rt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;F.inherits(O,Error),i.CapturedTrace=O,O.prototype.uncycle=function(){var e=this._length;if(!(2>e)){for(var t=[],n={},i=0,r=this;void 0!==r;++i)t.push(r),r=r._parent;e=this._length=i;for(var i=e-1;i>=0;--i){var o=t[i].stack;void 0===n[o]&&(n[o]=i)}for(var i=0;e>i;++i){var a=t[i].stack,s=n[a];if(void 0!==s&&s!==i){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[i]._parent=void 0,t[i]._length=1;var c=i>0?t[i-1]:this;e-1>s?(c._parent=t[s+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var l=c._length+1,u=i-2;u>=0;--u)t[u]._length=l,l++;return}}}},O.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=E(e),n=t.message,i=[t.stack],r=this;void 0!==r;)i.push(A(r.stack.split("\n"))),r=r._parent;w(i),b(i),F.notEnumerableProp(e,"stack",_(n,i)),F.notEnumerableProp(e,"__stackCleaned__",!0)}};var ot=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():x(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,z=e,$=t;var n=Error.captureStackTrace;return it=function(e){return H.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return z=/@/,$=t,G=!0,function(e){e.stack=(new Error).stack};var r;try{throw new Error}catch(o){r="stack"in o}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?($=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?x(t):t.toString()},null):(z=e,$=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(L=function(e){console.warn(e)},F.isNode&&e.stderr.isTTY?L=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:F.isNode||"string"!=typeof(new Error).stack||(L=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var at={warnings:Q,longStackTraces:!1,cancellation:!1,monitoring:!1};return J&&n.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return nt},boundValueFunction:function(){return f},checkForgottenReturns:m,setBounds:I,warn:y,deprecated:v,CapturedTrace:O,fireDomEvent:K,fireGlobalEvent:Z}}},{"./errors":12,"./util":36}],10:[function(e,t){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype["return"]=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype["throw"]=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],i=function(){throw t};return this.caught(e,i)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var i=arguments[1];i instanceof e&&i.suppressUnhandledRejections();var r=function(){return i};return this.caught(n,r)}}},{}],11:[function(e,t){"use strict";t.exports=function(e,t){function n(){return o(this)}function i(e,n){return r(e,n,t,t)}var r=e.reduce,o=e.all;e.prototype.each=function(e){return r(this,e,t,0)._then(n,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,i){return r(e,i,t,0)._then(n,void 0,void 0,e,void 0)},e.mapSeries=i}},{}],12:[function(e,t){"use strict";function n(e,t){function n(i){return this instanceof n?(u(this,"message","string"==typeof i?i:t),u(this,"name",e),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(i)}return l(n,Error),n}function i(e){return this instanceof i?(u(this,"name","OperationalError"),u(this,"message",e),this.cause=e,this.isOperational=!0,void(e instanceof Error?(u(this,"message",e.message),u(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(e)}var r,o,a=e("./es5"),s=a.freeze,c=e("./util"),l=c.inherits,u=c.notEnumerableProp,d=n("Warning","warning"),p=n("CancellationError","cancellation error"),f=n("TimeoutError","timeout error"),h=n("AggregateError","aggregate error");try{r=TypeError,o=RangeError}catch(g){r=n("TypeError","type error"),o=n("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<m.length;++v)"function"==typeof Array.prototype[m[v]]&&(h.prototype[m[v]]=Array.prototype[m[v]]);a.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var y=0;h.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var i=this[n]===this?"[Circular AggregateError]":this[n]+"",r=i.split("\n"),o=0;o<r.length;++o)r[o]=e+r[o];i=r.join("\n"),t+=i+"\n"}return y--,t},l(i,Error);var _=Error.__BluebirdErrorTypes__;_||(_=s({CancellationError:p,TimeoutError:f,OperationalError:i,RejectionError:i,AggregateError:h}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:o,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[function(e,t){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,r={}.toString,o={}.constructor.prototype,a=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t},s=function(e,t){return{value:e[t]}},c=function(e,t,n){return e[t]=n.value,e},l=function(e){return e},u=function(e){try{return Object(e).constructor.prototype}catch(t){return o}},d=function(e){try{return"[object Array]"===r.call(e)}catch(t){return!1}};t.exports={isArray:d,keys:a,names:a,defineProperty:c,getDescriptor:s,freeze:l,getPrototypeOf:u,isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,i){return n(this,e,i,t)},e.filter=function(e,i,r){return n(e,i,r,t)}}},{}],15:[function(e,t){"use strict";t.exports=function(t,n,i){function r(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function o(e){this.finallyHandler=e}function a(e,t){return null!=e.cancelPromise?(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0):!1}function s(){return l.call(this,this.promise._target()._settledValue())}function c(e){return a(this,e)?void 0:(p.e=e,p)}function l(e){var r=this.promise,l=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?l.call(r._boundValue()):l.call(r._boundValue(),e);if(u===i)return u;if(void 0!==u){r._setReturnedNonUndefined();var f=n(u,r);if(f instanceof t){if(null!=this.cancelPromise){if(f._isCancelled()){var h=new d("late cancellation observer");return r._attachExtraTrace(h),p.e=h,p}f.isPending()&&f._attachCancellationCallback(new o(this))}return f._then(s,c,void 0,this,void 0)}}}return r.isRejected()?(a(this),p.e=e,p):(a(this),e)}var u=e("./util"),d=t.CancellationError,p=u.errorObj,f=e("./catch_filter")(i);return r.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){a(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,i){return"function"!=typeof e?this.then():this._then(n,i,void 0,new r(this,t,e),void 0)},t.prototype.lastly=t.prototype["finally"]=function(e){return this._passThrough(e,0,l,l)},t.prototype.tap=function(e){return this._passThrough(e,1,l)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,l);var i,r=new Array(n-1),o=0;for(i=0;n-1>i;++i){var a=arguments[i];if(!u.isObject(a))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+u.classString(a)));r[o++]=a}r.length=o;var s=arguments[i];return this._passThrough(f(r,s,this),1,void 0,l)},r}},{"./catch_filter":7,"./util":36}],16:[function(e,t){"use strict";t.exports=function(t,n,i,r,o,a){function s(e,n,i){for(var o=0;o<n.length;++o){i._pushContext();var a=f(n[o])(e);if(i._popContext(),a===p){i._pushContext();var s=t.reject(p.e);return i._popContext(),s}var c=r(a,i);if(c instanceof t)return c}return null}function c(e,n,r,o){if(a.cancellation()){var s=new t(i),c=this._finallyPromise=new t(i);this._promise=s.lastly(function(){return c}),s._captureStackTrace(),s._setOnCancel(this)}else{var l=this._promise=new t(i);l._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}var l=e("./errors"),u=l.TypeError,d=e("./util"),p=d.errorObj,f=d.tryCatch,h=[];d.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),e=f(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var i=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=i,this._promise._attachExtraTrace(i),this._promise._pushContext(),e=f(this._generator["throw"]).call(this._generator,i),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},c.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=f(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},c.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=f(this._generator["throw"]).call(this._generator,e);this._promise._popContext(),this._continue(t)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(e){var n=this._promise;if(e===p)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var i=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(i);var o=r(i,this._promise);if(!(o instanceof t)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(i))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var a=o._bitField;0===(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},t.coroutine=function(e,t){if("function"!=typeof e)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,i=c,r=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new i(void 0,void 0,n,r),a=o.promise();return o._generator=t,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new u("expecting a function but got "+d.classString(e));h.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=new c(e,this),r=i.promise();return i._run(t.spawn),r}}},{"./errors":12,"./util":36}],17:[function(e,t){"use strict";
t.exports=function(t,n,i,r,o,a){{var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj}t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t];var i}var r=[].slice.call(arguments);e&&r.pop();var i=new n(r).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t){"use strict";t.exports=function(t,n,i,r,o,a){function s(e,t,n,i){this.constructor$(e),this._promise._captureStackTrace();var r=l();this._callback=null===r?t:u.domainBind(r,t),this._preservedValues=i===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function c(e,n,r,o){if("function"!=typeof n)return i("expecting a function but got "+u.classString(n));var a=0;if(void 0!==r){if("object"!=typeof r||null===r)return t.reject(new TypeError("options argument must be an object but it is "+u.classString(r)));if("number"!=typeof r.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(r.concurrency)));a=r.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(e,n,a,o).promise()}var l=t._getDomain,u=e("./util"),d=u.tryCatch,p=u.errorObj,f=t._async;u.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(e,n){var i=this._values,o=this.length(),s=this._preservedValues,c=this._limit;if(0>n){if(n=-1*n-1,i[n]=e,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return i[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var l=this._promise,u=this._callback,f=l._boundValue();l._pushContext();var h=d(u).call(f,e,n,o),g=l._popContext();if(a.checkForgottenReturns(h,g,null!==s?"Promise.filter":"Promise.map",l),h===p)return this._reject(h.e),!0;var m=r(h,this._promise);if(m instanceof t){m=m._target();var v=m._bitField;if(0===(50397184&v))return c>=1&&this._inFlight++,i[n]=m,m._proxy(this,-1*(n+1)),!1;if(0===(33554432&v))return 0!==(16777216&v)?(this._reject(m._reason()),!0):(this._cancel(),!0);h=m._value()}i[n]=h}var y=++this._totalResolved;return y>=o?(null!==s?this._filter(i,s):this._resolve(i),!0):!1},s.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var i=e.pop();this._promiseFulfilled(n[i],i)}},s.prototype._filter=function(e,t){for(var n=t.length,i=new Array(n),r=0,o=0;n>o;++o)e[o]&&(i[r++]=t[o]);i.length=r,this._resolve(i)},s.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return c(this,e,t,null)},t.map=function(e,t,n,i){return c(e,t,n,i)}}},{"./util":36}],19:[function(e,t){"use strict";t.exports=function(t,n,i,r,o){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var i=new t(n);i._captureStackTrace(),i._pushContext();var r=s(e).apply(this,arguments),a=i._popContext();return o.checkForgottenReturns(r,a,"Promise.method",i),i._resolveFromSyncValue(r),i}},t.attempt=t["try"]=function(e){if("function"!=typeof e)return r("expecting a function but got "+a.classString(e));var i=new t(n);i._captureStackTrace(),i._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];c=a.isArray(l)?s(e).apply(u,l):s(e).call(u,l)}else c=s(e)();var d=i._popContext();return o.checkForgottenReturns(c,d,"Promise.try",i),i._resolveFromSyncValue(c),i},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t){"use strict";function n(e){return e instanceof Error&&l.getPrototypeOf(e)===Error.prototype}function i(e){var t;if(n(e)){t=new c(e),t.name=e.name,t.message=e.message,t.stack=e.stack;for(var i=l.keys(e),r=0;r<i.length;++r){var a=i[r];u.test(a)||(t[a]=e[a])}return t}return o.markAsOriginatingFromRejection(e),e}function r(e,t){return function(n,r){if(null!==e){if(n){var o=i(a(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(r);e=null}}}var o=e("./util"),a=o.maybeWrapAsError,s=e("./errors"),c=s.OperationalError,l=e("./es5"),u=/^(?:name|message|stack|cause)$/;t.exports=r},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t){"use strict";t.exports=function(t){function n(e,t){var n=this;if(!o.isArray(e))return i.call(n,e,t);var r=s(t).apply(n._boundValue(),[null].concat(e));r===c&&a.throwLater(r.e)}function i(e,t){var n=this,i=n._boundValue(),r=void 0===e?s(t).call(i,null):s(t).call(i,null,e);r===c&&a.throwLater(r.e)}function r(e,t){var n=this;if(!e){var i=new Error(e+"");i.cause=e,e=i}var r=s(t).call(n._boundValue(),e);r===c&&a.throwLater(r.e)}var o=e("./util"),a=t._async,s=o.tryCatch,c=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var o=i;void 0!==t&&Object(t).spread&&(o=n),this._then(o,r,void 0,this,e)}return this}}},{"./util":36}],22:[function(t,n){"use strict";n.exports=function(){function i(){}function r(e,t){if(null==e||e.constructor!==o)throw new _("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new _("expecting a function but got "+h.classString(t))}function o(e){e!==w&&r(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(e){this.promise._resolveCallback(e)}function s(e){this.promise._rejectCallback(e,!1)}function c(e){var t=new o(w);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}var l,u=function(){return new _("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},d=function(){return new o.PromiseInspection(this._target())},p=function(e){return o.reject(new _(e))},f={},h=t("./util");l=h.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},h.notEnumerableProp(o,"_getDomain",l);var g=t("./es5"),m=t("./async"),v=new m;g.defineProperty(o,"_async",{value:v});var y=t("./errors"),_=o.TypeError=y.TypeError;o.RangeError=y.RangeError;var b=o.CancellationError=y.CancellationError;o.TimeoutError=y.TimeoutError,o.OperationalError=y.OperationalError,o.RejectionError=y.OperationalError,o.AggregateError=y.AggregateError;var w=function(){},A={},C={},E=t("./thenables")(o,w),T=t("./promise_array")(o,w,E,p,i),S=t("./context")(o),x=S.create,j=t("./debuggability")(o,S),k=(j.CapturedTrace,t("./finally")(o,E,C)),R=t("./catch_filter")(C),I=t("./nodeback"),O=h.errorObj,P=h.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype["catch"]=function(e){var t=arguments.length;if(t>1){var n,i=new Array(t-1),r=0;for(n=0;t-1>n;++n){var o=arguments[n];if(!h.isObject(o))return p("Catch statement predicate: expecting an object but got "+h.classString(o));i[r++]=o}return i.length=r,e=arguments[n],this.then(void 0,R(i,e,this))}return this.then(void 0,e)},o.prototype.reflect=function(){return this._then(d,d,void 0,this,void 0)},o.prototype.then=function(e,t){if(j.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+h.classString(e);arguments.length>1&&(n+=", "+h.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},o.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},o.prototype.spread=function(e){return"function"!=typeof e?p("expecting a function but got "+h.classString(e)):this.all()._then(e,void 0,void 0,A,void 0)},o.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new T(this).promise()},o.prototype.error=function(e){return this.caught(h.originatesFromRejection,e)},o.getNewLibraryCopy=n.exports,o.is=function(e){return e instanceof o},o.fromNode=o.fromCallback=function(e){var t=new o(w);t._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,i=P(e)(I(t,n));return i===O&&t._rejectCallback(i.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},o.all=function(e){return new T(e).promise()},o.cast=function(e){var t=E(e);return t instanceof o||(t=new o(w),t._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(e){var t=new o(w);return t._captureStackTrace(),t._rejectCallback(e,!0),t},o.setScheduler=function(e){if("function"!=typeof e)throw new _("expecting a function but got "+h.classString(e));return v.setScheduler(e)},o.prototype._then=function(e,t,n,i,r){var a=void 0!==r,s=a?r:new o(w),c=this._target(),u=c._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===i&&0!==(2097152&this._bitField)&&(i=0!==(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var d=l();if(0!==(50397184&u)){var p,f,g=c._settlePromiseCtx;0!==(33554432&u)?(f=c._rejectionHandler0,p=e):0!==(16777216&u)?(f=c._fulfillmentHandler0,p=t,c._unsetRejectionIsUnhandled()):(g=c._settlePromiseLateCancellationObserver,f=new b("late cancellation observer"),c._attachExtraTrace(f),p=t),v.invoke(g,c,{handler:null===d?p:"function"==typeof p&&h.domainBind(d,p),promise:s,receiver:i,value:f})}else c._addCallbacks(e,t,s,i,d);return s},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},o.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];return t===f?void 0:void 0===t&&this._isBound()?this._boundValue():t},o.prototype._promiseAt=function(e){return this[4*e-4+2]},o.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},o.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(e){var t=(e._bitField,e._fulfillmentHandler0),n=e._rejectionHandler0,i=e._promise0,r=e._receiverAt(0);void 0===r&&(r=f),this._addCallbacks(t,n,i,r,null)},o.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),i=e._rejectionHandlerAt(t),r=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=f),this._addCallbacks(n,i,r,o,null)},o.prototype._addCallbacks=function(e,t,n,i,r){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=i,"function"==typeof e&&(this._fulfillmentHandler0=null===r?e:h.domainBind(r,e)),"function"==typeof t&&(this._rejectionHandler0=null===r?t:h.domainBind(r,t));else{var a=4*o-4;this[a+2]=n,this[a+3]=i,"function"==typeof e&&(this[a+0]=null===r?e:h.domainBind(r,e)),"function"==typeof t&&(this[a+1]=null===r?t:h.domainBind(r,t))}return this._setLength(o+1),o},o.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},o.prototype._resolveCallback=function(e,t){if(0===(117506048&this._bitField)){if(e===this)return this._rejectCallback(u(),!1);var n=E(e,this);if(!(n instanceof o))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target();if(i===this)return void this._reject(u());var r=i._bitField;if(0===(50397184&r)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;a>s;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!==(33554432&r))this._fulfill(i._value());else if(0!==(16777216&r))this._reject(i._reason());else{var c=new b("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}},o.prototype._rejectCallback=function(e,t,n){var i=h.ensureErrorObject(e),r=i===e;if(!r&&!n&&j.warnings()){var o="a promise was rejected with a non-error: "+h.classString(e);this._warn(o,!0)}this._attachExtraTrace(i,t?r:!1),this._reject(e)},o.prototype._resolveFromExecutor=function(e){if(e!==w){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,i=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==i&&t._rejectCallback(i,!0)}},o.prototype._settlePromiseFromHandler=function(e,t,n,i){var r=i._bitField;if(0===(65536&r)){i._pushContext();var o;t===A?n&&"number"==typeof n.length?o=P(e).apply(this._boundValue(),n):(o=O,o.e=new _("cannot .spread() a non-array: "+h.classString(n))):o=P(e).call(t,n);var a=i._popContext();r=i._bitField,0===(65536&r)&&(o===C?i._reject(n):o===O?i._rejectCallback(o.e,!1):(j.checkForgottenReturns(o,a,"",i,this),i._resolveCallback(o)))}},o.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(e){this._rejectionHandler0=e},o.prototype._settlePromise=function(e,t,n,r){var a=e instanceof o,s=this._bitField,c=0!==(134217728&s);0!==(65536&s)?(a&&e._invokeInternalOnCancel(),n instanceof k&&n.isFinallyHandler()?(n.cancelPromise=e,P(t).call(n,r)===O&&e._reject(O.e)):t===d?e._fulfill(d.call(n)):n instanceof i?n._promiseCancelled(e):a||e instanceof T?e._cancel():n.cancel()):"function"==typeof t?a?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof i?n._isResolved()||(0!==(33554432&s)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):a&&(c&&e._setAsyncGuaranteed(),0!==(33554432&s)?e._fulfill(r):e._reject(r))},o.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,i=e.receiver,r=e.value;"function"==typeof t?n instanceof o?this._settlePromiseFromHandler(t,i,r,n):t.call(i,r,n):n instanceof o&&n._reject(r)},o.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},o.prototype._settlePromise0=function(e,t){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,i,t)},o.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},o.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!==(134217728&t)?this._settlePromises():v.settlePromises(this))}},o.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16))return this._setRejected(),this._fulfillmentHandler0=e,this._isFinal()?v.fatalError(e,h.isNode):void((65535&t)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled())},o.prototype._fulfillPromises=function(e,t){for(var n=1;e>n;n++){var i=this._fulfillmentHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,t)}},o.prototype._rejectPromises=function(e,t){for(var n=1;e>n;n++){var i=this._rejectionHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,t)}},o.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!==(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,e),this._fulfillPromises(t,i)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var e=this._bitField;return 0!==(33554432&e)?this._rejectionHandler0:0!==(16777216&e)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){j.deprecated("Promise.defer","new Promise");var e=new o(w);return{promise:e,resolve:a,reject:s}},h.notEnumerableProp(o,"_makeSelfResolutionError",u),t("./method")(o,w,E,p,j),t("./bind")(o,w,E,j),t("./cancel")(o,T,p,j),t("./direct_resolve")(o),t("./synchronous_inspection")(o),t("./join")(o,T,E,w,v,l),o.Promise=o,o.version="3.5.1",t("./map.js")(o,T,p,E,w,j),t("./call_get.js")(o),t("./using.js")(o,p,E,x,w,j),t("./timers.js")(o,w,j),t("./generators.js")(o,p,w,E,i,j),t("./nodeify.js")(o),t("./promisify.js")(o,w),t("./props.js")(o,T,E,p),t("./race.js")(o,w,E,p),t("./reduce.js")(o,T,p,E,w,j),t("./settle.js")(o,T,j),t("./some.js")(o,T,p),t("./filter.js")(o,w),t("./each.js")(o,w),t("./any.js")(o),h.toFastProperties(o),h.toFastProperties(o.prototype),c({a:1}),c({b:2}),c({c:3}),c(1),c(function(){}),c(void 0),c(!1),c(new o(w)),j.setBounds(m.firstLineError,h.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t){"use strict";t.exports=function(t,n,i,r,o){function a(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}function s(e){var i=this._promise=new t(n);e instanceof t&&i._propagateFrom(e,3),i._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}{var c=e("./util");c.isArray}return c.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function l(e,n){var o=i(this._values,this._promise);if(o instanceof t){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(l,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=c.asArray(o),null===o){var u=r("expecting an array or an iterable object but got "+c.classString(o)).reason();return void this._promise._rejectCallback(u,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(a(n))):void this._iterate(o)},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var r=this._promise,o=!1,a=null,s=0;n>s;++s){var c=i(e[s],r);c instanceof t?(c=c._target(),a=c._bitField):a=null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0===(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!==(33554432&a)?this._promiseFulfilled(c._value(),s):0!==(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||r._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t){"use strict";t.exports=function(t,n){function i(e){return!A.test(e)}function r(e){try{return e.__isPromisified__===!0}catch(t){return!1}}function o(e,t,n){var i=f.getDataPropertyOrDefault(e,t+n,b);return i?r(i):!1}function a(e,t,n){for(var i=0;i<e.length;i+=2){var r=e[i];if(n.test(r))for(var o=r.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}function s(e,t,n,i){for(var s=f.inheritedDataKeys(e),c=[],l=0;l<s.length;++l){var u=s[l],d=e[u],p=i===C?!0:C(u,d,e);"function"!=typeof d||r(d)||o(e,u,t)||!i(u,d,e,p)||c.push(u,d)}return a(c,t,n),c}function c(e,i,r,o,a,s){function c(){var r=i;i===p&&(r=this);var o=new t(n);o._captureStackTrace();var a="string"==typeof u&&this!==l?this[u]:e,c=h(o,s);try{a.apply(r,g(arguments,c))}catch(d){o._rejectCallback(m(d),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var l=function(){return this}(),u=e;return"string"==typeof u&&(e=o),f.notEnumerableProp(c,"__isPromisified__",!0),c}function l(e,t,n,i,r){for(var o=new RegExp(E(t)+"$"),a=s(e,t,o,n),c=0,l=a.length;l>c;c+=2){var u=a[c],d=a[c+1],h=u+t;if(i===T)e[h]=T(u,p,u,d,t,r);else{var g=i(d,function(){return T(u,p,u,d,t,r)});f.notEnumerableProp(g,"__isPromisified__",!0),e[h]=g}}return f.toFastProperties(e),e}function u(e,t,n){return T(e,t,void 0,e,null,n)}var d,p={},f=e("./util"),h=e("./nodeback"),g=f.withAppended,m=f.maybeWrapAsError,v=f.canEvaluate,y=e("./errors").TypeError,_="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],A=new RegExp("^(?:"+w.join("|")+")$"),C=function(e){return f.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e},E=function(e){return e.replace(/([$])/,"\\$")},T=v?d:c;t.promisify=function(e,t){if("function"!=typeof e)throw new y("expecting a function but got "+f.classString(e));if(r(e))return e;t=Object(t);var n=void 0===t.context?p:t.context,o=!!t.multiArgs,a=u(e,n,o);return f.copyDescriptors(e,a,i),a},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");t=Object(t);var n=!!t.multiArgs,i=t.suffix;"string"!=typeof i&&(i=_);var r=t.filter;"function"!=typeof r&&(r=C);var o=t.promisifier;if("function"!=typeof o&&(o=T),!f.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=f.inheritedDataKeys(e),s=0;s<a.length;++s){var c=e[a[s]];"constructor"!==a[s]&&f.isClass(c)&&(l(c.prototype,i,r,o,n),l(c,i,r,o,n))}return l(e,i,r,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t){"use strict";t.exports=function(t,n,i,r){function o(e){var t,n=!1;if(void 0!==s&&e instanceof s)t=d(e),n=!0;else{var i=u.keys(e),r=i.length;t=new Array(2*r);for(var o=0;r>o;++o){var a=i[o];t[o]=e[a],t[o+r]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function a(e){var n,a=i(e);return l(a)?(n=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof t&&n._propagateFrom(a,2),n):r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,c=e("./util"),l=c.isObject,u=e("./es5");"function"==typeof Map&&(s=Map);var d=function(){function e(e,i){this[t]=e,this[t+n]=i,t++}var t=0,n=0;return function(i){n=i.size,t=0;var r=new Array(2*i.size);return i.forEach(e,r),r}}(),p=function(e){for(var t=new s,n=e.length/2|0,i=0;n>i;++i){var r=e[n+i],o=e[i];t.set(r,o)}return t};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var i;if(this._isMap)i=p(this._values);else{i={};for(var r=this.length(),o=0,a=this.length();a>o;++o)i[this._values[o+r]]=this._values[o]}return this._resolve(i),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return a(this)},t.props=function(e){return a(e)}}},{"./es5":13,"./util":36}],26:[function(e,t){"use strict";function n(e,t,n,i,r){for(var o=0;r>o;++o)n[o+i]=e[o+t],e[o+t]=void 0}function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},i.prototype.push=function(e,t,n){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var r=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[r+0&o]=e,this[r+1&o]=t,this[r+2&o]=n,this._length=i},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var i=this._front,r=this._length,o=i+r&t-1;n(this,0,this,t,o)},t.exports=i},{}],27:[function(e,t){"use strict";t.exports=function(t,n,i,r){function o(e,o){var c=i(e);if(c instanceof t)return s(c);if(e=a.asArray(e),null===e)return r("expecting an array or an iterable object but got "+a.classString(e));var l=new t(n);void 0!==o&&l._propagateFrom(o,3);for(var u=l._fulfill,d=l._reject,p=0,f=e.length;f>p;++p){var h=e[p];(void 0!==h||p in e)&&t.cast(h)._then(u,d,void 0,l,null)}return l}var a=e("./util"),s=function(e){return e.then(function(t){return o(t,e)})};t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(e,t){"use strict";t.exports=function(t,n,i,r,o,a){function s(e,n,i,r){this.constructor$(e);var a=p();this._fn=null===a?n:f.domainBind(a,n),void 0!==i&&(i=t.resolve(i),i._attachCancellationCallback(this)),this._initialValue=i,this._currentCancellable=null,this._eachValues=r===o?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function l(e,t,n,r){if("function"!=typeof t)return i("expecting a function but got "+f.classString(t));var o=new s(e,t,n,r);return o.promise()}function u(e){this.accum=e,this.array._gotAccum(e);var n=r(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(e){var n=this.array,i=n._promise,r=h(n._fn);i._pushContext();var o;o=void 0!==n._eachValues?r.call(i._boundValue(),e,this.index,this.length):r.call(i._boundValue(),this.accum,e,this.index,this.length),o instanceof t&&(n._currentCancellable=o);var s=i._popContext();return a.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i),o}var p=t._getDomain,f=e("./util"),h=f.tryCatch;f.inherits(s,n),s.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},s.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},s.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},s.prototype._iterate=function(e){this._values=e;var n,i,r=e.length;if(void 0!==this._initialValue?(n=this._initialValue,i=0):(n=t.resolve(e[0]),i=1),this._currentCancellable=n,!n.isRejected())for(;r>i;++i){var o={accum:null,value:e[i],index:i,length:r,array:this};n=n._then(u,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},t.prototype.reduce=function(e,t){return l(this,e,t,null)},t.reduce=function(e,t,n,i){return l(e,t,n,i)}}},{"./util":36}],29:[function(t,n){"use strict";var r,o=t("./util"),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},s=o.getNativePromise();if(o.isNode&&"undefined"==typeof MutationObserver){var c=i.setImmediate,l=e.nextTick;r=o.isRecentNode?function(e){c.call(i,e)}:function(t){l.call(e,t)}}else if("function"==typeof s&&"function"==typeof s.resolve){var u=s.resolve();r=function(e){u.then(e)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:a:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,i=document.createElement("div"),r=new MutationObserver(function(){e.classList.toggle("foo"),n=!1});r.observe(i,t);var o=function(){n||(n=!0,i.classList.toggle("foo"))};return function(n){var i=new MutationObserver(function(){i.disconnect(),n()});i.observe(e,t),o()}}();n.exports=r},{"./util":36}],30:[function(e,t){"use strict";t.exports=function(t,n,i){function r(e){this.constructor$(e)}var o=t.PromiseInspection,a=e("./util");a.inherits(r,n),r.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},r.prototype._promiseFulfilled=function(e,t){var n=new o;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},r.prototype._promiseRejected=function(e,t){var n=new o;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return i.deprecated(".settle()",".reflect()"),new r(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t){"use strict";t.exports=function(t,n,i){function r(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(e,t){if((0|t)!==t||0>t)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new r(e),o=n.promise();return n.setHowMany(t),n.init(),o}var a=e("./util"),s=e("./errors").RangeError,c=e("./errors").AggregateError,l=a.isArray,u={};a.inherits(r,n),r.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var e=l(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},r.prototype.init=function(){this._initialized=!0,this._init()},r.prototype.setUnwrap=function(){this._unwrap=!0},r.prototype.howMany=function(){return this._howMany},r.prototype.setHowMany=function(e){this._howMany=e},r.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values),!0):!1},r.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},r.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},r.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new c,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},r.prototype._fulfilled=function(){return this._totalResolved},r.prototype._rejected=function(){return this._values.length-this.length()
},r.prototype._addRejected=function(e){this._values.push(e)},r.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},r.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},r.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},r.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return o(e,t)},t.prototype.some=function(e){return o(this,e)},t._SomePromiseArray=r}},{"./errors":12,"./util":36}],32:[function(e,t){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return r.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),i.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t){"use strict";t.exports=function(t,n){function i(e,i){if(u(e)){if(e instanceof t)return e;var r=o(e);if(r===l){i&&i._pushContext();var c=t.reject(r.e);return i&&i._popContext(),c}if("function"==typeof r){if(a(e)){var c=new t(n);return e._then(c._fulfill,c._reject,void 0,c,null),c}return s(e,r,i)}}return e}function r(e){return e.then}function o(e){try{return r(e)}catch(t){return l.e=t,l}}function a(e){try{return d.call(e,"_promise0")}catch(t){return!1}}function s(e,i,r){function o(e){s&&(s._resolveCallback(e),s=null)}function a(e){s&&(s._rejectCallback(e,d,!0),s=null)}var s=new t(n),u=s;r&&r._pushContext(),s._captureStackTrace(),r&&r._popContext();var d=!0,p=c.tryCatch(i).call(e,o,a);return d=!1,s&&p===l&&(s._rejectCallback(p.e,!0,!0),s=null),u}var c=e("./util"),l=c.errorObj,u=c.isObject,d={}.hasOwnProperty;return i}},{"./util":36}],34:[function(e,t){"use strict";t.exports=function(t,n,i){function r(e){this.handle=e}function o(e){return clearTimeout(this.handle),e}function a(e){throw clearTimeout(this.handle),e}var s=e("./util"),c=t.TimeoutError;r.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(e){return u(+this).thenReturn(e)},u=t.delay=function(e,o){var a,s;return void 0!==o?(a=t.resolve(o)._then(l,null,null,e,void 0),i.cancellation()&&o instanceof t&&a._setOnCancel(o)):(a=new t(n),s=setTimeout(function(){a._fulfill()},+e),i.cancellation()&&a._setOnCancel(new r(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};t.prototype.delay=function(e){return u(e,this)};var d=function(e,t,n){var i;i="string"!=typeof t?t instanceof Error?t:new c("operation timed out"):new c(t),s.markAsOriginatingFromRejection(i),e._attachExtraTrace(i),e._reject(i),null!=n&&n.cancel()};t.prototype.timeout=function(e,t){e=+e;var n,s,c=new r(setTimeout(function(){n.isPending()&&d(n,t,s)},e));return i.cancellation()?(s=this.then(),n=s._then(o,a,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,a,void 0,c,void 0),n}}},{"./util":36}],35:[function(e,t){"use strict";t.exports=function(t,n,i,r,o,a){function s(e){setTimeout(function(){throw e},0)}function c(e){var t=i(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}function l(e,n){function r(){if(a>=l)return u._fulfill();var o=c(e[a++]);if(o instanceof t&&o._isDisposable()){try{o=i(o._getDisposer().tryDispose(n),e.promise)}catch(d){return s(d)}if(o instanceof t)return o._then(r,s,null,null,null)}r()}var a=0,l=e.length,u=new t(o);return r(),u}function u(e,t,n){this._data=e,this._promise=t,this._context=n}function d(e,t,n){this.constructor$(e,t,n)}function p(e){return u.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function f(e){this.length=e,this.promise=null,this[e-1]=null}var h=e("./util"),g=e("./errors").TypeError,m=e("./util").inherits,v=h.errorObj,y=h.tryCatch,_={};u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():_},u.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var i=t!==_?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,i},u.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},m(d,u),d.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},f.prototype._resultCancelled=function(){for(var e=this.length,n=0;e>n;++n){var i=this[n];i instanceof t&&i.cancel()}},t.using=function(){var e=arguments.length;if(2>e)return n("you must pass at least 2 arguments to Promise.using");var r=arguments[e-1];if("function"!=typeof r)return n("expecting a function but got "+h.classString(r));var o,s=!0;2===e&&Array.isArray(arguments[0])?(o=arguments[0],e=o.length,s=!1):(o=arguments,e--);for(var c=new f(e),d=0;e>d;++d){var g=o[d];if(u.isDisposer(g)){var m=g;g=g.promise(),g._setDisposable(m)}else{var _=i(g);_ instanceof t&&(g=_._then(p,null,null,{resources:c,index:d},void 0))}c[d]=g}for(var b=new Array(c.length),d=0;d<b.length;++d)b[d]=t.resolve(c[d]).reflect();var w=t.all(b).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return v.e=n.error(),v;if(!n.isFulfilled())return void w.cancel();e[t]=n.value()}A._pushContext(),r=y(r);var i=s?r.apply(void 0,e):r(e),o=A._popContext();return a.checkForgottenReturns(i,o,"Promise.using",A),i}),A=w.lastly(function(){var e=new t.PromiseInspection(w);return l(c,e)});return c.promise=A,A._setOnCancel(c),A},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new d(e,this,r());throw new g}}},{"./errors":12,"./util":36}],36:[function(t,n,r){"use strict";function o(){try{var e=I;return I=null,e.apply(this,arguments)}catch(t){return R.e=t,R}}function a(e){return I=e,o}function s(e){return null==e||e===!0||e===!1||"string"==typeof e||"number"==typeof e}function c(e){return"function"==typeof e||"object"==typeof e&&null!==e}function l(e){return s(e)?new Error(y(e)):e}function u(e,t){var n,i=e.length,r=new Array(i+1);for(n=0;i>n;++n)r[n]=e[n];return r[n]=t,r}function d(e,t,n){if(!j.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var i=Object.getOwnPropertyDescriptor(e,t);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function p(e,t,n){if(s(e))return e;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return j.defineProperty(e,t,i),e}function f(e){throw e}function h(e){try{if("function"==typeof e){var t=j.names(e.prototype),n=j.isES5&&t.length>1,i=t.length>0&&!(1===t.length&&"constructor"===t[0]),r=L.test(e+"")&&j.names(e).length>0;if(n||i||r)return!0}return!1}catch(o){return!1}}function g(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}function m(e){return N.test(e)}function v(e,t,n){for(var i=new Array(e),r=0;e>r;++r)i[r]=t+r+n;return i}function y(e){try{return e+""}catch(t){return"[no string representation]"}}function _(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function b(e){try{p(e,"isOperational",!0)}catch(t){}}function w(e){return null==e?!1:e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0}function A(e){return _(e)&&j.propertyIsWritable(e,"stack")}function C(e){return{}.toString.call(e)}function E(e,t,n){for(var i=j.names(e),r=0;r<i.length;++r){var o=i[r];if(n(o))try{j.defineProperty(t,o,j.getDescriptor(e,o))}catch(a){}}}function T(t){return H?e.env[t]:void 0}function S(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(t){}}function x(e,t){return e.bind(t)}var j=t("./es5"),k="undefined"==typeof navigator,R={e:{}},I,O="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof i?i:void 0!==this?this:null,P=function(e,t){function n(){this.constructor=e,this.constructor$=t;for(var n in t.prototype)i.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}var i={}.hasOwnProperty;return n.prototype=t.prototype,e.prototype=new n,e.prototype},D=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(j.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var i=[],r=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(a){return i}for(var s=0;s<o.length;++s){var c=o[s];if(!r[c]){r[c]=!0;var l=Object.getOwnPropertyDescriptor(e,c);null!=l&&null==l.get&&null==l.set&&i.push(c)}}e=j.getPrototypeOf(e)}return i}}var i={}.hasOwnProperty;return function(n){if(t(n))return[];var r=[];e:for(var o in n)if(i.call(n,o))r.push(o);else{for(var a=0;a<e.length;++a)if(i.call(e[a],o))continue e;r.push(o)}return r}}(),L=/this\s*\.\s*\S+\s*=/,N=/^[a-z$_][a-z$_0-9]*$/i,M=function(){return"stack"in new Error?function(e){return A(e)?e:new Error(y(e))}:function(e){if(A(e))return e;try{throw new Error(y(e))}catch(t){return t}}}(),B=function(e){return j.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var F="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],i=e[Symbol.iterator]();!(t=i.next()).done;)n.push(t.value);return n};B=function(e){return j.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?F(e):null}}var U="undefined"!=typeof e&&"[object process]"===C(e).toLowerCase(),H="undefined"!=typeof e&&"undefined"!=typeof e.env,V={isClass:h,isIdentifier:m,inheritedDataKeys:D,getDataPropertyOrDefault:d,thrower:f,isArray:j.isArray,asArray:B,notEnumerableProp:p,isPrimitive:s,isObject:c,isError:_,canEvaluate:k,errorObj:R,tryCatch:a,inherits:P,withAppended:u,maybeWrapAsError:l,toFastProperties:g,filledRange:v,toString:y,canAttachTrace:A,ensureErrorObject:M,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:C,copyDescriptors:E,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:U,hasEnvVariables:H,env:T,global:O,getNativePromise:S,domainBind:x};V.isRecentNode=V.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),V.isNode&&V.toFastProperties(e);try{throw new Error}catch(W){V.lastLineError=W}n.exports=V},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:187}],3:[function(e,t){// Copyright Joyent, Inc. and other Node contributors.
// The above copyright notice and this permission notice shall be included
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,c=0;r>c;c++)l[c].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],4:[function(e,t){var n=e("./_getNative"),i=e("./_root"),r=n(i,"DataView");t.exports=r},{"./_getNative":83,"./_root":128}],5:[function(e,t){function n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var i=e("./_hashClear"),r=e("./_hashDelete"),o=e("./_hashGet"),a=e("./_hashHas"),s=e("./_hashSet");n.prototype.clear=i,n.prototype["delete"]=r,n.prototype.get=o,n.prototype.has=a,n.prototype.set=s,t.exports=n},{"./_hashClear":92,"./_hashDelete":93,"./_hashGet":94,"./_hashHas":95,"./_hashSet":96}],6:[function(e,t){function n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var i=e("./_listCacheClear"),r=e("./_listCacheDelete"),o=e("./_listCacheGet"),a=e("./_listCacheHas"),s=e("./_listCacheSet");n.prototype.clear=i,n.prototype["delete"]=r,n.prototype.get=o,n.prototype.has=a,n.prototype.set=s,t.exports=n},{"./_listCacheClear":108,"./_listCacheDelete":109,"./_listCacheGet":110,"./_listCacheHas":111,"./_listCacheSet":112}],7:[function(e,t){var n=e("./_getNative"),i=e("./_root"),r=n(i,"Map");t.exports=r},{"./_getNative":83,"./_root":128}],8:[function(e,t){function n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var i=e("./_mapCacheClear"),r=e("./_mapCacheDelete"),o=e("./_mapCacheGet"),a=e("./_mapCacheHas"),s=e("./_mapCacheSet");n.prototype.clear=i,n.prototype["delete"]=r,n.prototype.get=o,n.prototype.has=a,n.prototype.set=s,t.exports=n},{"./_mapCacheClear":113,"./_mapCacheDelete":114,"./_mapCacheGet":115,"./_mapCacheHas":116,"./_mapCacheSet":117}],9:[function(e,t){var n=e("./_getNative"),i=e("./_root"),r=n(i,"Promise");t.exports=r},{"./_getNative":83,"./_root":128}],10:[function(e,t){var n=e("./_getNative"),i=e("./_root"),r=n(i,"Set");t.exports=r},{"./_getNative":83,"./_root":128}],11:[function(e,t){function n(e){var t=this.__data__=new i(e);this.size=t.size}var i=e("./_ListCache"),r=e("./_stackClear"),o=e("./_stackDelete"),a=e("./_stackGet"),s=e("./_stackHas"),c=e("./_stackSet");n.prototype.clear=r,n.prototype["delete"]=o,n.prototype.get=a,n.prototype.has=s,n.prototype.set=c,t.exports=n},{"./_ListCache":6,"./_stackClear":132,"./_stackDelete":133,"./_stackGet":134,"./_stackHas":135,"./_stackSet":136}],12:[function(e,t){var n=e("./_root"),i=n.Symbol;t.exports=i},{"./_root":128}],13:[function(e,t){var n=e("./_root"),i=n.Uint8Array;t.exports=i},{"./_root":128}],14:[function(e,t){var n=e("./_getNative"),i=e("./_root"),r=n(i,"WeakMap");t.exports=r},{"./_getNative":83,"./_root":128}],15:[function(e,t){function n(e,t){return e.set(t[0],t[1]),e}t.exports=n},{}],16:[function(e,t){function n(e,t){return e.add(t),e}t.exports=n},{}],17:[function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}t.exports=n},{}],18:[function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}t.exports=n},{}],19:[function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}t.exports=n},{}],20:[function(e,t){function n(e,t){var n=o(e),l=!n&&r(e),d=!n&&!l&&a(e),p=!n&&!l&&!d&&c(e),f=n||l||d||p,h=f?i(e.length,String):[],g=h.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||d&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||h.push(m);return h}var i=e("./_baseTimes"),r=e("./isArguments"),o=e("./isArray"),a=e("./isBuffer"),s=e("./_isIndex"),c=e("./isTypedArray"),l=Object.prototype,u=l.hasOwnProperty;t.exports=n},{"./_baseTimes":52,"./_isIndex":101,"./isArguments":155,"./isArray":156,"./isBuffer":159,"./isTypedArray":167}],21:[function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}t.exports=n},{}],22:[function(e,t){function n(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}t.exports=n},{}],23:[function(e,t){function n(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}t.exports=n},{}],24:[function(e,t){function n(e){return e.split("")}t.exports=n},{}],25:[function(e,t){function n(e,t,n){(void 0!==n&&!r(e[t],n)||void 0===n&&!(t in e))&&i(e,t,n)}var i=e("./_baseAssignValue"),r=e("./eq");t.exports=n},{"./_baseAssignValue":30,"./eq":151}],26:[function(e,t){function n(e,t,n){var o=e[t];a.call(e,t)&&r(o,n)&&(void 0!==n||t in e)||i(e,t,n)}var i=e("./_baseAssignValue"),r=e("./eq"),o=Object.prototype,a=o.hasOwnProperty;t.exports=n},{"./_baseAssignValue":30,"./eq":151}],27:[function(e,t){function n(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}var i=e("./eq");t.exports=n},{"./eq":151}],28:[function(e,t){function n(e,t){return e&&i(t,r(t),e)}var i=e("./_copyObject"),r=e("./keys");t.exports=n},{"./_copyObject":68,"./keys":168}],29:[function(e,t){function n(e,t){return e&&i(t,r(t),e)}var i=e("./_copyObject"),r=e("./keysIn");t.exports=n},{"./_copyObject":68,"./keysIn":169}],30:[function(e,t){function n(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var i=e("./_defineProperty");t.exports=n},{"./_defineProperty":77}],31:[function(e,t){function n(e,t,S,x,j,k){var O,P=t&A,L=t&C,N=t&E;if(S&&(O=j?S(e,x,j,k):S(e)),void 0!==O)return O;if(!b(e))return e;var M=y(e);if(M){if(O=g(e),!P)return l(e,O)}else{var B=h(e),F=B==R||B==I;if(_(e))return c(e,P);if(B==D||B==T||F&&!j){if(O=L||F?{}:v(e),!P)return L?d(e,s(O,e)):u(e,a(O,e))}else{if(!X[B])return j?e:{};O=m(e,B,n,P)}}k||(k=new i);var U=k.get(e);if(U)return U;k.set(e,O);var H=N?L?f:p:L?keysIn:w,V=M?void 0:H(e);return r(V||e,function(i,r){V&&(r=i,i=e[r]),o(O,r,n(i,t,S,r,e,k))}),O}var i=e("./_Stack"),r=e("./_arrayEach"),o=e("./_assignValue"),a=e("./_baseAssign"),s=e("./_baseAssignIn"),c=e("./_cloneBuffer"),l=e("./_copyArray"),u=e("./_copySymbols"),d=e("./_copySymbolsIn"),p=e("./_getAllKeys"),f=e("./_getAllKeysIn"),h=e("./_getTag"),g=e("./_initCloneArray"),m=e("./_initCloneByTag"),v=e("./_initCloneObject"),y=e("./isArray"),_=e("./isBuffer"),b=e("./isObject"),w=e("./keys"),A=1,C=2,E=4,T="[object Arguments]",S="[object Array]",x="[object Boolean]",j="[object Date]",k="[object Error]",R="[object Function]",I="[object GeneratorFunction]",O="[object Map]",P="[object Number]",D="[object Object]",L="[object RegExp]",N="[object Set]",M="[object String]",B="[object Symbol]",F="[object WeakMap]",U="[object ArrayBuffer]",H="[object DataView]",V="[object Float32Array]",W="[object Float64Array]",z="[object Int8Array]",$="[object Int16Array]",G="[object Int32Array]",Y="[object Uint8Array]",Q="[object Uint8ClampedArray]",J="[object Uint16Array]",q="[object Uint32Array]",X={};X[T]=X[S]=X[U]=X[H]=X[x]=X[j]=X[V]=X[W]=X[z]=X[$]=X[G]=X[O]=X[P]=X[D]=X[L]=X[N]=X[M]=X[B]=X[Y]=X[Q]=X[J]=X[q]=!0,X[k]=X[R]=X[F]=!1,t.exports=n},{"./_Stack":11,"./_arrayEach":18,"./_assignValue":26,"./_baseAssign":28,"./_baseAssignIn":29,"./_cloneBuffer":60,"./_copyArray":67,"./_copySymbols":69,"./_copySymbolsIn":70,"./_getAllKeys":80,"./_getAllKeysIn":81,"./_getTag":88,"./_initCloneArray":97,"./_initCloneByTag":98,"./_initCloneObject":99,"./isArray":156,"./isBuffer":159,"./isObject":162,"./keys":168}],32:[function(e,t){var n=e("./isObject"),i=Object.create,r=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();t.exports=r},{"./isObject":162}],33:[function(e,t){function n(e,t,o,a,s){var c=-1,l=e.length;for(o||(o=r),s||(s=[]);++c<l;){var u=e[c];t>0&&o(u)?t>1?n(u,t-1,o,a,s):i(s,u):a||(s[s.length]=u)}return s}var i=e("./_arrayPush"),r=e("./_isFlattenable");t.exports=n},{"./_arrayPush":22,"./_isFlattenable":100}],34:[function(e,t){var n=e("./_createBaseFor"),i=n();t.exports=i},{"./_createBaseFor":73}],35:[function(e,t){function n(e,t){t=i(t,e);for(var n=0,o=t.length;null!=e&&o>n;)e=e[r(t[n++])];return n&&n==o?e:void 0}var i=e("./_castPath"),r=e("./_toKey");t.exports=n},{"./_castPath":57,"./_toKey":139}],36:[function(e,t){function n(e,t,n){var o=t(e);return r(e)?o:i(o,n(e))}var i=e("./_arrayPush"),r=e("./isArray");t.exports=n},{"./_arrayPush":22,"./isArray":156}],37:[function(e,t){function n(e){return null==e?void 0===e?s:a:c&&c in Object(e)?r(e):o(e)}var i=e("./_Symbol"),r=e("./_getRawTag"),o=e("./_objectToString"),a="[object Null]",s="[object Undefined]",c=i?i.toStringTag:void 0;t.exports=n},{"./_Symbol":12,"./_getRawTag":85,"./_objectToString":124}],38:[function(e,t){function n(e,t){return null!=e&&t in Object(e)}t.exports=n},{}],39:[function(e,t){function n(e){return r(e)&&i(e)==o}var i=e("./_baseGetTag"),r=e("./isObjectLike"),o="[object Arguments]";t.exports=n},{"./_baseGetTag":37,"./isObjectLike":163}],40:[function(e,t){function n(e){if(!o(e)||r(e))return!1;var t=i(e)?f:c;return t.test(a(e))}var i=e("./isFunction"),r=e("./_isMasked"),o=e("./isObject"),a=e("./_toSource"),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,d=l.toString,p=u.hasOwnProperty,f=RegExp("^"+d.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"./_isMasked":105,"./_toSource":140,"./isFunction":160,"./isObject":162}],41:[function(e,t){function n(e){return o(e)&&r(e.length)&&!!R[i(e)]}var i=e("./_baseGetTag"),r=e("./isLength"),o=e("./isObjectLike"),a="[object Arguments]",s="[object Array]",c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Function]",p="[object Map]",f="[object Number]",h="[object Object]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",_="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",A="[object Float64Array]",C="[object Int8Array]",E="[object Int16Array]",T="[object Int32Array]",S="[object Uint8Array]",x="[object Uint8ClampedArray]",j="[object Uint16Array]",k="[object Uint32Array]",R={};R[w]=R[A]=R[C]=R[E]=R[T]=R[S]=R[x]=R[j]=R[k]=!0,R[a]=R[s]=R[_]=R[c]=R[b]=R[l]=R[u]=R[d]=R[p]=R[f]=R[h]=R[g]=R[m]=R[v]=R[y]=!1,t.exports=n},{"./_baseGetTag":37,"./isLength":161,"./isObjectLike":163}],42:[function(e,t){function n(e){if(!i(e))return r(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}var i=e("./_isPrototype"),r=e("./_nativeKeys"),o=Object.prototype,a=o.hasOwnProperty;t.exports=n},{"./_isPrototype":106,"./_nativeKeys":121}],43:[function(e,t){function n(e){if(!i(e))return o(e);var t=r(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}var i=e("./isObject"),r=e("./_isPrototype"),o=e("./_nativeKeysIn"),a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_isPrototype":106,"./_nativeKeysIn":122,"./isObject":162}],44:[function(e,t){function n(e,t,l,u,d){e!==t&&o(t,function(o,c){if(s(o))d||(d=new i),a(e,t,c,l,n,u,d);else{var p=u?u(e[c],o,c+"",e,t,d):void 0;void 0===p&&(p=o),r(e,c,p)}},c)}var i=e("./_Stack"),r=e("./_assignMergeValue"),o=e("./_baseFor"),a=e("./_baseMergeDeep"),s=e("./isObject"),c=e("./keysIn");t.exports=n},{"./_Stack":11,"./_assignMergeValue":25,"./_baseFor":34,"./_baseMergeDeep":45,"./isObject":162,"./keysIn":169}],45:[function(e,t){function n(e,t,n,v,y,_,b){var w=e[n],A=t[n],C=b.get(A);if(C)return void i(e,n,C);var E=_?_(w,A,n+"",e,t,b):void 0,T=void 0===E;if(T){var S=l(A),x=!S&&d(A),j=!S&&!x&&g(A);E=A,S||x||j?l(w)?E=w:u(w)?E=a(w):x?(T=!1,E=r(A,!0)):j?(T=!1,E=o(A,!0)):E=[]:h(A)||c(A)?(E=w,c(w)?E=m(w):(!f(w)||v&&p(w))&&(E=s(A))):T=!1}T&&(b.set(A,E),y(E,A,v,_,b),b["delete"](A)),i(e,n,E)}var i=e("./_assignMergeValue"),r=e("./_cloneBuffer"),o=e("./_cloneTypedArray"),a=e("./_copyArray"),s=e("./_initCloneObject"),c=e("./isArguments"),l=e("./isArray"),u=e("./isArrayLikeObject"),d=e("./isBuffer"),p=e("./isFunction"),f=e("./isObject"),h=e("./isPlainObject"),g=e("./isTypedArray"),m=e("./toPlainObject");t.exports=n},{"./_assignMergeValue":25,"./_cloneBuffer":60,"./_cloneTypedArray":66,"./_copyArray":67,"./_initCloneObject":99,"./isArguments":155,"./isArray":156,"./isArrayLikeObject":158,"./isBuffer":159,"./isFunction":160,"./isObject":162,"./isPlainObject":164,"./isTypedArray":167,"./toPlainObject":183}],46:[function(e,t){function n(e,t){return i(e,t,function(t,n){return r(e,n)})}var i=e("./_basePickBy"),r=e("./hasIn");t.exports=n},{"./_basePickBy":47,"./hasIn":153}],47:[function(e,t){function n(e,t,n){for(var a=-1,s=t.length,c={};++a<s;){var l=t[a],u=i(e,l);n(u,l)&&r(c,o(l,e),u)}return c}var i=e("./_baseGet"),r=e("./_baseSet"),o=e("./_castPath");t.exports=n},{"./_baseGet":35,"./_baseSet":49,"./_castPath":57}],48:[function(e,t){function n(e,t){return o(r(e,t,i),e+"")}var i=e("./identity"),r=e("./_overRest"),o=e("./_setToString");t.exports=n},{"./_overRest":126,"./_setToString":130,"./identity":154}],49:[function(e,t){function n(e,t,n,c){if(!a(e))return e;t=r(t,e);for(var l=-1,u=t.length,d=u-1,p=e;null!=p&&++l<u;){var f=s(t[l]),h=n;if(l!=d){var g=p[f];h=c?c(g,f,p):void 0,void 0===h&&(h=a(g)?g:o(t[l+1])?[]:{})}i(p,f,h),p=p[f]}return e}var i=e("./_assignValue"),r=e("./_castPath"),o=e("./_isIndex"),a=e("./isObject"),s=e("./_toKey");t.exports=n},{"./_assignValue":26,"./_castPath":57,"./_isIndex":101,"./_toKey":139,"./isObject":162}],50:[function(e,t){var n=e("./constant"),i=e("./_defineProperty"),r=e("./identity"),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:r;t.exports=o},{"./_defineProperty":77,"./constant":148,"./identity":154}],51:[function(e,t){function n(e,t,n){var i=-1,r=e.length;0>t&&(t=-t>r?0:r+t),n=n>r?r:n,0>n&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}t.exports=n},{}],52:[function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}t.exports=n},{}],53:[function(e,t){function n(e){if("string"==typeof e)return e;if(o(e))return r(e,n)+"";if(a(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var i=e("./_Symbol"),r=e("./_arrayMap"),o=e("./isArray"),a=e("./isSymbol"),s=1/0,c=i?i.prototype:void 0,l=c?c.toString:void 0;t.exports=n},{"./_Symbol":12,"./_arrayMap":21,"./isArray":156,"./isSymbol":166}],54:[function(e,t){function n(e){return function(t){return e(t)}}t.exports=n},{}],55:[function(e,t){function n(e,t){return t=i(t,e),e=o(e,t),null==e||delete e[a(r(t))]}var i=e("./_castPath"),r=e("./last"),o=e("./_parent"),a=e("./_toKey");t.exports=n},{"./_castPath":57,"./_parent":127,"./_toKey":139,"./last":170}],56:[function(e,t){function n(e,t){return i(t,function(t){return e[t]})}var i=e("./_arrayMap");t.exports=n},{"./_arrayMap":21}],57:[function(e,t){function n(e,t){return i(e)?e:r(e,t)?[e]:o(a(e))}var i=e("./isArray"),r=e("./_isKey"),o=e("./_stringToPath"),a=e("./toString");t.exports=n},{"./_isKey":103,"./_stringToPath":138,"./isArray":156,"./toString":184}],58:[function(e,t){function n(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:i(e,t,n)}var i=e("./_baseSlice");t.exports=n},{"./_baseSlice":51}],59:[function(e,t){function n(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}var i=e("./_Uint8Array");t.exports=n},{"./_Uint8Array":13}],60:[function(e,t,n){function i(e,t){if(t)return e.slice();var n=e.length,i=l?l(n):new e.constructor(n);return e.copy(i),i}var r=e("./_root"),o="object"==typeof n&&n&&!n.nodeType&&n,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,c=s?r.Buffer:void 0,l=c?c.allocUnsafe:void 0;t.exports=i},{"./_root":128}],61:[function(e,t){function n(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var i=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":59}],62:[function(e,t){function n(e,t,n){var s=t?n(o(e),a):o(e);return r(s,i,new e.constructor)}var i=e("./_addMapEntry"),r=e("./_arrayReduce"),o=e("./_mapToArray"),a=1;t.exports=n},{"./_addMapEntry":15,"./_arrayReduce":23,"./_mapToArray":118}],63:[function(e,t){function n(e){var t=new e.constructor(e.source,i.exec(e));return t.lastIndex=e.lastIndex,t}var i=/\w*$/;t.exports=n},{}],64:[function(e,t){function n(e,t,n){var s=t?n(o(e),a):o(e);return r(s,i,new e.constructor)}var i=e("./_addSetEntry"),r=e("./_arrayReduce"),o=e("./_setToArray"),a=1;t.exports=n},{"./_addSetEntry":16,"./_arrayReduce":23,"./_setToArray":129}],65:[function(e,t){function n(e){return o?Object(o.call(e)):{}}var i=e("./_Symbol"),r=i?i.prototype:void 0,o=r?r.valueOf:void 0;t.exports=n},{"./_Symbol":12}],66:[function(e,t){function n(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var i=e("./_cloneArrayBuffer");t.exports=n},{"./_cloneArrayBuffer":59}],67:[function(e,t){function n(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}t.exports=n},{}],68:[function(e,t){function n(e,t,n,o){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var l=t[s],u=o?o(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),a?r(n,l,u):i(n,l,u)}return n}var i=e("./_assignValue"),r=e("./_baseAssignValue");t.exports=n},{"./_assignValue":26,"./_baseAssignValue":30}],69:[function(e,t){function n(e,t){return i(e,r(e),t)}var i=e("./_copyObject"),r=e("./_getSymbols");t.exports=n},{"./_copyObject":68,"./_getSymbols":86}],70:[function(e,t){function n(e,t){return i(e,r(e),t)}var i=e("./_copyObject"),r=e("./_getSymbolsIn");t.exports=n},{"./_copyObject":68,"./_getSymbolsIn":87}],71:[function(e,t){var n=e("./_root"),i=n["__core-js_shared__"];t.exports=i},{"./_root":128}],72:[function(e,t){function n(e){return i(function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&r(n[0],n[1],s)&&(a=3>o?void 0:a,o=1),t=Object(t);++i<o;){var c=n[i];c&&e(t,c,i,a)}return t})}var i=e("./_baseRest"),r=e("./_isIterateeCall");t.exports=n},{"./_baseRest":48,"./_isIterateeCall":102}],73:[function(e,t){function n(e){return function(t,n,i){for(var r=-1,o=Object(t),a=i(t),s=a.length;s--;){var c=a[e?s:++r];if(n(o[c],c,o)===!1)break}return t}}t.exports=n},{}],74:[function(e,t){function n(e){return function(t){t=a(t);var n=r(t)?o(t):void 0,s=n?n[0]:t.charAt(0),c=n?i(n,1).join(""):t.slice(1);return s[e]()+c}}var i=e("./_castSlice"),r=e("./_hasUnicode"),o=e("./_stringToArray"),a=e("./toString");t.exports=n},{"./_castSlice":58,"./_hasUnicode":91,"./_stringToArray":137,"./toString":184}],75:[function(e,t){function n(e,t,n,a){return void 0===e||i(e,r[n])&&!o.call(a,n)?t:e}var i=e("./eq"),r=Object.prototype,o=r.hasOwnProperty;t.exports=n},{"./eq":151}],76:[function(e,t){function n(e){return i(e)?void 0:e}var i=e("./isPlainObject");t.exports=n},{"./isPlainObject":164}],77:[function(e,t){var n=e("./_getNative"),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();t.exports=i},{"./_getNative":83}],78:[function(e,t){function n(e){return o(r(e,void 0,i),e+"")}var i=e("./flatten"),r=e("./_overRest"),o=e("./_setToString");t.exports=n},{"./_overRest":126,"./_setToString":130,"./flatten":152}],79:[function(e,t){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],80:[function(e,t){function n(e){return i(e,o,r)}var i=e("./_baseGetAllKeys"),r=e("./_getSymbols"),o=e("./keys");t.exports=n},{"./_baseGetAllKeys":36,"./_getSymbols":86,"./keys":168}],81:[function(e,t){function n(e){return i(e,o,r)}var i=e("./_baseGetAllKeys"),r=e("./_getSymbolsIn"),o=e("./keysIn");t.exports=n},{"./_baseGetAllKeys":36,"./_getSymbolsIn":87,"./keysIn":169}],82:[function(e,t){function n(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}var i=e("./_isKeyable");t.exports=n},{"./_isKeyable":104}],83:[function(e,t){function n(e,t){var n=r(e,t);return i(n)?n:void 0}var i=e("./_baseIsNative"),r=e("./_getValue");t.exports=n},{"./_baseIsNative":40,"./_getValue":89}],84:[function(e,t){var n=e("./_overArg"),i=n(Object.getPrototypeOf,Object);t.exports=i},{"./_overArg":125}],85:[function(e,t){function n(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(r){}var c=a.call(e);return i&&(t?e[s]=n:delete e[s]),c}var i=e("./_Symbol"),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i?i.toStringTag:void 0;t.exports=n},{"./_Symbol":12}],86:[function(e,t){var n=e("./_arrayFilter"),i=e("./stubArray"),r=Object.prototype,o=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),function(t){return o.call(e,t)}))}:i;t.exports=s},{"./_arrayFilter":19,"./stubArray":177}],87:[function(e,t){var n=e("./_arrayPush"),i=e("./_getPrototype"),r=e("./_getSymbols"),o=e("./stubArray"),a=Object.getOwnPropertySymbols,s=a?function(e){for(var t=[];e;)n(t,r(e)),e=i(e);return t}:o;t.exports=s},{"./_arrayPush":22,"./_getPrototype":84,"./_getSymbols":86,"./stubArray":177}],88:[function(e,t){var n=e("./_DataView"),i=e("./_Map"),r=e("./_Promise"),o=e("./_Set"),a=e("./_WeakMap"),s=e("./_baseGetTag"),c=e("./_toSource"),l="[object Map]",u="[object Object]",d="[object Promise]",p="[object Set]",f="[object WeakMap]",h="[object DataView]",g=c(n),m=c(i),v=c(r),y=c(o),_=c(a),b=s;(n&&b(new n(new ArrayBuffer(1)))!=h||i&&b(new i)!=l||r&&b(r.resolve())!=d||o&&b(new o)!=p||a&&b(new a)!=f)&&(b=function(e){var t=s(e),n=t==u?e.constructor:void 0,i=n?c(n):"";if(i)switch(i){case g:return h;case m:return l;case v:return d;case y:return p;case _:return f}return t}),t.exports=b},{"./_DataView":4,"./_Map":7,"./_Promise":9,"./_Set":10,"./_WeakMap":14,"./_baseGetTag":37,"./_toSource":140}],89:[function(e,t){function n(e,t){return null==e?void 0:e[t]}t.exports=n},{}],90:[function(e,t){function n(e,t,n){t=i(t,e);for(var l=-1,u=t.length,d=!1;++l<u;){var p=c(t[l]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++l!=u?d:(u=null==e?0:e.length,!!u&&s(u)&&a(p,u)&&(o(e)||r(e)))}var i=e("./_castPath"),r=e("./isArguments"),o=e("./isArray"),a=e("./_isIndex"),s=e("./isLength"),c=e("./_toKey");t.exports=n},{"./_castPath":57,"./_isIndex":101,"./_toKey":139,"./isArguments":155,"./isArray":156,"./isLength":161}],91:[function(e,t){function n(e){return u.test(e)}var i="\\ud800-\\udfff",r="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=r+o+a,c="\\ufe0e\\ufe0f",l="\\u200d",u=RegExp("["+l+i+s+c+"]");t.exports=n},{}],92:[function(e,t){function n(){this.__data__=i?i(null):{},this.size=0}var i=e("./_nativeCreate");t.exports=n},{"./_nativeCreate":120}],93:[function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n},{}],94:[function(e,t){function n(e){var t=this.__data__;if(i){var n=t[e];return n===r?void 0:n}return a.call(t,e)?t[e]:void 0}var i=e("./_nativeCreate"),r="__lodash_hash_undefined__",o=Object.prototype,a=o.hasOwnProperty;t.exports=n},{"./_nativeCreate":120}],95:[function(e,t){function n(e){var t=this.__data__;return i?void 0!==t[e]:o.call(t,e)}var i=e("./_nativeCreate"),r=Object.prototype,o=r.hasOwnProperty;t.exports=n},{"./_nativeCreate":120}],96:[function(e,t){function n(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?r:t,this}var i=e("./_nativeCreate"),r="__lodash_hash_undefined__";t.exports=n},{"./_nativeCreate":120}],97:[function(e,t){function n(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var i=Object.prototype,r=i.hasOwnProperty;t.exports=n},{}],98:[function(e,t){function n(e,t,n,k){var R=e.constructor;switch(t){case y:return i(e);case u:case d:return new R(+e);case _:return r(e,k);case b:case w:case A:case C:case E:case T:case S:case x:case j:return l(e,k);case p:return o(e,k,n);case f:case m:return new R(e);case h:return a(e);case g:return s(e,k,n);case v:return c(e)}}var i=e("./_cloneArrayBuffer"),r=e("./_cloneDataView"),o=e("./_cloneMap"),a=e("./_cloneRegExp"),s=e("./_cloneSet"),c=e("./_cloneSymbol"),l=e("./_cloneTypedArray"),u="[object Boolean]",d="[object Date]",p="[object Map]",f="[object Number]",h="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",_="[object DataView]",b="[object Float32Array]",w="[object Float64Array]",A="[object Int8Array]",C="[object Int16Array]",E="[object Int32Array]",T="[object Uint8Array]",S="[object Uint8ClampedArray]",x="[object Uint16Array]",j="[object Uint32Array]";t.exports=n},{"./_cloneArrayBuffer":59,"./_cloneDataView":61,"./_cloneMap":62,"./_cloneRegExp":63,"./_cloneSet":64,"./_cloneSymbol":65,"./_cloneTypedArray":66}],99:[function(e,t){function n(e){return"function"!=typeof e.constructor||o(e)?{}:i(r(e))}var i=e("./_baseCreate"),r=e("./_getPrototype"),o=e("./_isPrototype");t.exports=n},{"./_baseCreate":32,"./_getPrototype":84,"./_isPrototype":106}],100:[function(e,t){function n(e){return o(e)||r(e)||!!(a&&e&&e[a])}var i=e("./_Symbol"),r=e("./isArguments"),o=e("./isArray"),a=i?i.isConcatSpreadable:void 0;t.exports=n},{"./_Symbol":12,"./isArguments":155,"./isArray":156}],101:[function(e,t){function n(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||r.test(e))&&e>-1&&e%1==0&&t>e}var i=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=n},{}],102:[function(e,t){function n(e,t,n){if(!a(n))return!1;var s=typeof t;return("number"==s?r(n)&&o(t,n.length):"string"==s&&t in n)?i(n[t],e):!1}var i=e("./eq"),r=e("./isArrayLike"),o=e("./_isIndex"),a=e("./isObject");t.exports=n},{"./_isIndex":101,"./eq":151,"./isArrayLike":157,"./isObject":162}],103:[function(e,t){function n(e,t){if(i(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||r(e)?!0:a.test(e)||!o.test(e)||null!=t&&e in Object(t)}var i=e("./isArray"),r=e("./isSymbol"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=n},{"./isArray":156,"./isSymbol":166}],104:[function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=n},{}],105:[function(e,t){function n(e){return!!r&&r in e}var i=e("./_coreJsData"),r=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=n},{"./_coreJsData":71}],106:[function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||i;return e===n}var i=Object.prototype;t.exports=n},{}],107:[function(e,t){function n(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}t.exports=n},{}],108:[function(e,t){function n(){this.__data__=[],this.size=0}t.exports=n},{}],109:[function(e,t){function n(e){var t=this.__data__,n=i(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():o.call(t,n,1),--this.size,!0}var i=e("./_assocIndexOf"),r=Array.prototype,o=r.splice;t.exports=n},{"./_assocIndexOf":27}],110:[function(e,t){function n(e){var t=this.__data__,n=i(t,e);return 0>n?void 0:t[n][1]}var i=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":27}],111:[function(e,t){function n(e){return i(this.__data__,e)>-1}var i=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":27}],112:[function(e,t){function n(e,t){var n=this.__data__,r=i(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this}var i=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":27}],113:[function(e,t){function n(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}var i=e("./_Hash"),r=e("./_ListCache"),o=e("./_Map");t.exports=n},{"./_Hash":5,"./_ListCache":6,"./_Map":7}],114:[function(e,t){function n(e){var t=i(this,e)["delete"](e);return this.size-=t?1:0,t}var i=e("./_getMapData");t.exports=n},{"./_getMapData":82}],115:[function(e,t){function n(e){return i(this,e).get(e)}var i=e("./_getMapData");t.exports=n},{"./_getMapData":82}],116:[function(e,t){function n(e){return i(this,e).has(e)}var i=e("./_getMapData");t.exports=n},{"./_getMapData":82}],117:[function(e,t){function n(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var i=e("./_getMapData");t.exports=n},{"./_getMapData":82}],118:[function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}t.exports=n},{}],119:[function(e,t){function n(e){var t=i(e,function(e){return n.size===r&&n.clear(),e}),n=t.cache;return t}var i=e("./memoize"),r=500;t.exports=n},{"./memoize":171}],120:[function(e,t){var n=e("./_getNative"),i=n(Object,"create");t.exports=i},{"./_getNative":83}],121:[function(e,t){var n=e("./_overArg"),i=n(Object.keys,Object);t.exports=i},{"./_overArg":125}],122:[function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}t.exports=n},{}],123:[function(e,t,n){var i=e("./_freeGlobal"),r="object"==typeof n&&n&&!n.nodeType&&n,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===r,s=a&&i.process,c=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=c},{"./_freeGlobal":79}],124:[function(e,t){function n(e){return r.call(e)}var i=Object.prototype,r=i.toString;t.exports=n},{}],125:[function(e,t){function n(e,t){return function(n){return e(t(n))}}t.exports=n},{}],126:[function(e,t){function n(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=r(o.length-t,0),c=Array(s);++a<s;)c[a]=o[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=o[a];return l[t]=n(c),i(e,this,l)}}var i=e("./_apply"),r=Math.max;t.exports=n},{"./_apply":17}],127:[function(e,t){function n(e,t){return t.length<2?e:i(e,r(t,0,-1))
}var i=e("./_baseGet"),r=e("./_baseSlice");t.exports=n},{"./_baseGet":35,"./_baseSlice":51}],128:[function(e,t){var n=e("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,r=n||i||Function("return this")();t.exports=r},{"./_freeGlobal":79}],129:[function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}t.exports=n},{}],130:[function(e,t){var n=e("./_baseSetToString"),i=e("./_shortOut"),r=i(n);t.exports=r},{"./_baseSetToString":50,"./_shortOut":131}],131:[function(e,t){function n(e){var t=0,n=0;return function(){var a=o(),s=r-(a-n);if(n=a,s>0){if(++t>=i)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var i=800,r=16,o=Date.now;t.exports=n},{}],132:[function(e,t){function n(){this.__data__=new i,this.size=0}var i=e("./_ListCache");t.exports=n},{"./_ListCache":6}],133:[function(e,t){function n(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}t.exports=n},{}],134:[function(e,t){function n(e){return this.__data__.get(e)}t.exports=n},{}],135:[function(e,t){function n(e){return this.__data__.has(e)}t.exports=n},{}],136:[function(e,t){function n(e,t){var n=this.__data__;if(n instanceof i){var s=n.__data__;if(!r||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}var i=e("./_ListCache"),r=e("./_Map"),o=e("./_MapCache"),a=200;t.exports=n},{"./_ListCache":6,"./_Map":7,"./_MapCache":8}],137:[function(e,t){function n(e){return r(e)?o(e):i(e)}var i=e("./_asciiToArray"),r=e("./_hasUnicode"),o=e("./_unicodeToArray");t.exports=n},{"./_asciiToArray":24,"./_hasUnicode":91,"./_unicodeToArray":141}],138:[function(e,t){var n=e("./_memoizeCapped"),i=/^\./,r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n(function(e){var t=[];return i.test(e)&&t.push(""),e.replace(r,function(e,n,i,r){t.push(i?r.replace(o,"$1"):n||e)}),t});t.exports=a},{"./_memoizeCapped":119}],139:[function(e,t){function n(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}var i=e("./isSymbol"),r=1/0;t.exports=n},{"./isSymbol":166}],140:[function(e,t){function n(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var i=Function.prototype,r=i.toString;t.exports=n},{}],141:[function(e,t){function n(e){return e.match(A)||[]}var i="\\ud800-\\udfff",r="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=r+o+a,c="\\ufe0e\\ufe0f",l="["+i+"]",u="["+s+"]",d="\\ud83c[\\udffb-\\udfff]",p="(?:"+u+"|"+d+")",f="[^"+i+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",v=p+"?",y="["+c+"]?",_="(?:"+m+"(?:"+[f,h,g].join("|")+")"+y+v+")*",b=y+v+_,w="(?:"+[f+u+"?",u,h,g,l].join("|")+")",A=RegExp(d+"(?="+d+")|"+w+b,"g");t.exports=n},{}],142:[function(e,t){var n=e("./_assignValue"),i=e("./_copyObject"),r=e("./_createAssigner"),o=e("./isArrayLike"),a=e("./_isPrototype"),s=e("./keys"),c=Object.prototype,l=c.hasOwnProperty,u=r(function(e,t){if(a(t)||o(t))return void i(t,s(t),e);for(var r in t)l.call(t,r)&&n(e,r,t[r])});t.exports=u},{"./_assignValue":26,"./_copyObject":68,"./_createAssigner":72,"./_isPrototype":106,"./isArrayLike":157,"./keys":168}],143:[function(e,t){var n=e("./_copyObject"),i=e("./_createAssigner"),r=e("./keysIn"),o=i(function(e,t,i,o){n(t,r(t),e,o)});t.exports=o},{"./_copyObject":68,"./_createAssigner":72,"./keysIn":169}],144:[function(e,t){function n(e,t){var n;if("function"!=typeof t)throw new TypeError(r);return e=i(e),function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=void 0),n}}var i=e("./toInteger"),r="Expected a function";t.exports=n},{"./toInteger":181}],145:[function(e,t){function n(e){return r(i(e).toLowerCase())}var i=e("./toString"),r=e("./upperFirst");t.exports=n},{"./toString":184,"./upperFirst":185}],146:[function(e,t){function n(e){return i(e,r)}var i=e("./_baseClone"),r=4;t.exports=n},{"./_baseClone":31}],147:[function(e,t){function n(e){return i(e,r|o)}var i=e("./_baseClone"),r=1,o=4;t.exports=n},{"./_baseClone":31}],148:[function(e,t){function n(e){return function(){return e}}t.exports=n},{}],149:[function(e,t){function n(e,t,n){function l(t){var n=y,i=_;return y=_=void 0,E=t,w=e.apply(i,n)}function u(e){return E=e,A=setTimeout(f,t),T?l(e):w}function d(e){var n=e-C,i=e-E,r=t-n;return S?c(r,b-i):r}function p(e){var n=e-C,i=e-E;return void 0===C||n>=t||0>n||S&&i>=b}function f(){var e=r();return p(e)?h(e):void(A=setTimeout(f,d(e)))}function h(e){return A=void 0,x&&y?l(e):(y=_=void 0,w)}function g(){void 0!==A&&clearTimeout(A),E=0,y=C=_=A=void 0}function m(){return void 0===A?w:h(r())}function v(){var e=r(),n=p(e);if(y=arguments,_=this,C=e,n){if(void 0===A)return u(C);if(S)return A=setTimeout(f,t),l(C)}return void 0===A&&(A=setTimeout(f,t)),w}var y,_,b,w,A,C,E=0,T=!1,S=!1,x=!0;if("function"!=typeof e)throw new TypeError(a);return t=o(t)||0,i(n)&&(T=!!n.leading,S="maxWait"in n,b=S?s(o(n.maxWait)||0,t):b,x="trailing"in n?!!n.trailing:x),v.cancel=g,v.flush=m,v}var i=e("./isObject"),r=e("./now"),o=e("./toNumber"),a="Expected a function",s=Math.max,c=Math.min;t.exports=n},{"./isObject":162,"./now":173,"./toNumber":182}],150:[function(e,t){var n=e("./_apply"),i=e("./assignInWith"),r=e("./_baseRest"),o=e("./_customDefaultsAssignIn"),a=r(function(e){return e.push(void 0,o),n(i,void 0,e)});t.exports=a},{"./_apply":17,"./_baseRest":48,"./_customDefaultsAssignIn":75,"./assignInWith":143}],151:[function(e,t){function n(e,t){return e===t||e!==e&&t!==t}t.exports=n},{}],152:[function(e,t){function n(e){var t=null==e?0:e.length;return t?i(e,1):[]}var i=e("./_baseFlatten");t.exports=n},{"./_baseFlatten":33}],153:[function(e,t){function n(e,t){return null!=e&&r(e,t,i)}var i=e("./_baseHasIn"),r=e("./_hasPath");t.exports=n},{"./_baseHasIn":38,"./_hasPath":90}],154:[function(e,t){function n(e){return e}t.exports=n},{}],155:[function(e,t){var n=e("./_baseIsArguments"),i=e("./isObjectLike"),r=Object.prototype,o=r.hasOwnProperty,a=r.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return i(e)&&o.call(e,"callee")&&!a.call(e,"callee")};t.exports=s},{"./_baseIsArguments":39,"./isObjectLike":163}],156:[function(e,t){var n=Array.isArray;t.exports=n},{}],157:[function(e,t){function n(e){return null!=e&&r(e.length)&&!i(e)}var i=e("./isFunction"),r=e("./isLength");t.exports=n},{"./isFunction":160,"./isLength":161}],158:[function(e,t){function n(e){return r(e)&&i(e)}var i=e("./isArrayLike"),r=e("./isObjectLike");t.exports=n},{"./isArrayLike":157,"./isObjectLike":163}],159:[function(e,t,n){var i=e("./_root"),r=e("./stubFalse"),o="object"==typeof n&&n&&!n.nodeType&&n,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,c=s?i.Buffer:void 0,l=c?c.isBuffer:void 0,u=l||r;t.exports=u},{"./_root":128,"./stubFalse":178}],160:[function(e,t){function n(e){if(!r(e))return!1;var t=i(e);return t==a||t==s||t==o||t==c}var i=e("./_baseGetTag"),r=e("./isObject"),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";t.exports=n},{"./_baseGetTag":37,"./isObject":162}],161:[function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;t.exports=n},{}],162:[function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=n},{}],163:[function(e,t){function n(e){return null!=e&&"object"==typeof e}t.exports=n},{}],164:[function(e,t){function n(e){if(!o(e)||i(e)!=a)return!1;var t=r(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}var i=e("./_baseGetTag"),r=e("./_getPrototype"),o=e("./isObjectLike"),a="[object Object]",s=Function.prototype,c=Object.prototype,l=s.toString,u=c.hasOwnProperty,d=l.call(Object);t.exports=n},{"./_baseGetTag":37,"./_getPrototype":84,"./isObjectLike":163}],165:[function(e,t){function n(e){return"string"==typeof e||!r(e)&&o(e)&&i(e)==a}var i=e("./_baseGetTag"),r=e("./isArray"),o=e("./isObjectLike"),a="[object String]";t.exports=n},{"./_baseGetTag":37,"./isArray":156,"./isObjectLike":163}],166:[function(e,t){function n(e){return"symbol"==typeof e||r(e)&&i(e)==o}var i=e("./_baseGetTag"),r=e("./isObjectLike"),o="[object Symbol]";t.exports=n},{"./_baseGetTag":37,"./isObjectLike":163}],167:[function(e,t){var n=e("./_baseIsTypedArray"),i=e("./_baseUnary"),r=e("./_nodeUtil"),o=r&&r.isTypedArray,a=o?i(o):n;t.exports=a},{"./_baseIsTypedArray":41,"./_baseUnary":54,"./_nodeUtil":123}],168:[function(e,t){function n(e){return o(e)?i(e):r(e)}var i=e("./_arrayLikeKeys"),r=e("./_baseKeys"),o=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":20,"./_baseKeys":42,"./isArrayLike":157}],169:[function(e,t){function n(e){return o(e)?i(e,!0):r(e)}var i=e("./_arrayLikeKeys"),r=e("./_baseKeysIn"),o=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":20,"./_baseKeysIn":43,"./isArrayLike":157}],170:[function(e,t){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t.exports=n},{}],171:[function(e,t){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(r);var o=function(){var n=arguments,i=t?t.apply(this,n):n[0],r=o.cache;if(r.has(i))return r.get(i);var a=e.apply(this,n);return o.cache=r.set(i,a)||r,a};return o.cache=new(n.Cache||i),o}var i=e("./_MapCache"),r="Expected a function";n.Cache=i,t.exports=n},{"./_MapCache":8}],172:[function(e,t){var n=e("./_baseMerge"),i=e("./_createAssigner"),r=i(function(e,t,i){n(e,t,i)});t.exports=r},{"./_baseMerge":44,"./_createAssigner":72}],173:[function(e,t){var n=e("./_root"),i=function(){return n.Date.now()};t.exports=i},{"./_root":128}],174:[function(e,t){var n=e("./_arrayMap"),i=e("./_baseClone"),r=e("./_baseUnset"),o=e("./_castPath"),a=e("./_copyObject"),s=e("./_customOmitClone"),c=e("./_flatRest"),l=e("./_getAllKeysIn"),u=1,d=2,p=4,f=c(function(e,t){var c={};if(null==e)return c;var f=!1;t=n(t,function(t){return t=o(t,e),f||(f=t.length>1),t}),a(e,l(e),c),f&&(c=i(c,u|d|p,s));for(var h=t.length;h--;)r(c,t[h]);return c});t.exports=f},{"./_arrayMap":21,"./_baseClone":31,"./_baseUnset":55,"./_castPath":57,"./_copyObject":68,"./_customOmitClone":76,"./_flatRest":78,"./_getAllKeysIn":81}],175:[function(e,t){function n(e){return i(2,e)}var i=e("./before");t.exports=n},{"./before":144}],176:[function(e,t){var n=e("./_basePick"),i=e("./_flatRest"),r=i(function(e,t){return null==e?{}:n(e,t)});t.exports=r},{"./_basePick":46,"./_flatRest":78}],177:[function(e,t){function n(){return[]}t.exports=n},{}],178:[function(e,t){function n(){return!1}t.exports=n},{}],179:[function(e,t){function n(e){if(!e)return[];if(a(e))return s(e)?d(e):r(e);if(g&&e[g])return c(e[g]());var t=o(e),n=t==f?l:t==h?u:p;return n(e)}var i=e("./_Symbol"),r=e("./_copyArray"),o=e("./_getTag"),a=e("./isArrayLike"),s=e("./isString"),c=e("./_iteratorToArray"),l=e("./_mapToArray"),u=e("./_setToArray"),d=e("./_stringToArray"),p=e("./values"),f="[object Map]",h="[object Set]",g=i?i.iterator:void 0;t.exports=n},{"./_Symbol":12,"./_copyArray":67,"./_getTag":88,"./_iteratorToArray":107,"./_mapToArray":118,"./_setToArray":129,"./_stringToArray":137,"./isArrayLike":157,"./isString":165,"./values":186}],180:[function(e,t){function n(e){if(!e)return 0===e?e:0;if(e=i(e),e===r||e===-r){var t=0>e?-1:1;return t*o}return e===e?e:0}var i=e("./toNumber"),r=1/0,o=1.7976931348623157e308;t.exports=n},{"./toNumber":182}],181:[function(e,t){function n(e){var t=i(e),n=t%1;return t===t?n?t-n:t:0}var i=e("./toFinite");t.exports=n},{"./toFinite":180}],182:[function(e,t){function n(e){if("number"==typeof e)return e;if(r(e))return o;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=c.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):s.test(e)?o:+e}var i=e("./isObject"),r=e("./isSymbol"),o=0/0,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;t.exports=n},{"./isObject":162,"./isSymbol":166}],183:[function(e,t){function n(e){return i(e,r(e))}var i=e("./_copyObject"),r=e("./keysIn");t.exports=n},{"./_copyObject":68,"./keysIn":169}],184:[function(e,t){function n(e){return null==e?"":i(e)}var i=e("./_baseToString");t.exports=n},{"./_baseToString":53}],185:[function(e,t){var n=e("./_createCaseFirst"),i=n("toUpperCase");t.exports=i},{"./_createCaseFirst":74}],186:[function(e,t){function n(e){return null==e?[]:i(e,r(e))}var i=e("./_baseValues"),r=e("./keys");t.exports=n},{"./_baseValues":56,"./keys":168}],187:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){g&&f&&(g=!1,f.length?h=f.concat(h):m=-1,h.length&&s())}function s(){if(!g){var e=r(a);g=!0;for(var t=h.length;t;){for(f=h,h=[];++m<t;)f&&f[m].run();m=-1,t=h.length}f=null,g=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,d,p=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var f,h=[],g=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||g||r(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],188:[function(e,t){function n(e){this.name="RavenConfigError",this.message=e}n.prototype=new Error,n.prototype.constructor=n,t.exports=n},{}],189:[function(e,t){var n=function(e,t,n){var i=e[t],r=e;if(t in e){var o="warn"===t?"warning":t;e[t]=function(){var e=[].slice.call(arguments),a=""+e.join(" "),s={level:o,logger:"console",extra:{arguments:e}};"assert"===t?e[0]===!1&&(a="Assertion failed: "+(e.slice(1).join(" ")||"console.assert"),s.extra.arguments=e.slice(1),n&&n(a,s)):n&&n(a,s),i&&Function.prototype.apply.call(i,r,e)}}};t.exports={wrapMethod:n}},{}],190:[function(e,t){(function(n){function i(){return+new Date}function r(e,t){return h(t)?function(n){return t(n,e)}:t}function o(){this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!f(D),this._hasNavigator=!f(L),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],collectWindowErrors:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=P.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=i(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=P.location,this._lastHref=this._location&&this._location.href,this._resetBackoff();for(var e in this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}var a=e("../vendor/TraceKit/tracekit"),s=e("../vendor/json-stringify-safe/stringify"),c=e("./configError"),l=e("./utils"),u=l.isError,d=l.isObject,d=l.isObject,p=l.isErrorEvent,f=l.isUndefined,h=l.isFunction,g=l.isString,m=l.isEmptyObject,v=l.each,y=l.objectMerge,_=l.truncate,b=l.objectFrozen,w=l.hasKey,A=l.joinRegExp,C=l.urlencode,E=l.uuid4,T=l.htmlTreeAsString,S=l.isSameException,x=l.isSameStacktrace,j=l.parseUrl,k=l.fill,R=e("./console").wrapMethod,I="source protocol user pass host port path".split(" "),O=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/,P="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:{},D=P.document,L=P.navigator;o.prototype={VERSION:"3.19.1",debug:!1,TraceKit:a,config:function(e,t){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!e)return n;var i=n._globalOptions;t&&v(t,function(e,t){"tags"===e||"extra"===e||"user"===e?n._globalContext[e]=t:i[e]=t}),n.setDSN(e),i.ignoreErrors.push(/^Script error\.?$/),i.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),i.ignoreErrors=A(i.ignoreErrors),i.ignoreUrls=i.ignoreUrls.length?A(i.ignoreUrls):!1,i.whitelistUrls=i.whitelistUrls.length?A(i.whitelistUrls):!1,i.includePaths=A(i.includePaths),i.maxBreadcrumbs=Math.max(0,Math.min(i.maxBreadcrumbs||100,100));var r={xhr:!0,console:!0,dom:!0,location:!0},o=i.autoBreadcrumbs;"[object Object]"==={}.toString.call(o)?o=y(r,o):o!==!1&&(o=r),i.autoBreadcrumbs=o;var s={tryCatch:!0},c=i.instrument;return"[object Object]"==={}.toString.call(c)?c=y(s,c):c!==!1&&(c=s),i.instrument=c,a.collectWindowErrors=!!i.collectWindowErrors,n},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(a.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)}),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this,n=t._parseDSN(e),i=n.path.lastIndexOf("/"),r=n.path.substr(1,i);t._dsn=e,t._globalKey=n.user,t._globalSecret=n.pass&&n.pass.substr(1),t._globalProject=n.path.substr(i+1),t._globalServer=t._getGlobalServer(n),t._globalEndpoint=t._globalServer+"/"+r+"api/"+t._globalProject+"/store/",this._resetBackoff()},context:function(e,t,n){return h(e)&&(n=t||[],t=e,e=void 0),this.wrap(e,t).apply(this,n)},wrap:function(e,t,n){function i(){var i=[],o=arguments.length,a=!e||e&&e.deep!==!1;for(n&&h(n)&&n.apply(this,arguments);o--;)i[o]=a?r.wrap(e,arguments[o]):arguments[o];try{return t.apply(this,i)}catch(s){throw r._ignoreNextOnError(),r.captureException(s,e),s}}var r=this;if(f(t)&&!h(e))return e;if(h(e)&&(t=e,e=void 0),!h(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(o){return t}for(var a in t)w(t,a)&&(i[a]=t[a]);return i.prototype=t.prototype,t.__raven_wrapper__=i,i.__raven__=!0,i.__inner__=t,i},uninstall:function(){return a.report.uninstall(),this._restoreBuiltIns(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},captureException:function(e,t){var n=!u(e),i=!p(e),r=p(e)&&!e.error;if(n&&i||r)return this.captureMessage(e,y({trimHeadFrames:1,stacktrace:!0},t));p(e)&&(e=e.error),this._lastCapturedException=e;try{var o=a.computeStackTrace(e);this._handleStackInfo(o,t)}catch(s){if(e!==s)throw s}return this},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){t=t||{};var n,i=y({message:e+""},t);try{throw new Error(e)}catch(r){n=r}n.name=null;var o=a.computeStackTrace(n),s=o.stack[1],c=s&&s.url||"";if(!(this._globalOptions.ignoreUrls.test&&this._globalOptions.ignoreUrls.test(c)||this._globalOptions.whitelistUrls.test&&!this._globalOptions.whitelistUrls.test(c))){if(this._globalOptions.stacktrace||t&&t.stacktrace){t=y({fingerprint:e,trimHeadFrames:(t.trimHeadFrames||0)+1},t);var l=this._prepareFrames(o,t);i.stacktrace={frames:l.reverse()}}return this._send(i),this}}},captureBreadcrumb:function(e){var t=y({timestamp:i()/1e3},e);if(h(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(t);if(d(n)&&!m(n))t=n;else if(n===!1)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(s(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=r(t,e),this},setBreadcrumbCallback:function(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=r(t,e),this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=r(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return this._hasJSON?this._globalServer?!0:(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1):!1},afterLoad:function(){var e=P.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(D){e=e||{};var t=e.eventId||this.lastEventId();if(!t)throw new c("Missing eventId");var n=e.dsn||this._dsn;if(!n)throw new c("Missing DSN");var i=encodeURIComponent,r="";r+="?eventId="+i(t),r+="&dsn="+i(n);var o=e.user||this._globalContext.user;o&&(o.name&&(r+="&name="+i(o.name)),o.email&&(r+="&email="+i(o.email)));var a=this._getGlobalServer(this._parseDSN(n)),s=D.createElement("script");s.async=!0,s.src=a+"/api/embed/error-page/"+r,(D.head||D.body).appendChild(s)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})},_triggerEvent:function(e,t){var n,i;if(this._hasDocument){t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),D.createEvent?(n=D.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):(n=D.createEventObject(),n.eventType=e);for(i in t)w(t,i)&&(n[i]=t[i]);if(D.createEvent)D.dispatchEvent(n);else try{D.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(r){}}},_breadcrumbEventHandler:function(e){var t=this;return function(n){if(t._keypressTimeout=null,t._lastCapturedEvent!==n){t._lastCapturedEvent=n;var i;try{i=T(n.target)}catch(r){i="<unknown>"}t.captureBreadcrumb({category:"ui."+e,message:i})}}},_keypressEventHandler:function(){var e=this,t=1e3;return function(n){var i;try{i=n.target}catch(r){return}var o=i&&i.tagName;if(o&&("INPUT"===o||"TEXTAREA"===o||i.isContentEditable)){var a=e._keypressTimeout;a||e._breadcrumbEventHandler("input")(n),clearTimeout(a),e._keypressTimeout=setTimeout(function(){e._keypressTimeout=null},t)}}},_captureUrlChange:function(e,t){var n=j(this._location.href),i=j(t),r=j(e);this._lastHref=t,n.protocol===i.protocol&&n.host===i.host&&(t=i.relative),n.protocol===r.protocol&&n.host===r.host&&(e=r.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_instrumentTryCatch:function(){function e(e){return function(){for(var t=new Array(arguments.length),i=0;i<t.length;++i)t[i]=arguments[i];var r=t[0];return h(r)&&(t[0]=n.wrap(r)),e.apply?e.apply(this,t):e(t[0],t[1])}}function t(e){var t=P[e]&&P[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(k(t,"addEventListener",function(t){return function(i,o,a,s){try{o&&o.handleEvent&&(o.handleEvent=n.wrap(o.handleEvent))}catch(c){}var l,u,d;return r&&r.dom&&("EventTarget"===e||"Node"===e)&&(u=n._breadcrumbEventHandler("click"),d=n._keypressEventHandler(),l=function(e){if(e){var t;try{t=e.type}catch(n){return}return"click"===t?u(e):"keypress"===t?d(e):void 0}}),t.call(this,i,n.wrap(o,void 0,l),a,s)}},i),k(t,"removeEventListener",function(e){return function(t,n,i,r){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(o){}return e.call(this,t,n,i,r)}},i))}var n=this,i=n._wrappedBuiltIns,r=this._globalOptions.autoBreadcrumbs;k(P,"setTimeout",e,i),k(P,"setInterval",e,i),P.requestAnimationFrame&&k(P,"requestAnimationFrame",function(e){return function(t){return e(n.wrap(t))}},i);for(var o=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=0;a<o.length;a++)t(o[a])},_instrumentBreadcrumbs:function(){function e(e,n){e in n&&h(n[e])&&k(n,e,function(e){return t.wrap(e)})}var t=this,n=this._globalOptions.autoBreadcrumbs,i=t._wrappedBuiltIns;if(n.xhr&&"XMLHttpRequest"in P){var r=XMLHttpRequest.prototype;k(r,"open",function(e){return function(n,i){return g(i)&&-1===i.indexOf(t._globalKey)&&(this.__raven_xhr={method:n,url:i,status_code:null}),e.apply(this,arguments)}},i),k(r,"send",function(n){return function(){function i(){if(r.__raven_xhr&&4===r.readyState){try{r.__raven_xhr.status_code=r.status}catch(e){}t.captureBreadcrumb({type:"http",category:"xhr",data:r.__raven_xhr})}}for(var r=this,o=["onload","onerror","onprogress"],a=0;a<o.length;a++)e(o[a],r);return"onreadystatechange"in r&&h(r.onreadystatechange)?k(r,"onreadystatechange",function(e){return t.wrap(e,void 0,i)}):r.onreadystatechange=i,n.apply(this,arguments)}},i)}n.xhr&&"fetch"in P&&k(P,"fetch",function(e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;++i)n[i]=arguments[i];var r,o=n[0],a="GET";"string"==typeof o?r=o:"Request"in P&&o instanceof P.Request?(r=o.url,o.method&&(a=o.method)):r=""+o,n[1]&&n[1].method&&(a=n[1].method);var s={method:a,url:r,status_code:null};return t.captureBreadcrumb({type:"http",category:"fetch",data:s}),e.apply(this,n).then(function(e){return s.status_code=e.status,e})}},i),n.dom&&this._hasDocument&&(D.addEventListener?(D.addEventListener("click",t._breadcrumbEventHandler("click"),!1),D.addEventListener("keypress",t._keypressEventHandler(),!1)):(D.attachEvent("onclick",t._breadcrumbEventHandler("click")),D.attachEvent("onkeypress",t._keypressEventHandler())));var o=P.chrome,a=o&&o.app&&o.app.runtime,s=!a&&P.history&&history.pushState&&history.replaceState;if(n.location&&s){var c=P.onpopstate;P.onpopstate=function(){var e=t._location.href;return t._captureUrlChange(t._lastHref,e),c?c.apply(this,arguments):void 0};var l=function(e){return function(){var n=arguments.length>2?arguments[2]:void 0;return n&&t._captureUrlChange(t._lastHref,n+""),e.apply(this,arguments)}};k(history,"pushState",l,i),k(history,"replaceState",l,i)}if(n.console&&"console"in P&&console.log){var u=function(e,n){t.captureBreadcrumb({message:e,level:n.level,category:"console"})};v(["debug","info","warn","error","log"],function(e,t){R(console,t,u)})}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){e=this._wrappedBuiltIns.shift();var t=e[0],n=e[1],i=e[2];t[n]=i}},_drainPlugins:function(){var e=this;v(this._plugins,function(t,n){var i=n[0],r=n[1];i.apply(e,[e].concat(r))})},_parseDSN:function(e){var t=O.exec(e),n={},i=7;try{for(;i--;)n[I[i]]=t[i]||""}catch(r){throw new c("Invalid DSN: "+e)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new c("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(e,t){var n=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,n,t)},_prepareFrames:function(e,t){var n=this,i=[];if(e.stack&&e.stack.length&&(v(e.stack,function(t,r){var o=n._normalizeFrame(r,e.url);o&&i.push(o)}),t&&t.trimHeadFrames))for(var r=0;r<t.trimHeadFrames&&r<i.length;r++)i[r].in_app=!1;return i=i.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e,t){var n={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"};return e.url||(n.filename=t),n.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n["function"])||/raven\.(min\.)?js$/.test(n.filename)),n},_processException:function(e,t,n,i,r,o){var a=(e?e+": ":"")+(t||"");if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(a)){var s;if(r&&r.length?(n=r[0].filename||n,r.reverse(),s={frames:r}):n&&(s={frames:[{filename:n,lineno:i,in_app:!0}]}),!(this._globalOptions.ignoreUrls.test&&this._globalOptions.ignoreUrls.test(n)||this._globalOptions.whitelistUrls.test&&!this._globalOptions.whitelistUrls.test(n))){var c=y({exception:{values:[{type:e,value:t,stacktrace:s}]},culprit:n},o);this._send(c)}}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=_(e.message,t)),e.exception){var n=e.exception.values[0];n.value=_(n.value,t)}var i=e.request;return i&&(i.url&&(i.url=_(i.url,this._globalOptions.maxUrlLength)),i.Referer&&(i.Referer=_(i.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function(e){for(var t,n,i,r=["to","from","url"],o=0;o<e.values.length;++o)if(n=e.values[o],n.hasOwnProperty("data")&&d(n.data)&&!b(n.data)){i=y({},n.data);for(var a=0;a<r.length;++a)t=r[a],i.hasOwnProperty(t)&&i[t]&&(i[t]=_(i[t],this._globalOptions.maxUrlLength));e.values[o].data=i}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&L.userAgent&&(e.headers={"User-Agent":navigator.userAgent}),this._hasDocument&&(D.location&&D.location.href&&(e.url=D.location.href),D.referrer&&(e.headers||(e.headers={}),e.headers.Referer=D.referrer)),e}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&i()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return t&&e.message===t.message&&e.culprit===t.culprit?e.stacktrace||t.stacktrace?x(e.stacktrace,t.stacktrace):e.exception||t.exception?S(e.exception,t.exception):!0:!1},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var n;try{n=e.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(r){}this._backoffDuration=n?n:2*this._backoffDuration||1e3,this._backoffStart=i()}}},_send:function(e){var t=this._globalOptions,n={project:this._globalProject,logger:t.logger,platform:"javascript"},r=this._getHttpData();return r&&(n.request=r),e.trimHeadFrames&&delete e.trimHeadFrames,e=y(n,e),e.tags=y(y({},this._globalContext.tags),e.tags),e.extra=y(y({},this._globalContext.extra),e.extra),e.extra["session:duration"]=i()-this._startTime,this._breadcrumbs&&this._breadcrumbs.length>0&&(e.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),m(e.tags)&&delete e.tags,this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),h(t.dataCallback)&&(e=t.dataCallback(e)||e),!e||m(e)||h(t.shouldSendCallback)&&!t.shouldSendCallback(e)?void 0:this._shouldBackoff()?void this._logDebug("warn","Raven dropped error due to backoff: ",e):void("number"==typeof t.sampleRate?Math.random()<t.sampleRate&&this._sendProcessedPayload(e):this._sendProcessedPayload(e))},_getUuid:function(){return E()},_sendProcessedPayload:function(e,t){var n=this,i=this._globalOptions;if(this.isSetup()){if(e=this._trimPacket(e),!this._globalOptions.allowDuplicates&&this._isRepeatData(e))return void this._logDebug("warn","Raven dropped repeat event: ",e);this._lastEventId=e.event_id||(e.event_id=this._getUuid()),this._lastData=e,this._logDebug("debug","Raven about to send:",e);var r={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};
this._globalSecret&&(r.sentry_secret=this._globalSecret);var o=e.exception&&e.exception.values[0];this.captureBreadcrumb({category:"sentry",message:o?(o.type?o.type+": ":"")+o.value:e.message,event_id:e.event_id,level:e.level||"error"});var a=this._globalEndpoint;(i.transport||this._makeRequest).call(this,{url:a,auth:r,data:e,options:i,onSuccess:function(){n._resetBackoff(),n._triggerEvent("success",{data:e,src:a}),t&&t()},onError:function(i){n._logDebug("error","Raven transport failed to send: ",i),i.request&&n._setBackoffState(i.request),n._triggerEvent("failure",{data:e,src:a}),i=i||new Error("Raven send failed (no additional details provided)"),t&&t(i)}})}},_makeRequest:function(e){var t=P.XMLHttpRequest&&new P.XMLHttpRequest;if(t){var n="withCredentials"in t||"undefined"!=typeof XDomainRequest;if(n){var i=e.url;"withCredentials"in t?t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status)e.onSuccess&&e.onSuccess();else if(e.onError){var n=new Error("Sentry error code: "+t.status);n.request=t,e.onError(n)}}:(t=new XDomainRequest,i=i.replace(/^https?:/,""),e.onSuccess&&(t.onload=e.onSuccess),e.onError&&(t.onerror=function(){var n=new Error("Sentry error code: XDomainRequest");n.request=t,e.onError(n)})),t.open("POST",i+"?"+C(e.auth)),t.send(s(e.data))}}},_logDebug:function(e){this._originalConsoleMethods[e]&&this.debug&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){f(t)?delete this._globalContext[e]:this._globalContext[e]=y(this._globalContext[e]||{},t)}},o.prototype.setUser=o.prototype.setUserContext,o.prototype.setReleaseContext=o.prototype.setRelease,t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../vendor/TraceKit/tracekit":193,"../vendor/json-stringify-safe/stringify":194,"./configError":188,"./console":189,"./utils":192}],191:[function(e,t){(function(n){var i=e("./raven"),r="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:{},o=r.Raven,a=new i;a.noConflict=function(){return r.Raven=o,a},a.afterLoad(),t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./raven":190}],192:[function(e,t){(function(e){function n(e){return"object"==typeof e&&null!==e}function i(e){switch({}.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return e instanceof Error}}function r(e){return l()&&"[object ErrorEvent]"==={}.toString.call(e)}function o(e){return void 0===e}function a(e){return"function"==typeof e}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){for(var t in e)return!1;return!0}function l(){try{return new ErrorEvent(""),!0}catch(e){return!1}}function u(e){function t(t,n){var i=e(t)||t;return n?n(i)||i:i}return t}function d(e,t){var n,i;if(o(e.length))for(n in e)g(e,n)&&t.call(null,n,e[n]);else if(i=e.length)for(n=0;i>n;n++)t.call(null,n,e[n])}function p(e,t){return t?(d(t,function(t,n){e[t]=n}),e):e}function f(e){return Object.isFrozen?Object.isFrozen(e):!1}function h(e,t){return!t||e.length<=t?e:e.substr(0,t)+"\u2026"}function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e){for(var t,n=[],i=0,r=e.length;r>i;i++)t=e[i],s(t)?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function v(e){var t=[];return d(e,function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.join("&")}function y(e){var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",i=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+i}}function _(){var e=S.crypto||S.msCrypto;if(!o(e)&&e.getRandomValues){var t=new Uint16Array(8);e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;var n=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function b(e){for(var t,n=5,i=80,r=[],o=0,a=0,s=" > ",c=s.length;e&&o++<n&&(t=w(e),!("html"===t||o>1&&a+r.length*c+t.length>=i));)r.push(t),a+=t.length,e=e.parentNode;return r.reverse().join(s)}function w(e){var t,n,i,r,o,a=[];if(!e||!e.tagName)return"";if(a.push(e.tagName.toLowerCase()),e.id&&a.push("#"+e.id),t=e.className,t&&s(t))for(n=t.split(/\s+/),o=0;o<n.length;o++)a.push("."+n[o]);var c=["type","name","title","alt"];for(o=0;o<c.length;o++)i=c[o],r=e.getAttribute(i),r&&a.push("["+i+'="'+r+'"]');return a.join("")}function A(e,t){return!!(!!e^!!t)}function C(e,t){return A(e,t)?!1:(e=e.values[0],t=t.values[0],e.type!==t.type||e.value!==t.value?!1:E(e.stacktrace,t.stacktrace))}function E(e,t){if(A(e,t))return!1;var n=e.frames,i=t.frames;if(n.length!==i.length)return!1;for(var r,o,a=0;a<n.length;a++)if(r=n[a],o=i[a],r.filename!==o.filename||r.lineno!==o.lineno||r.colno!==o.colno||r["function"]!==o["function"])return!1;return!0}function T(e,t,n,i){var r=e[t];e[t]=n(r),i&&i.push([e,t,r])}var S="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};t.exports={isObject:n,isError:i,isErrorEvent:r,isUndefined:o,isFunction:a,isString:s,isEmptyObject:c,supportsErrorEvent:l,wrappedCallback:u,each:d,objectMerge:p,truncate:h,objectFrozen:f,hasKey:g,joinRegExp:m,urlencode:v,uuid4:_,htmlTreeAsString:b,htmlElementAsString:w,isSameException:C,isSameStacktrace:E,parseUrl:y,fill:T}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],193:[function(e,t){(function(n){function i(){return"undefined"==typeof document||null==document.location?"":document.location.href}var r=e("../../src/utils"),o={collectWindowErrors:!0,debug:!1},a="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:{},s=[].slice,c="?",l=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;o.report=function(){function e(e){p(),y.push(e)}function t(e){for(var t=y.length-1;t>=0;--t)y[t]===e&&y.splice(t,1)}function n(){f(),y=[]}function u(e,t){var n=null;if(!t||o.collectWindowErrors){for(var i in y)if(y.hasOwnProperty(i))try{y[i].apply(null,[e].concat(s.call(arguments,2)))}catch(r){n=r}if(n)throw n}}function d(e,t,n,a,s){var d=null;if(w)o.computeStackTrace.augmentStackTraceWithInitialElement(w,t,n,e),h();else if(s&&r.isError(s))d=o.computeStackTrace(s),u(d,!0);else{var p,f={url:t,line:n,column:a},g=void 0,v=e;if("[object String]"==={}.toString.call(e)){var p=e.match(l);p&&(g=p[1],v=p[2])}f.func=c,d={name:g,message:v,url:i(),stack:[f]},u(d,!0)}return m?m.apply(this,arguments):!1}function p(){v||(m=a.onerror,a.onerror=d,v=!0)}function f(){v&&(a.onerror=m,v=!1,m=void 0)}function h(){var e=w,t=_;_=null,w=null,b=null,u.apply(null,[e,!1].concat(t))}function g(e,t){var n=s.call(arguments,1);if(w){if(b===e)return;h()}var i=o.computeStackTrace(e);if(w=i,b=e,_=n,setTimeout(function(){b===e&&h()},i.incomplete?2e3:0),t!==!1)throw e}var m,v,y=[],_=null,b=null,w=null;return g.subscribe=e,g.unsubscribe=t,g.uninstall=n,g}(),o.computeStackTrace=function(){function e(e){if("undefined"!=typeof e.stack&&e.stack){for(var t,n,r,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,u=/\((\S*)(?::(\d+))(?::(\d+))\)/,d=e.stack.split("\n"),p=[],f=(/^(.*) is undefined$/.exec(e.message),0),h=d.length;h>f;++f){if(n=o.exec(d[f])){var g=n[2]&&0===n[2].indexOf("native"),m=n[2]&&0===n[2].indexOf("eval");m&&(t=u.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),r={url:g?null:n[2],func:n[1]||c,args:g?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=s.exec(d[f]))r={url:n[2],func:n[1]||c,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=a.exec(d[f])))continue;var m=n[3]&&n[3].indexOf(" > eval")>-1;m&&(t=l.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==f||n[5]||"undefined"==typeof e.columnNumber||(p[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||c,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=c),p.push(r)}return p.length?{name:e.name,message:e.message,url:i(),stack:p}:null}}function t(e,t,n){var i={url:t,line:n};if(i.url&&i.line){if(e.incomplete=!1,i.func||(i.func=c),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function n(e,a){for(var s,l,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,d=[],p={},f=!1,h=n.caller;h&&!f;h=h.caller)if(h!==r&&h!==o.report){if(l={url:null,func:c,line:null,column:null},h.name?l.func=h.name:(s=u.exec(h.toString()))&&(l.func=s[1]),"undefined"==typeof l.func)try{l.func=s.input.substring(0,s.input.indexOf("{"))}catch(g){}p[""+h]?f=!0:p[""+h]=!0,d.push(l)}a&&d.splice(0,a);var m={name:e.name,message:e.message,url:i(),stack:d};return t(m,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),m}function r(t,r){var a=null;r=null==r?0:+r;try{if(a=e(t))return a}catch(s){if(o.debug)throw s}try{if(a=n(t,r+1))return a}catch(s){if(o.debug)throw s}return{name:t.name,message:t.message,url:i()}}return r.augmentStackTraceWithInitialElement=t,r.computeStackTraceFromStackProp=e,r}(),t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../src/utils":192}],194:[function(e,t,n){function i(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function r(e,t,n,i){return JSON.stringify(e,a(t,i),n)}function o(e){var t={stack:e.stack,message:e.message,name:e.name};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function a(e,t){var n=[],r=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,i(n,t)).join(".")+"]"}),function(a,s){if(n.length>0){var c=i(n,this);~c?n.splice(c+1):n.push(this),~c?r.splice(c,1/0,a):r.push(a),~i(n,s)&&(s=t.call(this,a,s))}else n.push(s);return null==e?s instanceof Error?o(s):s:e.call(this,a,s)}}n=t.exports=r,n.getSerialize=a},{}],195:[function(e,t){"use strict";var n={};n.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},n.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:n[t[i]]=t[i+1]}return n},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),e.ufrag&&(t.push("ufrag"),t.push(e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},n.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)t=i[r].trim().split("="),n[t[0].trim()]=t[1];return n},n.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach(function(t){i.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];return t?t.substr(6):void 0},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){var i=n.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:i.map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},n.getIceParameters=function(e,t){var i=n.splitLines(e);i=i.concat(n.splitLines(t));var r={usernameFragment:i.filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:i.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return r},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=n.splitLines(e),r=i[0].split(" "),o=3;o<r.length;o++){var a=r[o],s=n.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=n.parseRtpMap(s),l=n.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=l.length?n.parseFmtp(l[0]):{},c.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(n.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var i="";i+="m="+e+" ",i+=t.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){i+=n.writeRtpMap(e),i+=n.writeFmtp(e),i+=n.writeRtcpFb(e)});var r=0;return t.codecs.forEach(function(e){e.maxptime>r&&(r=e.maxptime)}),r>0&&(i+="a=maxptime:"+r+"\r\n"),i+="a=rtcp-mux\r\n",t.headerExtensions.forEach(function(e){i+=n.writeExtmap(e)}),i},n.parseRtpEncodingParameters=function(e){var t,i=[],r=n.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),a=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,l=n.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});l.length>0&&l[0].length>1&&l[0][0]===c&&(t=l[0][1]),r.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};i.push(n),o&&(n=JSON.parse(JSON.stringify(n)),n.fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},i.push(n))}}),0===i.length&&c&&i.push({ssrc:c});var u=n.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,i.forEach(function(e){e.maxBitrate=u})),i},n.parseRtcpParameters=function(e){var t={},i=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];i&&(t.cname=i.value,t.ssrc=i.ssrc);var r=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=0===r.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,i=n.matchPrefix(e,"a=msid:");if(1===i.length)return t=i[0].substr(7).split(" "),{stream:t[0],track:t[1]};var r=n.matchPrefix(e,"a=ssrc:").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return r.length>0?(t=r[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t){var i,r=void 0!==t?t:2;return i=e?e:n.generateSessionId(),"v=0\r\no=thisisadapterortc "+i+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,i,r){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",o+=e.direction?"a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?"a=sendrecv\r\n":e.rtpSender?"a=sendonly\r\n":e.rtpReceiver?"a=recvonly\r\n":"a=inactive\r\n",e.rtpSender){var a="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var i=n.splitLines(e),r=0;r<i.length;r++)switch(i[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[r].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){var t=n.splitLines(e),i=t[0].split(" ");return i[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e),i=t[0].split(" ");return{kind:i[0].substr(2),port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},"object"==typeof t&&(t.exports=n)},{}],196:[function(e,t){var n=e("./lib/encoding.js");t.exports={TextEncoder:n.TextEncoder,TextDecoder:n.TextDecoder}},{"./lib/encoding.js":197}],197:[function(e,t){!function(e){"use strict";function n(e,t,n){return e>=t&&n>=e}function i(e,t){return-1!==e.indexOf(t)}function r(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function o(e){for(var t=String(e),n=t.length,i=0,r=[];n>i;){var o=t.charCodeAt(i);if(55296>o||o>57343)r.push(o);else if(o>=56320&&57343>=o)r.push(65533);else if(o>=55296&&56319>=o)if(i===n-1)r.push(65533);else{var a=t.charCodeAt(i+1);if(a>=56320&&57343>=a){var s=1023&o,c=1023&a;r.push(65536+(s<<10)+c),i+=1}else r.push(65533)}i+=1}return r}function a(e){for(var t="",n=0;n<e.length;++n){var i=e[n];65535>=i?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode((i>>10)+55296,(1023&i)+56320))}return t}function s(e){return e>=0&&127>=e}function c(e){this.tokens=[].slice.call(e),this.tokens.reverse()}function l(e,t){if(e)throw TypeError("Decoder error");return t||65533}function u(e){throw TypeError("The code point "+e+" could not be encoded.")}function d(){}function p(){}function f(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(J,e)?J[e]:null}function h(e,t){return t?t[e]||null:null}function g(e,t){var n=t.indexOf(e);return-1===n?null:n}function m(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return e["encoding-indexes"][t]}function v(e){if(e>39419&&189e3>e||e>1237575)return null;if(7457===e)return 59335;var t,n=0,i=0,r=m("gb18030-ranges");for(t=0;t<r.length;++t){var o=r[t];if(!(o[0]<=e))break;n=o[0],i=o[1]}return i+e-n}function y(e){if(59335===e)return 7457;var t,n=0,i=0,r=m("gb18030-ranges");for(t=0;t<r.length;++t){var o=r[t];if(!(o[1]<=e))break;n=o[1],i=o[0]}return i+e-n}function _(e){q=q||m("jis0208").map(function(e,t){return n(t,8272,8835)?null:e});var t=q;return t.indexOf(e)}function b(e){X=X||m("big5").map(function(e,t){return 5024>t?null:e});var t=X;return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):g(e,t)}function w(e,t){if(!(this instanceof w))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):et,t=r(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=f(e);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+e);if(!Z[n.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var i=this;return i._encoding=n,Boolean(t.fatal)&&(i._error_mode="fatal"),Boolean(t.ignoreBOM)&&(i._ignoreBOM=!0),Object.defineProperty||(this.encoding=i._encoding.name.toLowerCase(),this.fatal="fatal"===i._error_mode,this.ignoreBOM=i._ignoreBOM),i}function A(t,n){if(!(this instanceof A))throw TypeError("Called as a function. Did you forget 'new'?");n=r(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";var i=this;if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){t=void 0!==t?String(t):et;var o=f(t);if(null===o||"replacement"===o.name)throw RangeError("Unknown encoding: "+t);if(!K[o.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");i._encoding=o}else i._encoding=f("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=i._encoding.name.toLowerCase()),i}function C(e){var t=e.fatal,i=0,r=0,o=0,a=128,s=191;this.handler=function(e,c){if(c===G&&0!==o)return o=0,l(t);if(c===G)return Y;if(0===o){if(n(c,0,127))return c;if(n(c,194,223))o=1,i=31&c;else if(n(c,224,239))224===c&&(a=160),237===c&&(s=159),o=2,i=15&c;else{if(!n(c,240,244))return l(t);240===c&&(a=144),244===c&&(s=143),o=3,i=7&c}return null}if(!n(c,a,s))return i=o=r=0,a=128,s=191,e.prepend(c),l(t);if(a=128,s=191,i=i<<6|63&c,r+=1,r!==o)return null;var u=i;return i=o=r=0,u}}function E(e){e.fatal;this.handler=function(e,t){if(t===G)return Y;if($(t))return t;var i,r;n(t,128,2047)?(i=1,r=192):n(t,2048,65535)?(i=2,r=224):n(t,65536,1114111)&&(i=3,r=240);for(var o=[(t>>6*i)+r];i>0;){var a=t>>6*(i-1);o.push(128|63&a),i-=1}return o}}function T(e,t){var n=t.fatal;this.handler=function(t,i){if(i===G)return Y;if(s(i))return i;var r=e[i-128];return null===r?l(n):r}}function S(e,t){t.fatal;this.handler=function(t,n){if(n===G)return Y;if($(n))return n;var i=g(n,e);return null===i&&u(n),i+128}}function x(e){var t=e.fatal,i=0,r=0,o=0;this.handler=function(e,a){if(a===G&&0===i&&0===r&&0===o)return Y;a!==G||0===i&&0===r&&0===o||(i=0,r=0,o=0,l(t));var c;if(0!==o){c=null,n(a,48,57)&&(c=v(10*(126*(10*(i-129)+r-48)+o-129)+a-48));var u=[r,o,a];return i=0,r=0,o=0,null===c?(e.prepend(u),l(t)):c}if(0!==r)return n(a,129,254)?(o=a,null):(e.prepend([r,a]),i=0,r=0,l(t));if(0!==i){if(n(a,48,57))return r=a,null;var d=i,p=null;i=0;var f=127>a?64:65;return(n(a,64,126)||n(a,128,254))&&(p=190*(d-129)+(a-f)),c=null===p?null:h(p,m("gb18030")),null===c&&s(a)&&e.prepend(a),null===c?l(t):c}return s(a)?a:128===a?8364:n(a,129,254)?(i=a,null):l(t)}}function j(e,t){e.fatal;this.handler=function(e,n){if(n===G)return Y;if($(n))return n;if(58853===n)return u(n);if(t&&8364===n)return 128;var i=g(n,m("gb18030"));if(null!==i){var r=z(i/190)+129,o=i%190,a=63>o?64:65;return[r,o+a]}if(t)return u(n);i=y(n);var s=z(i/10/126/10);i-=10*s*126*10;var c=z(i/10/126);i-=10*c*126;var l=z(i/10),d=i-10*l;return[s+129,c+48,l+129,d+48]}}function k(e){var t=e.fatal,i=0;this.handler=function(e,r){if(r===G&&0!==i)return i=0,l(t);if(r===G&&0===i)return Y;if(0!==i){var o=i,a=null;i=0;var c=127>r?64:98;switch((n(r,64,126)||n(r,161,254))&&(a=157*(o-129)+(r-c)),a){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var u=null===a?null:h(a,m("big5"));return null===u&&s(r)&&e.prepend(r),null===u?l(t):u}return s(r)?r:n(r,129,254)?(i=r,null):l(t)}}function R(e){e.fatal;this.handler=function(e,t){if(t===G)return Y;if($(t))return t;var n=b(t);if(null===n)return u(t);var i=z(n/157)+129;if(161>i)return u(t);var r=n%157,o=63>r?64:98;return[i,r+o]}}function I(e){var t=e.fatal,i=!1,r=0;this.handler=function(e,o){if(o===G&&0!==r)return r=0,l(t);if(o===G&&0===r)return Y;if(142===r&&n(o,161,223))return r=0,65216+o;if(143===r&&n(o,161,254))return i=!0,r=o,null;if(0!==r){var a=r;r=0;var c=null;return n(a,161,254)&&n(o,161,254)&&(c=h(94*(a-161)+(o-161),m(i?"jis0212":"jis0208"))),i=!1,n(o,161,254)||e.prepend(o),null===c?l(t):c}return s(o)?o:142===o||143===o||n(o,161,254)?(r=o,null):l(t)}}function O(e){e.fatal;this.handler=function(e,t){if(t===G)return Y;if($(t))return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return[142,t-65377+161];8722===t&&(t=65293);var i=g(t,m("jis0208"));if(null===i)return u(t);var r=z(i/94)+161,o=i%94+161;return[r,o]}}function P(e){var t=e.fatal,i={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},r=i.ASCII,o=i.ASCII,a=0,s=!1;this.handler=function(e,c){switch(r){default:case i.ASCII:return 27===c?(r=i.EscapeStart,null):n(c,0,127)&&14!==c&&15!==c&&27!==c?(s=!1,c):c===G?Y:(s=!1,l(t));case i.Roman:return 27===c?(r=i.EscapeStart,null):92===c?(s=!1,165):126===c?(s=!1,8254):n(c,0,127)&&14!==c&&15!==c&&27!==c&&92!==c&&126!==c?(s=!1,c):c===G?Y:(s=!1,l(t));case i.Katakana:return 27===c?(r=i.EscapeStart,null):n(c,33,95)?(s=!1,65344+c):c===G?Y:(s=!1,l(t));case i.LeadByte:return 27===c?(r=i.EscapeStart,null):n(c,33,126)?(s=!1,a=c,r=i.TrailByte,null):c===G?Y:(s=!1,l(t));case i.TrailByte:if(27===c)return r=i.EscapeStart,l(t);if(n(c,33,126)){r=i.LeadByte;var u=94*(a-33)+c-33,d=h(u,m("jis0208"));return null===d?l(t):d}return c===G?(r=i.LeadByte,e.prepend(c),l(t)):(r=i.LeadByte,l(t));case i.EscapeStart:return 36===c||40===c?(a=c,r=i.Escape,null):(e.prepend(c),s=!1,r=o,l(t));case i.Escape:var p=a;a=0;var f=null;if(40===p&&66===c&&(f=i.ASCII),40===p&&74===c&&(f=i.Roman),40===p&&73===c&&(f=i.Katakana),36!==p||64!==c&&66!==c||(f=i.LeadByte),null!==f){r=r=f;var g=s;return s=!0,g?l(t):null}return e.prepend([p,c]),s=!1,r=o,l(t)}}}function D(e){var t=(e.fatal,{ASCII:0,Roman:1,jis0208:2}),n=t.ASCII;this.handler=function(e,i){if(i===G&&n!==t.ASCII)return e.prepend(i),n=t.ASCII,[27,40,66];if(i===G&&n===t.ASCII)return Y;if(!(n!==t.ASCII&&n!==t.Roman||14!==i&&15!==i&&27!==i))return u(65533);if(n===t.ASCII&&$(i))return i;if(n===t.Roman&&($(i)&&92!==i&&126!==i||165==i||8254==i)){if($(i))return i;if(165===i)return 92;if(8254===i)return 126}if($(i)&&n!==t.ASCII)return e.prepend(i),n=t.ASCII,[27,40,66];if((165===i||8254===i)&&n!==t.Roman)return e.prepend(i),n=t.Roman,[27,40,74];8722===i&&(i=65293);var r=g(i,m("jis0208"));if(null===r)return u(i);if(n!==t.jis0208)return e.prepend(i),n=t.jis0208,[27,36,66];var o=z(r/94)+33,a=r%94+33;return[o,a]}}function L(e){var t=e.fatal,i=0;this.handler=function(e,r){if(r===G&&0!==i)return i=0,l(t);if(r===G&&0===i)return Y;if(0!==i){var o=i,a=null;i=0;var c=127>r?64:65,u=160>o?129:193;if((n(r,64,126)||n(r,128,252))&&(a=188*(o-u)+r-c),n(a,8836,10715))return 48508+a;var d=null===a?null:h(a,m("jis0208"));return null===d&&s(r)&&e.prepend(r),null===d?l(t):d}return s(r)||128===r?r:n(r,161,223)?65216+r:n(r,129,159)||n(r,224,252)?(i=r,null):l(t)}}function N(e){e.fatal;this.handler=function(e,t){if(t===G)return Y;if($(t)||128===t)return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return t-65377+161;8722===t&&(t=65293);var i=_(t);if(null===i)return u(t);var r=z(i/188),o=31>r?129:193,a=i%188,s=63>a?64:65;return[r+o,a+s]}}function M(e){var t=e.fatal,i=0;this.handler=function(e,r){if(r===G&&0!==i)return i=0,l(t);if(r===G&&0===i)return Y;if(0!==i){var o=i,a=null;i=0,n(r,65,254)&&(a=190*(o-129)+(r-65));var c=null===a?null:h(a,m("euc-kr"));return null===a&&s(r)&&e.prepend(r),null===c?l(t):c}return s(r)?r:n(r,129,254)?(i=r,null):l(t)}}function B(e){e.fatal;this.handler=function(e,t){if(t===G)return Y;if($(t))return t;var n=g(t,m("euc-kr"));if(null===n)return u(t);var i=z(n/190)+129,r=n%190+65;return[i,r]}}function F(e,t){var n=e>>8,i=255&e;return t?[n,i]:[i,n]}function U(e,t){var i=t.fatal,r=null,o=null;this.handler=function(t,a){if(a===G&&(null!==r||null!==o))return l(i);if(a===G&&null===r&&null===o)return Y;if(null===r)return r=a,null;var s;if(s=e?(r<<8)+a:(a<<8)+r,r=null,null!==o){var c=o;return o=null,n(s,56320,57343)?65536+1024*(c-55296)+(s-56320):(t.prepend(F(s,e)),l(i))}return n(s,55296,56319)?(o=s,null):n(s,56320,57343)?l(i):s}}function H(e,t){t.fatal;this.handler=function(t,i){if(i===G)return Y;if(n(i,0,65535))return F(i,e);var r=F((i-65536>>10)+55296,e),o=F((i-65536&1023)+56320,e);return r.concat(o)}}function V(e){e.fatal;this.handler=function(e,t){return t===G?Y:s(t)?t:63360+t-128}}function W(e){e.fatal;this.handler=function(e,t){return t===G?Y:$(t)?t:n(t,63360,63487)?t-63360+128:u(t)}}var z=Math.floor,$=s,G=-1;c.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():G},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var Y=-1;d.prototype={handler:function(){}},p.prototype={handler:function(){}};var Q=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],J={};
Q.forEach(function(e){e.encodings.forEach(function(e){e.labels.forEach(function(t){J[t]=e})})});var q,X,K={},Z={},et="utf-8";Object.defineProperty&&(Object.defineProperty(w.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(w.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(w.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),w.prototype.decode=function(e,t){function n(e){return!i(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)||this._ignoreBOM||this._BOMseen||(e.length>0&&65279===e[0]?(this._BOMseen=!0,e.shift()):e.length>0&&(this._BOMseen=!0)),a(e)}var o;o="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=r(t),this._do_not_flush||(this._decoder=Z[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var s,l=new c(o),u=[];;){var d=l.read();if(d===G)break;if(s=this._decoder.handler(l,d),s===Y)break;null!==s&&(Array.isArray(s)?u.push.apply(u,s):u.push(s))}if(!this._do_not_flush){do{if(s=this._decoder.handler(l,l.read()),s===Y)break;null!==s&&(Array.isArray(s)?u.push.apply(u,s):u.push(s))}while(!l.endOfStream());this._decoder=null}return n.call(this,u)},Object.defineProperty&&Object.defineProperty(A.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),A.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=r(t),this._do_not_flush||(this._encoder=K[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var n,i=new c(o(e)),a=[];;){var s=i.read();if(s===G)break;if(n=this._encoder.handler(i,s),n===Y)break;Array.isArray(n)?a.push.apply(a,n):a.push(n)}if(!this._do_not_flush){for(;;){if(n=this._encoder.handler(i,i.read()),n===Y)break;Array.isArray(n)?a.push.apply(a,n):a.push(n)}this._encoder=null}return new Uint8Array(a)},K["UTF-8"]=function(e){return new E(e)},Z["UTF-8"]=function(e){return new C(e)},function(){"encoding-indexes"in e&&Q.forEach(function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach(function(e){var t=e.name,n=m(t.toLowerCase());Z[t]=function(e){return new T(n,e)},K[t]=function(e){return new S(n,e)}})})}(),Z.GBK=function(e){return new x(e)},K.GBK=function(e){return new j(e,!0)},K.gb18030=function(e){return new j(e)},Z.gb18030=function(e){return new x(e)},K.Big5=function(e){return new R(e)},Z.Big5=function(e){return new k(e)},K["EUC-JP"]=function(e){return new O(e)},Z["EUC-JP"]=function(e){return new I(e)},K["ISO-2022-JP"]=function(e){return new D(e)},Z["ISO-2022-JP"]=function(e){return new P(e)},K.Shift_JIS=function(e){return new N(e)},Z.Shift_JIS=function(e){return new L(e)},K["EUC-KR"]=function(e){return new B(e)},Z["EUC-KR"]=function(e){return new M(e)},K["UTF-16BE"]=function(e){return new H(!0,e)},Z["UTF-16BE"]=function(e){return new U(!0,e)},K["UTF-16LE"]=function(e){return new H(!1,e)},Z["UTF-16LE"]=function(e){return new U(!1,e)},K["x-user-defined"]=function(e){return new W(e)},Z["x-user-defined"]=function(e){return new V(e)},e.TextEncoder||(e.TextEncoder=A),e.TextDecoder||(e.TextDecoder=w),"undefined"!=typeof t&&t.exports&&(t.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})}(this||{})},{}],198:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],199:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],200:[function(e,t,n){(function(t,i){function r(e,t){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(t)?i.showHidden=t:t&&n._extend(i,t),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),c(i,e,i.depth)}function o(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function a(e){return e}function s(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function c(e,t,i){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(i,e);return _(r)||(r=c(e,r,i)),r}var o=l(e,t);if(o)return o;var a=Object.keys(t),g=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),T(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(t);if(0===a.length){if(S(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(A(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(T(t))return u(t)}var v="",y=!1,b=["{","}"];if(h(t)&&(y=!0,b=["[","]"]),S(t)){var w=t.name?": "+t.name:"";v=" [Function"+w+"]"}if(A(t)&&(v=" "+RegExp.prototype.toString.call(t)),E(t)&&(v=" "+Date.prototype.toUTCString.call(t)),T(t)&&(v=" "+u(t)),0===a.length&&(!y||0==t.length))return b[0]+v+b[1];if(0>i)return A(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var C;return C=y?d(e,t,i,g,a):a.map(function(n){return p(e,t,i,g,n,y)}),e.seen.pop(),f(C,v,b)}function l(e,t){if(w(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,i,r){for(var o=[],a=0,s=t.length;s>a;++a)o.push(I(t,String(a))?p(e,t,n,i,String(a),!0):"");return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(e,t,n,i,r,!0))}),o}function p(e,t,n,i,r,o){var a,s,l;if(l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},l.get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),I(i,r)||(a="["+r+"]"),s||(e.seen.indexOf(l.value)<0?(s=m(n)?c(e,l.value,null):c(e,l.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&r.match(/^\d+$/))return s;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function w(e){return void 0===e}function A(e){return C(e)&&"[object RegExp]"===j(e)}function C(e){return"object"==typeof e&&null!==e}function E(e){return C(e)&&"[object Date]"===j(e)}function T(e){return C(e)&&("[object Error]"===j(e)||e instanceof Error)}function S(e){return"function"==typeof e}function x(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function j(e){return Object.prototype.toString.call(e)}function k(e){return 10>e?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}// Copyright Joyent, Inc. and other Node contributors.
// The above copyright notice and this permission notice shall be included
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
var O=/%[sdj%]/g;n.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(e).replace(O,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}}),s=i[n];o>n;s=i[++n])a+=m(s)||!C(s)?" "+s:" "+r(s);return a},n.deprecate=function(e,r){function o(){if(!a){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),a=!0}return e.apply(this,arguments)}if(w(i.process))return function(){return n.deprecate(e,r).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var P,D={};n.debuglog=function(e){if(w(P)&&(P=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(new RegExp("\\b"+e+"\\b","i").test(P)){var i=t.pid;D[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,i,t)}}else D[e]=function(){};return D[e]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=v,n.isNumber=y,n.isString=_,n.isSymbol=b,n.isUndefined=w,n.isRegExp=A,n.isObject=C,n.isDate=E,n.isError=T,n.isFunction=S,n.isPrimitive=x,n.isBuffer=e("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",R(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!C(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":199,_process:187,inherits:198}],201:[function(e,t){var n=e("./v1"),i=e("./v4"),r=i;r.v1=n,r.v4=i,t.exports=r},{"./v1":204,"./v4":205}],202:[function(e,t){function n(e,t){var n=t||0,r=i;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}for(var i=[],r=0;256>r;++r)i[r]=(r+256).toString(16).substr(1);t.exports=n},{}],203:[function(e,t){(function(e){var n,i=e.crypto||e.msCrypto;if(i&&i.getRandomValues){var r=new Uint8Array(16);n=function(){return i.getRandomValues(r),r}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],204:[function(e,t){function n(e,t,n){var i=t&&n||0,o=t||[];e=e||{};var u=void 0!==e.clockseq?e.clockseq:s,d=void 0!==e.msecs?e.msecs:(new Date).getTime(),p=void 0!==e.nsecs?e.nsecs:l+1,f=d-c+(p-l)/1e4;if(0>f&&void 0===e.clockseq&&(u=u+1&16383),(0>f||d>c)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=d,l=p,s=u,d+=122192928e5;var h=(1e4*(268435455&d)+p)%4294967296;o[i++]=h>>>24&255,o[i++]=h>>>16&255,o[i++]=h>>>8&255,o[i++]=255&h;var g=d/4294967296*1e4&268435455;o[i++]=g>>>8&255,o[i++]=255&g,o[i++]=g>>>24&15|16,o[i++]=g>>>16&255,o[i++]=u>>>8|128,o[i++]=255&u;for(var m=e.node||a,v=0;6>v;++v)o[i+v]=m[v];return t?t:r(o)}var i=e("./lib/rng"),r=e("./lib/bytesToUuid"),o=i(),a=[1|o[0],o[1],o[2],o[3],o[4],o[5]],s=16383&(o[6]<<8|o[7]),c=0,l=0;t.exports=n},{"./lib/bytesToUuid":202,"./lib/rng":203}],205:[function(e,t){function n(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;16>s;++s)t[o+s]=a[s];return t||r(a)}var i=e("./lib/rng"),r=e("./lib/bytesToUuid");t.exports=n},{"./lib/bytesToUuid":202,"./lib/rng":203}],206:[function(e,t){/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";t.exports=function(t,n){var i=t&&t.window,r={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var o in n)hasOwnProperty.call(n,o)&&(r[o]=n[o]);var a=e("./utils"),s=a.log,c=a.detectBrowser(i),l={browserDetails:c,extractVersion:a.extractVersion,disableLog:a.disableLog,disableWarnings:a.disableWarnings},u=e("./chrome/chrome_shim")||null,d=e("./edge/edge_shim")||null,p=e("./firefox/firefox_shim")||null,f=e("./safari/safari_shim")||null;switch(c.browser){case"chrome":if(!u||!u.shimPeerConnection||!r.shimChrome)return s("Chrome shim is not included in this adapter release."),l;s("adapter.js shimming chrome."),l.browserShim=u,u.shimGetUserMedia(i),u.shimMediaStream(i),a.shimCreateObjectURL(i),u.shimSourceObject(i),u.shimPeerConnection(i),u.shimOnTrack(i),u.shimAddTrackRemoveTrack(i),u.shimGetSendersWithDtmf(i);break;case"firefox":if(!p||!p.shimPeerConnection||!r.shimFirefox)return s("Firefox shim is not included in this adapter release."),l;s("adapter.js shimming firefox."),l.browserShim=p,p.shimGetUserMedia(i),a.shimCreateObjectURL(i),p.shimSourceObject(i),p.shimPeerConnection(i),p.shimOnTrack(i);break;case"edge":if(!d||!d.shimPeerConnection||!r.shimEdge)return s("MS edge shim is not included in this adapter release."),l;s("adapter.js shimming edge."),l.browserShim=d,d.shimGetUserMedia(i),a.shimCreateObjectURL(i),d.shimPeerConnection(i),d.shimReplaceTrack(i);break;case"safari":if(!f||!r.shimSafari)return s("Safari shim is not included in this adapter release."),l;s("adapter.js shimming safari."),l.browserShim=f,a.shimCreateObjectURL(i),f.shimRTCIceServerUrls(i),f.shimCallbacksAPI(i),f.shimLocalStreamsAPI(i),f.shimRemoteStreamsAPI(i),f.shimGetUserMedia(i);break;default:s("Unsupported browser!")}return l}},{"./chrome/chrome_shim":207,"./edge/edge_shim":209,"./firefox/firefox_shim":212,"./safari/safari_shim":214,"./utils":215}],207:[function(e,t){/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";var n=e("../utils.js"),i=n.log,r={shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return n._ontrackpoly||(n._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(i){var r;r=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===i.track.id}):{track:i.track};var o=new Event("track");o.track=i.track,o.receiver=r,o.streams=[t.stream],n.dispatchEvent(o)}),t.stream.getTracks().forEach(function(i){var r;r=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find(function(e){return e.track&&e.track.id===i.id}):{track:i};var o=new Event("track");o.track=i,o.receiver=r,o.streams=[t.stream],n.dispatchEvent(o)})},n.addEventListener("addstream",n._ontrackpoly)),t.apply(n,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(this._dtmf="audio"===t.kind?e.createDTMFSender(t):null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e){var i=this,r=n.apply(i,arguments);return r||(r=t(i,e),i._senders.push(r)),r};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;i.apply(t,arguments);var n=t._senders.indexOf(e);-1!==n&&t._senders.splice(n,1)}}var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;n._senders=n._senders||[],r.apply(n,[e]),e.getTracks().forEach(function(e){n._senders.push(t(n,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],o.apply(t,[t._streams[e.id]||e]),e.getTracks().forEach(function(e){var n=t._senders.find(function(t){return t.track===e});n&&t._senders.splice(t._senders.indexOf(n),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&(this._dtmf="audio"===this.track.kind?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},shimSourceObject:function(e){var t=e&&e.URL;"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var n=this;return this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)}),void e.addEventListener("removetrack",function(){n.src&&t.revokeObjectURL(n.src),n.src=t.createObjectURL(e)})):void(this.src="")}}))},shimAddTrackRemoveTrack:function(e){if(!e.RTCPeerConnection.prototype.addTrack){var t=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,n=t.apply(this);return e._reverseStreams=e._reverseStreams||{},n.map(function(t){return e._reverseStreams[t.id]})};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var i=this;if(i._streams=i._streams||{},i._reverseStreams=i._reverseStreams||{},t.getTracks().forEach(function(e){var t=i.getSenders().find(function(t){return t.track===e});if(t)throw new DOMException("Track already exists.","InvalidAccessError")}),!i._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());i._streams[t.id]=r,i._reverseStreams[r.id]=t,t=r}n.apply(i,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},i.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var i=this;if("closed"===i.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=i.getSenders().find(function(e){return e.track===t});if(o)throw new DOMException("Track already exists.","InvalidAccessError");i._streams=i._streams||{},i._reverseStreams=i._reverseStreams||{};var a=i._streams[n.id];if(a)a.addTrack(t),i.dispatchEvent(new Event("negotiationneeded"));else{var s=new e.MediaStream([t]);i._streams[n.id]=s,i._reverseStreams[s.id]=n,i.addStream(s)}return i.getSenders().find(function(e){return e.track===t})},e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===t.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var n=e._pc===t;if(!n)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");t._streams=t._streams||{};var i;Object.keys(t._streams).forEach(function(n){var r=t._streams[n].getTracks().find(function(t){return e.track===t});r&&(i=t._streams[n])}),i&&(1===i.getTracks().length?t.removeStream(i):i.removeTrack(e.track),t.dispatchEvent(new Event("negotiationneeded")))}}},shimPeerConnection:function(e){var t=n.detectBrowser(e);if(e.RTCPeerConnection){var r=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,i.push(a)):i.push(e.iceServers[o])}e.iceServers=i}return new r(e,t)},e.RTCPeerConnection.prototype=r.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}else e.RTCPeerConnection=function(t,n){return i("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,n)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}});var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,n){var i=this,r=arguments;if(arguments.length>0&&"function"==typeof e)return o.apply(this,arguments);if(0===o.length&&(0===arguments.length||"function"!=typeof arguments[0]))return o.apply(this,[]);var a=function(e){var t={},n=e.result();return n.forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){var c=function(e){r[1](s(a(e)))};return o.apply(this,[c,arguments[0]])}return new Promise(function(e,t){o.apply(i,[function(t){e(s(a(t)))},t])}).then(t,n)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,i=new Promise(function(i,r){n.apply(t,[e[0],i,r])});return e.length<2?i:i.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(i,r){n.apply(e,[i,r,t])})}return n.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var a=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?a.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}};t.exports={shimMediaStream:r.shimMediaStream,shimOnTrack:r.shimOnTrack,shimAddTrackRemoveTrack:r.shimAddTrackRemoveTrack,shimGetSendersWithDtmf:r.shimGetSendersWithDtmf,shimSourceObject:r.shimSourceObject,shimPeerConnection:r.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils.js":215,"./getusermedia":208}],208:[function(e,t){/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";var n=e("../utils.js"),i=n.log;t.exports=function(e){var t=n.detectBrowser(e),r=e&&e.navigator,o=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var o={};"number"==typeof i.ideal?(o[r("min",n)]=i.ideal,t.optional.push(o),o={},o[r("max",n)]=i.ideal,t.optional.push(o)):(o[r("",n)]=i.ideal,t.optional.push(o))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,n){if(e=JSON.parse(JSON.stringify(e)),e&&"object"==typeof e.audio){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"==typeof e.video){var s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});var c=t.version<61;if(!(!s||"user"!==s.exact&&"environment"!==s.exact&&"user"!==s.ideal&&"environment"!==s.ideal||r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!c)){delete e.video.facingMode;var l;if("environment"===s.exact||"environment"===s.ideal?l=["back","rear"]:("user"===s.exact||"user"===s.ideal)&&(l=["front"]),l)return r.mediaDevices.enumerateDevices().then(function(t){t=t.filter(function(e){return"videoinput"===e.kind});var r=t.find(function(e){return l.some(function(t){return-1!==e.label.toLowerCase().indexOf(t)})});return!r&&t.length&&-1!==l.indexOf("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=s.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=o(e.video),i("chrome: "+JSON.stringify(e)),n(e)})}e.video=o(e.video)}return i("chrome: "+JSON.stringify(e)),n(e)},s=function(e){return{name:{PermissionDeniedError:"NotAllowedError",InvalidStateError:"NotReadableError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotReadableError",MediaDeviceKillSwitchOn:"NotReadableError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,t,n){a(e,function(e){r.webkitGetUserMedia(e,t,function(e){n(s(e))})})};r.getUserMedia=c;var l=function(e){return new Promise(function(t,n){r.getUserMedia(e,t,n)})};if(r.mediaDevices||(r.mediaDevices={getUserMedia:l,enumerateDevices:function(){return new Promise(function(t){var n={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:n[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),r.mediaDevices.getUserMedia){var u=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return a(e,function(e){return u(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(s(e))})})}}else r.mediaDevices.getUserMedia=function(e){return l(e)};"undefined"==typeof r.mediaDevices.addEventListener&&(r.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof r.mediaDevices.removeEventListener&&(r.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":215}],209:[function(e,t){/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";var n=e("../utils"),i=e("./rtcpeerconnection_shim");t.exports={shimGetUserMedia:e("./getusermedia"),shimPeerConnection:function(e){var t=n.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCPeerConnection=i(e,t.version)},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}}},{"../utils":215,"./getusermedia":210,"./rtcpeerconnection_shim":211}],210:[function(e,t){/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";t.exports=function(e){var t=e&&e.navigator,n=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e)["catch"](function(e){return Promise.reject(n(e))})}}},{}],211:[function(e,t){/*
 *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";function n(e){var t=e.filter(function(e){return"audio"===e.kind}),n=e.filter(function(e){return"video"===e.kind});for(e=[];t.length||n.length;)t.length&&e.push(t.shift()),n.length&&e.push(n.shift());return e}function i(e,t){var n=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof i;return r&&(i=[i]),i=i.filter(function(e){var i=0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n;return i?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393}),delete e.url,e.urls=r?i[0]:i,!!i.length}return!1})}function r(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},r=function(e,t,n,r){var o=i(e.parameters.apt,n),a=i(t.parameters.apt,r);return o&&a&&o.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach(function(i){for(var o=0;o<t.codecs.length;o++){var a=t.codecs[o];if(i.name.toLowerCase()===a.name.toLowerCase()&&i.clockRate===a.clockRate){if("rtx"===i.name.toLowerCase()&&i.parameters&&a.parameters.apt&&!r(i,a,e.codecs,t.codecs))continue;a=JSON.parse(JSON.stringify(a)),a.numChannels=Math.min(i.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter(function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var i=0;i<t.headerExtensions.length;i++){var r=t.headerExtensions[i];if(e.uri===r.uri){n.headerExtensions.push(r);break}}}),n}function o(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}var a=e("sdp");t.exports=function(e,t){var s=function(n){var r=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){r[e]=o[e].bind(o)}),this.needNegotiation=!1,this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onicegatheringstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.canTrickleIceCandidates=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return r.localStreams},this.getRemoteStreams=function(){return r.remoteStreams},this.localDescription=new e.RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new e.RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},n&&n.iceTransportPolicy)switch(n.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=n.iceTransportPolicy}this.usingBundle=n&&"max-bundle"===n.bundlePolicy,n&&n.iceServers&&(this.iceOptions.iceServers=i(n.iceServers,t)),this._config=n||{},this.transceivers=[],this._localIceCandidatesBuffer=[],this._sdpSessionId=a.generateSessionId()};return s.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this.dispatchEvent(e),null!==this.onicegatheringstatechange&&this.onicegatheringstatechange(e)},s.prototype._emitBufferedCandidates=function(){var e=this,t=a.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){var i=!n.candidate||0===Object.keys(n.candidate).length;if(i)for(var r=1;r<t.length;r++)-1===t[r].indexOf("\r\na=end-of-candidates\r\n")&&(t[r]+="a=end-of-candidates\r\n");else t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n";if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){var o=e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});o&&"complete"!==e.iceGatheringStateChange&&(e.iceGatheringState="complete",e._emitGatheringStateChange())}}),this._localIceCandidatesBuffer=[]},s.prototype.getConfiguration=function(){return this._config},s.prototype._createTransceiver=function(e){var t=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,wantReceive:!0};if(this.usingBundle&&t)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return this.transceivers.push(n),n},s.prototype.addTrack=function(t,n){for(var i,r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(i=this.transceivers[r]);return i||(i=this._createTransceiver(t.kind)),i.track=t,i.stream=n,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),this._maybeFireNegotiationNeeded(),i.rtpSender},s.prototype.addStream=function(e){var n=this;if(t>=15025)this.localStreams.push(e),e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var i=e.clone();e.getTracks().forEach(function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),i.getTracks().forEach(function(e){n.addTrack(e,i)}),this.localStreams.push(i)}this._maybeFireNegotiationNeeded()},s.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},s.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},s.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},s.prototype._createIceGatherer=function(t,n){var i=this,r=new e.RTCIceGatherer(i.iceOptions);return r.onlocalcandidate=function(e){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;c?void 0===r.state&&(r.state="completed"):(s.component=1,o.candidate.candidate=a.writeCandidate(s));var l=a.splitSections(i.localDescription.sdp);l[o.candidate.sdpMLineIndex+1]+=c?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",i.localDescription.sdp=l.join("");var u=i._pendingOffer?i._pendingOffer:i.transceivers,d=u.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(i.iceGatheringState){case"new":c||i._localIceCandidatesBuffer.push(o),c&&d&&i._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":i._emitBufferedCandidates(),c||(i.dispatchEvent(o),null!==i.onicecandidate&&i.onicecandidate(o)),d&&(i.dispatchEvent(new Event("icecandidate")),null!==i.onicecandidate&&i.onicecandidate(new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange());break;case"complete":}},r},s.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateConnectionState()};var i=new e.RTCDtlsTransport(n);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:i}},s.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},s.prototype._transceive=function(e,n,i){var o=r(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(o.encodings=e.sendEncodingParameters,o.rtcp={cname:a.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(o.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(o)),i&&e.rtpReceiver&&("video"===e.kind&&e.recvEncodingParameters&&15019>t&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),o.encodings=e.recvEncodingParameters,o.rtcp={cname:e.rtcpParameters.cname,compound:e.rtcpParameters.compound},e.sendEncodingParameters.length&&(o.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(o))},s.prototype.setLocalDescription=function(t){var n=this;if(!o("setLocalDescription",t.type,this.signalingState)){var i=new Error("Can not set local "+t.type+" in state "+this.signalingState);return i.name="InvalidStateError",arguments.length>2&&"function"==typeof arguments[2]&&e.setTimeout(arguments[2],0,i),Promise.reject(i)}var s,c;if("offer"===t.type)this._pendingOffer&&(s=a.splitSections(t.sdp),c=s.shift(),s.forEach(function(e,t){var i=a.parseRtpParameters(e);n._pendingOffer[t].localCapabilities=i}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===t.type){s=a.splitSections(n.remoteDescription.sdp),c=s.shift();var l=a.matchPrefix(c,"a=ice-lite").length>0;s.forEach(function(e,t){var i=n.transceivers[t],o=i.iceGatherer,s=i.iceTransport,u=i.dtlsTransport,d=i.localCapabilities,p=i.remoteCapabilities,f=a.isRejected(e);if(!f&&!i.isDatachannel){var h=a.getIceParameters(e,c),g=a.getDtlsParameters(e,c);l&&(g.role="server"),n.usingBundle&&0!==t||(s.start(o,h,l?"controlling":"controlled"),u.start(g));var m=r(d,p);n._transceive(i,m.codecs.length>0,!1)}})}switch(this.localDescription={type:t.type,sdp:t.sdp},t.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+t.type+'"')}var u=arguments.length>1&&"function"==typeof arguments[1];if(u){var d=arguments[1];e.setTimeout(function(){d(),"new"===n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),n._emitBufferedCandidates()},0)}var p=Promise.resolve();return p.then(function(){u||("new"===n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),e.setTimeout(n._emitBufferedCandidates.bind(n),500))}),p},s.prototype.setRemoteDescription=function(n){var i=this;if(!o("setRemoteDescription",n.type,this.signalingState)){var r=new Error("Can not set remote "+n.type+" in state "+this.signalingState);return r.name="InvalidStateError",arguments.length>2&&"function"==typeof arguments[2]&&e.setTimeout(arguments[2],0,r),Promise.reject(r)}var s={},c=[],l=a.splitSections(n.sdp),u=l.shift(),d=a.matchPrefix(u,"a=ice-lite").length>0,p=a.matchPrefix(u,"a=group:BUNDLE ").length>0;this.usingBundle=p;var f=a.matchPrefix(u,"a=ice-options:")[0];switch(this.canTrickleIceCandidates=f?f.substr(14).split(" ").indexOf("trickle")>=0:!1,l.forEach(function(r,o){var l=a.splitLines(r),f=a.getKind(r),h=a.isRejected(r),g=l[0].substr(2).split(" ")[2],m=a.getDirection(r,u),v=a.parseMsid(r),y=a.getMid(r)||a.generateIdentifier();if("application"===f&&"DTLS/SCTP"===g)return void(i.transceivers[o]={mid:y,isDatachannel:!0});var _,b,w,A,C,E,T,S,x,j,k,R=a.parseRtpParameters(r);h||(j=a.getIceParameters(r,u),k=a.getDtlsParameters(r,u),k.role="client"),T=a.parseRtpEncodingParameters(r);var I=a.parseRtcpParameters(r),O=a.matchPrefix(r,"a=end-of-candidates",u).length>0,P=a.matchPrefix(r,"a=candidate:").map(function(e){return a.parseCandidate(e)}).filter(function(e){return"1"===e.component||1===e.component});("offer"===n.type||"answer"===n.type)&&!h&&p&&o>0&&i.transceivers[o]&&(i._disposeIceAndDtlsTransports(o),i.transceivers[o].iceGatherer=i.transceivers[0].iceGatherer,i.transceivers[o].iceTransport=i.transceivers[0].iceTransport,i.transceivers[o].dtlsTransport=i.transceivers[0].dtlsTransport,i.transceivers[o].rtpSender&&i.transceivers[o].rtpSender.setTransport(i.transceivers[0].dtlsTransport),i.transceivers[o].rtpReceiver&&i.transceivers[o].rtpReceiver.setTransport(i.transceivers[0].dtlsTransport)),"offer"!==n.type||h?"answer"!==n.type||h||(_=i.transceivers[o],b=_.iceGatherer,w=_.iceTransport,A=_.dtlsTransport,C=_.rtpReceiver,E=_.sendEncodingParameters,S=_.localCapabilities,i.transceivers[o].recvEncodingParameters=T,i.transceivers[o].remoteCapabilities=R,i.transceivers[o].rtcpParameters=I,p&&0!==o||((d||O)&&P.length&&w.setRemoteCandidates(P),w.start(b,j,"controlling"),A.start(k)),i._transceive(_,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!C||"sendrecv"!==m&&"sendonly"!==m?delete _.rtpReceiver:(x=C.track,v?(s[v.stream]||(s[v.stream]=new e.MediaStream),s[v.stream].addTrack(x),c.push([x,C,s[v.stream]])):(s["default"]||(s["default"]=new e.MediaStream),s["default"].addTrack(x),c.push([x,C,s["default"]])))):(_=i.transceivers[o]||i._createTransceiver(f),_.mid=y,_.iceGatherer||(_.iceGatherer=p&&o>0?i.transceivers[0].iceGatherer:i._createIceGatherer(y,o)),!O||!P.length||p&&0!==o||_.iceTransport.setRemoteCandidates(P),S=e.RTCRtpReceiver.getCapabilities(f),15019>t&&(S.codecs=S.codecs.filter(function(e){return"rtx"!==e.name})),E=[{ssrc:1001*(2*o+2)}],("sendrecv"===m||"sendonly"===m)&&(C=new e.RTCRtpReceiver(_.dtlsTransport,f),x=C.track,v?(s[v.stream]||(s[v.stream]=new e.MediaStream,Object.defineProperty(s[v.stream],"id",{get:function(){return v.stream}})),Object.defineProperty(x,"id",{get:function(){return v.track}}),s[v.stream].addTrack(x),c.push([x,C,s[v.stream]])):(s["default"]||(s["default"]=new e.MediaStream),s["default"].addTrack(x),c.push([x,C,s["default"]]))),_.localCapabilities=S,_.remoteCapabilities=R,_.rtpReceiver=C,_.rtcpParameters=I,_.sendEncodingParameters=E,_.recvEncodingParameters=T,i._transceive(i.transceivers[o],!1,"sendrecv"===m||"sendonly"===m))}),this.remoteDescription={type:n.type,sdp:n.sdp},n.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+n.type+'"')}return Object.keys(s).forEach(function(t){var n=s[t];if(n.getTracks().length){i.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,i.dispatchEvent(r),null!==i.onaddstream&&e.setTimeout(function(){i.onaddstream(r)},0),c.forEach(function(t){var r=t[0],o=t[1];if(n.id===t[2].id){var a=new Event("track");a.track=r,a.receiver=o,a.streams=[n],i.dispatchEvent(a),null!==i.ontrack&&e.setTimeout(function(){i.ontrack(a)},0)}})}}),e.setTimeout(function(){i&&i.transceivers&&i.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),arguments.length>1&&"function"==typeof arguments[1]&&e.setTimeout(arguments[1],0),Promise.resolve()},s.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},s.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},s.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&this.needNegotiation!==!0&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation!==!1){t.needNegotiation=!1;var e=new Event("negotiationneeded");t.dispatchEvent(e),null!==t.onnegotiationneeded&&t.onnegotiationneeded(e)}},0))},s.prototype._updateConnectionState=function(){var e,t=this,n={"new":0,closed:0,connecting:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){n[e.iceTransport.state]++,n[e.dtlsTransport.state]++}),n.connected+=n.completed,e="new",n.failed>0?e="failed":n.connecting>0||n.checking>0?e="connecting":n.disconnected>0?e="disconnected":n["new"]>0?e="new":(n.connected>0||n.completed>0)&&(e="connected"),e!==t.iceConnectionState){t.iceConnectionState=e;var i=new Event("iceconnectionstatechange");this.dispatchEvent(i),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(i)}},s.prototype.createOffer=function(){var i=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");var r;1===arguments.length&&"function"!=typeof arguments[0]?r=arguments[0]:3===arguments.length&&(r=arguments[2]);var o=this.transceivers.filter(function(e){return"audio"===e.kind}).length,s=this.transceivers.filter(function(e){return"video"===e.kind}).length;if(r){if(r.mandatory||r.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==r.offerToReceiveAudio&&(o=r.offerToReceiveAudio===!0?1:r.offerToReceiveAudio===!1?0:r.offerToReceiveAudio),void 0!==r.offerToReceiveVideo&&(s=r.offerToReceiveVideo===!0?1:r.offerToReceiveVideo===!1?0:r.offerToReceiveVideo)}for(this.transceivers.forEach(function(e){"audio"===e.kind?(o--,0>o&&(e.wantReceive=!1)):"video"===e.kind&&(s--,0>s&&(e.wantReceive=!1))});o>0||s>0;)o>0&&(this._createTransceiver("audio"),o--),s>0&&(this._createTransceiver("video"),s--);var c=n(this.transceivers),l=a.writeSessionBoilerplate(this._sdpSessionId);c.forEach(function(n,r){var o=n.track,s=n.kind,l=a.generateIdentifier();n.mid=l,n.iceGatherer||(n.iceGatherer=i.usingBundle&&r>0?c[0].iceGatherer:i._createIceGatherer(l,r));var u=e.RTCRtpSender.getCapabilities(s);15019>t&&(u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name})),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1")});var d=[{ssrc:1001*(2*r+1)}];o&&t>=15019&&"video"===s&&(d[0].rtx={ssrc:1001*(2*r+1)+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,s)),n.localCapabilities=u,n.sendEncodingParameters=d}),"max-compat"!==this._config.bundlePolicy&&(l+="a=group:BUNDLE "+c.map(function(e){return e.mid}).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",c.forEach(function(e){l+=a.writeMediaSection(e,e.localCapabilities,"offer",e.stream),l+="a=rtcp-rsize\r\n"}),this._pendingOffer=c;var u=new e.RTCSessionDescription({type:"offer",sdp:l});return arguments.length&&"function"==typeof arguments[0]&&e.setTimeout(arguments[0],0,u),Promise.resolve(u)},s.prototype.createAnswer=function(){var n=a.writeSessionBoilerplate(this._sdpSessionId);this.usingBundle&&(n+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(e,i){if(e.isDatachannel)return void(n+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+e.mid+"\r\n");if(e.stream){var o;"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&t>=15019&&"video"===e.kind&&(e.sendEncodingParameters[0].rtx={ssrc:1001*(2*i+2)+1})}var s=r(e.localCapabilities,e.remoteCapabilities),c=s.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length;!c&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=a.writeMediaSection(e,s,"answer",e.stream),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")});var i=new e.RTCSessionDescription({type:"answer",sdp:n});return arguments.length&&"function"==typeof arguments[0]&&e.setTimeout(arguments[0],0,i),Promise.resolve(i)},s.prototype.addIceCandidate=function(t){if(t){var n=t.sdpMLineIndex;if(t.sdpMid)for(var i=0;i<this.transceivers.length;i++)if(this.transceivers[i].mid===t.sdpMid){n=i;break}var r=this.transceivers[n];if(r){var o=Object.keys(t.candidate).length>0?a.parseCandidate(t.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return Promise.resolve();if(o.component&&"1"!==o.component&&1!==o.component)return Promise.resolve();r.iceTransport.addRemoteCandidate(o);var s=a.splitSections(this.remoteDescription.sdp);s[n+1]+=(o.type?t.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=s.join("")}}else for(var c=0;c<this.transceivers.length;c++)if(this.transceivers[c].iceTransport.addRemoteCandidate({}),this.usingBundle)return Promise.resolve();return arguments.length>1&&"function"==typeof arguments[1]&&e.setTimeout(arguments[1],0),Promise.resolve()},s.prototype.getStats=function(){var t=[];this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){e[n]&&t.push(e[n].getStats())})});var n=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1],i=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};return new Promise(function(r){var o=new Map;Promise.all(t).then(function(t){t.forEach(function(e){Object.keys(e).forEach(function(t){e[t].type=i(e[t]),o.set(t,e[t])})}),n&&e.setTimeout(n,0,o),r(o)})})},s}},{sdp:195}],212:[function(e,t){/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";var n=e("../utils"),i={shimOnTrack:function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(e){"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(e){var t=n.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(n,i){if(t.version<38&&n&&n.iceServers){for(var r=[],o=0;o<n.iceServers.length;o++){var a=n.iceServers[o];if(a.hasOwnProperty("urls"))for(var s=0;s<a.urls.length;s++){var c={url:a.urls[s]};0===a.urls[s].indexOf("turn")&&(c.username=a.username,c.credential=a.credential),r.push(c)}else r.push(n.iceServers[o])}n.iceServers=r}return new e.mozRTCPeerConnection(n,i)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});var i=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var r=function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t},o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,i){return a.apply(this,[e||null]).then(function(e){if(t.version<48&&(e=r(e)),t.version<53&&!n)try{e.forEach(function(e){e.type=o[e.type]||e.type})}catch(i){if("TypeError"!==i.name)throw i;e.forEach(function(t,n){e.set(n,Object.assign({},t,{type:o[t.type]||t.type}))})}return e}).then(n,i)}}}};t.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":215,"./getusermedia":213}],213:[function(e,t){/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";var n=e("../utils"),i=n.log;t.exports=function(e){var t=n.detectBrowser(e),r=e&&e.navigator,o=e&&e.MediaStreamTrack,a=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},s=function(e,n,o){var s=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if((void 0!==i.min||void 0!==i.max||void 0!==i.exact)&&t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var r={};r[n]="number"==typeof i.ideal?{min:i.ideal,max:i.ideal}:i.ideal,e.advanced.push(r),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(i("spec: "+JSON.stringify(e)),e.audio&&(e.audio=s(e.audio)),e.video&&(e.video=s(e.video)),i("ff37: "+JSON.stringify(e))),r.mozGetUserMedia(e,n,function(e){o(a(e))})},c=function(e){return new Promise(function(t,n){s(e,t,n)})};if(r.mediaDevices||(r.mediaDevices={getUserMedia:c,addEventListener:function(){},removeEventListener:function(){}}),r.mediaDevices.enumerateDevices=r.mediaDevices.enumerateDevices||function(){return new Promise(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},t.version<41){var l=r.mediaDevices.enumerateDevices.bind(r.mediaDevices);r.mediaDevices.enumerateDevices=function(){return l().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(t.version<49){var u=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return u(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(a(e))})}}if(!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var d=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},p=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),d(e.audio,"autoGainControl","mozAutoGainControl"),d(e.audio,"noiseSuppression","mozNoiseSuppression")),p(e)},o&&o.prototype.getSettings){var f=o.prototype.getSettings;o.prototype.getSettings=function(){var e=f.apply(this,arguments);return d(e,"mozAutoGainControl","autoGainControl"),d(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var h=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),d(e,"autoGainControl","mozAutoGainControl"),d(e,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[e])}}}r.getUserMedia=function(e,i,o){return t.version<44?s(e,i,o):(n.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),void r.mediaDevices.getUserMedia(e).then(i,o))}}},{"../utils":215}],214:[function(e,t){/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";var n=e("../utils"),i={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach(function(n){n.id===e&&(t=n)}),this._remoteStreams&&this._remoteStreams.forEach(function(n){n.id===e&&(t=n)}),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var n=this;e.getTracks().forEach(function(i){t.call(n,i,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,n){n&&(this._localStreams?-1===this._localStreams.indexOf(n)&&this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var n=this,i=e.getTracks();this.getSenders().forEach(function(e){-1!==i.indexOf(e.track)&&n.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){"object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){var t=e.streams[0];if(this._remoteStreams||(this._remoteStreams=[]),!(this._remoteStreams.indexOf(t)>=0)){this._remoteStreams.push(t);var n=new Event("addstream");n.stream=e.streams[0],this.dispatchEvent(n)}}.bind(this))}}))},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};var s=function(e,t,n){var i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=s,s=function(e,t,n){var i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=s,s=function(e,t,n){var i=a.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=s}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,i){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,r.push(a)):r.push(e.iceServers[o])}e.iceServers=r}return new t(e,i)},e.RTCPeerConnection.prototype=t.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}};t.exports={shimCallbacksAPI:i.shimCallbacksAPI,shimLocalStreamsAPI:i.shimLocalStreamsAPI,shimRemoteStreamsAPI:i.shimRemoteStreamsAPI,shimGetUserMedia:i.shimGetUserMedia,shimRTCIceServerUrls:i.shimRTCIceServerUrls}},{"../utils":215}],215:[function(e,t){/*
 *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
 */
"use strict";var n=!0,i=!0,r={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(i=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){i&&console.warn(e+" is deprecated, please use "+t+" instead.")},extractVersion:function(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)},detectBrowser:function(e){var t=e&&e.navigator,n={};if(n.browser=null,n.version=null,"undefined"==typeof e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=this.extractVersion(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)if(e.webkitRTCPeerConnection)n.browser="chrome",n.version=this.extractVersion(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!t.userAgent.match(/Version\/(\d+).(\d+)/))return n.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",n;n.browser="safari",n.version=this.extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1)}else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=this.extractVersion(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!t.mediaDevices||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=this.extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return n},shimCreateObjectURL:function(e){var t=e&&e.URL;if(!("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype))return void 0;var n=t.createObjectURL.bind(t),i=t.revokeObjectURL.bind(t),o=new Map,a=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++a;return o.set(t,e),r.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return n(e)},t.revokeObjectURL=function(e){i(e),o["delete"](e)};var s=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return s.get.apply(this)},set:function(e){return this.srcObject=o.get(e)||null,s.set.apply(this,[e])}});var c=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=o.get(arguments[1])||null),c.apply(this,arguments)}}};t.exports={log:r.log,deprecated:r.deprecated,disableLog:r.disableLog,disableWarnings:r.disableWarnings,extractVersion:r.extractVersion,shimCreateObjectURL:r.shimCreateObjectURL,detectBrowser:r.detectBrowser.bind(r)}},{}],216:[function(e,t){function n(e,t){var n;return n=t?new r(e,t):new r(e)}var i=function(){return window}(),r=i.WebSocket||i.MozWebSocket;t.exports=r?n:null,r&&(n.prototype=r.prototype)},{}],217:[function(e,t){"use strict";t.exports={version:"v2.12.2",buildHash:"7d8c59bd3d",debug:"false",websiteURL:"http://www.tokbox.com",cdnURL:"http://static.opentok.com",loggingURL:"http://hlg.tokbox.com/prod",apiURL:"http://anvil.opentok.com",supportSSL:"true",cdnURLSSL:"https://static.opentok.com",loggingURLSSL:"https://hlg.tokbox.com/prod",apiURLSSL:"https://anvil.opentok.com",minimumVersion:{firefox:45,chrome:49},sentryDSN:"https://40bf769a2f474b2a8ef66d2809c7cfe0@sentry.io/104064",enableErrorReporting:!1}},{}],218:[function(e,t){"use strict";var n=e("./elementCollection/shorthandSelector");n.ElementCollection=e("./elementCollection/index"),n.util=e("./util"),n.env=e("./env"),n.logging=e("./logging"),n.ajax=e("./ajax"),n.Event=e("./behaviours/eventing/event"),n.eventing=e("./behaviours/eventing"),n.statable=e("./behaviours/statable"),n.Analytics=e("./analytics"),n.casting=e("./casting"),n.Collection=e("./collection"),n.domExtras=e("./domExtras"),n.Error=e("./error"),n.Modal=e("./modal"),n.isWebSocketSupported=e("./isWebSocketSupported"),n.useLogHelpers=e("./logging/mixin"),Object.keys(n).forEach(function(e){var t=n[e],i=t._attachToOTHelpers||{};Object.keys(i).forEach(function(t){!Object.hasOwnProperty.call(n,t)||"util"===e&&"bind"===t||console.warn("More than one module is trying to define "+t+" on OTHelpers."),n[t]=i[t]})}),t.exports=n},{"./ajax":219,"./analytics":220,"./behaviours/eventing":221,"./behaviours/eventing/event":222,"./behaviours/statable":224,"./casting":225,"./collection":226,"./domExtras":227,"./elementCollection/index":232,"./elementCollection/shorthandSelector":233,"./env":234,"./error":235,"./isWebSocketSupported":236,"./logging":237,"./logging/mixin":238,"./modal":240,"./util":241}],219:[function(e,t){(function(n){"use strict";function i(e){if("string"==typeof e)return e;var t=[];return Object.keys(e).forEach(function(n){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}),t.join("&").replace(/\+/g,"%20")}var r=e("../elementCollection/shorthandSelector"),o=e("../env"),a=e("../makeEverythingAttachToOTHelpers"),s=e("../util"),c={};t.exports=c,"Node"!==o.name&&(c.request=function(e,t,o){var a=new n.XMLHttpRequest,s=t||{},c=s.method;if(!c)return void o(new Error("No HTTP method specified in options"));t.overrideMimeType&&(a.overrideMimeType&&a.overrideMimeType(t.overrideMimeType),delete t.overrideMimeType),o&&(r(a).on("load",function(e){var t=e.target.status;t>=200&&(300>t||304===t)?o(null,e):o(e)}),r(a).on("error",o)),a.open(t.method,e,!0),s.headers||(s.headers={});for(var l in s.headers)Object.prototype.hasOwnProperty.call(s.headers,l)&&a.setRequestHeader(l,s.headers[l]);a.send(t.body&&i(t.body))},c.get=function(e,t,n){var i=s.extend(t||{},{method:"GET"});c.request(e,i,n)},c.post=function(e,t,n){var i=s.extend(t||{},{method:"POST"});c.request(e,i,n)},c.getJSON=function(e,t,n){t=t||{};var i=function(e,t){if(e)n(e,t&&t.target&&t.target.responseText);else{var i=void 0;try{i=JSON.parse(t.target.responseText)}catch(r){return void n(r,t&&t.target&&t.target.responseText)}n(null,i,t)}},r=s.extend({Accept:"application/json"},t.headers||{});c.get(e,s.extend(t||{},{headers:r}),i)},a(c))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../elementCollection/shorthandSelector":233,"../env":234,"../makeEverythingAttachToOTHelpers":239,"../util":241}],220:[function(e,t){"use strict";var n=e("./ajax"),i=e("./logging"),r=e("./util"),o=[],a=!1;t.exports=function(e){var t=e+"/logging/ClientEvent",s=e+"/logging/ClientQos",c={},l=function(e,i,r){n.post(i?s:t,{body:e,overrideMimeType:"text/plain",headers:{Accept:"text/plain","Content-Type":"application/json"}},r)},u=function f(){if(!a&&o.length>0){a=!0;var e=o[0],t=function(){o.shift(),a=!1,f()};e&&l(e.data,e.isQos,function(n){n&&(console.log("Failed to send ClientEvent, moving on to the next item."),e.onComplete&&e.onComplete()),e.onComplete&&e.onComplete(n),setTimeout(t,50)})}},d=function(e,t,n){o.push({data:e,onComplete:t,isQos:n}),u()},p=function(e,t,n){if(!n)return!1;var i=[n,t,e].join("_"),r=100;return(c[i]||0)<=r};this.logError=function(e,t,n,i,o){o=o||{};var a=o.partnerId;if(!p(e,t,a)){var s=[a,t,e].join("_"),l=i?i:null;c[s]="undefined"!=typeof c[s]?c[s]+1:1,this.logEvent(r.extend(o,{action:t+"."+e,payload:l}),!1)}},this.logEvent=function(e,t,n,r){return t=t||!1,n&&!isNaN(n)&&Math.random()>n?void i.debug("skipping sending analytics due to throttle:",e):(i.debug("sending analytics:",e),e=JSON.stringify(e),void d(e,r,t))},this.logQOS=function(e){this.logEvent(e,!0)}}},{"./ajax":219,"./logging":237,"./util":241}],221:[function(e,t){"use strict";var n=e("./eventing/innerEventingMixin"),i=e("../logging"),r=e("../util");t.exports=function(e,t){var o=n(t);return e.on=function(e,t,n){if("string"==typeof e&&t)o.addListeners(e.split(" "),t,n);else for(var i in e)e.hasOwnProperty(i)&&o.addListeners([i],e[i],t);return this},e.off=function(e,t,n){if("string"==typeof e)t&&r.isFunction(t)?o.removeListeners(e.split(" "),t,n):o.removeAllListenersNamed(e.split(" "));else if(e)for(var i in e)e.hasOwnProperty(i)&&o.removeListeners([i],e[i],t);else o.removeAllListeners();return this},e.once=function(t,n,i){var r=function o(){e.off(t,o,i),n.apply(i,arguments)};return r.originalHandler=n,e.on(t,r,i),this},e.dispatchEvent=function(e,t){if(!e.type)throw i.error("OTHelpers.Eventing.dispatchEvent: Event has no type"),i.error(e),new Error("OTHelpers.Eventing.dispatchEvent: Event has no type");return e.target||(e.target=this),o.dispatchEvent(e,t),this},e.trigger=function(){return o.trigger.apply(o,arguments),this},e.emit=e.trigger,e.addEventListener=function(t,n,r){return i.warn("The addEventListener() method is deprecated. Use on() or once() instead."),e.on(t,n,r)},e.removeEventListener=function(t,n,r){return i.warn("The removeEventListener() method is deprecated. Use off() instead."),e.off(t,n,r)},e.__testOnly||(e.__testOnly={}),e.__testOnly.innerEventing=o,e}},{"../logging":237,"../util":241,"./eventing/innerEventingMixin":223}],222:[function(e,t){"use strict";var n=e("../../logging");t.exports=function(){return function(e,t){this.type=e,this.cancelable=void 0!==t?t:!0;var i=!1;this.preventDefault=function(){this.cancelable?i=!0:n.warn("Event.preventDefault :: Trying to preventDefault on an Event that isn't cancelable")},this.isDefaultPrevented=function(){return i}}}},{"../../logging":237}],223:[function(e,t){"use strict";t.exports=function(e){function t(e,t){e&&e.apply(void 0,t.slice())}function n(e,n,i){var o=r.events[e];if(o&&0!==o.length){var a=o.length;o.forEach(function(o){function s(e){return e.handler===o.handler}setTimeout(function(){try{r.events[e]&&r.events[e].some(s)&&(o.closure||o.handler).apply(o.context||null,n)}finally{a--,0===a&&t(i,n)}})})}}function i(e,n,i){var o=r.events[e];o&&0!==o.length&&(o.forEach(function(e){(e.closure||e.handler).apply(e.context||null,n)}),t(i,n))}var r={events:{}},o=e===!0?i:n;return r.addListeners=function(e,t,n,i){var a={handler:t};n&&(a.context=n),i&&(a.closure=i),e.forEach(function(e){r.events[e]||(r.events[e]=[]),r.events[e].push(a);var t=e+":added";r.events[t]&&o(t,[r.events[e].length])})},r.removeListeners=function(e,t,n){function i(e){var i=e.handler.originalHandler===t||e.handler===t;return!(i&&e.context===n)}e.forEach(function(e){if(r.events[e]){r.events[e]=r.events[e].filter(i),0===r.events[e].length&&delete r.events[e];var t=e+":removed";r.events[t]&&o(t,[r.events[e]?r.events[e].length:0])}})},r.removeAllListenersNamed=function(e){e.forEach(function(e){r.events[e]&&delete r.events[e]})},r.removeAllListeners=function(){r.events={}},r.dispatchEvent=function(e,n){return r.events[e.type]&&0!==r.events[e.type].length?void o(e.type,[e],n):void t(n,[e])},r.trigger=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();r.events[t]&&0!==r.events[t].length&&o(t,e)},r}},{}],224:[function(e,t){"use strict";var n=e("../util");t.exports=function(e,t,i,r,o){var a=void 0,s=i;e.currentState=i;var c=function(i){if(s!==i){if(-1===t.indexOf(i))return void(o&&n.isFunction(o)&&o("invalidState",i));e.previousState=s,a=s,e.currentState=i,s=i,r&&n.isFunction(r)&&r(i,a)}};return e.is=function(){return-1!==Array.prototype.indexOf.call(arguments,s)},e.isNot=function(){return-1===Array.prototype.indexOf.call(arguments,s)},c}},{"../util":241}],225:[function(e,t){"use strict";var n=e("./makeEverythingAttachToOTHelpers"),i={};t.exports=i,i.castToBoolean=function(e,t){return void 0===e?t:"true"===e||e===!0},i.roundFloat=function(e,t){return Number(e.toFixed(t))},n(i)},{"./makeEverythingAttachToOTHelpers":239}],226:[function(e,t){"use strict";var n=e("./behaviours/eventing"),i=e("./logging"),r=e("./util");t.exports=function(e){var t=[],o={},a=e||"id";n(this,!0);var s=function(e,t){return r.isFunction(e[t])?e[t]():e[t]},c=function(e){this.trigger("update",e),this.trigger("update:"+e.target.id,e)}.bind(this),l=function(e){this.remove(e.target,e.reason)}.bind(this);this.reset=function(){t.forEach(function(e){e.off("updated",c,this),e.off("destroyed",l,this)},this),t=[],o={}},this.destroy=function(e){t.forEach(function(t){t&&"function"==typeof t.destroy&&t.destroy(e,!0)}),this.reset(),this.off()},this.get=function(e){return e&&void 0!==o[e]?t[o[e]]:void 0},this.has=function(e){return e&&void 0!==o[e]},this.toString=function(){return t.toString()},this.where=function(e,n){return r.isFunction(e)?t.filter(e,n):t.filter(function(t){for(var n in e)if(e.hasOwnProperty(n)&&s(t,n)!==e[n])return!1;return!0})},this.find=function(e,n){var i=void 0;i=r.isFunction(e)?e:function(t){for(var n in e)if(e.hasOwnProperty(n)&&s(t,n)!==e[n])return!1;return!0},i=i.bind(n);for(var o=0;o<t.length;++o)if(i(t[o])===!0)return t[o];return null},this.forEach=function(e,n){return t.forEach(e,n),this},this.add=function(e){var n=s(e,a);return this.has(n)?(i.warn("Model "+n+" is already in the collection",t),this):(o[n]=t.push(e)-1,e.on("updated",c,this),e.on("destroyed",l,this),this.trigger("add",e),this.trigger("add:"+n,e),this)},this.remove=function(e,n){var i=s(e,a);t.splice(o[i],1);for(var r=o[i];r<t.length;++r)o[s(t[r],a)]=r;return delete o[i],e.off("updated",c,this),e.off("destroyed",l,this),this.trigger("remove",e,n),this.trigger("remove:"+i,e,n),this},this._triggerAddEvents=function(){this.where.apply(this,arguments).forEach(function(e){this.trigger("add",e),this.trigger("add:"+s(e,a),e)},this)},this.length=function(){return t.length}}},{"./behaviours/eventing":221,"./logging":237,"./util":241}],227:[function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./makeEverythingAttachToOTHelpers"),r={};t.exports=r,r.isElementNode=function(e){return e&&"object"===("undefined"==typeof e?"undefined":n(e))&&1===e.nodeType},r.createElement=function(e,t,i,r){var o=(r||document).createElement(e);t=t||{},Object.keys(t).forEach(function(e){if("object"===n(t[e])){o[e]||(o[e]={});var i=t[e];Object.keys(i).forEach(function(t){o[e][t]=i[t]})}else"className"===e?o.className=t[e]:o.setAttribute(e,t[e])});var a=function(e){"string"==typeof e?o.innerHTML+=e:o.appendChild(e)};return Array.isArray(i)?i.forEach(a):i&&a(i),o},i(r)},{"./makeEverythingAttachToOTHelpers":239}],228:[function(e,t){"use strict";var n=e("../../util"),i={"for":"htmlFor","class":"className"};t.exports=function(e){e.prototype.attr=function(e,t){var r=this;if(n.isObject(e)){var o=void 0;Object.keys(e).forEach(function(t){o=i[t]||t,r.first.setAttribute(o,e[t])})}else{if(void 0===t)return this.first.getAttribute(i[e]||e);this.first.setAttribute(i[e]||e,t)}return this},e.prototype.removeAttr=function(e){var t=i[e]||e;return this.forEach(function(e){e.removeAttribute(t)}),this},e.prototype.html=function(e){return void 0!==e&&(this.first.innerHTML=e),this.first.innerHTML},e.prototype.center=function(t,n){var i=void 0;return this.forEach(function(r){i=new e(r),t=t||parseInt(i.width(),10),n=n||parseInt(i.height(),10);var o=-.5*t+"px",a=-.5*n+"px";i.css("margin",a+" 0 0 "+o).addClass("OT_centered")}),this},e._attachToOTHelpers.centerElement=function(t,n,i){return new e(t).center(n,i)};var t=function(t){return t.offsetWidth>0?t.offsetWidth+"px":new e(t).css("width")},r=function(t){return t.offsetHeight>0?t.offsetHeight+"px":new e(t).css("height")};e.prototype.width=function(e){return e?(this.css("width",e),this):this.isDisplayNone()?this.makeVisibleAndYield(function(e){return t(e)})[0]:t(this.get(0))},e._attachToOTHelpers.width=function(t,n){var i=new e(t).width(n);return n?e._attachToOTHelpers:i},e.prototype.height=function(e){return e?(this.css("height",e),this):this.isDisplayNone()?this.makeVisibleAndYield(function(e){return r(e)})[0]:r(this.get(0))},e._attachToOTHelpers.height=function(t,n){var i=new e(t).height(n);return n?e._attachToOTHelpers:i}}},{"../../util":241}],229:[function(e,t){"use strict";function n(e,t){return t?a()?e.classList.contains(t):e.className.indexOf(t)>-1:!1}function i(e,t){if(t&&0!==t.length&&1===e.nodeType){var i=t.length,r=0;if(a())for(;i>r;++r)e.classList.toggle(t[r]);else{for(var o=(" "+e.className+" ").replace(/[\s+]/," ");i>r;++r)n(e,t[r])?o=o.replace(" "+t[r]+" "," "):o+=t[r]+" ";e.className=o.trim()}}}function r(e,t){if(t&&0!==t.length&&1===e.nodeType){var n=t.length,i=0;if(a())for(;n>i;++i)e.classList.add(t[i]);else if(e.className||1!==t.length){for(var r=" "+e.className+" ";n>i;++i)~r.indexOf(" "+t[i]+" ")||(r+=t[i]+" ");e.className=r.trim()}else e.className=t.join(" ")}}function o(e,t){if(t&&0!==t.length&&1===e.nodeType){var n=t.length,i=0;if(a())for(;n>i;++i)e.classList.remove(t[i]);else{for(var r=(" "+e.className+" ").replace(/[\s+]/," ");n>i;++i)r=r.replace(" "+t[i]+" "," ");e.className=r.trim()}}}var a=e("../../../helpers/hasClassListCapability.js");t.exports=function(e){e.prototype.addClass=function(e){if(e){var t=e.trim().split(/\s+/);this.forEach(function(e){r(e,t)})}return this},e.prototype.removeClass=function(e){if(e){var t=e.trim().split(/\s+/);this.forEach(function(e){o(e,t)})}return this},e.prototype.toggleClass=function(e){if(e){var t=e.trim().split(/\s+/);this.forEach(function(e){i(e,t)})}return this},e.prototype.hasClass=function(e){return this.some(function(t){return n(t,e)})}}},{"../../../helpers/hasClassListCapability.js":262}],230:[function(e,t){(function(n){"use strict";function i(){return a[r.name]}var r=e("../../env"),o=n.getComputedStyle,a={Firefox:"moz",Opera:"O",IE:"ms",Chrome:"Webkit",Safari:"Webkit"};t.exports=function(e,t){var n={},r={},a=function(t){if(r[t.ownerDocument]&&r[t.ownerDocument][t.nodeName])return r[t.ownerDocument][t.nodeName];r[t.ownerDocument]||(r[t.ownerDocument]={});var n=t.ownerDocument.createElement(t.nodeName),i=void 0;return t.ownerDocument.body.appendChild(n),i=new e(n).css("display"),r[t.ownerDocument][t.nodeName]=i,new e(n).remove(),n=null,i},s=function(e){var t=o(e);return"none"===t.getPropertyValue("display")},c=function(e,t){if(t in e.style)return t;var n=i(),r=n+t[0].toUpperCase()+t.slice(1);return r in e.style?r:t},l=function(e,t){var n=e.style;for(var i in t)t.hasOwnProperty(i)&&(n[c(e,i)]=t[i])},u=function(e,t,n){e.style[c(e,t)]=n},d=function(e,t){var n=c(e,t),i=o(e),r=i.getPropertyValue(n);return""===r&&(r=e.style[n]),r},p=function(t,n,i){var r=new e(t),o={},a=void 0,s=void 0;for(a in n)n.hasOwnProperty(a)&&(o[a]=t.style[a],r.css(a,n[a]));s=i(t);for(a in n)n.hasOwnProperty(a)&&r.css(a,o[a]||"");return s};e.prototype.show=function(){return this.forEach(function(e){var t=e.style.display;(""===t||"none"===t)&&(e.style.display=n[e]||"",delete n[e]),s(e)&&(n[e]="none",e.style.display=a(e))})},e.prototype.hide=function(){return this.forEach(function(e){"none"!==e.style.display&&(n[e]=e.style.display,e.style.display="none")})},e.prototype.css=function(e,t){return 0===this.length?void 0:"string"!=typeof e?this.forEach(function(t){l(t,e)}):void 0!==t?this.forEach(function(n){u(n,e,t)}):d(this.first,e,t)},e.prototype.makeVisibleAndYield=function(e){var n={display:"block",visibility:"hidden"},i=[];return this.forEach(function(r){var o=t(r);i.push(o?p(o,n,e):void 0)}),i}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../env":234}],231:[function(e,t){(function(n){"use strict";var i=e("../../util");t.exports=function(e){var t=0,r=0,o=function(t,r,o){var a={},s=function(n){switch(n){case"width":return new e(t).width();case"height":return new e(t).height();default:return new e(t).css(n)}};r.forEach(function(e){a[e]=s(e)});var c=new n.MutationObserver(function(n){var c={};n.forEach(function(n){if("style"===n.attributeName){var i=new e(t).isDisplayNone();r.forEach(function(e){if(!i||"width"!==e&&"height"!==e){var t=s(e);t!==a[e]&&(c[e]=[a[e],t],a[e]=t)}})}}),i.isEmpty(c)||setTimeout(function(){o.call(null,c)})});return c.observe(t,{attributes:!0,attributeFilter:["style"],childList:!1,characterData:!1,subtree:!1}),c},a=function(t,i){var o=new n.MutationObserver(function(t){var n=[];t.forEach(function(e){e.removedNodes.length&&(n=n.concat(Array.prototype.slice.call(e.removedNodes)))}),n.length&&setTimeout(function(){i(new e(n))})});o.observe(t,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),r++;var a=o.disconnect;return o.disconnect=function(){a.apply(o,arguments),r--},o},s=function(e,n){var i={width:0,height:0},r=setInterval(function(){var t=e.getBoundingClientRect();(i.width!==t.width||i.height!==t.height)&&(n(t,i),i={width:t.width,height:t.height})},200);return t++,{disconnect:function(){clearInterval(r),t--}}};e.prototype.observeStyleChanges=function(e,t){var n=[];return this.forEach(function(i){n.push(o(i,e,t))}),n},e.prototype.observeNodeOrChildNodeRemoval=function(e){var t=[];return this.forEach(function(n){t.push(a(n,e))}),t},e.prototype.observeSize=function(e){var t=[];return this.forEach(function(n){t.push(s(n,e))}),t},e._attachToOTHelpers.observeStyleChanges=function(t,n,i){return new e(t).observeStyleChanges(n,i)[0]},e._attachToOTHelpers.observeNodeOrChildNodeRemoval=function(t,n){return new e(t).observeNodeOrChildNodeRemoval(n)[0]},e.__testOnly||(e.__testOnly={}),e.__testOnly.sizeObserverCount=function(){return t},e.__testOnly.nodeRemovalObserverCount=function(){return r}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../util":241}],232:[function(e,t){(function(n){"use strict";var i={attributes:e("./extensions/attributes"),css:e("./extensions/css"),classNames:e("./extensions/classNames"),observers:e("./extensions/observers")},r=e("../env"),o=e("../util"),a=function(e){if("IE"!==r.name||r.version>9)return Array.prototype.slice.call(e);for(var t=[],n=0,i=e.length;i>n;++n)t.push(e[n]);return t},s=function(e,t){var i=void 0;if("undefined"==typeof e)return[];if("string"==typeof e){i=[];var r=o.detectIdSelectors.exec(e);if(t=t||document,r&&r[1]){var s=t.getElementById(r[1]);s&&i.push(s)}else i=t.querySelectorAll(e)}else e&&(e.nodeType||n.XMLHttpRequest&&"XMLHttpRequest"==e.constructor.name||e===n)?(i=[e],t=e):Array.isArray(e)?(i=e.slice(),t=null):i=a(i);return i},c=function(e,t){var n=s(e,t);this.context=t,this.toArray=function(){return n},this.length=n.length,this.first=n[0],this.last=n[n.length-1],this.get=function(e){return void 0===e?n:n[e]}};t.exports=c,c._attachToOTHelpers={},c._attachToOTHelpers.removeElement=function(e){return new c(e).remove()},c.prototype.getAsArray=function(){var e=this.get();return o.isFunction(e.forEach)||(e=a(e)),e},c.prototype.some=function(e,t){return this.getAsArray().some(e,t)},c.prototype.forEach=function(e,t){return this.getAsArray().forEach(e,t),this},c.prototype.map=function(e,t){return new c(this.getAsArray().map(e,t),this.context)},c.prototype.filter=function(e,t){return new c(this.getAsArray().filter(e,t),this.context)},c.prototype.find=function(e){return new c(e,this.first)},c.prototype.on=function(e,t){return this.forEach(function(n){n.addEventListener(e,t,!1)})},c.prototype.off=function(e,t){return this.forEach(function(n){n.removeEventListener(e,t,!1)})},c.prototype.once=function(e,t){var n=function(){this.off(e,n),t.apply(void 0,arguments)}.bind(this);return this.on(e,n)},c.prototype.appendTo=function(e){if(!e)throw new Error("appendTo requires a DOMElement to append to.");return this.forEach(function(t){e.appendChild(t)})},c.prototype.append=function(){var e=this.first;return e?(Array.prototype.forEach.call(arguments,function(t){e.appendChild(t)}),this):this},c.prototype.prepend=function(){if(0===arguments.length)return this;var e=this.first,t=void 0;return e?(t=Array.prototype.slice.call(arguments),e.firstElementChild||e.appendChild(t.shift()),t.forEach(function(t){e.insertBefore(t,e.firstElementChild)}),this):this},c.prototype.after=function(e){if(!e)throw new Error("after requires a DOMElement to insert after");return this.forEach(function(t){t.parentElement&&(e!==t.parentNode.lastChild?t.parentElement.insertBefore(t,e):t.parentElement.appendChild(t))})},c.prototype.before=function(e){if(!e)throw new Error("before requires a DOMElement to insert before");return this.forEach(function(t){t.parentElement&&t.parentElement.insertBefore(t,e)})},c.prototype.remove=function(){return this.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})},c.prototype.empty=function(){return this.forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})},c.prototype.isDisplayNone=function(){return this.some(function(e){return 0!==e.offsetWidth&&0!==e.offsetHeight||"none"!==new c(e).css("display")?e.parentNode&&e.parentNode.style?new c(e.parentNode).isDisplayNone():!1:!0})};var l=function u(e){return 0!==e.offsetWidth&&0!==e.offsetHeight||"none"!==new c(e).css("display")?e.parentNode&&e.parentNode.style?u(e.parentNode):null:e};c._attachToOTHelpers.emptyElement=function(e){return new c(e).empty()},c._attachToOTHelpers._findElementWithDisplayNone=l,i.css(c,l),i.attributes(c),i.classNames(c),i.observers(c),["on","off","isDisplayNone","show","hide","css","makeVisibleAndYield","addClass","removeClass"].forEach(function(e){c._attachToOTHelpers[e]=function(){var t=Array.prototype.slice.apply(arguments),n=t.shift(),i=new c(n);return c.prototype[e].apply(i,t)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../env":234,"../util":241,"./extensions/attributes":228,"./extensions/classNames":229,"./extensions/css":230,"./extensions/observers":231}],233:[function(e,t){"use strict";var n=e("./index");t.exports=function(e,t){return new n(e,t)}},{"./index":232}],234:[function(e,t){(function(e,n){"use strict";var i={};t.exports=i,i._attachToOTHelpers={},i.version=-1,"undefined"!=typeof e&&"undefined"!=typeof e.versions&&"string"==typeof e.versions.node?(i.name="Node",i.version=parseInt(e.versions.node,10),i.userAgent="Node "+i.version,i.iframeNeedsLoad=!1):(i.userAgent=n.navigator.userAgent.toLowerCase(),i.appName=n.navigator.appName,i.navigatorVendor=void 0,i.name="unknown",i.userAgent.indexOf("opera")>-1||i.userAgent.indexOf("opr")>-1?(i.name="Opera",null!==/opr\/([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent)&&(i.version=parseFloat(RegExp.$1))):i.userAgent.indexOf("firefox")>-1?(i.name="Firefox",null!==/firefox\/([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent)&&(i.version=parseFloat(RegExp.$1))):"Microsoft Internet Explorer"===i.appName?(i.name="IE",null!==/msie ([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent)&&(i.version=parseFloat(RegExp.$1))):i.userAgent.search(/edge\/\d+(\.\d+)?$/)>-1?(i.name="Edge",null!==/Edge\/(\d+(\.\d+)?)$/.exec(i.userAgent)&&(i.version=parseFloat(RegExp.$1))):"Netscape"===i.appName&&i.userAgent.indexOf("trident")>-1?(i.name="IE",null!==/trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent)&&(i.version=parseFloat(RegExp.$1))):i.userAgent.indexOf("chrome")>-1?(i.name="Chrome",null!==/chrome\/([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent)&&(i.version=parseFloat(RegExp.$1))):n.navigator.vendor&&n.navigator.vendor.toLowerCase().indexOf("apple")>-1&&(i.name="Safari",null!==/version\/([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent)&&(i.version=parseFloat(RegExp.$1))),i.iframeNeedsLoad=i.userAgent.indexOf("webkit")<0,i.userAgent=n.navigator.userAgent,i.protocol=n.location.protocol,i.hostName=n.location.hostName),i._attachToOTHelpers.browser=function(){return i.name},i._attachToOTHelpers.browserVersion=function(){return i}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:187}],235:[function(e,t){(function(n){"use strict";var i=e("./env"),r=e("./util"),o=void 0,a=["description","fileName","lineNumber","message","name","number","stack"],s=function(e,t,n){switch(arguments.length){case 1:r.isObject(e)&&(n=e,t=void 0,e=void 0);break;case 2:r.isObject(t)&&(n=t,t=void 0)}if(n instanceof Error)for(var i=0,s=a.length;s>i;++i)this[a[i]]=n[a[i]];else if(r.isObject(n))for(var c in n)n.hasOwnProperty(c)&&(this[c]=n[c]);if(!(this.fileName&&this.lineNumber&&this.columnNumber&&this.stack)){var l=o();!this.fileName&&l.fileName&&(this.fileName=l.fileName),!this.lineNumber&&l.lineNumber&&(this.lineNumber=l.lineNumber),!this.columnNumber&&l.columnNumber&&(this.columnNumber=l.columnNumber),!this.stack&&l.stack&&(this.stack=l.stack)}!this.message&&e&&(this.message=e),this.name&&"Error"!==this.name||!t||(this.name=t)};t.exports=s,s.prototype=Object.create(Error.prototype),s.prototype.toString=function(){var e="";return this.fileName&&(e+=" "+this.fileName),this.lineNumber&&(e+=" "+this.lineNumber,this.columnNumber&&(e+=":"+this.columnNumber)),"<"+(this.name?this.name+" ":"")+this.message+e+">"},s.prototype.valueOf=s.prototype.toString;var c=function(e,t){return t.slice(2).map(function(e){var t={fileName:e.getFileName(),linenumber:e.getLineNumber(),columnNumber:e.getColumnNumber()};return e.getFunctionName()&&(t.functionName=e.getFunctionName()),e.getMethodName()&&(t.methodName=e.getMethodName()),e.getThis()&&(t.self=e.getThis()),t})};o=function(){var e={},t=void 0,r=void 0,o=void 0;switch(i.name){case"Firefox":case"Safari":case"IE":try{n.call.js.is.explody()}catch(a){o=a}t=(o.stack||"").split("\n"),t.shift(),t.shift(),e.stack=t,"IE"===i.name&&(e.stack.shift(),e.stack=t.map(function(e){return e.replace(/^\s+at\s+/g,"")})),r=/@(.+?):([0-9]+)(:([0-9]+))?$/.exec(t[0]),r&&(e.fileName=r[1],e.lineNumber=parseInt(r[2],10),r.length>3&&(e.columnNumber=parseInt(r[4],10)));break;case"Chrome":case"Node":case"Opera":var s=Error.prepareStackTrace;Error.prepareStackTrace=c,o=new Error,e.stack=o.stack,Error.prepareStackTrace=s;var l=e.stack[0];e.lineNumber=l.lineNumber,e.columnNumber=l.columnNumber,e.fileName=l.fileName,l.functionName&&(e.functionName=l.functionName),l.methodName&&(e.methodName=l.methodName),l.self&&(e.self=l.self);break;default:o=new Error,o.stack&&(e.stack=o.stack.split("\n"))}return o.message&&(e.message=o.message),e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./env":234,"./util":241}],236:[function(e,t){(function(n){"use strict";var i=e("lodash/once");t.exports=i(function(){return"WebSocket"in n&&void 0!==n.WebSocket})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash/once":175}],237:[function(e,t,n){"use strict";var i=e("./mixin"),r=e("../makeEverythingAttachToOTHelpers"),o=n;i(o),r(o)},{"../makeEverythingAttachToOTHelpers":239,"./mixin":238}],238:[function(e,t){"use strict";function n(){}function i(e,t){return e[t].bind(e)}function r(e){return"undefined"==typeof console?n:void 0!==console[e]?i(console,e):void 0!==console.log?i(console,"log"):n}var o=[{name:"NONE",value:0,method:null},{name:"ERROR",value:1,method:"error"},{name:"WARN",value:2,method:"warn"},{name:"INFO",value:3,method:"info"},{name:"LOG",value:4,method:"log"},{name:"DEBUG",value:5,method:"debug"}];t.exports=function(e){o.forEach(function(t){e[t.name]=t.value}),e.shouldLog=n,e.setLogLevel=function(t){return t="number"==typeof t?t:0,o.forEach(function(i){null!==i.method&&(e[i.method]=i.value<=t?r(i.method):n)}),e.debug("Setting the debug level to "+t),t},e.setLogLevel(e.ERROR)}},{}],239:[function(e,t){"use strict";t.exports=function(e){var t={};Object.keys(e).forEach(function(n){t[n]=e[n]}),e._attachToOTHelpers=t}},{}],240:[function(e,t){"use strict";var n=e("./elementCollection/shorthandSelector"),i=e("./env"),r=e("./behaviours/eventing"),o=e("./util"),a=e("uuid");t.exports=function(e){r(this,!0);var t=arguments[arguments.length-1];if(!o.isFunction(t))throw new Error("OTHelpers.Modal2 must be given a callback");arguments.length<2&&(e={});var s=document.createElement("iframe");s.id=e.id||a(),s.style.position="absolute",s.style.position="fixed",s.style.height="100%",s.style.width="100%",s.style.top="0px",s.style.left="0px",s.style.right="0px",s.style.bottom="0px",s.style.zIndex=1e3,s.style.border="0";try{s.style.backgroundColor="rgba(0,0,0,0.2)"}catch(c){s.style.backgroundColor="transparent",s.setAttribute("allowTransparency","true")}s.scrolling="no",s.setAttribute("scrolling","no");var l='<!DOCTYPE html><html><head><meta http-equiv="x-ua-compatible" content="IE=Edge"><meta http-equiv="Content-type" content="text/html; charset=utf-8"><title></title></head><body></body></html>',u=function(){var e=s.contentDocument||s.contentWindow.document;i.iframeNeedsLoad&&(e.body.style.backgroundColor="transparent",e.body.style.border="none","IE"!==i.name&&(e.open(),e.write(l),e.close())),t(s.contentWindow,e)};document.body.appendChild(s),i.iframeNeedsLoad?("IE"===i.name&&(s.contentWindow.contents=l,s.src='javascript:window["contents"]'),n(s).on("load",u)):setTimeout(u,0),this.close=function(){return n(s).remove(),this.trigger("closed"),this.element=null,s=null,this
},this.element=s}},{"./behaviours/eventing":221,"./elementCollection/shorthandSelector":233,"./env":234,"./util":241,uuid:201}],241:[function(e,t,n){(function(t){"use strict";var i=e("./makeEverythingAttachToOTHelpers"),r=n;r.detectIdSelectors=/^#([\w-]*)$/,r.isFunction=function(e){return!!e&&(-1!==e.toString().indexOf("()")||"[object Function]"===Object.prototype.toString.call(e))},r.isObject=function(e){return e===Object(e)},r.isEmpty=function(e){if(null===e||void 0===e)return!0;if(Array.isArray(e)||"string"==typeof e)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},r.find=function(e,t,n){if(!r.isFunction(t))throw new TypeError("iter must be a function");for(var i=void 0,o=0,a=e.length||0;a>o;++o)if(o in e&&t.call(n,e[o],o)){i=e[o];break}return i},r.findIndex=function(e,t,n){if(!r.isFunction(t))throw new TypeError("iter must be a function");for(var i=0,o=e.length||0;o>i;++i)if(i in e&&t.call(n,e[i],i,e))return i;return-1},r.extend=Object.assign||function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i){i=Object(i);for(var r=Object.keys(Object(i)),o=0,a=r.length;a>o;o++){var s=r[o],c=Object.getOwnPropertyDescriptor(i,s);void 0!==c&&c.enumerable&&(t[s]=i[s])}}}return t},r.defaults=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i){i=Object(i);for(var r=Object.keys(Object(i)),o=0,a=r.length;a>o;o++){var s=r[o];if(!t.hasOwnProperty(s)){var c=Object.getOwnPropertyDescriptor(i,s);void 0!==c&&c.enumerable&&(t[s]=i[s])}}}}return t},r.clone=function(e){return r.isObject(e)?Array.isArray(e)?e.slice():r.extend({},e):e},r.now=function(){var e=t.performance||{},n=void 0,i=e.now||e.mozNow||e.msNow||e.oNow||e.webkitNow;return i?(i=i.bind(e),n=e.timing.navigationStart,function(){return n+i()}):function(){return(new Date).getTime()}}();var o=function(e,t,n){return t&&!n?function(){return t.call(e)}:t&&n?function(i){return void 0!==i&&n.call(e,i),t.call(e)}:function(t){void 0!==t&&n.call(e,t)}};r.defineProperties=function(e,t){Object.keys(t).forEach(function(n){e[n]=o(e,t[n].get,t[n].set)})},i(r)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./makeEverythingAttachToOTHelpers":239}],242:[function(e,t){(function(n){"use strict";var i=e("./guid_storage.js"),r=e("../ot/logging.js"),o=e("../common-js-helpers/OTHelpers.js"),a=e("./otProperties.js");t.exports=function(e){var t="2",s=new o.Analytics(e,r.debug,i.get);this.logError=function(e,r,c,l){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=u.partnerId;i.get(function(i,p){if(!i){var f=o.extend({clientVersion:"js-"+a.version.replace("v",""),buildHash:a.buildHash,guid:p,partnerId:d,source:n.location&&n.location.href,logVersion:t,apiServer:a.apiURL,clientSystemTime:(new Date).getTime()},u);s.logError(e,r,c,l,f)}})},this.logEvent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1],c=arguments[2],l=e.partnerId;i.get(function(i,u){if(!i){var d=o.extend({clientVersion:"js-"+a.version.replace("v",""),buildHash:a.buildHash,guid:u,partnerId:l,source:n.location&&n.location.href,logVersion:t,apiServer:a.apiURL,clientSystemTime:(new Date).getTime()},e);s.logEvent(d,!1,r,c)}})},this.logQOS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.partnerId;i.get(function(i,c){if(!i){var l=o.extend({clientVersion:"js-"+a.version.replace("v",""),buildHash:a.buildHash,guid:c,partnerId:r,source:n.location&&n.location.href,logVersion:t,apiServer:a.apiURL,clientSystemTime:(new Date).getTime(),duration:0},e);s.logQOS(l)}})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/OTHelpers.js":218,"../ot/logging.js":315,"./guid_storage.js":259,"./otProperties.js":274}],243:[function(e,t){(function(e){"use strict";var n=void 0;t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.AudioContext||e.AudioContext||e.webkitAudioContext;return function(){return n=n||i&&new i}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],244:[function(e,t){"use strict";t.exports=function(e){this.sample=function(t){e(function(e,n){if(!e)for(var i=0;i<n.length;i++){var r=n[i],o=parseFloat(r.audioOutputLevel);if(!isNaN(o))return void t(o/32768)}t(null)})}}},{}],245:[function(e,t){"use strict";var n=e("../../common-js-helpers/OTHelpers.js");t.exports=function(e){var t=this,i=null,r=null,o=null,a=function(t){var n=t.otWebkitAudioSource||e.createMediaStreamSource(t),i=e.createAnalyser();return n.connect(i),i};n.defineProperties(t,{webRTCStream:{get:function(){return o},set:function(e){o=e,i=a(o),r=new Uint8Array(i.frequencyBinCount)}}}),this.sample=function(e){if(i){i.getByteTimeDomainData(r);for(var t=0,n=0;n<r.length;n++)t=Math.max(t,Math.abs(r[n]-128));e(t/128)}else e(null)}}},{"../../common-js-helpers/OTHelpers.js":218}],246:[function(e,t){"use strict";var n=e("../ot/analytics.js"),i=e("../common-js-helpers/OTHelpers.js");t.exports=function(e){var t="Initial",r=["Initial","Attempt","Success","Failure"],o=5e3,a=6,s=void 0,c=void 0,l=void 0,u=function(r){t=r;var o=!1;switch(t){case"Attempt":"Initial"!==s&&(o=!0),p();break;case"Success":"Attempt"!==s&&(o=!0),f();break;case"Failure":"Attempt"!==s&&(o=!0),f()}if(o){var a=e?i.clone(e):{};a.action="Internal Error",a.variation="Non-fatal",a.payload={debug:"Invalid sequence: "+e.action+" "+s+" -> "+t},n.logEvent(a)}},d=i.statable(this,r,"Failure",u),p=function(){l=0,c=setInterval(function(){if(a>l){var t=i.extend(e,{variation:"Attempting"});n.logEvent(t)}else f();l++},o)},f=function(){clearInterval(c)};this.setVariation=function(e){s=t,d(e)},this.stop=function(){f()}}},{"../common-js-helpers/OTHelpers.js":218,"../ot/analytics.js":290}],247:[function(e,t){"use strict";var n=e("../ot/exception_codes.js");t.exports=function(e){switch(e){case n.AUTHENTICATION_ERROR:case n.INVALID_SESSION_ID:case n.TERMS_OF_SERVICE_FAILURE:case n.UNEXPECTED_SERVER_RESPONSE:return e;case n.ANVIL_EMPTY_RESPONSE_BODY:case n.ANVIL_CONNECT_FAILED:return n.CONNECT_FAILED;case n.ANVIL_BADLY_FORMED_RESPONSE:case n.ANVIL_INVALID_HTTP_STATUS:case n.ANVIL_XDOMAIN_OR_PARSING_ERROR:case n.ANVIL_UNKNOWN_HTTP_ERROR:case n.ANVIL_UNEXPECTED_ERROR_CODE:default:return n.UNEXPECTED_SERVER_RESPONSE}}},{"../ot/exception_codes.js":310}],248:[function(e,t){"use strict";var n=e("../ot/exception_codes.js"),i=e("../ot/ot_error_class.js"),r=[400,403,409,n.CONNECTION_LIMIT_EXCEEDED],o={CONNECT:"ConnectToSession",SESSION_STATE:"GetSessionState"};t.exports=function(e){var t=void 0,a=void 0;if(e.reason===o.CONNECT&&e.code===n.CONNECT_FAILED)t=e.code,a=i.getTitleByCode(e.code);else if(e.code&&r.indexOf(Number(e.code))>-1)switch(t=n.CONNECT_FAILED,e.reason){case o.CONNECT:switch(e.code){case n.CONNECTION_LIMIT_EXCEEDED:t=e.code,a="Cannot connect -- the limit for concurrent connections to the session has been reached";break;default:a="Received error response to connection create message."}break;case o.SESSION_STATE:a="Received error response to session read";break;default:a=""}else t=n.UNEXPECTED_SERVER_RESPONSE,a="Unexpected server response. Try this operation again later.";return{code:t,message:a}}},{"../ot/exception_codes.js":310,"../ot/ot_error_class.js":337}],249:[function(require,module,exports){"use strict";var webrtcAdapter=require("webrtc-adapter/src/js/adapter_factory.js"),logging=require("../ot/logging.js"),env=require("../common-js-helpers/env.js"),windowKeys=[{key:"location",type:"object"},{key:"setTimeout",type:"function"},{key:"URL",type:"function"},{key:"MediaStream",type:"class"},{key:"webkitMediaStream",type:"class"},{key:"RTCIceCandidate",type:"class"},{key:"mozRTCIceCandidate",type:"class"},{key:"RTCSessionDescription",type:"class"},{key:"mozRTCSessionDescription",type:"class"},{key:"RTCIceGatherer",type:"class"},{key:"RTCIceTransport",type:"class"},{key:"RTCDtlsTransport",type:"class"},{key:"RTCRtpReceiver",type:"class"},{key:"HTMLMediaElement",type:"class"},{key:"RTCPeerConnection",type:"class"},{key:"webkitRTCPeerConnection",type:"class"},{key:"mozRTCPeerConnection",type:"class"},{key:"MediaStreamTrack",type:"class"},{key:"RTCRtpSender",type:"class"}],navigatorKeys=[{key:"userAgent",type:"string"},{key:"getUserMedia",type:"function"},{key:"webkitGetUserMedia",type:"function"},{key:"mozGetUserMedia",type:"function"}],mediaDevicesKeys=[{key:"getUserMedia",type:"function"},{key:"enumerateDevices",type:"function"},{key:"getSupportedConstraints",type:"function"},{key:"addEventListener",type:"function"},{key:"removeEventListener",type:"function"}],bindWithStaticProperties=function(e,t){if("function"!=typeof t)return logging.warn("Non-function passed into bindWithStaticProperties()"),t;var n=t.bind(e);return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},getAllProperties=function(e){for(var t={},n=e,i=function(e){t[e]||(t[e]=Object.getOwnPropertyDescriptor(n,e))};n&&n!==Object.prototype;)Object.getOwnPropertyNames(n).forEach(i),n=Object.getPrototypeOf(n);return t},extendParentClass=function extendParentClass(ParentClass){try{var ChildClass=eval('\n      "use strict"; // Chrome<49 requires strict mode\n      class ChildClass extends ParentClass {\n        constructor(...args) {\n          super(...args);\n          try {\n            this.__proto__ = ChildClass.prototype;\n          } catch (e) {}\n        }\n      };\n      ChildClass; // Ensure the final statement is returned in FF\n    ');if(ChildClass&&ChildClass.prototype instanceof ParentClass)return ChildClass}catch(e){}return null},canUseES6Class=function(e){var t=e.RTCPeerConnection||e.webkitRTCPeerConnection||e.mozRTCPeerConnection,n=extendParentClass(t);if(n)try{n.prototype.foo="bar";var i=new n(null);if("bar"===i.foo)return!0}catch(r){}return!1},extendClass=function(e,t,n){function i(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];var r=new(Function.prototype.bind.apply(e,[this].concat(n))),o=getAllProperties(this);return Object.defineProperties(r,o),r}if("function"!=typeof e)return logging.warn("Non-function passed into extendClass()"),e;if(n){var r=extendParentClass(e);if(r)return r}return void 0!==e.prototype&&(i.prototype=Object.create(e.prototype),i.prototype.constructor=i),Object.keys(e).forEach(function(t){i[t]=e[t]}),i},getCopyProperties=function(e){return function(t,n,i){i.forEach(function(i){var r=i.key,o=i.type,a=n[r];if(void 0!==a){switch(o){case"function":a=bindWithStaticProperties(n,a);break;case"class":a=extendClass(a,r,e);break;case"string":case"object":break;default:throw new Error("Invalid type of window key: "+o)}t[r]=a}})}},cloneWindow=function(e){var t={},n=getCopyProperties(canUseES6Class(e));return n(t,e,windowKeys),void 0!==e.navigator&&(t.navigator={},n(t.navigator,e.navigator,navigatorKeys),void 0!==e.navigator.mediaDevices&&(t.navigator.mediaDevices={},n(t.navigator.mediaDevices,e.navigator.mediaDevices,mediaDevicesKeys))),t};module.exports=function(e){if(void 0!==e.adapter||"Edge"===env.name||"IE"===env.name)return e;var t=cloneWindow(e);return webrtcAdapter({window:t}),t}},{"../common-js-helpers/env.js":234,"../ot/logging.js":315,"webrtc-adapter/src/js/adapter_factory.js":206}],250:[function(e,t){"use strict";var n=e("lodash/clone"),i=e("../common-js-helpers/env.js"),r=e("./filterIceServers.js"),o=e("../ot/logging.js"),a=e("../otplugin/otplugin.js");t.exports=function(e){var t=e.window,s=e.config,c=e.constraints,l=e.webRTCStream,u=e.completion;o.debug("createPeerConnection: called");var d=n(s),p=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];e?o.error("createPeerConnection: failure:",e):o.debug("createPeerConnection: success"),u.apply(void 0,[e].concat(n))},f=void 0;if(a.isInstalled())return void a.initPeerConnection(d,c,l,p);d.iceServers=r(i.name,d.iceServers);try{if(f=new t.RTCPeerConnection(d,c),!f||!f.addEventListener)throw o.error("createPeerConnection: Invalid peer connection object",f),new Error("Failed to create valid RTCPeerConnection object")}catch(h){return void p(h.message)}p(null,f)}},{"../common-js-helpers/env.js":234,"../ot/logging.js":315,"../otplugin/otplugin.js":396,"./filterIceServers.js":256,"lodash/clone":146}],251:[function(e,t){"use strict";t.exports=function(e){var t=document.createElement("link");t.type="text/css",t.media="screen",t.rel="stylesheet",t.href=e;var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}},{}],252:[function(e,t){"use strict";var n=e("bluebird");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.getNativeEnumerateDevices||e("./getNativeEnumerateDevices.js")(),r={},o={audio:"audioInput",video:"videoInput",audioinput:"audioInput",videoinput:"videoInput",audioInput:"audioInput",videoInput:"videoInput"},a=function(){var e=i();return e()};return r.hasEnumerateDevicesCapability=function(){return"function"==typeof i()},r.getMediaDevices=function(){return r.hasEnumerateDevicesCapability()?a().then(function(e){return e.map(function(e){return{deviceId:e.deviceId||e.id,label:e.label,kind:o[e.kind]}}).filter(function(e){return"audioInput"===e.kind||"videoInput"===e.kind})}):n.Promise.reject(new Error("This browser does not support enumerateDevices APIs"))},r.shouldAskForDevices=function(){return r.hasEnumerateDevicesCapability()?r.getMediaDevices().then(function(e){if(0===e.length)return{video:!0,audio:!0};var t=e.filter(function(e){return"audioInput"===e.kind}),n=e.filter(function(e){return"videoInput"===e.kind});return{video:n.length>0,audio:t.length>0,videoDevices:n,audioDevices:t}})["catch"](function(){return{video:!0,audio:!0}}):n.Promise.resolve({video:!0,audio:!0})},r}},{"./getNativeEnumerateDevices.js":257,bluebird:2}],253:[function(e,t){"use strict";var n=e("../common-js-helpers/OTHelpers.js"),i=e("./otProperties.js"),r=e("../ot/logging.js"),o={};t.exports=o;var a=function(e,t,i){var o=e.head||e.getElementsByTagName("head")[0],a=n.createElement("link",{type:"text/css",media:"screen",rel:"stylesheet",href:t});o.appendChild(a),n.on(a,"error",function(e){r.error("Could not load CSS for dialog",t,e&&e.message||e)}),n.on(a,"load",i)},s=function(e,t,n){var r=["//fonts.googleapis.com/css?family=Didact+Gothic",i.cssURL].concat(t),o=r.length;r.forEach(function(t){a(e,t,function(){--o<=0&&n()})})},c=function(e,t,i){var r=n.createElement(i||"div",{"class":e},t,this);return r.on=n.on.bind(n,r),r.off=n.off.bind(n,r),r},l=function(e,t,i){var r=c.call(this,"",null,"input");return r=n(r).on("change",i),r.attr({name:t,id:t,type:"checkbox"}),r.first},u=function(e,t,n){var i=c.call(this,n||"",e,"a");return i.setAttribute("href",t),i};o.Plugin={},o.Plugin.promptToInstall=function(){var e=new n.Modal(function(t,i){function r(){e.trigger("download"),setTimeout(function(){w.querySelector(".OT_dialog-messages-main").innerHTML="To enable audio & video chat on this website, run the installer and then refresh your browser window.";var e=w.querySelectorAll(".OT_dialog-section");n.addClass(e[0],"OT_dialog-hidden"),n.removeClass(e[1],"OT_dialog-hidden")},3e3)}function o(){e.trigger("refresh")}function a(){_.checked?d():p()}function d(){g.enable(),g.on("click",r),v.enable(),v.on("click",o)}function p(){g.disable(),g.off("click",r),v.disable(),v.off("click",o)}var f=c.bind(i),h=function(e,t){var i="OT_dialog-button "+(t?"OT_dialog-button-"+t:"OT_dialog-button-large"),r=f(i,e);return r.enable=function(){return n.removeClass(this,"OT_dialog-button-disabled"),this},r.disable=function(){return n.addClass(this,"OT_dialog-button-disabled"),this},r},g=h("Download plugin"),m=h("cancel","small"),v=h("Refresh browser"),y=void 0,_=void 0,b=void 0,w=void 0;n.addClass(m,"OT_dialog-no-natural-margin OT_dialog-button-block"),n.addClass(v,"OT_dialog-no-natural-margin"),g.disable(),v.disable(),m.on("click",function(){e.trigger("cancelButtonClicked"),e.close()}),b=f("OT_closeButton","&times;").on("click",function(){e.trigger("closeButtonClicked"),e.close()}).first;var A=t.location.protocol.indexOf("https")>=0?"https":"http";y=u.call(i,"end-user license agreement",A+"://tokbox.com/support/ie-eula"),_=l.call(i,null,"acceptEULA",a),w=f("OT_dialog-centering",[f("OT_dialog-centering-child",[f("OT_root OT_dialog OT_dialog-plugin-prompt",[b,f("OT_dialog-messages",[f("OT_dialog-messages-main","This app requires real-time communication")]),f("OT_dialog-section",[f("OT_dialog-single-button-with-title",[f("OT_dialog-button-title",[_,function(){var e=f("","accept","label");return e.setAttribute("for",_.id),e.style.margin="0 5px",e}(),y]),f("OT_dialog-actions-card",[g,m])])]),f("OT_dialog-section OT_dialog-hidden",[f("OT_dialog-button-title",["You will then be able to continue using this application in Internet Explorer."]),v])])])]),s(i,[],function(){i.body.appendChild(w)})});return e},o.Plugin.promptToReinstall=function(){var e=new n.Modal(function(t,n){var i=c.bind(n),r=void 0,o=void 0,a=void 0;r=i("OT_closeButton","&times;").on("click",function(){e.trigger("closeButtonClicked"),e.close()}).first,o=i("OT_dialog-button OT_dialog-button-large OT_dialog-no-natural-margin","Okay").on("click",function(){e.trigger("okay")}).first,a=i("OT_dialog-centering",[i("OT_dialog-centering-child",[i("OT_ROOT OT_dialog OT_dialog-plugin-reinstall",[r,i("OT_dialog-messages",[i("OT_dialog-messages-main","Reinstall Opentok Plugin"),i("OT_dialog-messages-minor","Uh oh! Try reinstalling the OpenTok plugin again to enable real-time video communication for Internet Explorer.")]),i("OT_dialog-section",[i("OT_dialog-single-button",o)])])])]),s(n,[],function(){n.body.appendChild(a)})});return e},o.Plugin.updateInProgress=function(){var e=0,t=void 0,i=void 0,r=new n.Modal(function(n,o){var a=c.bind(o),l=void 0;i=a("OT_dialog-plugin-upgrade-percentage","0%","strong"),t=a("OT_dialog-progress-bar-fill"),l=a("OT_dialog-centering",[a("OT_dialog-centering-child",[a("OT_ROOT OT_dialog OT_dialog-plugin-upgrading",[a("OT_dialog-messages",[a("OT_dialog-messages-main",["One moment please... ",i]),a("OT_dialog-progress-bar",t),a("OT_dialog-messages-minor OT_dialog-no-natural-margin","Please wait while the OpenTok plugin is updated")])])])]),s(o,[],function(){o.body.appendChild(l),null!=e&&r.setUpdateProgress(e)})});return r.setUpdateProgress=function(r){t&&i?r>99?(n.css(t,"width",""),i.innerHTML="100%"):1>r?(n.css(t,"width","0%"),i.innerHTML="0%"):(n.css(t,"width",r+"%"),i.innerHTML=r+"%"):e=r},r},o.Plugin.updateComplete=function(e){var t=new n.Modal(function(n,i){var r=c.bind(i),o=void 0,a=void 0,l=void 0;o=r("OT_dialog-button OT_dialog-button-large OT_dialog-no-natural-margin","Reload").on("click",function(){t.trigger("reload")}).first,l=e?["Update Failed.",""+e||"NO ERROR"]:["Update Complete.","The OpenTok plugin has been succesfully updated. Please reload your browser."],a=r("OT_dialog-centering",[r("OT_dialog-centering-child",[r("OT_root OT_dialog OT_dialog-plugin-upgraded",[r("OT_dialog-messages",[r("OT_dialog-messages-main",l[0]),r("OT_dialog-messages-minor",l[1])]),r("OT_dialog-single-button",o)])])]),s(i,[],function(){i.body.appendChild(a)})});return t}},{"../common-js-helpers/OTHelpers.js":218,"../ot/logging.js":315,"./otProperties.js":274}],254:[function(e,t){"use strict";function n(){return"undefined"==typeof document||"complete"===document.readyState||"interactive"===document.readyState&&document.body}var i=e("bluebird");t.exports={unloaded:!1,isDomLoaded:n,isDomUnloaded:function(){return this.unloaded},whenUnloaded:new i.Promise(function(e){"undefined"!=typeof document&&document.addEventListener("unload",function(){(void 0).unloaded=!0,e()})}),whenLoaded:new i.Promise(function(e){return n()?e():(document.addEventListener("DOMContentLoaded",e),void document.addEventListener("load",e))})}},{bluebird:2}],255:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.APIKEY||e("../ot/api_key.js"),i=t.logging||e("../ot/logging.js"),r=t.otProperties||e("./otProperties.js"),o=r.enableErrorReporting,a=t.global;a||"undefined"==typeof window||(a=window);var s=t.Raven;!s&&a&&(s=e("raven-js"));var c=/(opentok|ot|tb|tokbox)(?:\.min)?\.js/,l=function(e){return o&&e&&e.tags&&e.tags.otError?(delete e.tags.otError,!0):!1},u=function(){s&&s.config(r.sentryDSN,{whitelistUrls:[c],logger:"webrtc-js",release:r.version,autoBreadcrumbs:!1,shouldSendCallback:l}).install().noConflict()},d=function(e){var t=void 0;if(e instanceof Error||"string"==typeof e?t=e:null==e?t=new Error("Undefined or null error was reported!"):(t=new Error(e.message),["name","title","code","stack"].forEach(function(n){e[n]&&(t[n]=e[n])})),t instanceof Error&&!t.stack)try{throw t}catch(n){}return t},p=function(e){var t=["{{ default }}"];return"string"==typeof e?t.push("message::"+e):null!=e&&["message","name","title","code"].forEach(function(n){e[n]&&t.push(n+"::"+e[n])}),t},f=function(e){var t={otError:!0,partnerId:n.value,buildHash:r.buildHash};return e instanceof Error&&["name","title","code"].forEach(function(n){e[n]&&(t["error."+n]=e[n])}),t},h={send:function(e){if(!o||!s)return null;var t=d(e),n={fingerprint:p(t),tags:f(t)};s.captureException(t,n);var r=s.lastEventId();return i.debug("Reported error with ID: "+r,t,n),r}},g=function(){a.addEventListener("error",function(e){null!=e.error&&h.send(e.error)})};return o&&(g(),u()),h}},{"../ot/api_key.js":292,"../ot/logging.js":315,"./otProperties.js":274,"raven-js":191}],256:[function(e,t){"use strict";var n=e("lodash/assign"),i=e("lodash/omit"),r={Edge:function(e){var t=!1;return e.map(function(e){if(!e)return void 0;var r=e.urls||e.url&&[e.url];if(!r)return void 0;var o=r.filter(function(e){var n=0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!t;return n?(t=!0,!0):0===e.indexOf("stun:")});return 0===o.length?void 0:n(i(e,["url","urls"]),{urls:o})}).filter(function(e){return void 0!==e})},Safari:function(e){return e.map(function(e){if(void 0!==e.urls&&void 0===e.url)return e;var t=e.urls||e.url&&[e.url];return n(i(e,["url","urls"]),{urls:t})})}};t.exports=function(e,t){var n=r[e];return n?n(t):t}},{"lodash/assign":142,"lodash/omit":174}],257:[function(e,t){(function(n){"use strict";var i=e("bluebird");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.OTPlugin||e("../otplugin/otplugin.js"),o=t.global||n;return function(){if(o.navigator.mediaDevices){var e=o.navigator.mediaDevices;return e.enumerateDevices&&e.enumerateDevices.bind(e)}if(r.isInstalled()){var t=r.mediaDevices;return t.enumerateDevices&&i.promisify(t.enumerateDevices.bind(t))}return void 0}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../otplugin/otplugin.js":396,bluebird:2}],258:[function(e,t){(function(n){"use strict";var i=e("lodash/assign"),r=e("bluebird"),o=e("./webkitAudioWorkaround.js"),a=e("../common-js-helpers/behaviours/eventing.js");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.Errors||e("../ot/Errors.js"),c=t.otError||e("./otError.js")(),l=t.OTPlugin||e("../otplugin/otplugin.js"),u=t.OTHelpers||e("../common-js-helpers/OTHelpers.js"),d=t.logging||e("../ot/logging.js"),p=t.throttleUntilComplete||e("./throttle_until_complete.js")(),f=t.screenSharing||e("../ot/screensharing/screen_sharing.js")(),h=t.customGetUserMedia,g=t.global||n,m=g.navigator,v=g.location,y=function(e,t){return function(n){return new r.Promise(function(i,r){e[t](n,i,r)})}},_=h||function(){return m.mediaDevices&&m.mediaDevices.getUserMedia?m.mediaDevices.getUserMedia.bind(m.mediaDevices):m.getUserMedia?y(m,"getUserMedia"):m.mozGetUserMedia?y(m,"mozGetUserMedia"):m.webkitGetUserMedia?y(m,"webkitGetUserMedia"):l.isInstalled()?y(l,"getUserMedia"):void 0}(),b=p(_),w=function(){var e={name:s.USER_MEDIA_ACCESS_DENIED,message:"End-user denied permission to hardware devices"},t={name:s.NOT_SUPPORTED,message:"A constraint specified is not supported by the browser."},n={name:s.CONSTRAINTS_NOT_SATISFIED,message:"It's not possible to satisfy one or more constraints passed into the getUserMedia function"},r={name:s.NO_DEVICES_FOUND,message:"No voice or video input devices are available on this machine."},o={name:s.HARDWARE_UNAVAILABLE,message:"The selected voice or video devices are unavailable. Verify that the chosen devices are not in use by another application."},a={name:s.UNABLE_TO_CAPTURE_SCREEN,message:"Unable to capture screen. Unknown error occurred"};return{PermissionDeniedError:e,PermissionDismissedError:e,NotAllowedError:e,SecurityError:i({},e,{message:"End-user denied permission to hardware devices or user media support may be disabled on this page"}),NotSupportedError:t,ConstraintNotSatisfiedError:n,MandatoryUnsatisfiedError:n,OverConstrainedError:n,DevicesNotFoundError:r,NotFoundError:r,NoDevicesFoundError:r,HardwareUnavailableError:o,NotReadableError:o,SourceUnavailableError:o,TrackStartError:o,ScreenCaptureError:a}}(),A=function(e){var t=w[e];return t?c(t.name,new Error(t.message+" (getUserMedia error: "+e+")")):new Error("Unknown error while getting user media: "+e)},C=function(e){var t=void 0;return u.isObject(e)&&e.name?(t=A(e.name),t.constraintName=e.constraintName):t="string"==typeof e?A(e):new Error("Unknown error type while getting media"),t},E=function(e){if(!e||!u.isObject(e))return!0;for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0};return function(e){var t={};if(a(t),E(e))return d.error("Couldn't get UserMedia: All constraints were false"),t.promise=r.reject(c(s.NO_VALID_CONSTRAINTS,new Error("Video and Audio was disabled, you need to enable at least one"))),t.release=function(){},t;var n=b(e);t.release=n.release;var i=n.promise["catch"](function(){});t.promise=n.promise["catch"](function(e){var t=C(e);if(t.name===s.UNABLE_TO_CAPTURE_SCREEN)return new r.Promise(function(e,n){f.checkCapability(function(e){if("chrome"===e.extensionRequired){if(e.extensionRegistered&&!e.extensionInstalled){var i=c(s.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,t);i.message="Screen sharing extension not installed see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",n(i)}else if(!e.extensionRegistered){var r=c(s.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,t);r.message="Screen sharing extension not registered see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",n(r)}}else n(t)})});throw t}).then(o);var l=-1!==v.protocol.indexOf("https")?500:100,u=!0;return i.then(function(){u=!1}),r.delay(l).then(function(){u&&(t.emit("accessDialogOpened"),i.then(function(){return t.emit("accessDialogClosed")}))}),t}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/OTHelpers.js":218,"../common-js-helpers/behaviours/eventing.js":221,"../ot/Errors.js":289,"../ot/logging.js":315,"../ot/screensharing/screen_sharing.js":372,"../otplugin/otplugin.js":396,"./otError.js":273,"./throttle_until_complete.js":277,"./webkitAudioWorkaround.js":286,bluebird:2,"lodash/assign":142}],259:[function(e,t){(function(n){"use strict";var i=e("uuid"),r=e("../common-js-helpers/OTHelpers.js"),o=e("../ot/logging.js"),a={};t.exports=a;var s=void 0,c=void 0,l=function(e){return!(r.isFunction(e.get)&&r.isFunction(e.set))},u=function(e){return c?void e(null,c):void s.get(e)};a.override=function(e){if(l(e))throw new Error("The storageInterface argument does not seem to be valid, it must implement get and set methods");s!==e&&(s=e,c&&s.set(c,function(e){e&&o.error("Failed to send initial Guid value ("+c+") to the newly assigned Guid Storage. The error was: "+e)}))},a.get=function(e){u(function(t,n){return t?void e(t):(n?c||(c=n):(n=i(),s.set(n,function(t){return t?void e(t):void(c=n)})),void e(null,c))})},a.override({get:function(e){e(null,n.localStorage.getItem("opentok_client_id"))},set:function(e,t){n.localStorage.setItem("opentok_client_id",e),t(null)}}),a.set=function(e){c=e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/OTHelpers.js":218,"../ot/logging.js":315,uuid:201}],260:[function(e,t){"use strict";var n=e("../common-js-helpers/env.js");t.exports=function(){return["Chrome","IE","Opera"].indexOf(n.name)>-1}},{"../common-js-helpers/env.js":234}],261:[function(e,t){"use strict";var n=e("../otplugin/otplugin.js"),i=e("../common-js-helpers/env.js"),r=e("./hasOpenTokSupport.js").once;t.exports=function(){return r()&&("Chrome"===i.name||"Firefox"===i.name||"Node"===i.name||"Safari"===i.name||"Edge"===i.name||n.isInstalled())}},{"../common-js-helpers/env.js":234,"../otplugin/otplugin.js":396,"./hasOpenTokSupport.js":265}],262:[function(e,t){"use strict";t.exports=function(){return"undefined"!=typeof document&&"classList"in document.createElement("a")}},{}],263:[function(e,t){(function(n){"use strict";var i=e("../otplugin/otplugin.js"),r=e("../common-js-helpers/env.js");t.exports=function(){return Boolean("Node"!==r.name&&(n.navigator.webkitGetUserMedia||n.navigator.mozGetUserMedia||n.navigator.mediaDevices&&n.navigator.mediaDevices.getUserMedia||i.isInstalled()))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/env.js":234,"../otplugin/otplugin.js":396}],264:[function(e,t){"use strict";var n=e("../common-js-helpers/env.js"),i=e("./hasOpenTokSupport.js").once;t.exports=function(){return i()&&-1!==["Chrome","Safari"].indexOf(n.name)}},{"../common-js-helpers/env.js":234,"./hasOpenTokSupport.js":265}],265:[function(e,t,n){"use strict";var i=e("lodash/once");n.check=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.env||e("../common-js-helpers/env.js"),i=t.hasGetUserMediaCapability||e("./hasGetUserMediaCapability.js"),r=t.hasPeerConnectionCapability||e("./hasPeerConnectionCapability.js"),o=t.logging||e("../ot/logging.js"),a=t.otProperties||e("./otProperties.js");if(a){var s=a.minimumVersion||{},c=s[n.name.toLowerCase()];if(c&&c>n.version)return o.debug("Support for",n.name,"is disabled because we require",c,"but this is",n.version),!1}return"Node"===n.name?!0:i()&&r()},n.once=i(function(){return n.check()})},{"../common-js-helpers/env.js":234,"../ot/logging.js":315,"./hasGetUserMediaCapability.js":263,"./hasPeerConnectionCapability.js":266,"./otProperties.js":274,"lodash/once":175}],266:[function(e,t){(function(n){"use strict";var i=e("../otplugin/otplugin.js"),r=e("../common-js-helpers/env.js");t.exports=function(){return"Node"===r.name?!1:"function"==typeof n.webkitRTCPeerConnection&&n.webkitRTCPeerConnection.prototype.addStream?!0:"function"==typeof n.RTCPeerConnection?!0:"function"==typeof n.mozRTCPeerConnection&&r.version>20?!0:i.isInstalled()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/env.js":234,"../otplugin/otplugin.js":396}],267:[function(e,t){"use strict";var n=e("./hasOpenTokSupport.js").once;t.exports=function(){return n()}},{"./hasOpenTokSupport.js":265}],268:[function(e,t){"use strict";var n=e("../common-js-helpers/env.js"),i=n.name;t.exports=function(){return["Firefox","Safari"].indexOf(i)>-1}},{"../common-js-helpers/env.js":234}],269:[function(e,t){"use strict";var n=e("../common-js-helpers/env.js"),i=n.name,r=e("./hasOpenTokSupport.js").once;t.exports=function(){return r()&&["Chrome","Firefox","Safari"].indexOf(i)>-1}},{"../common-js-helpers/env.js":234,"./hasOpenTokSupport.js":265}],270:[function(e,t){(function(n){"use strict";var i=e("uuid"),r="OT_CANARY_"+i();n[r]={},t.exports=function(){return!n[r]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{uuid:201}],271:[function(e,t){"use strict";var n="Node";"undefined"!=typeof navigator&&(n=navigator.userAgent),t.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userAgent:n};return/iPhone|iPad/.test(e.userAgent)}},{}],272:[function(e,t){(function(e){"use strict";t.exports=function(){var t=e.OT,n=e.TB;return function(){var i=e.OT;return e.OT=t,e.TB=n,i}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],273:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.errorReporting||e("./errorReporting.js")(),i=t.Errors||e("../ot/Errors.js"),r=t.OTErrorClass||e("../ot/ot_error_class.js"),o=Object.keys(i).map(function(e){return i[e]
});return function(e,t,i){if(-1===o.indexOf(e))throw new Error("Attempt to use invalid error name ("+e+"). Original message: "+t.message);if(!(t instanceof Error||/^\[object .*Error\]$/.test(t.toString())))throw new Error("Did not pass Error as second argument");var a=new r(void 0,t.message);if(a.name=e,!t.stack)try{throw t}catch(s){}return a.stack=t.stack,i&&(a.code=i),n.send(a),a}}},{"../ot/Errors.js":289,"../ot/ot_error_class.js":337,"./errorReporting.js":255}],274:[function(e,t){(function(n){"use strict";var i=e("lodash/assign"),r=e("lodash/pick"),o=e("../common-js-helpers/OTHelpers.js"),a=e("../../conf/properties.js"),s=o.clone(a);s.debug="true"===s.debug||s.debug===!0,s.supportSSL="true"===s.supportSSL||s.supportSSL===!0,n.OTProperties&&i(s,r(n.OTProperties,["cdnURL","cdnURLSSL","configURL","assetURL","cssURL","apiURL","apiURLSSL","enableErrorReporting","loggingURL","loggingURLSSL"])),!s.cdnURLSSL&&n.location&&(s.cdnURLSSL=n.location.protocol+"//"+n.location.host),!s.cdnURL&&n.location&&(s.cdnURL=n.location.protocol+"//"+n.location.host),s.assetURL||(s.assetURL=s.supportSSL?s.cdnURLSSL+"/webrtc/"+s.version:s.cdnURL+"/webrtc/"+s.version);var c="IE"===o.env.name&&o.env.version<=9;c&&n.location.protocol.indexOf("https")<0||(s.apiURL=s.apiURLSSL,s.loggingURL=s.loggingURLSSL),Object.prototype.hasOwnProperty.call(s,"cssURL")||(s.cssURL=s.assetURL+"/css/TB.min.css"),s.enableErrorReporting=Boolean(s.enableErrorReporting),t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../conf/properties.js":217,"../common-js-helpers/OTHelpers.js":218,"lodash/assign":142,"lodash/pick":176}],275:[function(e,t){(function(e){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.requestAnimationFrame,i=void 0===n?e.requestAnimationFrame:n;return function(e){function t(){c||((a!==n.videoWidth||s!==n.videoHeight)&&(r({width:a,height:s},{width:n.videoWidth,height:n.videoHeight}),a=n.videoWidth,s=n.videoHeight),o(function(){return i(t)}))}var n=e.element,r=e.onSizeChange,o=e.whenTimeIncrements,a=n.videoWidth,s=n.videoHeight,c=!0;return{start:function(){c=!1,t()},stop:function(){c=!0}}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],276:[function(e,t){"use strict";var n=e("../common-js-helpers/OTHelpers.js");t.exports=function(){var e="Chrome"===n.env.name&&n.env.version<25;return e?"SDES_SRTP":"DTLS_SRTP"}},{"../common-js-helpers/OTHelpers.js":218}],277:[function(e,t){"use strict";var n=e("bluebird");t.exports=function(){return function(e){var t=n.Promise.resolve();return function(){for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];var a={};a.promise=t.then(function(){return e.apply(void 0,r)});var s=new n.Promise(function(e){a.release=e});return t=t.then(function(){return n.race([a.promise,s])})["catch"](function(){}),a}}}},{bluebird:2}],278:[function(e,t){(function(n){"use strict";var i=e("bluebird");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.audioContext||e("../../audio_context")(),o=t.canBeOrientatedMixin||e("../can_be_oriented_mixin.js"),a=t.document||n.document,s=t.env||e("../../../common-js-helpers/env.js"),c=t.listenForTracksEnded||e("../listenForTracksEnded.js")(),l=t.logging||e("../../../ot/logging.js"),u=t.OTHelpers||e("../../../common-js-helpers/OTHelpers.js"),d=t.streamBinding||e("./streamBinding.js")(),p=t.pollForVideoResize||e("../../pollForVideoResize.js")(),f=t.videoElementErrorMap||e("../videoElementErrorMap.js")(),h=t.WebaudioAudioLevelSampler||e("../../audio_level_samplers/webaudio_audio_level_sampler");return function(e,t,n,g){var m=this,v=void 0,y=void 0,_=void 0,b=!1,w=!1,A=e._inject.createVideoElement,C=e._inject.createAudioElement||function(){return a.createElement("audio")},E=void 0,T=void 0;u.eventing(this);var S=function(){b||(l.warn("Video element paused, auto-resuming. If you intended to do this, use publishVideo(false) or subscribeToVideo(false) instead."),b=!0),v.play()};"Safari"===s.name&&(y=C(),y.muted=e.muted,y.setAttribute("autoplay","")),v=A(e.fallbackText,y?!0:e.muted),this.trigger("videoElementCreated",v),v.addEventListener("error",function(e){t(f(e.target.error))},!1),v.addEventListener("pause",S),this.whenTimeIncrements=function(e,t){if(v){var n=void 0,i=function r(){v&&(!n||n>=v.currentTime?n=v.currentTime:(v.removeEventListener("timeupdate",r,!1),e.call(t,m)))};v.addEventListener("timeupdate",i,!1)}};var x=p({element:v,onSizeChange:function(e,t){return m.trigger("videoDimensionsChanged",e,t)},whenTimeIncrements:this.whenTimeIncrements.bind(this)});o(this,function(){return v},n),this.domElement=function(){return v},this.videoWidth=function(){return v?v.videoWidth:0},this.videoHeight=function(){return v?v.videoHeight:0},this.imgData=function(){var e=u.createElement("canvas",{width:this.videoWidth(),height:this.videoHeight(),style:{display:"none"}});a.body.appendChild(e);var t=null;try{e.getContext("2d").drawImage(v,0,0,e.width,e.height),t=e.toDataURL("image/png")}catch(n){}return u.removeElement(e),null===t||"data:,"===t?(l.warn("Cannot get image data yet"),null):t.replace("data:image/png;base64,","").trim()},this.appendTo=function(e){return e.appendChild(v),y&&e.appendChild(y),this},this.isAudioBlocked=function(){return Boolean(y&&y.srcObject&&y.paused&&!T)},this.playAudio=function(){return y.play()},this.bindToStream=function(e,t){if(T&&E===e)return void T.asCallback(t);var n=this;if(E=e,w)return void t(new Error("Can't bind because NativeVideoElementWrapper has been destroyed"));if(!v)return void t(new Error("Can't bind because _domElement no longer exists"));var o=function(){return y?[d.bind(v,new window.MediaStream(E.getVideoTracks()),["video"]),d.bind(y,new window.MediaStream(E.getAudioTracks()),["audio"])]:[d.bind(v,E,["audio","video"])]}();T=i.all(o).then(function(){function t(){a.stop(),v&&(v.onended=null),n.trigger("mediaStopped")}function o(e){n.trigger("mediaStopped",e)}if(w)return i.Promise.reject(new Error("Can't bind because NativeVideoElementWrapper has been destroyed"));if(!v)return i.Promise.reject(new Error("Can't bind because _domElement no longer exists"));x.start();var a=void 0;if(v.onended=t,a=c(e,t,o),e.getAudioTracks().length>0){var s=r();s&&(_=new h(s),_.webRTCStream(e))}return void(T=void 0)}),T.asCallback(t)},this.unbindStream=function(){return v&&d.unbind(v),y&&d.unbind(y),x.stop(),_=null,E=null,this},this.setAudioVolume=function(e){var t=y||v;t&&(t.volume=e,t.muted=0===e?!0:!1)},this.getAudioVolume=function(){var e=y||v;return e?e.volume:g},this.audioChannelType=function(e){return void 0!==e&&(v.mozAudioChannelType=e),"mozAudioChannelType"in v?v.mozAudioChannelType:"unknown"},this.getAudioInputLevel=function(){return new i.Promise(function(e){_?_.sample(e):e(null)})},this.destroy=function(){return w=!0,this.unbindStream(),v&&(v.removeEventListener("pause",S),u.removeElement(v),v=null),y&&(u.removeElement(y),y=null),void this.trigger("destroyed")}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common-js-helpers/OTHelpers.js":218,"../../../common-js-helpers/env.js":234,"../../../ot/logging.js":315,"../../audio_context":243,"../../audio_level_samplers/webaudio_audio_level_sampler":245,"../../pollForVideoResize.js":275,"../can_be_oriented_mixin.js":280,"../listenForTracksEnded.js":282,"../videoElementErrorMap.js":284,"./streamBinding.js":279,bluebird:2}],279:[function(e,t){(function(n){"use strict";var i=e("bluebird"),r=e("../../../ot/logging.js"),o=function(e){var t=e.getVideoTracks()[0];return Boolean(t&&t.enabled)};t.exports=function(){function t(e,t){void 0!==e.srcObject?e.srcObject!==t&&(e.srcObject=t):void 0!==e.mozSrcObject?e.mozSrcObject!==t&&(e.mozSrcObject=t):e.src=u.URL.createObjectURL(t)}var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.Errors||e("../../../ot/Errors.js"),c=a.otError||e("../../otError.js")(),l=a.videoElementErrorMap||e("../videoElementErrorMap.js")(),u=a.global||n,d=a.env||e("../../../common-js-helpers/env.js"),p=a.POLL_INTERVAL||100,f=a.TIMEOUT||1e3,h={};return h.unbind=function(e){e.onended=null,void 0!==e.srcObject?e.srcObject=null:void 0!==e.mozSrcObject?e.mozSrcObject=null:u.URL.revokeObjectURL(e.src)},h.bind=function(e,n,a){if(0===n.getTracks().length)return r.debug("Skipping bind of empty webRtcStream"),i.resolve();t(e,n);var u=[],g=function(){return u.forEach(function(e){return e()})},m=function(t,i,o){var a=function(t){var a="error"===i?r.error:r.debug;a("streamBinding.bind(",e,n,"):",i,":",t),o(t)};t.addEventListener(i,a),u.push(function(){return t.removeEventListener(i,a)})},v=function(){return c(s.HARDWARE_UNAVAILABLE,new Error("Stream ended while trying to bind it to a video element. This may be due to your webcam being in use by another application."))},y=void 0,_=!1,b=function(t){if(y=t,!_){_=!0;var i=n.getTracks().filter(function(e){return-1!==a.indexOf(e.kind)&&e.enabled});i.forEach(function(e){m(e,"ended",function(){return y(v())})}),m(e,"error",function(e){return y(l(e.target.error))}),e.onended=function(){return y(v())},u.push(function(){e.onended=null})}},w=new i.Promise(function(t,i){b(i),m(e,"loadedmetadata",t),m(e,"timeupdate",t),"Safari"!==d.name||-1===a.indexOf("video")||o(n)||t()}),A=function(){return new i.Promise(function(t,i){if(b(i),!n||0===n.getVideoTracks().length)return void t();var r=function(){e.videoWidth>2&&e.videoHeight>2&&t()};r();var o=setInterval(r,p);u.push(function(){return clearInterval(o)});var a=setInterval(t,f);u.push(function(){return clearTimeout(a)})})};return w.then(function(){return-1!==a.indexOf("video")?(r.debug("Waiting for video resolution"),A().then(function(){var t=e.videoWidth+"x"+e.videoHeight;r.debug("Got video resolution: "+t)})):void 0}).then(g).then(function(){return r.debug("streamBinding.bind(",[e,n,a],") complete")})["catch"](function(t){throw g(),h.unbind(e),t})},h}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common-js-helpers/env.js":234,"../../../ot/Errors.js":289,"../../../ot/logging.js":315,"../../otError.js":273,"../videoElementErrorMap.js":284,bluebird:2}],280:[function(e,t){"use strict";var n=e("../../common-js-helpers/OTHelpers.js"),i={0:"rotate(0deg)",270:"rotate(90deg)",90:"rotate(-90deg)",180:"rotate(180deg)"};t.exports=function(e,t,r,o){var a=o;n.defineProperties(e,{isRotated:{get:function(){return this.orientation()&&(270===this.orientation().videoOrientation||90===this.orientation().videoOrientation)}},orientation:{get:function(){return a},set:function(e){a=e;var o=i[e.videoOrientation]||i.ROTATED_NORMAL;switch(n.env.name){case"Chrome":case"Safari":t().style.webkitTransform=o;break;case"IE":t().style.msTransform=o;break;default:t().style.transform=o}r(a)}},audioChannelType:{get:function(){return"mozAudioChannelType"in this.domElement?this.domElement.mozAudioChannelType:"unknown"},set:function(e){"mozAudioChannelType"in this.domElement&&(this.domElement.mozAudioChannelType=e)}}})}},{"../../common-js-helpers/OTHelpers.js":218}],281:[function(e,t){"use strict";var n=e("lodash/assign");t.exports=function(){function t(e,t){var n=document.createElement("video");return n.setAttribute("autoplay",""),n.setAttribute("playsinline",""),n.innerHTML=e,t===!0&&(n.muted="true"),n}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.NativeVideoElementWrapper||e("./NativeVideoElementWrapper/NativeVideoElementWrapper.js")(),o=i.OTHelpers||e("../../common-js-helpers/OTHelpers.js"),a=i.OTPlugin||e("../../otplugin/otplugin.js"),s=i.PluginVideoElementWrapper||e("./plugin_video_element_wrapper"),c=i.logging||e("../../ot/logging.js"),l=50;return function(e){var i=this,u=void 0,d=void 0,p=!1,f=o.defaults(e&&!o.isFunction(e)?e:{},{fallbackText:"Sorry, Web RTC is not available in your browser"});a.isInstalled()||n(f,{_inject:{createVideoElement:t}});var h=o.isFunction(arguments[arguments.length-1])?arguments[arguments.length-1]:void 0,g=function(e){this.trigger("orientationChanged",e)}.bind(this),m=a.isInstalled()?new s(f,h,g,l):new r(f,h,g,l);o.eventing(this),m.on("videoDimensionsChanged",function(e,t){i.trigger("videoDimensionsChanged",e,t)}),m.on("mediaStopped",function(e){i.trigger("mediaStopped",e)}),m.on("videoElementCreated",function(e){i.trigger("videoElementCreated",e)}),o.defineProperties(this,{domElement:{get:function(){return m.domElement()}},videoWidth:{get:function(){return m["video"+(this.isRotated()?"Height":"Width")]()}},videoHeight:{get:function(){return m["video"+(this.isRotated()?"Width":"Height")]()}},aspectRatio:{get:function(){return(this.videoWidth()+0)/this.videoHeight()}},isRotated:{get:function(){return m.isRotated()}},orientation:{get:function(){return m.orientation()},set:function(e){m.orientation(e)}},audioChannelType:{get:function(){return m.audioChannelType()},set:function(e){m.audioChannelType(e)}}}),this.imgData=function(){return m.imgData()},this.appendTo=function(e){return m.appendTo(e),this},this.isAudioBlocked=function(){return m.isAudioBlocked()},this.playAudio=function(){return m.playAudio()},this.bindToStream=function(e,t){var n=this;return p=!1,u=e,m.bindToStream(e,function(e){if(e)return void t(e);if(p=!0,"undefined"!=typeof d){try{n.setAudioVolume(d)}catch(i){c.warn("bindToStream "+i)}d=void 0}m.on("aspectRatioAvailable",n.trigger.bind(n,"aspectRatioAvailable")),t(null)}),this},this.unbindStream=function(){return u?(u.onended=null,u=null,m.unbindStream(),this):this},this.setAudioVolume=function(e){p?m.setAudioVolume(o.roundFloat(e/100,2)):d=parseFloat(e)},this.getAudioVolume=function(){return p?Math.round(100*m.getAudioVolume()):"undefined"!=typeof d?d:50},this.getAudioInputLevel=function(){return m.getAudioInputLevel()},this.whenTimeIncrements=function(e,t){return m.whenTimeIncrements(e,t),this},this.destroy=function(){return this.off(),void m.destroy()}}}},{"../../common-js-helpers/OTHelpers.js":218,"../../ot/logging.js":315,"../../otplugin/otplugin.js":396,"./NativeVideoElementWrapper/NativeVideoElementWrapper.js":278,"./plugin_video_element_wrapper":283,"lodash/assign":142}],282:[function(e,t){"use strict";t.exports=function(){function e(e){return e.getTracks().every(function(e){return"ended"===e.readyState})}return function(t,n,i){function r(r){setTimeout(function(){if(s.length)if(e(t))a(),"function"==typeof n&&n();else{var c=r.target;o(c),"function"==typeof i&&i(c)}},100)}function o(e){e.removeEventListener&&e.removeEventListener("ended",r);var t=s.indexOf(e);t>=0&&s.splice(t,1)}function a(){s.slice().forEach(o)}var s=[];return t.getTracks().forEach(function(e){s.push(e),e.addEventListener&&e.addEventListener("ended",r)}),{stop:a}}}},{}],283:[function(e,t){"use strict";var n=e("bluebird"),i=e("../../common-js-helpers/OTHelpers.js"),r=e("../../ot/logging.js"),o=e("./listenForTracksEnded.js")(),a=e("./can_be_oriented_mixin.js");t.exports=function(e,t,s){var c=void 0,l=void 0;i.eventing(this),a(this,function(){return c.domElement},s),this.domElement=function(){return c?c.domElement:void 0},this.videoWidth=function(){return c?c.videoWidth():void 0},this.videoHeight=function(){return c?c.videoHeight():void 0},this.imgData=function(){return c?c.getImgData():null},this.appendTo=function(e){return l=e,this},this.isAudioBlocked=function(){return!1},this.bindToStream=function(t,n){var i=this;l&&document.body.contains(l)||r.error("The VideoElement must be attached to a DOM node before a stream can be bound"),c=t._.render(),this.trigger("videoElementCreated",this.domElement()),c.setFitMode(e.fitMode),c.appendTo(l),c.show(function(e){return n(e)});var a=void 0,s=function(){a.stop(),i.trigger("mediaStopped")},u=function(e){i.trigger("mediaStopped",e)};a=o(t,s,u)},this.unbindStream=function(){return c&&(c.destroy(),this.domElement()&&this.domElement().parentNode&&this.domElement().parentNode.removeChild(this.domElement()),l=null,c=null),this},this.setAudioVolume=function(){throw new Error("setAudioVolume not implemented in Internet Explorer")},this.getAudioVolume=function(){throw new Error("getAudioVolume not implemented in Internet Explorer")},this.audioChannelType=function(){return"unknown"},this.getAudioInputLevel=function(){return n.resolve(c.getAudioInputLevel())},this.whenTimeIncrements=function(e,t){setTimeout(e.bind(t))},this.destroy=function(){return this.unbindStream(),void this.trigger("destroyed")}}},{"../../common-js-helpers/OTHelpers.js":218,"../../ot/logging.js":315,"./can_be_oriented_mixin.js":280,"./listenForTracksEnded.js":282,bluebird:2}],284:[function(e,t){(function(n){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.Errors||e("../../ot/Errors.js"),r=t.otError||e("../otError.js")(),o={};return n.MediaError&&(o[n.MediaError.MEDIA_ERR_ABORTED]={name:i.MEDIA_ERR_ABORTED,message:"The fetching process for the media resource was aborted by the user agent at the user's request."},o[n.MediaError.MEDIA_ERR_NETWORK]={name:i.MEDIA_ERR_NETWORK,message:"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable."},o[n.MediaError.MEDIA_ERR_DECODE]={name:i.MEDIA_ERR_DECODE,message:"An error of some description occurred while decoding the media resource, after the resource was established to be usable."},o[n.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]={name:i.MEDIA_ERR_SRC_NOT_SUPPORTED,message:"The media resource indicated by the src attribute was not suitable."}),function(e){var t=o[e.code];return t?r(t.name,new Error("There was an unexpected problem with the Video Stream: "+t.message)):new Error("An unknown error occurred"+(e.message?": "+e.message:"."))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../ot/Errors.js":289,"../otError.js":273}],285:[function(e,t){"use strict";t.exports=function(){return{ROTATED_NORMAL:0,ROTATED_LEFT:270,ROTATED_RIGHT:90,ROTATED_UPSIDE_DOWN:180}}},{}],286:[function(e,t){"use strict";var n=e("./audio_context.js")();t.exports=function(e){return e.getAudioTracks().length>0&&window.webkitAudioContext&&!window.AudioContext&&(e.otWebkitAudioSource=n().createMediaStreamSource(e)),e}},{"./audio_context.js":243}],287:[function(e,t){"use strict";var n=e("uuid");t.exports=function(){function t(e,t,n){var i=parseInt(t,10),r=parseInt(n,10);d>i||p>r?o.addClass(e,"OT_micro"):o.removeClass(e,"OT_micro"),l>i||u>r?o.addClass(e,"OT_mini"):o.removeClass(e,"OT_mini")}var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.logging||e("../ot/logging.js"),o=i.OTHelpers||e("../common-js-helpers/OTHelpers.js"),a=i.OTPlugin||e("../otplugin/otplugin.js"),s=i.VideoElementFacade||e("./video_element/index.js")(),c=i.isiOS||e("./isiOS.js")(),l=128,u=128,d=64,p=64,f=function(e,t){var i=void 0,r=void 0;if(e&&e.nodeName?(i=e,i.getAttribute("id")&&0!==i.getAttribute("id").length||i.setAttribute("id","OT_"+n()),r=i.getAttribute("id")):e&&(i=o("#"+e).get(0),i&&(r=e)),r||(r="OT_"+n().replace(/-/g,"_")),i)if(null!=t&&"replace"!==t){var a=document.createElement("div");a.id="OT_"+n(),"append"===t?(i.appendChild(a),i=a):"before"===t?(i.parentNode.insertBefore(a,i),i=a):"after"===t&&(i.parentNode.insertBefore(a,i.nextSibling),i=a)}else o.emptyElement(i);else i=o.createElement("div",{id:r}),i.style.backgroundColor="#000000",document.body.appendChild(i);return i},h=function g(e,n){var i={},s={},l=!0,u=!1,d="cover",p=void 0,h=void 0,m=void 0,v=void 0,y=void 0,_=void 0,b=void 0,w=void 0,A=void 0;n.insertDefaultUI!==!1&&(A=f(e,n&&n.insertMode));var C=document.createElement("div");return o.eventing(i),C.addEventListener("click",function(){return i.trigger("user-interaction")}),C.addEventListener("touchstart",function(){return i.trigger("user-interaction")}),n&&A&&(b=n.width,w=n.height,b&&"number"==typeof b&&(b+="px"),w&&"number"==typeof w&&(w+="px"),A.style.width=b?b:"264px",A.style.height=w?w:"198px",A.style.overflow="hidden",t(A,b||"264px",w||"198px"),n.mirror&&o.addClass(A,"OT_mirrored"),"contain"===n.fitMode?d="contain":"cover"!==n.fitMode&&r.warn('Invalid fit value "'+n.fitMode+'" passed. Only "contain" and "cover" can be used.'),n.classNames&&o.addClass(A,n.classNames),o(A).addClass("OT_loading OT_fit-mode-"+d)),o.addClass(C,"OT_widget-container"),c&&o(A).addClass("OT_iOS"),C.style.width="100%",C.style.height="100%",A&&A.appendChild(C),v=document.createElement("div"),o.addClass(v,"OT_video-poster"),C.appendChild(v),y=document.createElement("div"),o.addClass(y,"OT_video-loading"),C.appendChild(y),_=document.createElement("div"),o.addClass(_,"OT_video-loading-spinner"),y.appendChild(_),A&&(s.width=A.offsetWidth,s.height=A.offsetHeight),!a.isInstalled()&&A&&(p=o(A).observeSize(function(e){var n=e.width,i=e.height;t(A,n,i)})[0],m=o.observeNodeOrChildNodeRemoval(A,function(e){if(h){var t=e.some(function(e){return e===C||"VIDEO"===e.nodeName});t&&i.destroyVideo()}})),i.destroy=function(){p&&(p.disconnect(),p=null),m&&(m.disconnect(),m=null),i.destroyVideo(),A&&(o.removeElement(A),A=null)},i.setBackgroundImageURI=function(e){o.css(v,"backgroundImage","url("+e+")"),o.css(v,"backgroundSize","contain"),o.css(v,"opacity","1.0")},n&&n.style&&n.style.backgroundImageURI&&i.setBackgroundImageURI(n.style.backgroundImageURI),i.isAudioBlocked=function(){return h.isAudioBlocked()},i.playAudio=function(){return h.playAudio()},i.setAudioBlockedUi=function(e){e?o.addClass(A,"OT_container-audio-blocked"):o.removeClass(A,"OT_container-audio-blocked")},window.widgetView=i,i.bindVideo=function(e,t,a){t.fitMode=d,"undefined"!=typeof t.audioVolume&&(t.audioVolume=parseFloat(t.audioVolume)),i.destroyVideo();var s=t.error;if(delete t.error,h=new g.VideoElementFacade(t,s),h.domElement()&&i.trigger("videoElementCreated",h.domElement()),h.on("videoElementCreated",function(e){i.trigger("videoElementCreated",e)}),"undefined"!=typeof t.audioVolume)try{h.setAudioVolume(t.audioVolume)}catch(c){r.warn("bindVideo "+c)}return h.audioChannelType("telephony"),h.appendTo(C),h.bindToStream(e,function(e){return e?(i.destroyVideo(),void a(e)):(h.on({videoDimensionsChanged:function(e,t){i.trigger("videoDimensionsChanged",e,t)},mediaStopped:function(e){i.trigger("mediaStopped",e)}}),void a(null,h))}),n.insertDefaultUI!==!1&&o.addClass(h.domElement(),"OT_video-element"),h},i.destroyVideo=function(){h&&(h.destroy(),h=null)},o.defineProperties(i,{video:{get:function(){return h}},showPoster:{get:function(){return!o.isDisplayNone(v)},set:function(e){e?o.show(v):o.hide(v)}},poster:{get:function(){return o.css(v,"backgroundImage")},set:function(e){o.css(v,"backgroundImage","url("+e+")")}},loading:{get:function(){return l},set:function(e){l=e,A&&(l?o.addClass(A,"OT_loading"):o.removeClass(A,"OT_loading"))}},audioOnly:{get:function(){return u},set:function(e){u=e,u?o.addClass(A,"OT_audio-only"):o.removeClass(A,"OT_audio-only")}},domId:{get:function(){return A&&A.getAttribute("id")}}}),i.domElement=A,i.addError=function(e,t,n){A&&(A.innerHTML="<p>"+e+(t?' <span class="ot-help-message">'+t+"</span>":"")+"</p>",o.addClass(A,n||"OT_subscriber_error"),A.querySelector("p").offsetHeight>A.offsetHeight&&(A.querySelector("span").style.display="none"))},i};return h.VideoElementFacade=s,h}},{"../common-js-helpers/OTHelpers.js":218,"../ot/logging.js":315,"../otplugin/otplugin.js":396,"./isiOS.js":271,"./video_element/index.js":281,uuid:201}],288:[function(e,t){(function(n){"use strict";var i=e("./helpers/errorReporting.js")(),r={};r.noConflict=e("./helpers/no_conflict.js")(),n.OT=r,t.exports=r,function(){var e=r;Object.defineProperty(n,"TB",{get:function(){return e===r&&console.warn("window.TB is deprecated, and will be removed in the future. Please access via window.OT"),e},set:function(t){e=t},configurable:!0})}();var o=e("./helpers/createWindowMock.js")(n),a=e("./common-js-helpers/OTHelpers.js"),s=e("./helpers/analytics.js"),c=e("./ot/analytics.js"),l=e("./ot/api_key.js"),u=e("./ot/audio_level_transformer"),d=e("./ot/publisher/calculateCapableSimulcastStreams.js"),p=e("./ot/chrome/chrome.js"),f=e("./helpers/connectivity_attempt_pinger.js"),h=e("./helpers/audio_level_samplers/webaudio_audio_level_sampler"),g=e("./helpers/audio_level_samplers/getstats_audio_output_level_sampler"),m=e("./helpers/css_loader.js"),v=e("./helpers/dialogs.js"),y=e("./ot/environment_loader.js"),_=e("./ot/Errors.js"),b=e("./ot/exception_codes.js"),w=e("./ot/publisher/generateConstraintInfo.js"),A=e("./helpers/guid_storage.js"),C=e("./ot/logging.js"),E=e("./ot/ot_error_class.js"),T=e("./otplugin/otplugin.js"),S=e("./helpers/otProperties.js"),x=e("./ot/messaging/raptor/parse_ice_servers.js"),j=x.parseIceServers,k=e("./ot/publisher/max_delay.js")(),R=e("./ot/session/objects.js"),I=e("./ot/stream_channel.js"),O=e("./ot/styling/stylable_component.js"),P=e("./ot/system_requirements.js"),D=e("./ot/peer_connection/peer_connection.js")({global:o}),L=e("./helpers/otError.js")({errorReporting:i}),N=e("./ot/anvil.js")(),M=e("./helpers/audio_context.js")(),B=e("./ot/screensharing/chrome_extension_helper.js")({otError:L}),F=e("./ot/publisher/createChromeMixin.js")(),U=e("./helpers/getNativeEnumerateDevices.js")({global:o}),H=e("./helpers/device_helpers.js")({getNativeEnumerateDevices:U}),V=e("./ot/events.js")(),W=e("./ot/generate_simple_state_machine.js")(),z=e("./helpers/get_user_media.js")({otError:L,global:o}),$=e("./ot/interpretPeerConnectionError.js")({otError:L}),G=e("./ot/interval_runner.js")(),Y=e("./ot/publisher/microphone.js")(),Q=e("./helpers/video_element/videoElementErrorMap.js")({otError:L}),J=e("./helpers/video_element/NativeVideoElementWrapper/streamBinding.js")({otError:L,videoElementErrorMap:Q,global:o}),q=e("./helpers/video_element/NativeVideoElementWrapper/NativeVideoElementWrapper.js")({streamBinding:J,videoElementErrorMap:Q}),X=e("./ot/peer_connection/set_certificates.js")({global:o}),K=e("./ot/peer_connection/publisher_peer_connection.js")({PeerConnection:D,setCertificates:X}),Z=e("./ot/peer_connection/subscriber_peer_connection.js")({PeerConnection:D,setCertificates:X}),et=e("./ot/publisher/state.js")(),tt=e("./ot/report_issue.js")({otError:L}),nt=e("./ot/session/info.js")({Anvil:N}),it=e("./ot/screensharing/screen_sharing.js")({chromeExtensionHelper:B,otError:L}),rt=e("./helpers/video_element/index.js")({NativeVideoElementWrapper:q}),ot=e("./helpers/video_orientation.js")(),at=e("./helpers/widget_view.js")({VideoElementFacade:rt});a.getUserMedia=z;var st=e("./ot/subscriber")({interpretPeerConnectionError:$,otError:L,SubscriberPeerConnection:Z,WidgetView:at}),ct=e("./ot/publisher")({analytics:c,APIKEY:l,ConnectivityAttemptPinger:f,createChromeMixin:F,EnvironmentLoader:y,Errors:_,Events:V,ExceptionCodes:b,deviceHelpers:H,calculateCapableSimulcastStreams:d,generateConstraintInfo:w,getUserMedia:z,interpretPeerConnectionError:$,IntervalRunner:G,logging:C,Microphone:Y,otError:L,OTErrorClass:E,OTHelpers:a,OTPlugin:T,otProperties:S,parseIceServers:j,PUBLISH_MAX_DELAY:k,PublisherPeerConnection:K,PublishingState:et,screenSharing:it,StreamChannel:I,systemRequirements:P,VideoOrientation:ot,WidgetView:at}),lt=e("./ot/publisher/init.js")({otError:L,Publisher:ct}),ut=e("./ot/session")({global:o,initPublisher:lt,otError:L,Publisher:ct,SessionInfo:nt,Subscriber:st}),dt=e("./ot/session/init.js")({Session:ut});a.eventing(r),r.$=a,r.APIKEY=l.value,r.AnalyserAudioLevelSampler=h,r.Analytics=s,r.Anvil=N,r.Archive=e("./ot/archive.js"),r.ArchiveEvent=V.ArchiveEvent,r.ArchiveUpdatedEvent=V.ArchiveUpdatedEvent,r.AudioLevelTransformer=u,r.AudioLevelUpdatedEvent=V.AudioLevelUpdatedEvent,r.Capabilities=e("./ot/capabilities.js"),r.Chrome=p,r.Connection=e("./ot/connection.js"),r.ConnectionCapabilities=r.Connection.Capabilities,r.ConnectionEvent=V.ConnectionEvent,r.ConnectivityAttemptPinger=f,r.DEBUG=C.DEBUG,r.DestroyedEvent=V.DestroyedEvent,r.Dialogs=v,r.ERROR=C.ERROR,r.EnvLoadedEvent=V.EnvLoadedEvent,r.Error=E,r.Error.on(V.Event.names.EXCEPTION,function(e){if(e.target===r.Error){var t=a.clone(e);t.target=r,r.dispatchEvent(t)}else r.dispatchEvent(e)}),r.Event=V.Event,r.ExceptionCodes=b,r.ExceptionEvent=V.ExceptionEvent,r.getDevices=e("./ot/get_devices.js"),r.GetStatsAudioLevelSampler=g,r.HAS_REQUIREMENTS=1,r.INFO=C.INFO,r.IntervalRunner=G,r.IssueReportedEvent=V.IssueReportedEvent,r.LOG=C.LOG,r.MediaStoppedEvent=V.MediaStoppedEvent,r.Microphone=Y,r.Modal=a.Modal,r.NONE=C.NONE,r.NOT_HAS_REQUIREMENTS=0,r.PeerConnection=D,r.PeerConnection.QOS=e("./ot/peer_connection/qos.js"),r.Publisher=ct,r.PublisherPeerConnection=K,r.PublishingState=et,r.Raptor=e("./ot/messaging/raptor/legacy_structure.js"),r.Rumor=e("./ot/messaging/rumor/legacy_structure.js"),r.Session=ut,r.SessionConnectEvent=V.SessionConnectEvent,r.SessionDisconnectEvent=V.SessionDisconnectEvent,r.SessionDispatcher=e("./ot/messaging/raptor/session_dispatcher.js"),r.SessionInfo=nt,r.Signal=e("./ot/messaging/raptor/signal.js"),r.SignalEvent=V.SignalEvent,r.Stream=e("./ot/stream.js"),r.StreamChannel=I,r.StreamEvent=V.StreamEvent,r.StreamPropertyChangedEvent=V.StreamPropertyChangedEvent,r.StreamUpdatedEvent=V.StreamUpdatedEvent,r.StylableComponent=O,r.Subscriber=st,r.SubscriberPeerConnection=Z,r.SubscribingState=e("./ot/subscriber/state.js"),r.VideoDimensionsChangedEvent=V.VideoDimensionsChangedEvent,r.VideoDisableWarningEvent=V.VideoDisableWarningEvent,r.VideoElement=rt,r.VideoEnabledChangedEvent=V.VideoEnabledChangedEvent,r.VideoOrientation=ot,r.WARN=C.WARN,r.WidgetView=at,r._={getClientGuid:A.get},r.analytics=c,r.audioContext=M,r.checkScreenSharingCapability=it.checkCapability,r.checkSystemRequirements=P.check,r.components={},r.debug=C.debug,r.error=C.error,r.generateSimpleStateMachine=W,r.getDevices=e("./ot/get_devices.js"),r.getErrorTitleByCode=E.getTitleByCode,r.getLogs=C.getLogs,r.getStatsAdpater=e("./ot/peer_connection/get_stats_adapter.js"),r.getStatsHelpers=e("./ot/peer_connection/get_stats_helpers.js"),r.handleJsException=E.handleJsException,r.info=C.info,r.initPublisher=lt,r.initSession=function(e,t,n){return null==t&&(t=e,e=null),0===l.value.length&&e&&(l.value=e,r.APIKEY=e),dt(e,t,n)},r.isUnloaded=y.isUnloaded,r.log=C.log,r.onLoad=y.onLoad,r.onUnload=y.onUnload,r.overrideGuidStorage=A.override,r.pickScreenSharingHelper=it.pickHelper,r.properties=S,r.publishers=R.publishers,r.registerScreenSharingExtension=it.registerExtension,r.registerScreenSharingExtensionHelper=it.registerExtensionHelper,r.reportIssue=tt,r.sessions=R.sessions,r.setLogLevel=C.setLogLevel,r.shouldLog=C.shouldLog,r.subscribers=R.subscribers,r.upgradeSystemRequirements=P.upgrade,r.warn=C.warn,y.onUnload(function(){R.publishers.destroy(),R.subscribers.destroy(),R.sessions.destroy("unloaded")}),S.cssURL&&m(S.cssURL)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./common-js-helpers/OTHelpers.js":218,"./helpers/analytics.js":242,"./helpers/audio_context.js":243,"./helpers/audio_level_samplers/getstats_audio_output_level_sampler":244,"./helpers/audio_level_samplers/webaudio_audio_level_sampler":245,"./helpers/connectivity_attempt_pinger.js":246,"./helpers/createWindowMock.js":249,"./helpers/css_loader.js":251,"./helpers/device_helpers.js":252,"./helpers/dialogs.js":253,"./helpers/errorReporting.js":255,"./helpers/getNativeEnumerateDevices.js":257,"./helpers/get_user_media.js":258,"./helpers/guid_storage.js":259,"./helpers/no_conflict.js":272,"./helpers/otError.js":273,"./helpers/otProperties.js":274,"./helpers/video_element/NativeVideoElementWrapper/NativeVideoElementWrapper.js":278,"./helpers/video_element/NativeVideoElementWrapper/streamBinding.js":279,"./helpers/video_element/index.js":281,"./helpers/video_element/videoElementErrorMap.js":284,"./helpers/video_orientation.js":285,"./helpers/widget_view.js":287,"./ot/Errors.js":289,"./ot/analytics.js":290,"./ot/anvil.js":291,"./ot/api_key.js":292,"./ot/archive.js":293,"./ot/audio_level_transformer":294,"./ot/capabilities.js":295,"./ot/chrome/chrome.js":302,"./ot/connection.js":306,"./ot/environment_loader.js":308,"./ot/events.js":309,"./ot/exception_codes.js":310,"./ot/generate_simple_state_machine.js":311,"./ot/get_devices.js":312,"./ot/interpretPeerConnectionError.js":313,"./ot/interval_runner.js":314,"./ot/logging.js":315,"./ot/messaging/raptor/legacy_structure.js":319,"./ot/messaging/raptor/parse_ice_servers.js":321,"./ot/messaging/raptor/session_dispatcher.js":325,"./ot/messaging/raptor/signal.js":326,"./ot/messaging/rumor/legacy_structure.js":330,"./ot/ot_error_class.js":337,"./ot/peer_connection/get_stats_adapter.js":340,"./ot/peer_connection/get_stats_helpers.js":341,"./ot/peer_connection/peer_connection.js":344,"./ot/peer_connection/publisher_peer_connection.js":347,"./ot/peer_connection/qos.js":348,"./ot/peer_connection/set_certificates.js":351,"./ot/peer_connection/subscriber_peer_connection.js":353,"./ot/publisher":361,"./ot/publisher/calculateCapableSimulcastStreams.js":358,"./ot/publisher/createChromeMixin.js":359,"./ot/publisher/generateConstraintInfo.js":360,"./ot/publisher/init.js":362,"./ot/publisher/max_delay.js":363,"./ot/publisher/microphone.js":364,"./ot/publisher/state.js":366,"./ot/report_issue.js":367,"./ot/screensharing/chrome_extension_helper.js":368,"./ot/screensharing/screen_sharing.js":372,"./ot/session":373,"./ot/session/info.js":374,"./ot/session/init.js":375,"./ot/session/objects.js":376,"./ot/stream.js":378,"./ot/stream_channel.js":379,"./ot/styling/stylable_component.js":381,"./ot/subscriber":384,"./ot/subscriber/state.js":385,"./ot/system_requirements.js":386,"./otplugin/otplugin.js":396}],289:[function(e,t){"use strict";
t.exports={AUTHENTICATION_ERROR:"OT_AUTHENTICATION_ERROR",BADLY_FORMED_RESPONSE:"OT_BADLY_FORMED_RESPONSE",CHROME_MICROPHONE_ACQUISITION_ERROR:"OT_CHROME_MICROPHONE_ACQUISITION_ERROR",CONNECT_FAILED:"OT_CONNECT_FAILED",CONNECTION_LIMIT_EXCEEDED:"OT_CONNECTION_LIMIT_EXCEEDED",CONSTRAINTS_NOT_SATISFIED:"OT_CONSTRAINTS_NOT_SATISFIED",CREATE_PEER_CONNECTION_FAILED:"OT_CREATE_PEER_CONNECTION_FAILED",DISCONNECTED:"OT_DISCONNECTED",EMPTY_RESPONSE_BODY:"OT_EMPTY_RESPONSE_BODY",HARDWARE_UNAVAILABLE:"OT_HARDWARE_UNAVAILABLE",ICE_WORKFLOW_FAILED:"OT_ICE_WORKFLOW_FAILED",INVALID_HTTP_STATUS:"OT_INVALID_HTTP_STATUS",INVALID_PARAMETER:"OT_INVALID_PARAMETER",INVALID_SESSION_ID:"OT_INVALID_SESSION_ID",MEDIA_ERR_ABORTED:"OT_MEDIA_ERR_ABORTED",MEDIA_ERR_DECODE:"OT_MEDIA_ERR_DECODE",MEDIA_ERR_NETWORK:"OT_MEDIA_ERR_NETWORK",MEDIA_ERR_SRC_NOT_SUPPORTED:"OT_MEDIA_ERR_SRC_NOT_SUPPORTED",NO_DEVICES_FOUND:"OT_NO_DEVICES_FOUND",NO_VALID_CONSTRAINTS:"OT_NO_VALID_CONSTRAINTS",NOT_CONNECTED:"OT_NOT_CONNECTED",NOT_FOUND:"OT_NOT_FOUND",NOT_SUPPORTED:"OT_NOT_SUPPORTED",PERMISSION_DENIED:"OT_PERMISSION_DENIED",RATE_LIMIT_EXCEEDED:"OT_RATE_LIMIT_EXCEEDED",REPORT_ISSUE_FAILED:"OT_REPORT_ISSUE_FAILED",SCREEN_SHARING_EXTENSION_NOT_INSTALLED:"OT_SCREEN_SHARING_EXTENSION_NOT_INSTALLED",SCREEN_SHARING_EXTENSION_NOT_REGISTERED:"OT_SCREEN_SHARING_EXTENSION_NOT_REGISTERED",SCREEN_SHARING_NOT_SUPPORTED:"OT_SCREEN_SHARING_NOT_SUPPORTED",UNABLE_TO_CAPTURE_SCREEN:"OT_UNABLE_TO_CAPTURE_SCREEN",SET_REMOTE_DESCRIPTION_FAILED:"OT_SET_REMOTE_DESCRIPTION_FAILED",SOCKET_ALREADY_CONNECTED_CONNECTING:"OT_SOCKET_ALREADY_CONNECTED_CONNECTING",SOCKET_CLOSE_ABNORMAL:"OT_SOCKET_CLOSE_ABNORMAL",SOCKET_CLOSE_CONNECT_EXCEPTION:"OT_SOCKET_CLOSE_CONNECT_EXCEPTION",SOCKET_CLOSE_CONNECTIVITY_LOSS:"OT_SOCKET_CLOSE_CONNECTIVITY_LOSS",SOCKET_CLOSE_FALLBACK_CODE:"OT_SOCKET_CLOSE_FALLBACK_CODE",SOCKET_CLOSE_INCONSISTENT_DATA:"OT_SOCKET_CLOSE_INCONSISTENT_DATA",SOCKET_CLOSE_NO_STATUS:"OT_SOCKET_CLOSE_NO_STATUS",SOCKET_CLOSE_POLICY_VIOLATION:"OT_SOCKET_CLOSE_POLICY_VIOLATION",SOCKET_CLOSE_PROTOCOL_ERROR:"OT_SOCKET_CLOSE_PROTOCOL_ERROR",SOCKET_CLOSE_TIMEOUT:"OT_SOCKET_CLOSE_TIMEOUT",SOCKET_CLOSE_TOO_LARGE:"OT_SOCKET_CLOSE_TOO_LARGE",SOCKET_CLOSE_UNEXPECTED_CONDITION:"OT_SOCKET_CLOSE_UNEXPECTED_CONDITION",SOCKET_CLOSE_UNSUPPORTED:"OT_SOCKET_CLOSE_UNSUPPORTED",STREAM_CREATE_FAILED:"OT_STREAM_CREATE_FAILED",STREAM_DESTROYED:"OT_STREAM_DESTROYED",STREAM_LIMIT_EXCEEDED:"OT_STREAM_LIMIT_EXCEEDED",STREAM_NOT_FOUND:"OT_STREAM_NOT_FOUND",TERMS_OF_SERVICE_FAILURE:"OT_TERMS_OF_SERVICE_FAILURE",TIMEOUT:"OT_TIMEOUT",UNEXPECTED_ERROR_CODE:"OT_UNEXPECTED_ERROR_CODE",UNEXPECTED_HTTP_STATUS:"OT_UNEXPECTED_HTTP_STATUS",UNEXPECTED_SERVER_RESPONSE:"OT_UNEXPECTED_SERVER_RESPONSE",UNKNOWN_HTTP_ERROR:"OT_UNKNOWN_HTTP_ERROR",USER_MEDIA_ACCESS_DENIED:"OT_USER_MEDIA_ACCESS_DENIED",XDOMAIN_OR_PARSING_ERROR:"OT_XDOMAIN_OR_PARSING_ERROR"}},{}],290:[function(e,t){"use strict";var n=e("../helpers/analytics.js"),i=e("../helpers/otProperties.js");t.exports=new n(i.loggingURL)},{"../helpers/analytics.js":242,"../helpers/otProperties.js":274}],291:[function(e,t){(function(n){"use strict";var i=e("bluebird");t.exports=function(){function t(e,t,n){var i=d.apiURL+"/"+e,r="js-"+d.version.replace(/^v/,""),o={headers:{"X-OPENTOK-AUTH":t,"X-TB-VERSION":1,"X-TB-CLIENT-VERSION":r,"X-TB-CONNECTIONID":n}};return{url:i,options:o}}function r(e,t){var n=new Error(t);return n.code=e,n}function o(e){var t=void 0,n=void 0,i=void 0;if(!e)return null;var o=e.target&&e.target.status;return void 0!==o?(t=l.ANVIL_INVALID_HTTP_STATUS,n=o,i=e.target&&e.target.statusText,void 0!==i&&(n+=" "+i),0===o&&""===i&&p.navigator&&p.navigator.onLine===!1&&(t=l.ANVIL_CONNECT_FAILED,n="Connect Failed")):void 0!==e.message?(t=l.ANVIL_XDOMAIN_OR_PARSING_ERROR,n=e.message):(t=l.ANVIL_UNKNOWN_HTTP_ERROR,n="No status"),r(t,"Unexpected server response ("+n+"). Try this operation again later.")}function a(e){var t=void 0,n=void 0,i=e&&!u.isEmpty(e)?JSON.stringify(e):"";return 0===i.length?(t=l.ANVIL_EMPTY_RESPONSE_BODY,n="Response body was empty, probably due to connectivity loss"):(t=l.ANVIL_BADLY_FORMED_RESPONSE,n="Unknown error: JSON response was badly formed"),r(t,n)}function s(e){var t=void 0,n=void 0;if(!Array.isArray(e))return a(e);var i=u.find(e,function(e){return null!=e.error});return i?(t=h[i.error.code],n=i.error.errorMessage&&i.error.errorMessage.message,t||(n||(n="Unknown error: "+t),t=l.ANVIL_UNEXPECTED_ERROR_CODE),n||(n="No error message"),r(t,n)):null}var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=c.ExceptionCodes||e("./exception_codes.js"),u=c.OTHelpers||e("../common-js-helpers/OTHelpers.js"),d=c.otProperties||e("../helpers/otProperties.js"),p=c.global||n,f={},h={400:l.INVALID_SESSION_ID,403:l.AUTHENTICATION_ERROR,404:l.INVALID_SESSION_ID,409:l.TERMS_OF_SERVICE_FAILURE,500:l.UNEXPECTED_SERVER_RESPONSE};return f.get=function(e,n,r){var a=t(e,n,r);return new i.Promise(function(e,t){u.getJSON(a.url,a.options,function(n,i){var r=o(n)||s(i);return r?void t(r):void e(i[0])})})},f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/OTHelpers.js":218,"../helpers/otProperties.js":274,"./exception_codes.js":310,bluebird:2}],292:[function(e,t){"use strict";var n=e("../common-js-helpers/OTHelpers.js");if("Node"===n.env.name)t.exports={value:""};else{var i=Array.prototype.slice.call(document.getElementsByTagName("script")).pop().getAttribute("src"),r=i&&i.match(/[?&]apikey=([^&]+)/i)||[],o=r[1];t.exports={value:o||""}}},{"../common-js-helpers/OTHelpers.js":218}],293:[function(e,t){"use strict";var n=e("./events.js")(),i=e("../common-js-helpers/OTHelpers.js");t.exports=function(e,t,r){var o=this;this.id=e,this.name=t,this.status=r,this._={},i.eventing(this),this._.update=function(e){Object.keys(e).forEach(function(t){var i=o[t];o[t]=e[t];var r=new n.ArchiveUpdatedEvent(o,t,i,o[t]);o.dispatchEvent(r)})},this.destroy=function(){}}},{"../common-js-helpers/OTHelpers.js":218,"./events.js":309}],294:[function(e,t){"use strict";t.exports=function(){var e=null;this.transform=function(t){e=null===e||t>=e?t:.3*t+.7*e;var n=Math.log(e)/Math.LN10/1.5+1;return Math.min(Math.max(n,0),1)}}},{}],295:[function(e,t){"use strict";var n=e("../helpers/hasOpenTokSupport.js").once;t.exports=function(e){var t=this;this.publish=-1!==e.indexOf("publish")?1:0,this.subscribe=-1!==e.indexOf("subscribe")?1:0,this.forceUnpublish=-1!==e.indexOf("forceunpublish")?1:0,this.forceDisconnect=-1!==e.indexOf("forcedisconnect")?1:0,this.supportsWebRTC=n()?1:0,this.permittedTo=function(e){return Object.prototype.hasOwnProperty.call(t,e)&&1===t[e]}}},{"../helpers/hasOpenTokSupport.js":265}],296:[function(e,t){"use strict";var n=e("./behaviour/widget.js"),i=e("../../common-js-helpers/OTHelpers.js");t.exports=function(e){var t=this,r=!1,o=function(e){var n=["auto","on"].indexOf(t.getDisplayMode())>-1;i.removeClass(e,["OT_audio-blocked","OT_active"].join(" ")),n&&(r&&i.addClass(e,"OT_audio-blocked"),i.addClass(e,"OT_active"))};this.setAudioBlocked=function(e){r=e,o(t.domElement)},n(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-blocked-indicator"}});var a=this.setDisplayMode.bind(this);this.setDisplayMode=function(e){a(e),o(t.domElement)}}},{"../../common-js-helpers/OTHelpers.js":218,"./behaviour/widget.js":301}],297:[function(e,t){"use strict";var n=e("./behaviour/widget.js"),i=e("../../common-js-helpers/OTHelpers.js");t.exports=function(e){var t=this,r=!1,o=function(e){var n=["auto","on"].indexOf(t.getDisplayMode())>-1;i.removeClass(e,["OT_active"].join(" ")),n&&r&&i.addClass(e,"OT_active")};this.setVideoUnsupported=function(e){r=e,o(t.domElement)},n(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-unsupported"},htmlContent:'<div class="OT_video-unsupported-bar"></div><div class="OT_video-unsupported-img"></div><span class="OT_video-unsupported-text">Video format not supported</span>'});var a=this.setDisplayMode.bind(this);this.setDisplayMode=function(e){a(e),o(t.domElement)}}},{"../../common-js-helpers/OTHelpers.js":218,"./behaviour/widget.js":301}],298:[function(e,t){"use strict";var n=e("./behaviour/widget.js"),i=e("../../common-js-helpers/OTHelpers.js");t.exports=function(e){var t=void 0,r=void 0,o=void 0,a=void 0,s=void 0,c=this,l=e.archiving,u=e.archivingStarted||"Archiving on",d=e.archivingEnded||"Archiving off",p=!0,f=function(e){a.nodeValue=e,t.setAttribute("title",e)},h=function(){s&&(clearTimeout(s),s=null),l?i.addClass(r,"OT_active"):i.removeClass(r,"OT_active"),i.removeClass(c.domElement,"OT_archiving-"+(l?"off":"on")),i.addClass(c.domElement,"OT_archiving-"+(l?"on":"off")),e.show&&l?(f(u),i.addClass(o,"OT_mode-on"),i.removeClass(o,"OT_mode-auto"),c.setDisplayMode("on"),s=setTimeout(function(){i.addClass(o,"OT_mode-auto"),i.removeClass(o,"OT_mode-on")},5e3)):e.show&&!p?(i.addClass(o,"OT_mode-on"),i.removeClass(o,"OT_mode-auto"),c.setDisplayMode("on"),f(d),s=setTimeout(function(){c.setDisplayMode("off")},5e3)):c.setDisplayMode("off")};n(this,{mode:l&&e.show&&"on"||"off",nodeName:"h1",htmlAttributes:{className:"OT_archiving OT_edge-bar-item OT_edge-bottom"},onCreate:function(){t=i.createElement("div",{className:"OT_archiving-light-box"},""),r=i.createElement("div",{className:"OT_archiving-light"},""),t.appendChild(r),o=i.createElement("div",{className:"OT_archiving-status OT_mode-on OT_edge-bar-item OT_edge-bottom"},""),a=document.createTextNode(""),o.appendChild(a),c.domElement.appendChild(t),c.domElement.appendChild(o),h()}}),this.setShowArchiveStatus=function(t){e.show=t,c.domElement&&h.call(c)},this.setArchiving=function(e){l=e,p=!1,c.domElement&&h.call(c)}}},{"../../common-js-helpers/OTHelpers.js":218,"./behaviour/widget.js":301}],299:[function(e,t){"use strict";var n=e("./behaviour/widget"),i=e("../../common-js-helpers/OTHelpers.js"),r=e("bluebird"),o=e("events");t.exports=function(e){function t(){d=i.createElement("div",{className:"OT_audio-level-meter__bar"},""),f=i.createElement("div",{className:"OT_audio-level-meter__value"},""),p=i.createElement("div",{className:"OT_audio-level-meter__audio-only-img"},"");var e=l.domElement;e.appendChild(d),e.appendChild(p),e.appendChild(f),l.watchVisibilityChanged(function(e){e?i.removeClass(l.domElement,"OT_hide-forced"):i.addClass(l.domElement,"OT_hide-forced")})}function a(){u.removeAllListeners("visibilityChanged")}function s(){var e=100*h/(_-b);f.style.width=2*e+"%",f.style.height=2*e+"%",f.style.top=-e+"%",f.style.right=-e+"%"}function c(){var e=(v&&"auto"===y||"on"===y)&&m;g!==e&&(g=e,u.emit("visibilityChanged",e))}var l=this,u=new o,d=void 0,p=void 0,f=void 0,h=void 0,g=void 0,m=!0,v=!1,y="auto",_=e.maxValue||1,b=e.minValue||0;i.defineProperties(l,{audioOnly:{get:function(){return v},set:function(e){v=e,c()}}}),l.setValue=function(e){h=e,s()},l.watchVisibilityChanged=function(e){return u.on("visibilityChanged",e),r.resolve().then(function(){e(g)}),function(){u.removeListener("visibilityChanged",e)}};var w={mode:e?e.mode:"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-level-meter"},onCreate:t,onDestroy:a};n(this,w),l.setDisplayMode=function(e){y=e,c()},l.getDisplayMode=function(){return y},l.showAfterLoading=function(){m=!0,c()},l.hideWhileLoading=function(){m=!1,c()},c()}},{"../../common-js-helpers/OTHelpers.js":218,"./behaviour/widget":301,bluebird:2,events:3}],300:[function(e,t){"use strict";var n=e("./behaviour/widget.js");t.exports=function(e){function t(){return"on"===i||"on"===r?"on":"mini"===i||"mini"===r?"mini":"mini-auto"===i||"mini-auto"===r?"mini-auto":"auto"===i||"auto"===r?"auto":"off"}var i=e.nameMode,r=e.muteMode;n(this,{mode:t(),nodeName:"div",htmlContent:"",htmlAttributes:{className:"OT_bar OT_edge-bar-item"}}),this.setNameMode=function(e){i=e,this.setDisplayMode(t())},this.setMuteMode=function(e){r=e,this.setDisplayMode(t())}}},{"./behaviour/widget.js":301}],301:[function(e,t){"use strict";var n=e("../../../common-js-helpers/OTHelpers.js");t.exports=function(e,t){var i=void 0,r=t||{};e.setDisplayMode=function(e){var t=e||"auto";i!==t&&(n.removeClass(this.domElement,"OT_mode-"+i),n.addClass(this.domElement,"OT_mode-"+t),i=t)},e.getDisplayMode=function(){return i},e.showAfterLoading=function(){n.removeClass(this.domElement,"OT_hide-forced")},e.hideWhileLoading=function(){n.addClass(this.domElement,"OT_hide-forced")},e.destroy=function(){return r.onDestroy&&r.onDestroy(this.domElement),this.domElement&&n.removeElement(this.domElement),e},e.appendTo=function(t){return this.domElement=n.createElement(r.nodeName||"div",r.htmlAttributes,r.htmlContent),r.onCreate&&r.onCreate(this.domElement),e.setDisplayMode(r.mode),"auto"===r.mode&&(n.addClass(e.domElement,"OT_mode-on-hold"),setTimeout(function(){n.removeClass(e.domElement,"OT_mode-on-hold")},2e3)),t.appendChild(this.domElement),e}}},{"../../../common-js-helpers/OTHelpers.js":218}],302:[function(e,t){"use strict";var n=e("../../common-js-helpers/OTHelpers.js");t.exports=function(e){var t={},i=function(n,i){i.parent=this,i.appendTo(e.parent),t[n]=i,this[n]=i};e.parent&&(n.eventing(this),this.destroy=function(){this.off(),this.hideWhileLoading();for(var e in t)t.hasOwnProperty(e)&&t[e].destroy()},this.showAfterLoading=function(){for(var e in t)t.hasOwnProperty(e)&&t[e].showAfterLoading()},this.hideWhileLoading=function(){for(var e in t)t.hasOwnProperty(e)&&t[e].hideWhileLoading()},this.set=function(e,t){if("string"==typeof e&&t)i.call(this,e,t);else for(var n in e)e.hasOwnProperty(n)&&i.call(this,n,e[n]);return this})}},{"../../common-js-helpers/OTHelpers.js":218}],303:[function(e,t){"use strict";var n=e("../../common-js-helpers/OTHelpers.js"),i=e("./behaviour/widget.js");t.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.OTHelpers||n,r=e.Widget||i;return function(e){var n=this,i=e.muted||!1,o=function(){i?t.addClass(n.domElement,"OT_active"):t.removeClass(n.domElement,"OT_active ")},a=function(){return i=!i,o(),i?n.parent.trigger("muted",n):n.parent.trigger("unmuted",n),!1},s=function(e){t.on(e,"click",a)},c=function(e){t.off(e,"click",a)};t.defineProperties(this,{muted:{get:function(){return i},set:function(e){i=e,o()}}});var l=i?"OT_edge-bar-item OT_mute OT_active":"OT_edge-bar-item OT_mute";r(this,{mode:e.mode,nodeName:"button",htmlContent:"Mute",htmlAttributes:{className:l,type:"button"},onCreate:s,onDestroy:c})}}},{"../../common-js-helpers/OTHelpers.js":218,"./behaviour/widget.js":301}],304:[function(e,t){"use strict";var n=e("./behaviour/widget.js");t.exports=function(e){var t=e.name;t&&""!==t.trim().length||(t=null,e.mode="off"),this.setName=function(e){t||this.setDisplayMode("auto"),t=e,this.domElement.innerHTML=t}.bind(this),n(this,{mode:e.mode,nodeName:"h1",htmlContent:t,htmlAttributes:{className:"OT_name OT_edge-bar-item"}})}},{"./behaviour/widget.js":301}],305:[function(e,t){"use strict";var n=e("./behaviour/widget.js"),i=e("../../common-js-helpers/OTHelpers.js");t.exports=function(e){var t=!1,r=!1,o=function(e){var n=["auto","on"].indexOf(this.getDisplayMode())>-1;i.removeClass(e,"OT_video-disabled OT_video-disabled-warning OT_active"),n&&(t?i.addClass(e,"OT_video-disabled"):r&&i.addClass(e,"OT_video-disabled-warning"),i.addClass(e,"OT_active"))}.bind(this);this.disableVideo=function(e){t=e,e===!0&&(r=!1),o(this.domElement)},this.setWarning=function(e){r=e,o(this.domElement)},n(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-disabled-indicator"}});var a=this.setDisplayMode.bind(this);this.setDisplayMode=function(e){a(e),o(this.domElement)}}},{"../../common-js-helpers/OTHelpers.js":218,"./behaviour/widget.js":301}],306:[function(e,t){"use strict";var n=e("./capabilities.js"),i=e("../common-js-helpers/OTHelpers.js"),r=e("./events.js")(),o=e("./connectionCapabilities.js"),a=function(e,t,a,s,c){var l=void 0;this.id=e,this.connectionId=e,this.creationTime=t?Number(t):null,this.data=a,this.capabilities=o(s),this.permissions=new n(c),this.quality=null,i.eventing(this),this.destroy=function(e,t){l=e||"clientDisconnected",t!==!0&&this.dispatchEvent(new r.DestroyedEvent("destroyed",this,l))}.bind(this),this.destroyed=function(){return void 0!==l},this.destroyedReason=function(){return l}};a.fromHash=function(e){return new a(e.id,e.creationTime,e.data,i.extend(e.capablities||{},{supportsWebRTC:!0}),e.permissions||[])},t.exports=a},{"../common-js-helpers/OTHelpers.js":218,"./capabilities.js":295,"./connectionCapabilities.js":307,"./events.js":309}],307:[function(e,t){"use strict";t.exports=function(e){var t=e.supportsWebRTC;return{supportsWebRTC:"true"===t||t===!0}}},{}],308:[function(e,t){"use strict";function n(){function e(){return a.isDomLoaded()&&!a.isDomUnloaded()&&d}function t(){e()&&u.dispatchEvent(new s.EnvLoadedEvent(s.Event.names.ENV_LOADED))}function n(){a.whenUnloaded.then(c),t()}function c(){u.dispatchEvent(new s.EnvLoadedEvent(s.Event.names.ENV_UNLOADED))}function l(e){d=!0,e&&i.info("OTPlugin failed to load or was not installed:",e),t()}var u=this;r.eventing(u,!0);var d=o.isSupported()?o.isReady():!0;a.whenLoaded.then(n),o.isSupported()&&o.ready(l),this.onLoad=function(t,n){return e()?void t.call(n):void u.on(s.Event.names.ENV_LOADED,t,n)},this.onUnload=function(e,t){return this.isUnloaded()?void e.call(t):void u.on(s.Event.names.ENV_UNLOADED,e,t)},this.isUnloaded=function(){return a.isDomUnloaded()}}var i=e("./logging.js"),r=e("../common-js-helpers/OTHelpers.js"),o=e("../otplugin/otplugin.js"),a=e("../helpers/domState.js"),s=e("./events.js")();t.exports=new n},{"../common-js-helpers/OTHelpers.js":218,"../helpers/domState.js":254,"../otplugin/otplugin.js":396,"./events.js":309,"./logging.js":315}],309:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.logging||e("./logging.js"),i=t.OTHelpers||e("../common-js-helpers/OTHelpers.js"),r={};r.Event=i.Event(),r.Event.names={ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",ISSUE_REPORTED:"issueReported",SESSION_CONNECTED:"sessionConnected",SESSION_RECONNECTING:"sessionReconnecting",SESSION_RECONNECTED:"sessionReconnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL:"signal",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",INVALID_DEVICE_NAME:"invalidDeviceName",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ACCESS_DIALOG_OPENED:"accessDialogOpened",ACCESS_DIALOG_CLOSED:"accessDialogClosed",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",MEDIA_STOPPED:"mediaStopped",PUBLISHER_DESTROYED:"destroyed",SUBSCRIBER_DESTROYED:"destroyed",SUBSCRIBER_CONNECTED:"connected",SUBSCRIBER_DISCONNECTED:"disconnected",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",MICLEVEL:"microphoneActivityLevel",MICGAINCHANGED:"microphoneGainChanged",ENV_LOADED:"envLoaded",ENV_UNLOADED:"envUnloaded",AUDIO_LEVEL_UPDATED:"audioLevelUpdated",VIDEO_ELEMENT_CREATED:"videoElementCreated"},r.ExceptionEvent=function(e,t,n,i,o,a){r.Event.call(this,e),this.message=t,this.title=n,this.code=i,this.component=o,this.target=a},r.IssueReportedEvent=function(e,t){r.Event.call(this,e),this.issueId=t},r.EnvLoadedEvent=function(e){r.Event.call(this,e)};var o=!1;r.ConnectionEvent=function(e,t,i){r.Event.call(this,e,!1),Object.defineProperty(this,"connections",{get:function(){return o||(n.warn("OT.ConnectionEvent connections property is deprecated, use connection instead."),o=!0),[t]}}),this.connection=t,this.reason=i};var a=!1;r.StreamEvent=function(e,t,i,o){r.Event.call(this,e,o),Object.defineProperty(this,"streams",{get:function(){return a||(n.warn("OT.StreamEvent streams property is deprecated, use stream instead."),a=!0),[t]}}),this.stream=t,this.reason=i};var s=!1,c=!1,l=!1;return r.SessionConnectEvent=function(e){r.Event.call(this,e,!1),Object.defineProperties(this,{connections:{get:function(){return s||(n.warn("OT.SessionConnectedEvent no longer includes connections. Listen for connectionCreated events instead."),s=!0),[]}},streams:{get:function(){return c||(n.warn("OT.SessionConnectedEvent no longer includes streams. Listen for streamCreated events instead."),s=!0),[]}},archives:{get:function(){return l||(n.warn("OT.SessionConnectedEvent no longer includes archives. Listen for archiveStarted events instead."),l=!0),[]}}})},r.SessionReconnectingEvent=function(){r.Event.call(this,r.Event.names.SESSION_RECONNECTING)},r.SessionReconnectedEvent=function(){r.Event.call(this,r.Event.names.SESSION_RECONNECTED)},r.SessionDisconnectEvent=function(e,t,n){r.Event.call(this,e,n),this.reason=t},r.StreamPropertyChangedEvent=function(e,t,n,i,o){r.Event.call(this,e,!1),this.type=e,this.stream=t,this.changedProperty=n,this.oldValue=i,this.newValue=o},r.VideoDimensionsChangedEvent=function(e,t,n){r.Event.call(this,"videoDimensionsChanged",!1),this.type="videoDimensionsChanged",this.target=e,this.oldValue=t,this.newValue=n},r.ArchiveEvent=function(e,t){r.Event.call(this,e,!1),this.type=e,this.id=t.id,this.name=t.name,this.status=t.status,this.archive=t},r.ArchiveUpdatedEvent=function(e,t,n,i){r.Event.call(this,"updated",!1),this.target=e,this.changedProperty=t,this.oldValue=n,this.newValue=i},r.SignalEvent=function(e,t,n){r.Event.call(this,e?"signal:"+e:r.Event.names.SIGNAL,!1),this.data=t,this.from=n},r.StreamUpdatedEvent=function(e,t,n,i){r.Event.call(this,"updated",!1),this.target=e,this.changedProperty=t,this.oldValue=n,this.newValue=i},r.DestroyedEvent=function(e,t,n){r.Event.call(this,e,!1),this.target=t,this.reason=n},r.ConnectionStateChangedEvent=function(e,t){r.Event.call(this,e,!1),this.target=t},r.VideoEnabledChangedEvent=function(e,t){r.Event.call(this,e,!1),this.reason=t.reason},r.VideoDisableWarningEvent=function(e){r.Event.call(this,e,!1)},r.AudioLevelUpdatedEvent=function(e){r.Event.call(this,r.Event.names.AUDIO_LEVEL_UPDATED,!1),this.audioLevel=e},r.MediaStoppedEvent=function(e,t){r.Event.call(this,r.Event.names.MEDIA_STOPPED,!0),this.target=e,this.track=t},r.VideoElementCreatedEvent=function(e){r.Event.call(this,r.Event.names.VIDEO_ELEMENT_CREATED,!1),this.element=e},r}},{"../common-js-helpers/OTHelpers.js":218,"./logging.js":315}],310:[function(e,t){"use strict";t.exports={JS_EXCEPTION:2e3,AUTHENTICATION_ERROR:1004,INVALID_SESSION_ID:1005,CONNECT_FAILED:1006,CONNECT_REJECTED:1007,CONNECTION_TIMEOUT:1008,NOT_CONNECTED:1010,INVALID_PARAMETER:1011,P2P_CONNECTION_FAILED:1013,API_RESPONSE_FAILURE:1014,TERMS_OF_SERVICE_FAILURE:1026,CONNECTION_LIMIT_EXCEEDED:1027,UNABLE_TO_PUBLISH:1500,UNABLE_TO_SUBSCRIBE:1501,UNSUPPORTED_VIDEO_CODEC:1502,UNABLE_TO_FORCE_DISCONNECT:1520,UNABLE_TO_FORCE_UNPUBLISH:1530,PUBLISHER_ICE_WORKFLOW_FAILED:1553,SUBSCRIBER_ICE_WORKFLOW_FAILED:1554,STREAM_LIMIT_EXCEEDED:1605,UNEXPECTED_SERVER_RESPONSE:2001,REPORT_ISSUE_ERROR:2011,ANVIL_BADLY_FORMED_RESPONSE:3001,ANVIL_INVALID_HTTP_STATUS:3002,ANVIL_XDOMAIN_OR_PARSING_ERROR:3003,ANVIL_UNKNOWN_HTTP_ERROR:3004,ANVIL_UNEXPECTED_ERROR_CODE:3005,ANVIL_EMPTY_RESPONSE_BODY:3006,ANVIL_CONNECT_FAILED:3007}},{}],311:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.OTHelpers||e("../common-js-helpers/OTHelpers.js");return function(e,t,i){var r=t.slice(),o=n.clone(i),a=function(e){return-1!==r.indexOf(e)},s=function(e,t){return o[e]&&-1!==o[e].indexOf(t)};return function(t){function n(e,n){t({message:e,newState:n,currentState:r,previousState:o})}function i(e){return a(e)?s(r,e)?!0:(n("'"+r+"' cannot transition to '"+e+"'",e),!1):(n("'"+e+"' is not a valid state",e),!1)}var r=e,o=null;this.current=r,this.set=function(e){i(e)&&(o=r,this.current=e,r=e)}}}}},{"../common-js-helpers/OTHelpers.js":218}],312:[function(e,t){"use strict";var n=e("../helpers/device_helpers.js")(),i=n.getMediaDevices;t.exports=function(e){i().then(function(t){return e(void 0,t)},e)}},{"../helpers/device_helpers.js":252}],313:[function(e,t){"use strict";t.exports=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.Errors||e("./Errors.js"),r=n.ExceptionCodes||e("./exception_codes.js"),o=n.otError||e("../helpers/otError.js")(),a={ICEWorkflow:i.ICE_WORKFLOW_FAILED,NewPeerConnection:i.CREATE_PEER_CONNECTION_FAILED,SetRemoteDescription:i.SET_REMOTE_DESCRIPTION_FAILED,Subscribe:(t={404:i.STREAM_NOT_FOUND},t[r.STREAM_LIMIT_EXCEEDED]=i.STREAM_LIMIT_EXCEEDED,t)};return function(e,t,n,s,c){var l=(n?n+": ":"")+c+" PeerConnection with connection "+s+" failed: "+t,u=a[n]||{},d="string"==typeof u?u:u[e],p="Publisher"===c?r.UNABLE_TO_PUBLISH:r.UNABLE_TO_SUBSCRIBE;if(!d){var f=new Error(l);return f.code=p,f}var h=function(){return"ICEWorkflow"===n?"Publisher"===c?r.PUBLISHER_ICE_WORKFLOW_FAILED:r.SUBSCRIBER_ICE_WORKFLOW_FAILED:d===i.STREAM_LIMIT_EXCEEDED?r.STREAM_LIMIT_EXCEEDED:p}();return o(d,new Error(l),h)}}},{"../helpers/otError.js":273,"./Errors.js":289,"./exception_codes.js":310}],314:[function(e,t){(function(e){"use strict";t.exports=function(){return function(t,n){var i=null;this.start=function(){null==i&&(i=e.setInterval(t,1e3/n))},this.stop=function(){null!=i&&(e.clearInterval(i),i=null)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],315:[function(e,t){"use strict";var n=e("bluebird"),i=e("../common-js-helpers/OTHelpers.js"),r=e("../helpers/otProperties.js"),o={};t.exports=o,i.useLogHelpers(o);var a=!1,s=o.setLogLevel;o.setLogLevel=function(e){i.setLogLevel(e);var t=s.call(o,e);return a||(o.debug("OpenTok JavaScript library "+r.version),o.debug("Release notes: "+r.websiteURL+"/opentok/webrtc/docs/js/release-notes.html"),o.debug("Known issues: "+r.websiteURL+"/opentok/webrtc/docs/js/release-notes.html#knownIssues"),a=!0),n.config({warnings:t>=o.DEBUG}),o.debug("OT.setLogLevel("+t+")"),t};var c="true"===r.debug||r.debug===!0;o.setLogLevel(c?o.DEBUG:o.WARN)},{"../common-js-helpers/OTHelpers.js":218,"../helpers/otProperties.js":274,bluebird:2}],316:[function(e,t){"use strict";var n=function(e){var t=[];this.enqueue=function(){t.push(Array.prototype.slice.call(arguments))},this.triggerAll=function(){for(var n=void 0;n=t.shift();)e.trigger.apply(e,n)}};t.exports=n},{}],317:[function(e,t){"use strict";t.exports=function(e){if(0===e.length)return{};var t=JSON.parse(e),n=t.uri.substr(1).split("/");n.shift(),""===n[n.length-1]&&n.pop(),t.params={};for(var i=0,r=n.length;r-1>i;i+=2)t.params[n[i]]=n[i+1];return t.resource=n.length%2===0?"channel"===n[n.length-2]&&n.length>6?n[n.length-4]+"_"+n[n.length-2]:n[n.length-2]:"channel"===n[n.length-1]&&n.length>5?n[n.length-3]+"_"+n[n.length-1]:n[n.length-1],t.signature=t.resource+"#"+t.method,t}},{}],318:[function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../../ot_error_class.js"),r=e("../../../common-js-helpers/OTHelpers.js"),o=e("../../logging.js"),a=e("../rumor/rumor_message_types.js"),s=e("./unbox_from_rumor_message.js"),c=function(){r.eventing(this,!0),this.callbacks={}};t.exports=c,c.prototype.registerCallback=function(e,t){this.callbacks[e]=t},c.prototype.triggerCallback=function(e){if(e){var t=this.callbacks[e];if(t&&r.isFunction(t)){var n=Array.prototype.slice.call(arguments);n.shift(),t.apply(void 0,n)}delete this.callbacks[e]}},c.prototype.onClose=function(e){this.emit("close",e)},c.prototype.onReconnected=function(){this.emit("reconnected")},c.prototype.onReconnecting=function(){this.emit("reconnecting")},c.prototype.dispatch=function(e){if(e.type===a.STATUS){o.debug("OT.Raptor.dispatch: STATUS"),o.debug(e);var t=void 0;if(e.isError){var r=void 0;if("string"==typeof e.data)try{var c=JSON.parse(e.data);c&&"object"===("undefined"==typeof c?"undefined":n(c))&&(r=c.reason)}catch(l){o.warn("OT.Raptor.dispatch Failed to parse rumorMessage.data",l)}t=new i(e.status,r)}return void this.triggerCallback(e.transactionId,t,e)}var u=s(e);switch(o.debug("OT.Raptor.dispatch "+u.signature+":",u),u.resource){case"session":this.dispatchSession(u);break;case"connection":this.dispatchConnection(u);break;case"stream":this.dispatchStream(u);break;case"stream_channel":this.dispatchStreamChannel(u);break;case"subscriber":this.dispatchSubscriber(u);break;case"subscriber_channel":this.dispatchSubscriberChannel(u);break;case"signal":this.dispatchSignal(u);break;case"archive":this.dispatchArchive(u);break;default:o.debug("OT.Raptor.dispatch: Type "+u.resource+" is not currently implemented")}},c.prototype.dispatchSession=function(e){switch(e.method){case"read":this.emit("session#read",e.content,e.transactionId);break;default:o.debug("OT.Raptor.dispatch: "+e.signature+" is not currently implemented")}},c.prototype.dispatchConnection=function(e){switch(e.method){case"created":this.emit("connection#created",e.content);break;case"deleted":this.emit("connection#deleted",e.params.connection,e.reason);break;default:o.debug("OT.Raptor.dispatch: "+e.signature+" is not currently implemented")}},c.prototype.dispatchStream=function(e){switch(e.method){case"created":this.emit("stream#created",e.content,e.transactionId);break;case"deleted":this.emit("stream#deleted",e.params.stream,e.reason);break;case"updated":this.emit("stream#updated",e.params.stream,e.content);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(e.method,e);break;default:o.debug("OT.Raptor.dispatch: "+e.signature+" is not currently implemented")}},c.prototype.dispatchStreamChannel=function(e){switch(e.method){case"updated":this.emit("streamChannel#updated",e.params.stream,e.params.channel,e.content);break;default:o.debug("OT.Raptor.dispatch: "+e.signature+" is not currently implemented")}},c.prototype.dispatchJsep=function(e,t){this.emit("jsep#"+e,t.params.stream,t.fromAddress,t)},c.prototype.dispatchSubscriberChannel=function(e){switch(e.method){case"updated":this.emit("subscriberChannel#updated",e.params.stream,e.params.channel,e.content);break;case"update":this.emit("subscriberChannel#update",e.params.subscriber,e.params.stream,e.content);break;default:o.debug("OT.Raptor.dispatch: "+e.signature+" is not currently implemented")}},c.prototype.dispatchSubscriber=function(e){switch(e.method){case"created":this.emit("subscriber#created",e.params.stream,e.fromAddress,e.content.id);break;case"deleted":this.dispatchJsep("unsubscribe",e),this.emit("subscriber#deleted",e.params.stream,e.fromAddress);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(e.method,e);break;default:o.debug("OT.Raptor.dispatch: "+e.signature+" is not currently implemented")}},c.prototype.dispatchSignal=function(e){return"signal"!==e.method?void o.debug("OT.Raptor.dispatch: "+e.signature+" is not currently implemented"):void this.emit("signal",e.fromAddress,e.content)},c.prototype.dispatchArchive=function(e){switch(e.method){case"created":this.emit("archive#created",e.content);break;case"updated":this.emit("archive#updated",e.params.archive,e.content)}}},{"../../../common-js-helpers/OTHelpers.js":218,"../../logging.js":315,"../../ot_error_class.js":337,"../rumor/rumor_message_types.js":333,"./unbox_from_rumor_message.js":328}],319:[function(e,t){"use strict";var n=e("./raptor_constants.js"),i={};i.Actions=n.Actions,i.Types=n.Types,i.Dispatcher=e("./dispatcher.js"),i.serializeMessage=e("./serialize_message.js"),i.deserializeMessage=e("./deserialize_message.js"),i.unboxFromRumorMessage=e("./unbox_from_rumor_message.js"),i.parseIceServers=e("./parse_ice_servers.js").parseIceServers,i.Message=e("./message.js"),i.Socket=e("./raptor_socket.js")(),t.exports=i},{"./deserialize_message.js":317,"./dispatcher.js":318,"./message.js":320,"./parse_ice_servers.js":321,"./raptor_constants.js":322,"./raptor_socket.js":323,"./serialize_message.js":324,"./unbox_from_rumor_message.js":328}],320:[function(e,t){"use strict";var n=e("uuid"),i=e("../../../common-js-helpers/OTHelpers.js"),r=e("../../../helpers/hasBundleCapability.js"),o=e("../../../helpers/hasRTCPMuxCapability.js"),a=e("./serialize_message.js"),s=e("../../../helpers/supported_crypto_scheme.js"),c=e("../../../helpers/otProperties.js"),l={};t.exports=l,l.offer=function(e,t){return a({method:"offer",uri:e,content:{sdp:t}})},l.answer=function(e,t){return a({method:"answer",uri:e,content:{sdp:t}})
},l.candidate=function(e,t){return a({method:"candidate",uri:e,content:t})},l.connections={},l.connections.create=function(e){var t=e.apiKey,n=e.sessionId,r=e.connectionId,o=e.connectionEventsSuppressed,s=e.capabilities;return a({method:"create",uri:"/v2/partner/"+t+"/session/"+n+"/connection/"+r,content:{userAgent:i.env.userAgent,clientVersion:"js-"+c.version.replace("v",""),capabilities:s||[],connectionEventsSuppressed:o}})},l.connections.destroy=function(e){var t=e.apiKey,n=e.sessionId,i=e.connectionId;return a({method:"delete",uri:"/v2/partner/"+t+"/session/"+n+"/connection/"+i,content:{}})},l.sessions={},l.sessions.get=function(e,t){return a({method:"read",uri:"/v2/partner/"+e+"/session/"+t,content:{}})},l.streams={},l.streams.get=function(e,t,n){return a({method:"read",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n,content:{}})},l.streams.channelFromOTChannel=function(e){var t={id:e.id,type:e.type,active:e.active};return"video"===e.type&&(t.width=e.width,t.height=e.height,t.orientation=e.orientation,t.frameRate=e.frameRate,"default"!==e.source&&(t.source=e.source),t.fitMode=e.fitMode),t},l.streams.create=function(e,t,n,i,r,o,s,c){var u={id:n,name:i,audioFallbackEnabled:r,channel:o.map(function(e){return l.streams.channelFromOTChannel(e)})};return s&&(u.minBitrate=Math.round(s)),c&&(u.maxBitrate=Math.round(c)),a({method:"create",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n,content:u})},l.streams.destroy=function(e,t,n){return a({method:"delete",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n,content:{}})},l.streamChannels={},l.streamChannels.update=function(e,t,n,i,r){return a({method:"update",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/channel/"+i,content:r})},l.subscribers={},l.subscribers.uri=function(e,t,n,i){return"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/subscriber/"+i},l.subscribers.create=function(e,t,n,i,c,l){var u={id:i,connection:c,keyManagementMethod:s(),bundleSupport:r(),rtcpMuxSupport:o()};return l&&(u.channel=l),a({method:"create",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/subscriber/"+i,content:u})},l.subscribers.destroy=function(e,t,n,i){return a({method:"delete",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/subscriber/"+i,content:{}})},l.subscribers.update=function(e,t,n,i,r){return a({method:"update",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/subscriber/"+i,content:r})},l.subscriberChannels={},l.subscriberChannels.update=function(e,t,n,i,r,o){return a({method:"update",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/subscriber/"+i+"/channel/"+r,content:o})},l.signals={},l.signals.create=function(e,t,i,r,o){var s={};return void 0!==r&&(s.type=r),void 0!==o&&(s.data=o),a({method:"signal",uri:"/v2/partner/"+e+"/session/"+t+(void 0!==i?"/connection/"+i:"")+"/signal/"+n(),content:s})}},{"../../../common-js-helpers/OTHelpers.js":218,"../../../helpers/hasBundleCapability.js":261,"../../../helpers/hasRTCPMuxCapability.js":267,"../../../helpers/otProperties.js":274,"../../../helpers/supported_crypto_scheme.js":276,"./serialize_message.js":324,uuid:201}],321:[function(e,t,n){"use strict";n.adaptIceServers=function(e){return e.map(function(e){return{url:e.url,urls:e.urls||[e.url],username:e.username,credential:e.credential}})},n.parseIceServers=function(e){var t=void 0;try{t=JSON.parse(e.data).content.iceServers}catch(i){return[]}return n.adaptIceServers(t)}},{}],322:[function(e,t){"use strict";t.exports={Actions:{CONNECT:100,CREATE:101,UPDATE:102,DELETE:103,STATE:104,FORCE_DISCONNECT:105,FORCE_UNPUBLISH:106,SIGNAL:107,CREATE_ARCHIVE:108,CLOSE_ARCHIVE:109,START_RECORDING_SESSION:110,STOP_RECORDING_SESSION:111,START_RECORDING_STREAM:112,STOP_RECORDING_STREAM:113,LOAD_ARCHIVE:114,START_PLAYBACK:115,STOP_PLAYBACK:116,APPSTATE_PUT:117,APPSTATE_DELETE:118,OFFER:119,ANSWER:120,PRANSWER:121,CANDIDATE:122,SUBSCRIBE:123,UNSUBSCRIBE:124,QUERY:125,SDP_ANSWER:126,PONG:127,REGISTER:128,QUALITY_CHANGED:129},Types:{RPC_REQUEST:100,RPC_RESPONSE:101,STREAM:102,ARCHIVE:103,CONNECTION:104,APPSTATE:105,CONNECTIONCOUNT:106,MODERATION:107,SIGNAL:108,SUBSCRIBER:110,JSEP:109}}},{}],323:[function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("lodash/assign"),r=e("lodash/once"),o=e("uuid");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.analytics||e("../../analytics.js"),s=t.convertRumorError||e("../../../helpers/convertRumorError.js"),c=t.Dispatcher||e("./dispatcher.js"),l=t.ExceptionCodes||e("../../exception_codes.js"),u=t.hasIceRestartsCapability||e("../../../helpers/hasIceRestartsCapability.js"),d=t.hasRenegotiationCapability||e("../../../helpers/hasRenegotiationCapability.js"),p=t.logging||e("../../logging.js"),f=t.Message||e("./message.js"),h=t.OTHelpers||e("../../../common-js-helpers/OTHelpers.js"),g=t.RumorSocket||e("../rumor/rumor_socket.js"),m=t.Signal||e("./signal.js"),v=t.SignalError||e("./signal_error.js"),y=function _(e,t,u,d,g){var y=void 0,b=void 0,w=void 0,A=void 0,C=void 0,E=void 0,T=void 0,S=["disconnected","connecting","connected","error","disconnecting"],x=g||new c,j=h.statable(this,S,"disconnected"),k=function(t){t.action&&t.variation||p.debug("Expected action and variation"),a.logEvent(i({sessionId:b,partnerId:y,p2p:E,messagingServer:T,connectionId:e},t))},R=function(e){j(e?"error":"connected"),C.apply(void 0,arguments)},I=function(e){var t="clientDisconnected";!this.is("disconnecting")&&A.is("error")&&(t="networkDisconnected"),e&&4001===e.code&&(t="networkTimedout"),j("disconnected"),x.onClose(t)}.bind(this),O=function(e){p.error("OT.Raptor.Socket error:",e)},P=function(){x.onReconnecting()},D=function(){k({action:"Reconnect",variation:"Success",retries:A.reconnectRetriesCount(),messageQueueSize:A.messageQueueSize(),socketId:A.socketID()}),x.onReconnected()},L=function(){k({action:"Reconnect",variation:"Attempt",retries:A.reconnectRetriesCount(),messageQueueSize:A.messageQueueSize(),socketId:A.socketID()})},N=function(e){"connectionLimitExceeded"===e.message&&(e.code=l.CONNECTION_LIMIT_EXCEEDED),e.reason="ConnectToSession";var t=s(e);k({action:"Reconnect",variation:"Failure",failureReason:e.reason,failureCode:t.code,failureMessage:t.message,messageQueueSize:A.messageQueueSize(),socketId:A.socketID()})};this.connect=function(t,n,i,r){var a=this;if(!this.is("disconnected","error"))return void p.warn("Cannot connect the Raptor Socket as it is currently connected. You should disconnect first.");j("connecting"),y=n.partnerId,b=n.sessionId,E=n.p2pEnabled,T=n.messagingServer,w=t,C=r;var s="/v2/partner/"+y+"/session/"+b;A=new _.RumorSocket({messagingURL:u,notifyDisconnectAddress:d,connectionId:e,enableReconnection:n.reconnection}),A.onClose(I),A.onError(O),A.onReconnecting(P),A.onReconnectAttempt(L),A.onReconnectFailure(N),A.onReconnected(D),A.onMessage(x.dispatch.bind(x)),A.connect(function(e){if(e)return void R({reason:"WebSocketConnection",code:e.code,message:e.message});p.debug("OT.Raptor.Socket connected. Subscribing to "+s+" on "+u),A.subscribe([s]);var t=[],r=(_.hasIceRestartsCapability()||_.hasRenegotiationCapability())&&n.renegotiation;r&&(t.push("renegotiation"),t.push("regeneration"));var c=f.connections.create({apiKey:y,sessionId:b,connectionId:A.id(),connectionEventsSuppressed:i.connectionEventsSuppressed,capabilities:t});a.publish(c,{"X-TB-TOKEN-AUTH":w},!0,function(e,t){if(e)return"connectionLimitExceeded"===e.message&&(e.code=l.CONNECTION_LIMIT_EXCEEDED),void R({reason:"ConnectToSession",code:e.code,message:e.message,socketId:A.socketID()});var n=function(e,t){e?R({reason:"GetSessionState",code:e.code,message:e.message,socketId:A.socketID()}):R(void 0,t)},i=t&&t.data?JSON.parse(t.data):null;if(i&&i.connection){var r=o();x.registerCallback(r,n),x.emit("session#read",i,r)}else a.publish(f.sessions.get(y,b),{},!0,n)})})},this.disconnect=function(e){this.is("disconnected")||(j("disconnecting"),A.disconnect(e))},this.publish=function(e,t,n,i){i=i||function(){};var a=r(i),s=o();if(p.debug("OT.Raptor.Socket Publish (ID:"+s+") "+e),A.isNot("connected","reconnecting")||A.is("reconnecting")&&!n){var c=new Error("Not connected.");return c.code=500,a(c),void p.error("OT.Raptor.Socket: cannot publish until the socket is connected.")}return x.registerCallback(s,a),A.publish([d],e,h.extend({},t,{"Content-Type":"application/x-raptor+v2","TRANSACTION-ID":s,"X-TB-FROM-ADDRESS":A.id()}),n,function(e){e&&a.apply(void 0,arguments)}),s},this.streamCreate=function(e,t,n,i,r,o,a){var s=f.streams.create(y,b,t,e,n,i,r,o);this.publish(s,{},!0,function(e,n){a(e,t,n)})},this.streamDestroy=function(e){this.publish(f.streams.destroy(y,b,e),{},!0)},this.streamChannelUpdate=function(e,t,n){this.publish(f.streamChannels.update(y,b,e,t,n),{},!0)},this.subscriberCreate=function(e,t,n,i){this.publish(f.subscribers.create(y,b,e,t,A.id(),n),{},!0,i)},this.subscriberDestroy=function(e,t){this.publish(f.subscribers.destroy(y,b,e,t),{},!0)},this.subscriberUpdate=function(e,t,n){this.publish(f.subscribers.update(y,b,e,t,n),{},!0)},this.subscriberChannelUpdate=function(e,t,n,i){this.publish(f.subscriberChannels.update(y,b,e,t,n,i),{},!0)},this.forceDisconnect=function(e,t){this.publish(f.connections.destroy({apiKey:y,sessionId:b,connectionId:e}),{},!0,t)},this.forceUnpublish=function(e,t){this.publish(f.streams.destroy(y,b,e),{},!0,t)},this.jsepCandidate=function(e,t){this.publish(f.candidate(e,t),{},!0)},this.jsepOffer=function(e,t){this.publish(f.offer(e,t),{},!0)},this.jsepAnswer=function(e,t){this.publish(f.answer(e,t),{},!0)},this.signal=function(e,t,i){var r=new m(b,A.id(),e||{});return r.valid?void this.publish(r.toRaptorMessage(),{},r.retryAfterReconnect,function(e){var o=void 0,a=void 0,s=void 0,c=[400,403,404,413,500];if(e)e.code&&c.indexOf(e.code)>-1?(a=e.code,s=e.message):(a=l.UNEXPECTED_SERVER_RESPONSE,s="Unexpected server response. Try this operation again later."),o=new v(a,s);else{var u=r.data?n(r.data):null;i("signal","send",{type:u})}t&&h.isFunction(t)&&t(o,r.toHash())}):void(t&&h.isFunction(t)&&t(new v(r.error.code,r.error.reason),r.toHash()))},this.id=function(){return A&&A.id()}};return y.hasIceRestartsCapability=u,y.hasRenegotiationCapability=d,y.RumorSocket=g,y}},{"../../../common-js-helpers/OTHelpers.js":218,"../../../helpers/convertRumorError.js":248,"../../../helpers/hasIceRestartsCapability.js":264,"../../../helpers/hasRenegotiationCapability.js":269,"../../analytics.js":290,"../../exception_codes.js":310,"../../logging.js":315,"../rumor/rumor_socket.js":334,"./dispatcher.js":318,"./message.js":320,"./signal.js":326,"./signal_error.js":327,"lodash/assign":142,"lodash/once":175,uuid:201}],324:[function(e,t){"use strict";t.exports=function(e){return JSON.stringify(e)}},{}],325:[function(e,t){"use strict";function n(e,t){var n=e.channel.map(function(e){return new h(e)}),i=e.connectionId?e.connectionId:e.connection.id;return new f(e.id,e.name,e.creationTime,t.connections.get(i),t,n)}function i(e,t){if(t.streams.has(e.id))return void 0;var i=n(e,t);return t.streams.add(i),i}function r(e){return new a(e.id,e.name,e.status)}function o(e,t){if(t.archives.has(e.id))return void 0;var n=r(e);return t.archives.add(n),n}var a=e("../../archive.js"),s=e("../../connection.js"),c=e("./delayed_event_queue.js"),l=e("./dispatcher.js"),u=e("../../logging.js"),d=e("../../../common-js-helpers/OTHelpers.js"),p=e("../../session/objects.js"),f=e("../../stream.js"),h=e("../../stream_channel.js"),g=function(e){var t={};this.enqueue=function(){var n=arguments[0],i=Array.prototype.slice.call(arguments,1);t[n]||(t[n]=new c(e)),t[n].enqueue.apply(t[n],i)},this.triggerConnectionCreated=function(e){t["connectionCreated"+e.id]&&t["connectionCreated"+e.id].triggerAll()},this.triggerSessionConnected=function(e){t.sessionConnected&&t.sessionConnected.triggerAll(),e.forEach(function(e){this.triggerConnectionCreated(e)},this)}},m={};t.exports=function(e,t){var n=new l,r=!1,a=new g(n);n.on("reconnecting",function(){e._.reconnecting()}),n.on("reconnected",function(){e._.reconnected()}),n.on("close",function(t){var n=e.connection;if(n)return n.destroyedReason()?void u.debug("OT.Raptor.Socket: Socket was closed but the connection had already been destroyed. Reason: "+n.destroyedReason()):void n.destroy(t)});var c=function(t,n){return e.connections.has(t.id)?e.connections.get(t.id):(t=s.fromHash(t),(n||e.connection&&t.id!==e.connection.id)&&(e.connections.add(t),a.triggerConnectionCreated(t)),Object.keys(m).forEach(function(r){var o=m[r];if(o&&t.id===o.connection.id){i(o,e),delete m[o.id];var a={debug:n?"connection came in session#read":"connection came in connection#created",streamId:o.id,connectionId:t.id};e.logEvent("streamCreated","warning",a)}}),t)};n.on("session#read",function(t,s){var l=void 0,u={};u.streams=[],u.connections=[],u.archives=[],t.connection.forEach(function(e){l=c(e,!0),u.connections.push(l)}),t.stream.forEach(function(t){u.streams.push(i(t,e))}),(t.archive||t.archives).forEach(function(t){u.archives.push(o(t,e))}),n.triggerCallback(s,null,u),r=!0,a.triggerSessionConnected(e.connections)}),n.on("connection#created",function(e){c(e)}),n.on("connection#deleted",function(t,n){t=e.connections.get(t),t.destroy(n)}),n.on("stream#created",function(r,o){t.connectionEventsSuppressed&&c(r.connection);var a=r.connectionId?r.connectionId:r.connection.id;if(e.connections.has(a))r=i(r,e);else{m[r.id]=r;var s={debug:"eventOrderError -- streamCreated event before connectionCreated",streamId:r.id};e.logEvent("streamCreated","warning",s)}r&&(r.publisher&&r.publisher.setStream(r),n.triggerCallback(o,null,r))}),n.on("stream#deleted",function(t,n){var i=e.streams.get(t);return i?void i.destroy(n):void u.error("OT.Raptor.dispatch: A stream does not exist with the id of "+t+", for stream#deleted message!")}),n.on("stream#updated",function(t,n){var i=e.streams.get(t);return i?void i._.update(n):void u.error("OT.Raptor.dispatch: A stream does not exist with the id of "+t+", for stream#updated message!")}),n.on("streamChannel#updated",function(t,n,i){var r=void 0;return t&&(r=e.streams.get(t))?void r._.updateChannel(n,i):void u.error("OT.Raptor.dispatch: Unable to determine streamId, or the stream does not exist, for streamChannel message!")});var f=function(t,n,i,r){var o=void 0,a=void 0,c={streamId:n},l=p.subscribers,f=p.publishers;switch(o=r.params.subscriber?{widgetId:r.params.subscriber}:c,t){case"offer":a=[].concat(l.where(o),f.where(c)).slice(0,1);break;case"answer":case"pranswer":a=[].concat(f.where(c),l.where(o)).slice(0,1);break;case"generateoffer":case"unsubscribe":a=f.where(c);break;case"candidate":a=[].concat(l.where(o),f.where(c));break;default:return void u.debug("OT.Raptor.dispatch: jsep#"+t+" is not currently implemented")}if(0!==a.length){var h=e.connections.get(i);!h&&i.match(/^symphony\./)&&(h=s.fromHash({id:i,creationTime:Math.floor(d.now())}),e.connections.add(h)),a.forEach(function(e){e.processMessage(t,i,r)})}};return n.on("jsep#offer",f.bind(null,"offer")),n.on("jsep#answer",f.bind(null,"answer")),n.on("jsep#pranswer",f.bind(null,"pranswer")),n.on("jsep#generateoffer",f.bind(null,"generateoffer")),n.on("jsep#unsubscribe",f.bind(null,"unsubscribe")),n.on("jsep#candidate",f.bind(null,"candidate")),n.on("subscriberChannel#updated",function(t,n,i){return t&&e.streams.has(t)?void e.streams.get(t)._.updateChannel(n,i):void u.error("OT.Raptor.dispatch: Unable to determine streamId, or the stream does not exist, for subscriberChannel#updated message!")}),n.on("subscriberChannel#update",function(t,n,i){return n&&e.streams.has(n)?p.subscribers.has(t)?void p.subscribers.get(t).disableVideo(i.active):void u.error("OT.Raptor.dispatch: Unable to determine subscriberId, or the subscriber does not exist, for subscriberChannel#update message!"):void u.error("OT.Raptor.dispatch: Unable to determine streamId, or the stream does not exist, for subscriberChannel#update message!")}),n.on("signal",function(n,i){t.connectionEventsSuppressed&&c(i.connection||i.fromConnection);var o=i.type,s=i.data,l=e.connections.get(n);e.connection&&n===e.connection.connectionId?r?e._.dispatchSignal(l,o,s):a.enqueue("sessionConnected","signal",n,o,s):e.connections.get(n)?e._.dispatchSignal(l,o,s):""===n?e._.dispatchSignal(null,o,s):a.enqueue("connectionCreated"+n,"signal",n,o,s)}),n.on("archive#created",function(t){o(t,e)}),n.on("archive#updated",function(t,n){var i=e.archives.get(t);return i?void i._.update(n):void u.error("OT.Raptor.dispatch: An archive does not exist with the id of "+t+", for archive#updated message!")}),n}},{"../../../common-js-helpers/OTHelpers.js":218,"../../archive.js":293,"../../connection.js":306,"../../logging.js":315,"../../session/objects.js":376,"../../stream.js":378,"../../stream_channel.js":379,"./delayed_event_queue.js":316,"./dispatcher.js":318}],326:[function(e,t){"use strict";var n=e("../../api_key.js"),i=e("../../connection.js"),r=e("./message.js"),o=e("../../../common-js-helpers/OTHelpers.js"),a=e("../../session/tag.js"),s=8192,c=128;t.exports=function(e,t,l){var u=function(e){return!/^[a-zA-Z0-9\-\._~]+$/.exec(e)},d=function(e){return e?e instanceof i||e._tag===a?null:{code:400,reason:"The To field was invalid"}:{code:400,reason:"The signal to field was invalid. Either set it to a OT.Connection, OT.Session, or omit it entirely"}},p=function(e){var t=null;return null===e||void 0===e?t={code:400,reason:"The signal type was null or undefined. Either set it to a String value or omit it"}:e.length>c?t={code:413,reason:"The signal type was too long, the maximum length of it is "+c+" characters"}:u(e)&&(t={code:400,reason:"The signal type was invalid, it can only contain letters, numbers, '-', '_', and '~'."}),t},f=function(e){var t=null;if(null===e||void 0===e)t={code:400,reason:"The signal data was null or undefined. Either set it to a String value or omit it"};else try{JSON.stringify(e).length>s&&(t={code:413,reason:"The data field was too long, the maximum size of it is "+s+" characters"})}catch(n){t={code:400,reason:"The data field was not valid JSON"}}return t},h=function(e){var t=null;return e!==!0&&e!==!1&&(t={code:400,reason:"The signal retryAfterReconnect was not true or false. Either set it to a Boolean value or omit it"}),t};this.toRaptorMessage=function(){var t=this.to;return t&&"string"!=typeof t&&(t=t.id),r.signals.create(n.value,e,t,this.type,this.data)},this.toHash=function(){return l},this.error=null,this.retryAfterReconnect=!0,l&&(l.hasOwnProperty("data")&&(this.data=o.clone(l.data),this.error=f(this.data)),l.hasOwnProperty("to")&&(this.to=l.to,this.error||(this.error=d(this.to))),l.hasOwnProperty("type")&&(this.error||(this.error=p(l.type)),this.type=l.type),l.hasOwnProperty("retryAfterReconnect")&&(this.error||(this.error=h(l.retryAfterReconnect)),this.retryAfterReconnect=l.retryAfterReconnect)),this.valid=null===this.error}},{"../../../common-js-helpers/OTHelpers.js":218,"../../api_key.js":292,"../../connection.js":306,"../../session/tag.js":377,"./message.js":320}],327:[function(e,t){"use strict";t.exports=function(e,t){this.code=e,this.message=t,this.reason=t}},{}],328:[function(e,t){"use strict";var n=e("./deserialize_message.js");t.exports=function(e){var t=n(e.data);return t.transactionId=e.transactionId,t.fromAddress=e.headers["X-TB-FROM-ADDRESS"],t}},{"./deserialize_message.js":317}],329:[function(e,t){(function(n){"use strict";var i=e("text-encoding");t.exports={TextEncoder:n.TextEncoder||i.TextEncoder,TextDecoder:n.TextDecoder||i.TextDecoder}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"text-encoding":196}],330:[function(e,t){"use strict";var n={};n.MessageType=e("./rumor_message_types.js"),n.Message=e("./rumor_message.js"),n.NativeSocket=e("./native_socket.js"),n.SocketError=e("./socket_error.js"),n.Socket=e("./rumor_socket.js"),t.exports=n},{"./native_socket.js":331,"./rumor_message.js":332,"./rumor_message_types.js":333,"./rumor_socket.js":334,"./socket_error.js":336}],331:[function(e,t){(function(n){"use strict";var i=e("../../logging.js"),r=e("./rumor_message.js"),o=100,a=10;t.exports=function(e,t,s){var c=void 0,l=void 0,u=void 0,d=void 0;c=new e(t),c.binaryType="arraybuffer",c.onopen=s.onOpen,c.onclose=s.onClose,c.onerror=s.onError,c.onmessage=function(e){if(r){var t=r.deserialize(e.data);s.onMessage(t)}},l=function p(e){c&&(void 0===e&&(e=0),u&&clearTimeout(u),c.bufferedAmount>0&&a>=e+1?u=setTimeout(p,o,e+1):d())},d=function(){c.close()},this.close=function(e,t){if(t){var n=function(){};c.onopen=n,c.onclose=n,c.onerror=n,c.onmessage=n}e?l():d()},this.send=function(e){try{c.send(e.serialize())}catch(t){if(c.readyState!==n.WebSocket.OPEN)throw t;i.debug("webSocket.send threw exception even though it was open:",t)}},this.isClosed=function(){return 3===c.readyState}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../logging.js":315,"./rumor_message.js":332}],332:[function(e,t){(function(n){"use strict";function i(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i<e.length;++i)n[i]=e[i];return t}var r=e("uuid"),o=e("./encoding.js"),a=e("./rumor_message_types.js"),s=function(e,t,n,i){this.type=e,this.toAddress=t,this.headers=n,this.data=i,this.fromAddress=this.headers["X-TB-FROM-ADDRESS"],this.transactionId=this.headers["TRANSACTION-ID"],this.status=this.headers.STATUS,this.isError=this.status&&"2"!==this.status[0]};t.exports=s,s.prototype.serialize=function(){var e=void 0,t=void 0,n=void 0,i=void 0,r=8,a=7,s=[],c=[],l=[];for(a++,n=0;n<this.toAddress.length;n++)s.push(new o.TextEncoder("utf-8").encode(this.toAddress[n])),a+=2,a+=s[n].length;a++,n=0;for(var u in this.headers)this.headers.hasOwnProperty(u)&&(c.push(new o.TextEncoder("utf-8").encode(u)),l.push(new o.TextEncoder("utf-8").encode(this.headers[u])),a+=4,a+=c[n].length,a+=l[n].length,n++);t=new o.TextEncoder("utf-8").encode(this.data),a+=t.length;var d=new ArrayBuffer(a),p=new Uint8Array(d,0,a);for(a-=4,p[0]=(4278190080&a)>>>24,p[1]=(16711680&a)>>>16,p[2]=(65280&a)>>>8,p[3]=(255&a)>>>0,p[4]=0,p[5]=0,p[6]=this.type,p[7]=this.toAddress.length,n=0;n<s.length;n++)for(e=s[n],p[r++]=e.length>>8&255,p[r++]=e.length>>0&255,i=0;i<e.length;i++)p[r++]=e[i];for(p[r++]=c.length,n=0;n<c.length;n++){for(e=c[n],p[r++]=e.length>>8&255,p[r++]=e.length>>0&255,i=0;i<e.length;i++)p[r++]=e[i];for(e=l[n],p[r++]=e.length>>8&255,p[r++]=e.length>>0&255,i=0;i<e.length;i++)p[r++]=e[i]}for(n=0;n<t.length;n++)p[r++]=t[n];return d},s.deserialize=function(e){n.Buffer&&n.Buffer.isBuffer(e)&&(e=i(e));var t=void 0,r=void 0,a=void 0,c=void 0,l=void 0,u=void 0,d=void 0,p=void 0,f=8,h=new Uint8Array(e);t=h[6];var g=[];for(p=0;p<h[7];p++)d=h[f++]<<8,d+=h[f++],r=new Uint8Array(e,f,d),g[p]=new o.TextDecoder("utf-8").decode(r),f+=d;for(a=h[f++],c={},p=0;a>p;p++)d=h[f++]<<8,d+=h[f++],r=new Uint8Array(e,f,d),l=new o.TextDecoder("utf-8").decode(r),f+=d,d=h[f++]<<8,d+=h[f++],r=new Uint8Array(e,f,d),u=new o.TextDecoder("utf-8").decode(r),c[l]=u,f+=d;var m=new Uint8Array(e,f),v=new o.TextDecoder("utf-8").decode(m);return new s(t,g,c,v)},s.Connect=function(e,t){var n={uniqueId:e,"TRANSACTION-ID":r(),notifyDisconnectAddress:t};return new s(a.CONNECT,[],n,"")},s.Disconnect=function(e){return new s(a.DISCONNECT,[],{reconnect:e},"")},s.Subscribe=function(e){return new s(a.SUBSCRIBE,e,{},"")},s.Unsubscribe=function(e){return new s(a.UNSUBSCRIBE,e,{},"")},s.Publish=function(e,t,n){return new s(a.MESSAGE,e,n||{},t||"")},s.Status=function(e,t){return new s(a.STATUS,e,t||{},"")},s.Ping=function(){return new s(a.PING,[],{},"")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./encoding.js":329,"./rumor_message_types.js":333,uuid:201}],333:[function(e,t){"use strict";t.exports={SUBSCRIBE:0,UNSUBSCRIBE:1,MESSAGE:2,CONNECT:3,DISCONNECT:4,PING:7,PONG:8,STATUS:9}},{}],334:[function(e,t){"use strict";var n=e("uuid"),i=e("../../../helpers/is_dom_unloaded.js"),r=e("./rumor_message.js"),o=e("../../../common-js-helpers/OTHelpers.js"),a=e("../../logging.js"),s=e("./native_socket.js"),c=e("./rumor_message_types.js"),l=e("./rumor_message.js"),u=e("./socket_error.js"),d=e("./socket_close_errors.js"),p=e("ws"),f=2e3,h=3*f-100,g=25*f-100,m=function v(e){var t=void 0,m=void 0,y=void 0,_=void 0,b=void 0,w=void 0,A=void 0,C=void 0,E=void 0,T=void 0,S=void 0,x=void 0,j=void 0,k=void 0,R=void 0,I=this,O=0,P=["disconnected","error","connected","connecting","disconnecting","reconnecting"],D=n(),L=[],N=e.messagingURL,M=e.notifyDisconnectAddress,B=e.connectionId,F=e.enableReconnection,U=e.TheWebSocket||p,H=!1;I._connectivityTimeout=F?h:g,I._keepAliveInterval=f;var V=[{rumorMessage:l.Connect(B,M),completion:function(){}}],W=function(){var e=V.filter(function(e){return!e.retryAfterReconnect});V=V.filter(function(e){return e.retryAfterReconnect}),e.forEach(function(e){var t=new Error("Not connected.");t.code=500,e.completion(t)})},z=function(){V.forEach(function(e){var t=new Error("Not connected.");t.code=500,e.completion(t)})},$=function(e){switch(e){case"disconnected":case"error":if(j=void 0,t=null,z(),_){var n=void 0;q()&&(n=new Error(d.messages[d.codes.CLOSE_CONNECTIVITY_LOSS]),n.code=d.codes.CLOSE_CONNECTIVITY_LOSS),_(n)}break;case"reconnecting":if(b&&H&&b(),I.is("disconnected"))return;O=0,j=Date.now()+v.RECONNECT_TIMEOUT;break;case"connected":C&&H?C():H=!0,j=void 0}},G=o.statable(I,P,"disconnected",$),Y=function(e,t){if(null===t||!o.isFunction(t))throw new Error("The RumorSocket "+e+" callback must be a valid function or null")},Q=function(){if(T){var e=Array.prototype.slice.call(arguments),t=T;T=void 0,t.apply(void 0,e)}},J=function(e,t){e=e||d.codes.CLOSE_FALLBACK_CODE;var n=d.messages[e]||"No message available from code.",i=n+(t?" "+t:"");a.error("RumorSocket: "+i);var r=new u(e,i);clearTimeout(S),I.is("reconnecting")&&A&&A(r);var o=e===d.codes.CLOSE_UNEXPECTED_CONDITION||e===d.codes.CLOSE_UNSUPPORTED;I.isNot("reconnecting","disconnecting","disconnected")&&(F&&!o?(a.debug("Initial connectivity loss detected at "+new Date),G("reconnecting")):a.debug("Connectivity loss detected at "+new Date)),I.is("disconnected","disconnecting")||(!F||Date.now()>=j||o?(o&&a.debug("Connectivity not restored because of a fatal error."),F?Date.now()>=j&&a.debug("Connectivity not restored within "+v.RECONNECT_TIMEOUT+"ms, we have disconnected."):a.debug("Reconnections are disabled, will not attempt to reconnect."),G("error"),T?Q(r,void 0):y&&y(r)):(a.debug("Scheduling reconnection in "+v.RECONNECT_RETRY+"ms. "+("Remaining time: "+(j-Date.now())+"ms.")),x=setTimeout(rt,v.RECONNECT_RETRY),O++,w&&w()))},q=function(){return k?o.now()-k>=I._connectivityTimeout:!1},X=function ot(){I.is("connected")&&(q()?(t.send(r.Disconnect("1")),t.close(!0,!0),nt({code:d.codes.CLOSE_CONNECTIVITY_LOSS})):(t.send(r.Ping()),R=setTimeout(ot,I._keepAliveInterval)))},K=function(e){t.send(r.Status([e.fromAddress],{"TRANSACTION-ID":e.headers["TRANSACTION-ID"],"X-TB-FROM-ADDRESS":B}))},Z=function(){return clearTimeout(S),I.isNot("connecting","reconnecting")?void a.debug("webSocketConnected reached in state other than connecting ("+I.currentState+")"):(a.debug("Sending "+V.length+" pending messages"),V.forEach(function(e){t.send(e.rumorMessage)}),V=V.filter(function(e){return e.rumorMessage.type!==c.CONNECT}),G("connected"),Q(void 0,B),m&&m(B),void(R=setTimeout(function(){k=o.now(),X()},I._keepAliveInterval)))},et=function(){var e=t;J(d.codes.CLOSE_TIMEOUT);try{e.close(!1,!0)}catch(n){a.debug("webSocket.close() raised an exception: "+(n.message||n))}},tt=function(){},nt=function(e){a.debug("OT.Rumor.Socket: webSocketDisconnected (code: "+e.code+")"),clearTimeout(S),clearTimeout(R),i()||(W(),I.isNot("disconnecting")&&1e3!==e.code&&1001!==e.code&&(e.code?J(e.code):J(d.codes.CLOSE_FALLBACK_CODE,e.reason||e.message)),I.isNot("error","reconnecting")&&G("disconnected"))},it=function(e){if(k=o.now(),e.type!==c.PONG){if(a.debug("OT.Rumor.Socket webSocketReceivedMessage:",e),e.transactionId&&(V=V.filter(function(t){return t.rumorMessage.transactionId===e.transactionId&&(a.debug("Marking",e.transactionId," as received"),t.completion(void 0,e)),t.rumorMessage.transactionId!==e.transactionId})),e.transactionId&&e.type!==c.STATUS){if(K(e),L.indexOf(e.transactionId)>=0)return;L.push(e.transactionId)}E&&E(e)}},rt=function(){if(I.is("connecting","connected"))return void a.error("Rumor.Socket cannot connect when it is already connecting or connected.");I.is("reconnecting")?a.debug("Attempting reconnection..."):G("connecting");var e=n(),i={onOpen:Z,onClose:nt,onError:tt,onMessage:it},r=N;F&&(r=[N,N.indexOf("?")>=0?"&":"?","socketId="+D,I.is("reconnecting")?"&reconnect=true":"","&attempt="+e].join(""));try{t=new s(U,r,i),S=setTimeout(et,v.CONNECT_TIMEOUT)}catch(o){a.error(o),J(d.codes.CLOSE_CONNECT_EXCEPTION)}};I.publish=function(e,n,i,o,a){if(a=a||function(){},!I.is("connected")&&!o){var s=new Error("Not connected.");return s.code=500,void a(s)}var c=r.Publish(e,n,i);V.push({rumorMessage:c,retryAfterReconnect:o,completion:a}),I.is("connected")&&t.send(c)},I.subscribe=function(e){t.send(r.Subscribe(e))},I.unsubscribe=function(e){t.send(r.Unsubscribe(e))},I.connect=function(e){I.is("connecting","connected")?"function"==typeof e?e(new u(d.codes.ALREADY_CONNECTED_CONNECTING,"Rumor.Socket cannot connect when it is already connecting or connected.")):a.error("Rumor.Socket cannot connect when it is already connecting or connected."):(T=e,rt())},I.disconnect=function(e){return clearTimeout(S),clearTimeout(R),clearTimeout(x),t?void(t.isClosed()?I.isNot("error")&&G("disconnected"):(I.is("connected")&&t.send(r.Disconnect()),G("disconnecting"),t.close(e))):void(I.isNot("error")&&G("disconnected"))},I.status=function(e,n){t.send(r.Status(e,{"TRANSACTION-ID":n,"X-TB-FROM-ADDRESS":B}))},I.reconnectRetriesCount=function(){return O},I.messageQueueSize=function(){return V.length},o.defineProperties(I,{id:{get:function(){return B}},socketID:{get:function(){return D}},onOpen:{set:function(e){Y("onOpen",e),m=e},get:function(){return m}},onError:{set:function(e){Y("onError",e),y=e},get:function(){return y}},onClose:{set:function(e){Y("onClose",e),_=e},get:function(){return _}},onMessage:{set:function(e){Y("onMessage",e),E=e},get:function(){return E}},onReconnecting:{set:function(e){Y("onReconnecting",e),b=e},get:function(){return b}},onReconnectAttempt:{set:function(e){Y("onReconnectAttempt",e),w=e},get:function(){return w}},onReconnectFailure:{set:function(e){Y("onReconnectFailure",e),A=e},get:function(){return A}},onReconnected:{set:function(e){Y("reconnected",e),C=e},get:function(){return C}}})};m.CONNECT_TIMEOUT=15e3,m.RECONNECT_TIMEOUT=6e4,m.RECONNECT_RETRY=500,t.exports=m},{"../../../common-js-helpers/OTHelpers.js":218,"../../../helpers/is_dom_unloaded.js":270,"../../logging.js":315,"./native_socket.js":331,"./rumor_message.js":332,"./rumor_message_types.js":333,"./socket_close_errors.js":335,"./socket_error.js":336,uuid:201,ws:216}],335:[function(e,t){"use strict";t.exports={messages:{1002:"The endpoint is terminating the connection due to a protocol error. (CLOSE_PROTOCOL_ERROR)",1003:"The connection is being terminated because the endpoint has indicated that reconnections are not available. (CLOSE_UNSUPPORTED)",1005:"Indicates that no status code was provided even though one was expected. (CLOSE_NO_STATUS)",1006:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected. (CLOSE_ABNORMAL)",1007:"Indicates that an endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [RFC3629] data within a text message)",1008:"Indicates that an endpoint is terminating the connection because it has received a message that violates its policy.  This is a generic status code that can be returned when there is no other more suitable status code (e.g., 1003 or 1009) or if there is a need to hide specific details about the policy",1009:"Indicates that an endpoint is terminating the connection because it has received a message that is too big for it to process (CLOSE_TOO_LARGE)",1011:"Indicates that a server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request",4001:"Connectivity loss was detected as it was too long since the socket received the last PONG message",4010:"Timed out while waiting for the Rumor socket to connect.",4020:"Error code unavailable.",4030:"Exception was thrown during Rumor connection, possibly because of a blocked port."},codes:{CLOSE_PROTOCOL_ERROR:1002,CLOSE_UNSUPPORTED:1003,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006,CLOSE_INCONSISTENT_DATA:1007,CLOSE_POLICY_VIOLATION:1008,CLOSE_TOO_LARGE:1009,CLOSE_UNEXPECTED_CONDITION:1011,CLOSE_CONNECTIVITY_LOSS:4001,CLOSE_TIMEOUT:4010,CLOSE_FALLBACK_CODE:4020,CLOSE_CONNECT_EXCEPTION:4030,ALREADY_CONNECTED_CONNECTING:null}}
},{}],336:[function(e,t){"use strict";t.exports=function(e,t){this.code=e,this.message=t}},{}],337:[function(e,t){"use strict";function n(e,t,n,l){var u=c.getTitleByCode(n),d=l?a.clone(l):{};o.error("OT.exception :: title: "+u+" ("+n+") msg: "+t),d.partnerId||(d.partnerId=r.value);try{i.logError(n,"tb.exception",u,{details:t},d);var p=new s.ExceptionEvent(s.Event.names.EXCEPTION,t,u,n,e,e);try{throw new Error}catch(f){p.stack=f.stack}c.dispatchEvent(p)}catch(h){o.error("OT.exception :: Failed to dispatch exception - "+h.toString())}}var i=e("./analytics.js"),r=e("./api_key.js"),o=e("./logging.js"),a=e("../common-js-helpers/OTHelpers.js"),s=e("./events.js")(),c=function(e,t){Error.call(this),this.code=e,this.message=t};c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,t.exports=c,a.eventing(c);var l={1004:"Authentication error",1005:"Invalid Session ID",1006:"Connect Failed",1007:"Connect Rejected",1008:"Connect Time-out",1009:"Security Error",1010:"Not Connected",1011:"Invalid Parameter",1012:"Peer-to-peer Stream Play Failed",1013:"Connection Failed",1014:"API Response Failure",1015:"PeerConnection not connected, cannot call this method",1021:"Request Timeout",1026:"Terms of Service Violation: Export Compliance",1027:"Connection Limit Exceeded",1500:"Unable to Publish",1501:"Unable to Subscribe",1502:"Unsupported Video Codec",1503:"No TURN server found",1520:"Unable to Force Disconnect",1530:"Unable to Force Unpublish",1553:"ICEWorkflow failed",1600:"createOffer, createAnswer, setLocalDescription, setRemoteDescription",1605:"Stream Limit Exceeded",2e3:"Internal Error",2001:"Unexpected Server Response",4e3:"WebSocket Connection Failed",4001:"WebSocket Network Disconnected"};c.getTitleByCode=function(e){return l[+e]},c.handleJsException=function(e,t,i){i=i||{};var r=i.session,o=void 0;r?(o={sessionId:r.sessionId,p2p:r&&r.sessionInfo?r.sessionInfo.p2pEnabled:null,messagingServer:r&&r.sessionInfo?r.messagingServer:null},r.isConnected()&&r.connection&&(o.connectionId=r.connection.connectionId),i.target||(i.target=r)):i.sessionId&&(o={sessionId:i.sessionId},i.target||(i.target=null)),n(i.target,e,t,o)}},{"../common-js-helpers/OTHelpers.js":218,"./analytics.js":290,"./api_key.js":292,"./events.js":309,"./logging.js":315}],338:[function(e,t){"use strict";var n=e("../logging.js");t.exports=function(e,t,i,r,o){var a=e[t][i],s=t+" "+i,c="local offer"===s||"remote answer"===s?"publisher":"subscriber",l="sdpTransforms ("+c+"): "+t+" "+i,u="local"===t?"created":"received";n.debug(l+": "+u+":\n"+o);var d=a(r,o);return n.debug(d===o?l+": not modified":l+": modified to:\n"+d),d}},{"../logging.js":315}],339:[function(e,t){"use strict";var n=e("../../common-js-helpers/OTHelpers.js"),i=e("../logging.js"),r=function(e){this.data=e.data,this.source=e.source,this.lastEventId=e.lastEventId,this.origin=e.origin,this.timeStamp=e.timeStamp,this.type=e.type,this.ports=e.ports,this.path=e.path};t.exports=function(e){var t={},o=[],a={sentMessages:0,recvMessages:0},s=function(e){return o.push(e),t},c=function(n){return e.send(n),a.sentMessages++,t},l=function(){for(var e=void 0;e=o.shift();)t.send(e)},u=function(){t.send=c,l()},d=function(e){t.send=s,t.trigger("close",e)},p=function(e){i.error("Data Channel Error:",e)},f=function(e){var n=new r(e);a.recvMessages++,t.trigger("message",n)};return n.eventing(t,!0),t.label=e.label,t.id=e.id,t.reliable=e.reliable,t.negotiated=e.negotiated,t.ordered=e.ordered,t.protocol=e.protocol,t._channel=e,t.close=function(){e.close()},t.equals=function(e,n){if(t.label!==e)return!1;for(var i in n)if(n.hasOwnProperty(i)&&t[i]!==n[i])return!1;return!0},t.getQosData=function(){return a},t.send=s,e.addEventListener("open",u,!1),e.addEventListener("close",d,!1),e.addEventListener("error",p,!1),e.addEventListener("message",f,!1),t}},{"../../common-js-helpers/OTHelpers.js":218,"../logging.js":315}],340:[function(e,t){"use strict";var n=e("../../otplugin/otplugin.js"),i=e("../../common-js-helpers/OTHelpers.js"),r=e("lodash/toArray");t.exports=function(){function e(e,t){e.getStats(function(e){var n=[];e.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),t(null,n)})}function t(e,t){e.getStats(null).then(function(e){var n=[];"function"==typeof e.values?n=r(e.values()):"function"!=typeof e.forEach?n=Object.keys(n).map(function(e){return n[e]}):e.forEach(function(e){n.push(e)}),t(null,n)})["catch"](t)}return-1!==["Firefox","Edge","Safari"].indexOf(i.browserVersion().name)||n.isInstalled()?t:e}},{"../../common-js-helpers/OTHelpers.js":218,"../../otplugin/otplugin.js":396,"lodash/toArray":179}],341:[function(e,t){"use strict";var n=e("../../common-js-helpers/OTHelpers.js"),i={};t.exports=i,i.isVideoStat=function(e){return e.hasOwnProperty("googFrameWidthReceived")||e.hasOwnProperty("googFrameWidthInput")||"video"===e.mediaType||void 0!==e.id&&-1!==e.id.toLowerCase().indexOf("video")},i.isVideoSenderStat=function(e){return e.hasOwnProperty("googFrameWidthSent")||"video"===e.mediaType||void 0!==e.id&&-1!==e.id.toLowerCase().indexOf("video")},i.isAudioStat=function(e){return e.hasOwnProperty("audioInputLevel")||e.hasOwnProperty("audioOutputLevel")||"audio"===e.mediaType||void 0!==e.id&&-1!==e.id.toLowerCase().indexOf("audio")},i.isInboundStat=function(e){return e.hasOwnProperty("bytesReceived")||e.hasOwnProperty("packetsReceived")},i.isOutboundStat=function(e){return e.hasOwnProperty("bytesSent")||e.hasOwnProperty("packetsSent")},i.parseStatCategory=function(e){var t={packetsLost:0,packetsReceived:0,bytesReceived:0};return e.hasOwnProperty("packetsReceived")&&(t.packetsReceived=parseInt(e.packetsReceived,10)),e.hasOwnProperty("packetsLost")&&(t.packetsLost=parseInt(e.packetsLost,10)),e.hasOwnProperty("bytesReceived")&&(t.bytesReceived=parseInt(e.bytesReceived,10)),i.isVideoStat(e)&&(e.hasOwnProperty("framerateMean")?t.frameRate=Number(e.framerateMean):e.hasOwnProperty("googFrameRateOutput")?t.frameRate=Number(e.googFrameRateOutput):e.hasOwnProperty("googFrameRateInput")&&(t.frameRate=Number(e.googFrameRateInput))),t},i.normalizeTimestamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return n.isObject(e)&&"getTime"in e?e.getTime():Math.abs(e/(1e3*t)-1)<.05?e/1e3:e}},{"../../common-js-helpers/OTHelpers.js":218}],342:[function(e,t){"use strict";var n=e("bluebird"),i=e("./promisify.js"),r=function(e){this.pending=[],this._processBinding=this.maybeProcessPending.bind(this),e&&this.setPeerConnection(e)};r.prototype.setPeerConnection=function(e){if(this.pc)throw new Error("Peer connection already set");this.pc=e,this._forwardIceCandidate=i(this.pc,"addIceCandidate"),this.pc.addEventListener("signalingstatechange",this._processBinding),this.maybeProcessPending()},r.prototype.canAddCandidates=function(){return!!(this.pc&&"closed"!==this.pc.iceConnectionState&&this.pc.localDescription&&this.pc.localDescription.type&&this.pc.remoteDescription&&this.pc.remoteDescription.type)},r.prototype.addIceCandidate=function(e){if(this.canAddCandidates())return this._forwardIceCandidate(e);var t=this.pending;return new n.Promise(function(n,i){t.push({iceCandidate:e,resolve:n,reject:i})})},r.prototype.maybeProcessPending=function(){this.canAddCandidates()&&this.process()},r.prototype.process=function(){for(;this.pending.length;){var e=this.pending.shift();this._forwardIceCandidate(e.iceCandidate).then(e.resolve)["catch"](e.reject)}},r.prototype.destroy=function(){this.pc&&this.pc.removeEventListener("signalingstatechange",this._processBinding),this._processBinding=null,this.pc=null},t.exports=r},{"./promisify.js":346,bluebird:2}],343:[function(e,t){"use strict";var n=e("./applySdpTransform.js"),i=e("../../common-js-helpers/env.js"),r=e("../logging.js"),o=e("./sdp_helpers.js"),a=e("./testSupportVideo.js");t.exports=function(e,t,s,c,l,u,d,p,f){var h=function(e,t){return function(n){r.error(e),r.error(n),p&&p(e,n,t)}},g=function(t){var i=o.hasSendStereo(l.sdp),r=o.getAudioBitrate(l.sdp),a=new s({type:t.type,sdp:n(c,"local","answer",{enableStereo:i,audioBitrate:r},t.sdp)});return e.setLocalDescription(a).then(function(){return d(a)})["catch"](h("Error while setting LocalDescription","SetLocalDescription"))},m=function(){return e.createAnswer().then(g)["catch"](h("Error while setting createAnswer","CreateAnswer"))},v=new s({type:l.type,sdp:n(c,"remote","offer",{},l.sdp)}),y=h("Error while setting RemoteDescription","SetRemoteDescription"),_=a(v,u,i,t).then(function(){return v})["catch"](function(e){if(f(),!o.hasMediaType(v.sdp,"audio"))throw new Error("Unsupported video without audio for fallback");r.debug("Couldn't set remote description",v,e,", trying without video");var t=new s({type:l.type,sdp:o.disableMediaType(v.sdp,"video")});return r.debug("offer without video",t.sdp),t});return _.then(function(t){return e.setRemoteDescription(t)}).then(m)["catch"](y)}},{"../../common-js-helpers/env.js":234,"../logging.js":315,"./applySdpTransform.js":338,"./sdp_helpers.js":350,"./testSupportVideo.js":355}],344:[function(e,t){(function(n){"use strict";var i=e("bluebird"),r=e("lodash/merge"),o=e("lodash/omit"),a=e("../../common-js-helpers/OTHelpers.js"),s=e("../environment_loader.js"),c=e("../../common-js-helpers/behaviours/eventing.js"),l=e("../../common-js-helpers/error.js"),u=e("../messaging/raptor/raptor_constants.js");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=t.applySdpTransform||e("./applySdpTransform.js"),p=t.createPeerConnection||e("../../helpers/create_peer_connection.js"),f=t.env||e("../../common-js-helpers/env.js"),h=t.sdpTransformDefaults||e("./sdpTransformDefaults.js"),g=t.getStatsAdapter||e("./get_stats_adapter.js"),m=t.IceCandidateProcessor||e("./ice_candidate_processor"),v=t.logging||e("../logging.js"),y=t.offerProcessor||e("./offer_processor.js"),_=t.PeerConnectionChannels||e("./peer_connection_channels.js"),b=t.subscribeProcessor||e("./subscribe_processor.js"),w=t.Qos||e("./qos.js"),A=t.webkitAudioWorkaround||e("../../helpers/webkitAudioWorkaround.js"),C=t.global||n,E=t.debounce||e("lodash/debounce"),T=t.NativeRTCIceCandidate||function(){var t=e("../../otplugin/otplugin.js");return t.isInstalled()&&t.RTCIceCandidate||C.RTCIceCandidate}(),S=t.NativeRTCSessionDescription||function(){var t=e("../../otplugin/otplugin.js");return t.isInstalled()&&t.RTCSessionDescription||C.RTCSessionDescription}(),x=function(e){var t={};return function(n){n.candidate?(t[n.candidate.sdpMid]=n.candidate.sdpMLineIndex,e(u.Actions.CANDIDATE,{candidate:n.candidate.candidate,sdpMid:n.candidate.sdpMid||"",sdpMLineIndex:n.candidate.sdpMLineIndex||0})):v.debug("IceCandidateForwarder: No more ICE candidates.")}};return function(){function e(e,t){if(!j){var n=[u.Actions.CANDIDATE,u.Actions.OFFER,u.Actions.ANSWER,u.Actions.PRANSWER].indexOf(e)>-1;if(n){var i=e===u.Actions.CANDIDATE?t.candidate:t.sdp;j=-1!==i.indexOf("typ relay")}}N(e,t)}function t(e){this.track=e}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},j=!1,k=n.clientCandidates,R=n.isPublisher,I=n.logAnalyticsEvent,O=void 0===I?function(){}:I,P=n.offerOverrides,D=n.answerOverrides,L=n.sdpTransformOptions,N=n.sendMessage,M=n.p2p,B=!1,F=!1,U=a.now();O("createPeerConnection","Attempt");var H={},V=r({},h,L),W=function(e){return"relayed"===k&&null!=e&&-1===e.candidate.indexOf("typ relay")},z=o(n,["isPublisher","logAnalyticsEvent","offerOverrides","answerOverrides","sendMessage","sdpTransformOptions"]),$=void 0,G=void 0,Y=void 0,Q=void 0,J=[],q=function(){var e=z.overrideSimulcastEnabled||!1;return{get:function(){return e},set:function(t){var n=Boolean(t)&&z.capableSimulcastStreams>1;n!==e&&void 0===z.overrideSimulcastEnabled&&(e=n,H.generateOffer())}}}(),X=function(){var e=!1;return{get:function(){return e},set:function(t){var n=Boolean(t);n!==e&&(e=n,e&&H.generateOffer())}}}(),K=g(),Z={};Z.promise=new i.Promise(function(e,t){Z.resolve=e,Z.reject=t});var et=new m,tt="new";Object.defineProperty(H,"signalingState",{get:function(){return $.signalingState},set:function(e){return $.signalingState=e,e}}),c(H),H.once("iceConnected",function(){var e={pcc:parseInt(a.now()-U,10),hasRelayCandidates:j};O("createPeerConnection","Success",e)}),"IE"!==f.name&&Z.resolve(),z.iceServers||(z.iceServers=[]);var nt=function(e,t){if(v.debug("PeerConnection.internalCreatePeerConnection: called"),$)return v.debug("PeerConnection.internalCreatePeerConnection: resolving synchronously"),void e.call(null,null,$);if(J.push(e),!(J.length>1)){var n={optional:[{DtlsSrtpKeyAgreement:!0}]};v.debug('Creating peer connection config "'+JSON.stringify(z)+'".'),z.iceServers&&0!==z.iceServers.length||(v.error("No ice servers present"),O("Error","noIceServers")),"relayed"===k&&(z.iceServers=z.iceServers.filter(function(e){return e.url.indexOf("turn:")>-1}),z.iceServers.forEach(function(e){e.urls&&(e.urls=e.urls.filter(function(e){return e.indexOf("turn:")>-1}))}),z.iceTransportPolicy="relay"),O("peerConnection:iceServers","Event",{iceServers:z.iceServers}),p({window:C,config:z,constraints:n,webRTCStream:t,completion:it})}},it=function(t,n){if(t)return gt("Failed to create PeerConnection, exception: "+t,"NewPeerConnection"),void(J=[]);v.debug("OT attachEventsToPeerConnection"),$=n,et&&et.setPeerConnection(n),G=new _($),z.channels&&G.addMany(z.channels);var i=x(e);$.addEventListener("icecandidate",function(e){return Z.resolve(),W(e.candidate)?void v.debug("Ignore candidate",e.candidate.candidate):void i(e)},!1),$.onaddstream=function(){},$.addEventListener("addstream",lt,!1),$.addEventListener("removestream",ut,!1),$.addEventListener("signalingstatechange",at,!1),$.addEventListener("negotiationneeded",function(){O("peerConnection:negotiationNeeded","Event"),R&&H.generateOffer()}),$.addEventListener("iceconnectionstatechange",function(){$?(v.debug("iceconnectionstatechange",$.iceConnectionState),"connected"===$.iceConnectionState&&H.emit("iceConnected")):v.debug("iceconnectionstatechange on peerConnection that no longer exists",H)});var r=$.iceConnectionState;$.addEventListener("iceconnectionstatechange",function(e){var t=e.target.iceConnectionState;H.trigger("iceConnectionStateChange",t),"disconnected"!==r&&"failed"===t?gt("The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.","ICEWorkflow"):O("attachEventsToPeerConnection","iceconnectionstatechange",t),r=t},!1),rt(null)},rt=function(){for(;J.length;)J.shift().call(null)},ot=function(){et&&(et.destroy(),et=null),vt.stopCollecting(),null!==$&&($.destroy&&$.destroy(),$=null,H.trigger("close"))},at=function(e){var t=e.target.signalingState;if(H.emit("signalingStateChange",t),"stable"===t&&H.emit("signalingStateStable"),t&&t!==tt)switch(tt=t,v.debug("PeerConnection.stateChange: "+tt),tt){case"closed":ot()}};s.onUnload(ot);var st=function(e){e.dataChannels=G.sampleQos(),H.trigger("qos",{parsedStats:e,simulcastEnabled:q.get()})},ct=function(){var e=void 0;if($.getRemoteStreams)e=$.getRemoteStreams();else{if(!$.remoteStreams)throw new Error("Invalid Peer Connection object implements no method for retrieving remote streams");e=$.remoteStreams}return Array.prototype.slice.call(e)},lt=function(e){O("createPeerConnection","StreamAdded"),H.trigger("streamAdded",A(e.stream))},ut=function(e){O("peerConnection:streamRemoved","Event"),H.trigger("streamRemoved",e.stream)},dt=function(t,n){e(t,n)},pt=function(e){O("peerConnection:processOffer","Event");var t=new S({type:"offer",sdp:e.content.sdp}),n=function(e){et&&et.process(),dt(u.Actions.ANSWER,e),vt.startCollecting($)},i=function(e,t,n){gt("PeerConnection.offerProcessor "+e+": "+t,n)},r=function(){H.trigger("remoteVideoUnsupported")};nt(function(){y($,C.RTCPeerConnection,S,V,t,M,n,i,r)})},ft=function(e){O("peerConnection:processAnswer","Event");var t=function(e){gt("Error while setting RemoteDescription "+e,"SetRemoteDescription")};return e.content.sdp?(Q=new S({type:"answer",sdp:d(V,"remote","answer",D,e.content.sdp)}),function(){var e=function(){v.debug("PeerConnection.processAnswer: setRemoteDescription Success"),et&&et.process()};$.setRemoteDescription(Q).then(e)["catch"](t),B=!1,F&&(F=!1,H.generateOffer())}(),void vt.startCollecting($)):void t("Weird answer message, no SDP.")},ht=function(){B=!0,O("peerConnection:processSubscribe","Event"),v.debug("PeerConnection.processSubscribe: Sending offer to subscriber.");var e=q.get()?z.capableSimulcastStreams:1;nt(function(){b($,S,V,e,P,{iceRestart:X.get()},function(e){v.debug("PeerConnection.processSubscribe: got offer, waiting for _readyToSendOffer"),Y=e,Z.promise.then(function(){v.debug("PeerConnection.processSubscribe: sending offer"),dt(u.Actions.OFFER,Y)})},function(e,t,n){gt("subscribeProcessor "+e+": "+t,n)}),X.set(!1)})};H.generateOffer=E(function(){B?F=!0:ht()},100);var gt=function(e,t){v.error(e,"in state",$?{connectionState:$.connectionState,iceConnectionState:$.iceConnectionState,iceGatheringState:$.iceGatheringState,signalingState:$.signalingState}:"(none)"),H.trigger("error",e,t)};H.addTrack=function(e,t){return new i.Promise(function(e,t){nt(function(n){return n?t(n):void e()})}).then(function(){if($.addTrack)return $.addTrack(e,t);var n=$.getLocalStreams()[0];if(void 0===n)throw new Error("PeerConnection has no existing streams, cannot addTrack");return n.addTrack(e),void H.generateOffer()}).then(function(){return new i.Promise(function(e){H.once("signalingStateStable",function(){e()})}).timeout(15e3,"Renegotiation timed out")})},H.removeTrack=function(e){return i.resolve().then(function(){return e instanceof t?($.getLocalStreams()[0].removeTrack(e.track),H.generateOffer(),i.resolve()):$.removeTrack(e)}).then(function(){return new i.Promise(function(e){H.once("signalingStateStable",function(){e()})})}).timeout(15e3,"Renegotiation timed out")},H.addLocalStream=function(e){nt(function(){$.addStream(e)},e)},H.getLocalStreams=function(){return $.getLocalStreams()},H.getSenders=function(){return $.getSenders?$.getSenders():$.getLocalStreams()[0].getTracks().map(function(e){return new t(e)})},H.disconnect=function(){et&&(et.destroy(),et=null),$&&$.signalingState&&"closed"!==$.signalingState.toLowerCase()&&($.close(),"Firefox"===f.name&&setTimeout(ot)),H.off()},H.iceRestart=function(){return X.set(!0)},H.processMessage=function(e,t){switch(v.debug("PeerConnection.processMessage: Received "+e+" from "+t.fromAddress,t),v.debug(t),e){case"generateoffer":t.content&&void 0!==t.content.simulcastEnabled&&q.set(t.content.simulcastEnabled),H.generateOffer();break;case"offer":pt(t);break;case"answer":case"pranswer":ft(t);break;case"candidate":var n=new T(t.content);if(W(n))return v.debug("Ignore candidate",n.candidate),H;et&&et.addIceCandidate(n)["catch"](function(e){gt("Error while adding ICE candidate: "+JSON.stringify(n)+": "+e.toString(),"ICEWorkflow")});break;default:v.debug("PeerConnection.processMessage: Received an unexpected message of type "+e+" from "+t.fromAddress+": "+JSON.stringify(t))}return H},H.setIceServers=function(e){e&&(z.iceServers=e)},H.remoteStreams=function(){return $?ct():[]},H.remoteTracks=function(){return $?$.getReceivers?Array.prototype.slice.apply($.getReceivers()).map(function(e){return e.track}):Array.prototype.concat.apply([],ct().map(function(e){return e.getTracks()})):[]},H.remoteDescription=function(){return $.remoteDescription},H.getStats=function(e){return $?void K($,e):void e(new l("Cannot call getStats before there is a connection.","NotConnectedError",{code:1015}))};var mt=function yt(e,t,n,i){var r=void 0,o=G.get(t,n);if(!o){if(e>0)return void setTimeout(yt.bind(null,e-1,t,n,i),200);r=new l("A channel with that label and options could not be found. Label:"+t+". Options: "+JSON.stringify(n))}i(r,o)};H.getDataChannel=function(e,t,n){return $?void mt(100,e,t,n):void n(new l("Cannot create a DataChannel before there is a connection."))},H.iceConnectionStateIsConnected=function(){return["connected","completed"].indexOf($.iceConnectionState)>-1},H._demoOnlyFindAndReplaceTrack=function(e,t){return i.resolve().then(function(){var n=$.getSenders().filter(function(t){return t.track===e})[0];if(!n)throw new Error("Sender not found");return n.replaceTrack(t)})},H.hasRelayCandidates=function(){return j};var vt=new w(st,R);return H}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common-js-helpers/OTHelpers.js":218,"../../common-js-helpers/behaviours/eventing.js":221,"../../common-js-helpers/env.js":234,"../../common-js-helpers/error.js":235,"../../helpers/create_peer_connection.js":250,"../../helpers/webkitAudioWorkaround.js":286,"../../otplugin/otplugin.js":396,"../environment_loader.js":308,"../logging.js":315,"../messaging/raptor/raptor_constants.js":322,"./applySdpTransform.js":338,"./get_stats_adapter.js":340,"./ice_candidate_processor":342,"./offer_processor.js":343,"./peer_connection_channels.js":345,"./qos.js":348,"./sdpTransformDefaults.js":349,"./subscribe_processor.js":352,bluebird:2,"lodash/debounce":149,"lodash/merge":172,"lodash/omit":174}],345:[function(e,t){"use strict";var n=e("./data_channel.js"),i=e("../../common-js-helpers/OTHelpers.js");t.exports=function(e){var t=[],r={},o={sentMessages:0,recvMessages:0},a=function(e){t.filter(function(t){return e!==t})},s=function(e){var i=new n(e);return t.push(i),i.on("close",function(){a(i)}),i};return r.add=function(t,n){return s(e.createDataChannel(t,n))},r.addMany=function(e){for(var t in e)e.hasOwnProperty(t)&&r.add(t,e[t])},r.get=function(e,n){return i.find(t,function(t){return t.equals(e,n)})},r.getOrAdd=function(e,t){var n=r.get(e,t);return n||(n=r.add(e,t)),n},r.getQosData=function(){var e={sentMessages:0,recvMessages:0};return t.forEach(function(t){e.sentMessages+=t.getQosData().sentMessages,e.recvMessages+=t.getQosData().recvMessages}),e},r.sampleQos=function(){var e=r.getQosData(),t={sentMessages:e.sentMessages-o.sentMessages,recvMessages:e.recvMessages-o.recvMessages};return o=e,t},r.destroy=function(){t.forEach(function(e){e.close()}),t=[]},e.addEventListener("datachannel",function(e){s(e.channel)},!1),r}},{"../../common-js-helpers/OTHelpers.js":218,"./data_channel.js":339}],346:[function(e,t){"use strict";var n=e("bluebird");t.exports=function(e,t){var i=e[t];return function(t){return new n.Promise(function(n,r){var o=i.apply(e,[t,n,r]);o&&"function"==typeof o.then&&n(o)})}}},{bluebird:2}],347:[function(e,t){"use strict";var n=e("lodash/assign"),i=e("lodash/pick");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.getStatsHelpers||e("./get_stats_helpers.js"),o=t.OTHelpers||e("../../common-js-helpers/OTHelpers.js"),a=t.PeerConnection||e("./peer_connection.js")(),s=t.RaptorConstants||e("../messaging/raptor/raptor_constants.js"),c=t.setCertificates||e("./set_certificates.js")(),l=t.watchAudioAcquisition||e("./watchAudioAcquisition.js");return function(e){var t=e.clientCandidates,u=e.iceServers,d=e.remoteConnectionId,p=e.socket,f=e.webRTCStream,h=e.channels,g=e.capableSimulcastStreams,m=e.overrideSimulcastEnabled,v=e.subscriberUri,y=e.logAnalyticsEvent,_=e.offerOverrides,b=e.answerOverrides,w=this,A=void 0,C=!1,E=function(){},T=function(){this.destroy(),C&&this.trigger("iceRestartFailure",this),this.trigger("disconnected",this)},S=function(e,t){this.trigger("error",null,e,this,t)},x=function(e){C&&A.iceConnectionStateIsConnected()&&(C=!1,this.trigger("iceRestartSuccess")),"connected"===e&&"Chrome"===o.env.name&&(E(),E=l(A.getStats.bind(A),function(){w.trigger("audioAcquisitionProblem")}))},j=function(e,t){switch(e){case s.Actions.ANSWER:case s.Actions.PRANSWER:p.jsepAnswer(v,t.sdp);break;case s.Actions.OFFER:this.trigger("connected"),p.jsepOffer(v,t.sdp);break;case s.Actions.CANDIDATE:p.jsepCandidate(v,t)}}.bind(this);o.eventing(this),this.getDataChannel=function(e,t,n){A.getDataChannel(e,t,n)},this.destroy=function(){E(),A&&(A.disconnect(),A.off()),A=null},this.processMessage=function(e,t){A.processMessage(e,t)},this.addTrack=function(e,t,n){return A.addTrack(e,t,n)},this.removeTrack=function(e){return A.removeTrack(e)},this.getLocalStreams=function(){return A.getLocalStreams()},this.init=function(e,i){var r=this,o={iceServers:u||e,channels:h,capableSimulcastStreams:g,overrideSimulcastEnabled:m};c(o,function(e,o){if(e)return void i(e);var s=n({clientCandidates:t,logAnalyticsEvent:y,isPublisher:!0,offerOverrides:_,answerOverrides:b},o);A=new a(n({sendMessage:j},s)),A.on({close:T,error:S,qos:function(e){return r.trigger("qos",e)},iceConnectionStateChange:x},w),A.addLocalStream(f),i(void 0,w)}),this.remoteConnectionId=d},this.getSenders=function(){return A.getSenders()},this.iceRestart=function(){return C=!0,A.iceRestart()},this.hasRelayCandidates=function(){return A.hasRelayCandidates()},this.iceConnectionStateIsConnected=function(){return A.iceConnectionStateIsConnected()},this._demoOnlyFindAndReplaceTrack=function(e,t){A._demoOnlyFindAndReplaceTrack(e,t)},this._testOnlyGetFramesEncoded=function(){return new Promise(function(e,t){A.getStats(function(n,a){if(n)return void t(n);var s=o.find(a,function(e){return r.isVideoSenderStat(e)&&r.isOutboundStat(e)});return s?void e(i(s,["timestamp","framesEncoded"])):void t(new Error("Could not find framesEncoded in getStats report"))})})}}}},{"../../common-js-helpers/OTHelpers.js":218,"../messaging/raptor/raptor_constants.js":322,"./get_stats_helpers.js":341,"./peer_connection.js":344,"./set_certificates.js":351,"./watchAudioAcquisition.js":356,"lodash/assign":142,"lodash/pick":176}],348:[function(e,t){"use strict";var n=e("../../otplugin/otplugin.js"),i=e("../../common-js-helpers/OTHelpers.js"),r=e("../logging.js"),o=e("./sdp_helpers.js"),a=["audioCodec","audioSentBytes","audioSentPackets","audioSentPacketsLost","videoCodec","videoHeight","videoHeightInput","videoSentBytes","videoFrameRateSent","videoSentPackets","videoRtt","videoSentPacketsLost","videoWidthInput","videoWidth"],s=["audioCodec","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoCodec","videoHeight","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost","videoFrameRateReceived","videoRtt","videoWidth"],c=function(e,t,n,i,r){function o(e){switch(e>>24){case 0:return"TURN/TLS";case 1:return"TURN/TCP";case 2:return"TURN/UDP";default:return""}}var a=function(e){return e.stat("googFrameRateSent")?(n.videoSentBytes=Number(e.stat("bytesSent")),n.videoSentPackets=Number(e.stat("packetsSent")),n.videoSentPacketsLost=Number(e.stat("packetsLost")),n.videoRtt=Number(e.stat("googRtt")),n.videoFrameRate=Number(e.stat("googFrameRateInput")),n.videoWidth=Number(e.stat("googFrameWidthSent")),n.videoHeight=Number(e.stat("googFrameHeightSent")),n.videoFrameRateSent=Number(e.stat("googFrameRateSent")),n.videoWidthInput=Number(e.stat("googFrameWidthInput")),n.videoHeightInput=Number(e.stat("googFrameHeightInput")),n.videoCodec=e.stat("googCodecName")):e.stat("googFrameRateReceived")&&(n.videoRecvBytes=Number(e.stat("bytesReceived")),n.videoRecvPackets=Number(e.stat("packetsReceived")),n.videoRecvPacketsLost=Number(e.stat("packetsLost")),n.videoFrameRate=Number(e.stat("googFrameRateOutput")),n.videoFrameRateReceived=Number(e.stat("googFrameRateReceived")),n.videoFrameRateDecoded=Number(e.stat("googFrameRateDecoded")),n.videoWidth=Number(e.stat("googFrameWidthReceived")),n.videoHeight=Number(e.stat("googFrameHeightReceived")),n.videoCodec=e.stat("googCodecName")),null},s=function(e){e.stat("audioInputLevel")?(n.audioSentPackets=Number(e.stat("packetsSent")),n.audioSentPacketsLost=Number(e.stat("packetsLost")),n.audioSentBytes=Number(e.stat("bytesSent")),n.audioCodec=e.stat("googCodecName"),n.audioRtt=Number(e.stat("googRtt"))):e.stat("audioOutputLevel")&&(n.audioRecvPackets=Number(e.stat("packetsReceived")),n.audioRecvPacketsLost=Number(e.stat("packetsLost")),n.audioRecvBytes=Number(e.stat("bytesReceived")),n.audioCodec=e.stat("googCodecName"))},c=function(e){if(e.result){for(var t=e.result(),i=function(e,n){return t.filter(function(t){return t.id===n.stat(e)})[0]},c=function(e){return i("localCandidateId",e)},l=function(e){return i("remoteCandidateId",e)},u=0;u<t.length;u++){var d=t[u];d.stat&&("true"===d.stat("googActiveConnection")&&(d.stat("googChannelId").indexOf("audio")>-1?(n.audioLocalAddress=d.stat("googLocalAddress"),n.audioRemoteAddress=d.stat("googRemoteAddress"),n.audioLocalCandidateType=d.stat("googLocalCandidateType"),n.audioRemoteCandidateType=d.stat("googRemoteCandidateType"),n.audioTransportType=d.stat("googTransportType"),n.audioLocalRelayProtocol=o(c(d).stat("priority")),n.audioRemoteRelayProtocol=o(l(d).stat("priority"))):d.stat("googChannelId").indexOf("video")>-1&&(n.videoLocalAddress=d.stat("googLocalAddress"),n.videoRemoteAddress=d.stat("googRemoteAddress"),n.videoLocalCandidateType=d.stat("googLocalCandidateType"),n.videoRemoteCandidateType=d.stat("googRemoteCandidateType"),n.videoTransportType=d.stat("googTransportType"),n.videoLocalRelayProtocol=o(c(d).stat("priority")),n.videoRemoteRelayProtocol=o(l(d).stat("priority")))),s(d),a(d))}"videoCodec"in n&&!n.videoLocalAddress&&["LocalAddress","RemoteAddress","LocalCandidateType","RemoteCandidateType","TransportType","LocalRelayProtocol","RemoteRelayProtocol"].forEach(function(e){n["video"+e]=n["audio"+e]})}r(null,n)};e.getStats(c)},l=function(e,t,n,i,r){var o=function(e){r(e)},a=function(e){e.audioInputLevel?(n.audioSentBytes=Number(e.bytesSent),n.audioSentPackets=Number(e.packetsSent),n.audioSentPacketsLost=Number(e.packetsLost),n.audioRtt=Number(e.googRtt),n.audioCodec=e.googCodecName):e.audioOutputLevel&&(n.audioRecvBytes=Number(e.bytesReceived),n.audioRecvPackets=Number(e.packetsReceived),n.audioRecvPacketsLost=Number(e.packetsLost),n.audioCodec=e.googCodecName)},s=function(e){e.googFrameHeightSent?(n.videoSentBytes=Number(e.bytesSent),n.videoSentPackets=Number(e.packetsSent),n.videoSentPacketsLost=Number(e.packetsLost),n.videoRtt=Number(e.googRtt),n.videoCodec=e.googCodecName,n.videoWidth=Number(e.googFrameWidthSent),n.videoHeight=Number(e.googFrameHeightSent),n.videoFrameRateSent=Number(e.googFrameRateSent),n.videoWidthInput=Number(e.googFrameWidthInput),n.videoHeightInput=Number(e.googFrameHeightInput)):e.googFrameHeightReceived&&(n.videoRecvBytes=Number(e.bytesReceived),n.videoRecvPackets=Number(e.packetsReceived),n.videoRecvPacketsLost=Number(e.packetsLost),n.videoRtt=Number(e.googRtt),n.videoCodec=e.googCodecName,n.videoFrameRateReceived=Number(e.googFrameRateReceived),n.videoFrameRateDecoded=Number(e.googFrameRateDecoded),n.videoWidth=Number(e.googFrameWidthReceived),n.videoHeight=Number(e.googFrameHeightReceived)),e.googFrameRateInput?n.videoFrameRate=Number(e.googFrameRateInput):e.googFrameRateOutput&&(n.videoFrameRate=Number(e.googFrameRateOutput))},c=function(e){return void 0!==e.googFrameHeightSent||void 0!==e.googFrameHeightReceived||void 0!==n.videoBytesTransferred||void 0!==e.googFrameRateSent},l=function(e){return"true"===e.googActiveConnection};e.getStats(null).then(function(e){e.forEach(function(e){l(e)?e.googChannelId.indexOf("audio")>-1?(n.audioLocalAddress=e.googLocalAddress,n.audioRemoteAddress=e.googRemoteAddress,n.audioLocalCandidateType=e.googLocalCandidateType,n.audioRemoteCandidateType=e.googRemoteCandidateType,n.audioTransportType=e.googTransportType):e.googChannelId.indexOf("video")>-1&&(n.videoLocalAddress=e.googLocalAddress,n.videoRemoteAddress=e.googRemoteAddress,n.videoLocalCandidateType=e.googLocalCandidateType,n.videoRemoteCandidateType=e.googRemoteCandidateType,n.videoTransportType=e.googTransportType):c(e)?s(e):a(e)}),n.videoFrameRateSent&&!n.videoLocalAddress&&(n.videoLocalAddress=n.audioLocalAddress,n.videoRemoteAddress=n.audioRemoteAddress,n.videoLocalCandidateType=n.audioLocalCandidateType,n.videoRemoteCandidateType=n.audioLocalCandidateType,n.videoTransportType=n.audioTransportType),p(n,i),r(null,n)},o)},u=function(e,t,n,i,r){var a=function(e){r(e)},s=function(e,t){"outboundrtp"===t?(n.audioSentPackets=e.packetsSent,n.audioSentPacketsLost=e.packetsLost,n.audioSentBytes=e.bytesSent):"inboundrtp"===t&&(n.audioRecvPackets=e.packetsReceived,n.audioRecvPacketsLost=e.packetsLost,n.audioRecvBytes=e.bytesReceived)},c=function(e,t){"number"==typeof e.framerateMean&&(n.videoFrameRate=Number(e.framerateMean)),"outboundrtp"===t?(n.videoSentPackets=e.packetsSent,n.videoSentPacketsLost=e.packetsLost,n.videoSentBytes=e.bytesSent):"inboundrtp"===t&&(n.videoRecvPackets=e.packetsReceived,n.videoRecvPacketsLost=e.packetsLost,n.videoRecvBytes=e.bytesReceived)};e.getStats(null).then(function(t){var a=void 0,l=void 0,u=void 0,d=void 0,f=void 0,h=void 0,g=void 0,m=function(e){var t=e.type.toLowerCase().replace(/[^a-z]/g,""),i=e.id.toLowerCase();"outboundrtp"===t||"inboundrtp"===t?(-1!==i.indexOf("rtp")&&(-1!==i.indexOf("audio")?s(e,t):-1!==i.indexOf("video")&&c(e,t)),e.hasOwnProperty("mozRtt")&&("video"===e.mediaType?n.videoRtt=e.mozRtt:"audio"===e.mediaType&&(n.audioRtt=e.mozRtt))):"localcandidate"===e.type?(a=e.candidateType,u=e.ipAddress+":"+e.portNumber,f=e.transport):"remotecandidate"===e.type?(l=e.candidateType,d=e.ipAddress+":"+e.portNumber):"track"===e.type&&0!==i.indexOf("video")&&(h=e.frameWidth,g=e.frameHeight,"number"==typeof e.framesPerSecond&&(n.videoFrameRate=e.framesPerSecond))
};if("function"==typeof t[Symbol.iterator])for(var v=t,y=Array.isArray(v),_=0,v=y?v:v[Symbol.iterator]();;){var b;if(y){if(_>=v.length)break;b=v[_++]}else{if(_=v.next(),_.done)break;b=_.value}var w=b,A=Array.isArray(w)?w[1]:w;m(A)}else for(var C in t)t.hasOwnProperty(C)&&m(t[C]);if((n.audioRecvBytes||n.audioSentBytes)&&(n.audioLocalCandidateType=a,n.audioLocalAddress=u,n.audioRemoteCandidateType=l,n.audioRemoteAddress=d,n.audioTransportType=f,void 0===n.audioCodec)){var E="answer"===e.remoteDescription.type?e.remoteDescription:e.localDescription,T=E.sdp,S=o.getCodecs(T,"audio");n.audioCodec=S[0]}if((n.videoRecvBytes||n.videoSentBytes)&&(n.videoLocalCandidateType=a,n.videoLocalAddress=u,n.videoRemoteCandidateType=l,n.videoRemoteAddress=d,n.videoTransportType=f,void 0===n.videoCodec)){var x="answer"===e.remoteDescription.type?e.remoteDescription:e.localDescription,j=x.sdp,k=o.getCodecs(j,"video");n.videoCodec=k[0]}p(n,i),n.videoWidth=n.videoWidth||h,n.videoHeight=n.videoHeight||g,r(null,n)})["catch"](a)},d=function(e,t,r,o,a){return n.isInstalled()?(d=l,l(e,t,r,o,a)):-1!==["Firefox","Edge","Safari"].indexOf(i.env.name)?(d=u,u(e,t,r,o,a)):(d=c,c(e,t,r,o,a))},p=function(e,t){var n=t?a:s;n.forEach(function(t){e.hasOwnProperty(t)||(e[t]=null)})},f=function h(e,t){var n=void 0,o=i.now(),a=function s(a,c){if(n){var l=i.now(),u={timeStamp:l,duration:Math.round((l-o)/1e3),period:Math.round((l-a.timeStamp)/1e3)},p=function(t,n){if(t)return void r.error("Failed to Parse QOS Stats:",t);var o=i.clone(u),l=["audioSentBytes","audioSentPackets","audioSentPacketsLost","videoSentBytes","videoSentPackets","videoSentPacketsLost","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost"];l.forEach(function(e){o[e]=a&&a[e]?u[e]-a[e]:u[e]}),e(o,a);var d=c===h.INITIAL_INTERVAL?h.INTERVAL-h.INITIAL_INTERVAL:h.INTERVAL;setTimeout(s.bind(null,n,d),c)};d(n,a,u,t,p)}};this.startCollecting=function(e){e&&e.getStats&&(n?n=e:(n=e,a({timeStamp:i.now()},h.INITIAL_INTERVAL)))},this.stopCollecting=function(){n=null}};f.INITIAL_INTERVAL=1e3,f.INTERVAL=3e4,t.exports=f},{"../../common-js-helpers/OTHelpers.js":218,"../../otplugin/otplugin.js":396,"../logging.js":315,"./sdp_helpers.js":350}],349:[function(e,t){"use strict";var n=e("./sdp_helpers.js"),i=e("../../common-js-helpers/env.js");t.exports={local:{offer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.simulcastStreams,r=e.audioBitrate,o=e.priorityVideoCodec,a=void 0===o?"":o,s=e.codecFlags,c=void 0===s?{}:s,l=e.enableStereo,u=void 0===l?!1:l,d=e.videoCodecsCompatible,p=void 0===d?!0:d,f=arguments[1],h=f;return t>1&&(h=n.enableSimulcast(h,t)),r>0&&(h=n.setAudioBitrate(h,r)),h=n.modifyReceiveStereo(h,!1),h=n.modifySendStereo(h,Boolean(u)),p?("Edge"!==i.name&&Object.keys(c).filter(function(e){return c[e]===!1}).forEach(function(e){h=n.removeVideoCodec(h,e)}),a&&"Edge"!==i.name?h=n.reprioritizeVideoCodec(h,a,"top"):"h264"!==a&&(h=n.reprioritizeVideoCodec(h,"h264","bottom"))):h=n.disableMediaType(h,"video"),h},answer:function(e,t){var i=t;return e&&e.audioBitrate>0&&(i=n.setAudioBitrate(i,e.audioBitrate)),i=n.modifyReceiveStereo(i,Boolean(e&&e.enableStereo)),i=n.modifySendStereo(i,!1)}},remote:{offer:function(e,t){if(-1===t.indexOf("a=rtcp-fb")){var n="a=rtcp-fb:* ccm fir\r\na=rtcp-fb:* nack ";return t.replace(/^m=video(.*)$/gim,"m=video$1\r\n"+n)}return t},answer:function(e,t){var i=t;return e&&e.audioBitrate>0&&(i=n.setAudioBitrate(i,e.audioBitrate)),i}}}},{"../../common-js-helpers/env.js":234,"./sdp_helpers.js":350}],350:[function(e,t){"use strict";var n=e("lodash/assign"),i=e("../logging.js"),r=e("../../common-js-helpers/OTHelpers.js"),o=1e4,a=2e4,s={getSections:function(e){return e.split(/\r\n|\r|\n/).reduce(function(e,t){var n=t.match(/^m=(\w+) \d+/);return n&&(e.sections[e.section=n[1]]=[]),e.sections[e.section].push(t),e},{sections:{header:[]},section:"header"}).sections},getCodecs:function(e,t){var i=s.getSections(e)[t];if(!i)throw new Error("no mediaType "+t);var r=i[0].match(/m=\w+ \d+ [A-Z\/]+ ([\d ]+)$/)[1].split(" "),o=n.apply(void 0,i.filter(function(e){return e.match(/^a=rtpmap:\d+/)}).map(function(e){return e.match(/^a=rtpmap:(\d+) ([\w-]+)/).splice(1)}).map(function(e){var t,n=e[0],i=e[1];return t={},t[n]=i,t}));return r.map(function(e){return o[e]||"Unknown codec"})}};t.exports=s,s.getMLineIndex=function(e,t){var n="m="+t;return r.findIndex(e,function(e){return-1!==e.indexOf(n)?!0:!1})},s.getMLine=function(e,t){var n=s.getMLineIndex(e,t);return n>-1?e[n]:void 0},s.hasMediaType=function(e,t){var n=new RegExp("^m="+t),i=e.split("\r\n");return r.findIndex(i,function(e){return n.test(e)})>=0},s.hasMLinePayloadType=function(e,t,n){var i=s.getMLine(e,t),r=s.getMLinePayloadTypes(i,t);return r.indexOf(n)>-1},s.getMLinePayloadTypes=function(e,t){var n=new RegExp("^m="+t+" \\d+(/\\d+)? [a-zA-Z0-9/]+(( [a-zA-Z0-9/]+)+)$","i"),i=e.match(n);return!i||i.length<2?[]:i[2].trim().split(" ")},s.removeTypesFromMLine=function(e,t){var n=/[0-9 ]*$/.exec(e)[0],i=n.split(" ").filter(function(e){return""!==e&&-1===t.indexOf(e)});return e.replace(n," "+i.join(" "))},s.removeMediaEncoding=function(e,t,n){var i=void 0,r=void 0,o=void 0,a=void 0,c=e.split("\r\n"),l=s.getMLineIndex(c,t),u=l>-1?c[l]:void 0,d=[];if(-1===l)return c.join("\r\n");if(i=s.getMLinePayloadTypes(u,t),0===i.length)return c.join("\r\n");for(r=l;r<c.length;r++){var p=new RegExp(n,"i");0===c[r].indexOf("a=rtpmap:")&&(a=c[r].split(" "),2===a.length&&p.test(a[1])&&d.push(a[0].substr(9)))}if(!d.length)return c.join("\r\n");for(r=l;r<c.length;r++)if(0===c[r].indexOf("a=fmtp:"))for(a=c[r].split(" "),o=0;o<d.length;o++)2===a.length&&a[1]==="apt="+d[o]&&d.push(a[0].substr(7));return c=c.filter(function(e){for(var t=0;t<d.length;t++)if(0===e.indexOf("a=rtpmap:"+d[t]+" ")||0===e.indexOf("a=fmtp:"+d[t]+" ")||0===e.indexOf("a=rtcp-fb:"+d[t]+" "))return!1;return!0}),d.length>0&&l>-1&&(c[l]=s.removeTypesFromMLine(u,d)),c.join("\r\n")},s.disableMediaType=function(e,t){var n,i=e.split("\r\n"),r=[],o=void 0;i.forEach(function(e){var t=e;/^m=/.test(t)&&(o=void 0),o||(o=[],r.push(o)),o.push(t)});var a=new RegExp("^m="+t+" \\d+ ([^ ]+) [0-9 ]+$"),s=r.map(function(e){var n=e[0].match(a);return n?["m="+t+" 0 "+n[1]+" 0","a=inactive"].concat(e.filter(function(e){return/^c=/.test(e)||/^a=mid:/.test(e)||""===e})):e});return(n=[]).concat.apply(n,s).join("\r\n")},s.removeVideoCodec=function(e,t){return s.removeMediaEncoding(e,"video",t)};var c=function(e,t){var n=t.filterByName("ssrc-group:FID"),r=0===n.length;switch(n=r?[]:n[0].value.split(" "),n.length){case 0:case 1:var o=t.find(function(e){return 0===e.name.indexOf("rtpmap:")&&e.value.indexOf("rtx/90000")>-1});if(!o)return!1;var a=o.name.split(":")[1];return a.indexOf("/")>-1&&(a=a.split("/")[0]),s.hasMLinePayloadType(e,"video",a);default:return i.debug("SDP Helpers: There are more than two FIDs, RTX is definitely enabled"),!0}};s.getAttributesForMediaType=function(e,t){for(var n=void 0,i=void 0,o=void 0,a=void 0,l=void 0,u=void 0,d=void 0,p=void 0,f=void 0,h=s.getMLineIndex(e,t),g=new RegExp("m=(?!"+t+").+ ","i"),m=new RegExp("a=ssrc:\\d+ .*","i"),v=new RegExp("a=ssrc-group:FID (\\d+).*?","i"),y=new RegExp("a=([a-z0-9:/-]+) (.*)","i"),_=[],b=h+1;b<e.length&&!g.test(e[b]);b++){l=e[b].match(v),l&&(n=b,a=l[1]),u=e[b].match("a=ssrc:"+a+" msid:(.+)"),u&&(d=u[1]);var w=m.test(e[b]);(void 0!==n&&void 0===i&&!w||b===e.length-1)&&(i=b);var A=e[b].match(/a=mid:(.+)/);A&&(p=A[1],f=b),o=y.exec(e[b]),o&&3===o.length&&_.push({lineIndex:b,name:o[1],value:o[2]})}return _.ssrcStartIndex=n,_.ssrcEndIndex=i,_.msid=d,_.mid=p,_.midIndex=f,Array.prototype.filter||(_.filter=r.filter.bind(r,_)),Array.prototype.find||(_.find=r.find.bind(r,_)),_.isUsingRTX=c.bind(null,e,_),_.filterByName=function(e){return this.filter(function(t){return t.name===e})},_.getRtpNumber=function(e){var t=new RegExp("rtpmap:(.+)");return r.find(_.map(function(n){var i=n.name.match(t);return i&&n.value.indexOf(e)>=0?i[1]:null}),function(e){return null!==e})},_};var l=function(e,t,n){var r=t.split("\r\n");if(!s.getMLine(r,"audio"))return i.debug("No audio m-line, not enabling stereo."),t;var o=s.getAttributesForMediaType(r,"audio"),a=o.getRtpNumber("opus");if(!a)return i.debug("Could not find rtp number for opus, not enabling stereo."),t;var c=o.find(function(e){return e.name==="fmtp:"+a});if(!c)return i.debug("Could not find a=fmtp line for opus, not enabling stereo."),t;var l=r[c.lineIndex],u=void 0;switch(e){case"send":u=/sprop-stereo=\d+(\s*;?\s*)/,u.test(c.value)?l=l.replace(u,n?"sprop-stereo=1$1":""):n&&(l+="; sprop-stereo=1");break;case"receive":u=/([^-])stereo=\d+(\s*;?\s*)/,u.test(c.value)?l=l.replace(u,n?"$1stereo=1$2":"$1"):n&&(l+="; stereo=1");break;default:throw new Error("Invalid type "+e+" passed into enableStereo")}return l=l.replace(/[;\s]*$/,""),r[c.lineIndex]=l,r.join("\r\n")};s.modifySendStereo=l.bind(null,"send"),s.modifyReceiveStereo=l.bind(null,"receive"),s.setAudioBitrate=function(e,t){var n=s.getAudioBitrate(e);if(void 0!==n)return i.debug("Audio bitrate already set to "+n+", not setting audio bitrate"),e;var r=e.split("\r\n");if(!s.getMLine(r,"audio"))return i.debug("No audio m-line, not setting audio bitrate."),e;var o=s.getAttributesForMediaType(r,"audio");if(!o.midIndex)return i.debug("No audio mid line, not setting audio bitrate."),e;var a=Math.floor(t/1e3);return r.splice(o.midIndex+1,0,"b=AS:"+a),r.join("\r\n")},s.hasSendStereo=function(e){return/[\s;]sprop-stereo=1/.test(e)},s.getAudioBitrate=function(e){var t=e.match(/\sb=AS:(\d+)/);return t?1e3*Number(t[1]):void 0},s.enableSimulcast=function(e,t){var n=void 0,r=void 0,c=e.split("\r\n");if(!s.getMLine(c,"video"))return i.debug("No video m-line, not enabling simulcast."),e;var l=s.getAttributesForMediaType(c,"video");if(l.filterByName("ssrc-group:SIM").length>0)return i.debug("Simulcast is already enabled in this SDP, not attempting to enable again."),e;if(!l.msid)return i.debug("No local stream attached, not enabling simulcast."),e;var u=l.isUsingRTX(),d=[],p=[];for(r=0;t>r;++r)d.push(o+r),u&&p.push(a+r);if(n=["a=ssrc-group:SIM "+d.join(" ")],u)for(r=0;t>r;++r)n.push("a=ssrc-group:FID "+d[r]+" "+p[r]);for(r=0;t>r;++r)n.push("a=ssrc:"+d[r]+" cname:localCname","a=ssrc:"+d[r]+" msid:"+l.msid);if(u)for(r=0;t>r;++r)n.push("a=ssrc:"+p[r]+" cname:localCname","a=ssrc:"+p[r]+" msid:"+l.msid);return n.unshift(l.ssrcStartIndex,l.ssrcEndIndex-l.ssrcStartIndex),c.splice.apply(c,n),c.join("\r\n")},s.reprioritizeVideoCodec=function(e,t,n){var r=e.split("\r\n"),o=s.getMLineIndex(r,"video");if(-1===o)return e;var a=s.getMLinePayloadTypes(r[o],"video"),c=new RegExp("^a=rtpmap:(\\d+).* "+t,"i"),l=r.map(function(e){return e.match(c)}).filter(function(e){return null!==e});if(0===l.length)return e;var u=l.map(function(e){return e[1]}),d=a.filter(function(e){return-1===u.indexOf(e)});if("top"===n){var p;(p=d).unshift.apply(p,u)}else if("bottom"===n){var f;(f=d).push.apply(f,u)}else i.error("Unexpected location param: "+n+"; not changing "+t+" priority"),d=a;var h=r[o].replace(a.join(" "),d.join(" "));return r[o]=h,r.join("\r\n")}},{"../../common-js-helpers/OTHelpers.js":218,"../logging.js":315,"lodash/assign":142}],351:[function(e,t){(function(n){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.OTHelpers||e("../../common-js-helpers/OTHelpers.js"),r=t.global||n,o=r.RTCPeerConnection;return function(e,t){"Firefox"===i.env.name&&o&&o.generateCertificate?o.generateCertificate({name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])})["catch"](function(e){t(e)}).then(function(n){e.certificates=[n],t(void 0,e)}):setTimeout(function(){t(void 0,e)})}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common-js-helpers/OTHelpers.js":218}],352:[function(e,t){"use strict";var n=e("lodash/assign"),i=e("./applySdpTransform.js"),r=e("../logging.js");t.exports=function(e,t,o,a,s,c,l,u){var d=function(e,t){return function(n){r.error(e,n),u&&u(e,n,t)}},p=function(c){r.debug("subscribeProcessor: offer created",c);var u=new t({type:c.type,sdp:i(o,"local","offer",n({simulcastStreams:a},s),c.sdp)});r.debug("subscribeProcessor: setting local description"),e.setLocalDescription(u).then(function(){return l(u)})["catch"](d("Error while setting LocalDescription","SetLocalDescription"))};r.debug("subscribeProcessor: creating offer"),e.createOffer(c).then(p)["catch"](d("Error while creating Offer","CreateOffer"))}},{"../logging.js":315,"./applySdpTransform.js":338,"lodash/assign":142}],353:[function(e,t){"use strict";var n=e("lodash/assign");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.ExceptionCodes||e("../exception_codes.js"),r=t.OTHelpers||e("../../common-js-helpers/OTHelpers.js"),o=t.parseIceServers||e("../messaging/raptor/parse_ice_servers.js").parseIceServers,a=t.PeerConnection||e("./peer_connection.js")(),s=t.RaptorConstants||e("../messaging/raptor/raptor_constants.js"),c=t.setCertificates||e("./set_certificates.js")();return function(e){var t=this,l=e.clientCandidates,u=e.iceServers,d=e.socket,p=e.stream,f=e.subscriberId,h=e.subscriberUri,g=e.properties,m=e.logAnalyticsEvent,v=e.p2p,y=this,_=void 0,b=!1,w=!1,A=function(){this.destroy(),w&&this.trigger("iceRestartFailure",this),this.trigger("disconnected",this)},C=function(e){this.trigger("remoteStreamAdded",e,this)},E=function(e){this.trigger("remoteStreamRemoved",e,this)},T=function(){t.trigger("remoteVideoUnsupported")},S=function(e,t){this.trigger("error",null,e,this,t)},x=function(e){!w||"connected"!==e&&"completed"!==e||(w=!1,this.trigger("iceRestartSuccess")),this.trigger("iceConnectionStateChange",e)},j=function(e){this.trigger("signalingStateChange",e)},k=function(e){this.trigger("signalingStateStable",e)},R=function(e,t){switch(e){case s.Actions.ANSWER:case s.Actions.PRANSWER:this.trigger("connected"),d.jsepAnswer(h,t.sdp);break;case s.Actions.OFFER:d.jsepOffer(h,t.sdp);break;case s.Actions.CANDIDATE:d.jsepCandidate(h,t)}}.bind(this);r.eventing(this),this.destroy=function(){b||(b=!0,_&&(d.is("connected")&&!p.destroyed&&d.subscriberDestroy(p.id,f),this.subscribeToAudio(!1),_.disconnect()),_=null,this.off())},this.getDataChannel=function(e,t,n){_.getDataChannel(e,t,n)},this.processMessage=function(e,t){_.processMessage(e,t)},this.remoteDescription=function(){return _.remoteDescription()},this.getStats=function(e){_?_.getStats(e):e(new r.Error("Subscriber is not connected cannot getStats","NotConnectedError",{code:1015}))};var I=function(e){return function(t){_&&_.remoteTracks().forEach(function(n){n.kind===e&&n.enabled!==t&&(n.enabled=t)})}};this.subscribeToAudio=I("audio"),this.subscribeToVideo=I("video"),this.hasRelayCandidates=function(){return _.hasRelayCandidates()},this.iceRestart=function(){return w=!0,_.iceRestart()},this.iceConnectionStateIsConnected=function(){return _.iceConnectionStateIsConnected()},this.init=function(e){var t=this,r={iceServers:u};c(r,function(r,s){if(r)return void e(r);var c=n({logAnalyticsEvent:m,clientCandidates:l},s);if(_=new a(n({sendMessage:R,p2p:v},c)),_.on({iceConnected:function(){return y.emit("iceConnected")},close:A,streamAdded:C,streamRemoved:E,signalingStateChange:j,signalingStateStable:k,error:S,qos:function(e){return t.trigger("qos",e)},iceConnectionStateChange:x,remoteVideoUnsupported:T},y),_.remoteTracks().length>0)_.remoteStreams().forEach(C,y);else{var h=void 0;if(g.subscribeToVideo||g.subscribeToAudio){var b=p.getChannelsOfType("audio"),w=p.getChannelsOfType("video");h=b.map(function(e){return{id:e.id,type:e.type,active:g.subscribeToAudio}}).concat(w.map(function(e){var t={id:e.id,type:e.type,active:g.subscribeToVideo,restrictFrameRate:void 0!==g.restrictFrameRate?g.restrictFrameRate:!1};return void 0!==g.preferredFrameRate&&(t.preferredFrameRate=parseFloat(g.preferredFrameRate)),void 0!==g.preferredHeight&&(t.preferredHeight=parseInt(g.preferredHeight,10)),void 0!==g.preferredWidth&&(t.preferredWidth=parseInt(g.preferredWidth,10)),t}))}d.subscriberCreate(p.id,f,h,function(e,t){if(e){var n="subscriberCreate failed with unexpected code "+e.code,r=Number(e.code);404===r&&(n="stream not found"),409===r&&"streamLimitExceeded"===e.message&&(r=i.STREAM_LIMIT_EXCEEDED,n="The limit for concurrent streams in the session has been reached"),y.trigger("error",r,n,y,"Subscribe")}_&&!u&&_.setIceServers(o(t))}),e(void 0,y)}})}}}},{"../../common-js-helpers/OTHelpers.js":218,"../exception_codes.js":310,"../messaging/raptor/parse_ice_servers.js":321,"../messaging/raptor/raptor_constants.js":322,"./peer_connection.js":344,"./set_certificates.js":351,"lodash/assign":142}],354:[function(e,t){"use strict";var n=e("bluebird"),i=e("./sdp_helpers.js");t.exports=function(e){var t=e.RTCPeerConnection,r=e.env,o=e.stream,a=e.codecFlags;if(!t)return n.resolve("IE"===r.name&&a.vp8===!1?!1:!0);if("Edge"===r.name)return!0;var s=void 0,c=void 0;try{s=new t,c=new t,s.addStream(o)}catch(l){return n.resolve(!1)}return s.createOffer().then(function(e){var t={type:e.type,sdp:e.sdp};return Object.keys(a).forEach(function(e){a[e]||(t.sdp=i.removeVideoCodec(t.sdp,e))}),c.setRemoteDescription(t)}).then(function(){return!0})["catch"](function(){return!1})}},{"./sdp_helpers.js":350,bluebird:2}],355:[function(e,t){"use strict";var n=e("bluebird"),i=e("../../otplugin/otplugin.js"),r=function(e){return e.indexOf("VP8/")>-1?e.indexOf("H264/")>-1&&e.indexOf("H264/")<e.indexOf("VP8/")?!1:!0:!1},o=function(e){return e.indexOf("m=video")>-1&&!i.supportedVideoCodecs.some(function(t){return e.indexOf(t+"/")>-1})?!1:!0},a=function(e,t,a,s){if("Safari"===a.name&&!t&&r(e.sdp))return n.reject(new Error("VP8 is not supported in Safari"));if(!s)return i.isInstalled()&&!o(e.sdp)?n.reject(new Error("No supported video codec for IE")):n.resolve(!0);var c=new s({iceServers:[]});return c.setRemoteDescription(e)};t.exports=a},{"../../otplugin/otplugin.js":396,bluebird:2}],356:[function(e,t){"use strict";t.exports=function(e,t){var n=setTimeout(function(){e(function(e,n){if(!e)for(var i=0;i<n.length;i+=1){var r=n[i];-1!==r.id.indexOf("_send")&&"ssrc"===r.type&&"audio"===r.mediaType&&0===parseInt(r.bytesSent,10)&&t()}})},3e3);return function(){clearTimeout(n)}}},{}],357:[function(e,t){"use strict";var n=e("lodash/pick"),i=e("lodash/assign"),r=e("../../common-js-helpers/OTHelpers.js"),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,o=void 0,a=!1,s={},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.find(e,function(e){var t=e.id,n=e.type,i=e.framesDecoded;return"track"===n&&t.toLowerCase().indexOf("video")>=0&&"number"==typeof i})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timestamp,n=e.framesDecoded;return void 0!==n&&void 0!==s.framesDecoded?(n-s.framesDecoded)/((t-s.timestamp)/1e3):0};return function u(){a||e(function(e,r){if(!a){if(!e){var l=c(r);l&&i(s,n(l,["timestamp","framesDecoded"]))}o=setTimeout(u,t)}})}(),{getFrameRateFromStats:function(e){var t=c(e);return l(t)},destroy:function(){a=!0,o&&(clearTimeout(o),o=null)}}};t.exports=o},{"../../common-js-helpers/OTHelpers.js":218,"lodash/assign":142,"lodash/pick":176}],358:[function(e,t){"use strict";t.exports=function(e){return"Chrome"!==e.browserName||e.isScreenSharing||e.sessionInfo.p2pEnabled||!e.constraints.video?1:e.videoDimensions.width>640&&e.videoDimensions.height>480?3:2}},{}],359:[function(e,t){"use strict";var n=e("bluebird");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.Archiving||e("../chrome/archiving.js"),r=t.AudioLevelMeter||e("../chrome/audio_level_meter.js"),o=t.AudioLevelTransformer||e("../audio_level_transformer"),a=t.BackingBar||e("../chrome/backing_bar.js"),s=t.Chrome||e("../chrome/chrome.js"),c=t.MuteButton||e("../chrome/mute_button.js")(),l=t.NamePanel||e("../chrome/name_panel.js"),u=t.StylableComponent||e("../styling/stylable_component.js"),d=t.logging||e("../logging.js");return function(e,t){var p=t.name,f=t.publishAudio,h=t.publishVideo,g=t.audioSource,m=t.showControls,v=t.isScreenSharing,y=t.logAnalyticsEvent,_=void 0,b=void 0,w=void 0,A={},C=function(t){if(t===!1)return"off";var n=e.getStyle("buttonDisplayMode");return n===!1?"on":n},E=new n.Promise(function(t,n){A.init=function(n){e.getStyle("showArchiveStatus")||y("showArchiveStatus","createChrome",{mode:"off"});var u={backingBar:new a({nameMode:p?e.getStyle("nameDisplayMode"):"off",muteMode:C(e.getStyle("buttonDisplayMode"))}),name:new l({name:p,mode:e.getStyle("nameDisplayMode")}),archive:new i({show:e.getStyle("showArchiveStatus")&&"off"!==e.getStyle("showArchiveStatus"),archiving:!1})};null!==g&&g!==!1&&(u.muteButton=new c({muted:f===!1,mode:C.call(e,e.getStyle("buttonDisplayMode"))})),_=new r({mode:e.getStyle("audioLevelDisplayMode")});var d=new o,m=function(e){var t=d.transform(e.audioLevel);f||(t=0),_.setValue(t)};_.watchVisibilityChanged(function(t){t?e.on("audioLevelUpdated",m):e.off("audioLevelUpdated",m)}),_.audioOnly(!h&&f),u.audioLevel=_,n&&n.domElement&&(w=n,b=new s({parent:w.domElement}).set(u).on({muted:function(){return e.publishAudio(!1)},unmuted:function(){return e.publishAudio(!0)}}),t())},A.reset=function(){n(new Error("Chrome still being created")),b&&(b.destroy(),b=null)}});return E["catch"](function(e){e&&"Chrome still being created"===e.message||d.error("createChromeMixin failed to setup UI",e)}),A.setAudioOnly=function(e){_&&_.audioOnly(e)},A.setArchivingStatus=function(e){b&&b.archive.setArchiving(e)},A.setMuted=function(e){b&&b.muteButton.muted(e)},u(e,{showArchiveStatus:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:v?"off":"auto",archiveStatusDisplayMode:"auto",backgroundImageURI:null},m,function(e){y("SetStyle","Publisher",e,null,.1)}),e.on("styleValueChanged",function(e,t){E.then(function(){switch(e){case"nameDisplayMode":b.name.setDisplayMode(t),b.backingBar.setNameMode(t);break;case"showArchiveStatus":y("showArchiveStatus","styleChange",{mode:t?"on":"off"}),b.archive.setShowArchiveStatus(t);break;case"archiveStatusDisplayMode":b.archive.setShowArchiveStatus("off"!==t);break;case"buttonDisplayMode":b.muteButton.setDisplayMode(t),b.backingBar.setMuteMode(t);break;case"audioLevelDisplayMode":b.audioLevel.setDisplayMode(t);break;case"backgroundImageURI":w.setBackgroundImageURI(t)}})}),A}}},{"../audio_level_transformer":294,"../chrome/archiving.js":298,"../chrome/audio_level_meter.js":299,"../chrome/backing_bar.js":300,"../chrome/chrome.js":302,"../chrome/mute_button.js":303,"../chrome/name_panel.js":304,"../logging.js":315,"../styling/stylable_component.js":381,bluebird:2}],360:[function(e,t){"use strict";function n(e,t,n){return!e.publish&&t?!1:"boolean"==typeof e.source?e.source:n?{mandatory:{sourceId:e.source}}:{deviceId:{exact:e.source}}}function i(e){var t=n(e.audio,e.enableRenegotiation,e.usingOptionalMandatoryStyle);if(t===!1)return!1;var i=e.usingOptionalMandatoryStyle,r=e.disableAudioProcessing,o=e.prefixedAudioConstraints;return(r||o)&&t===!0&&(t={}),r&&(i?(a(t,{optional:[]}),t.optional.push({echoCancellation:!1})):t.echoCancellation=!1),o&&(i?(a(t,{optional:[]}),Object.keys(o).forEach(function(e){var n;t.optional.push((n={},n[e]=o[e],n))})):a(t,o)),t}function r(e){var t=n(e.video,e.enableRenegotiation,e.usingOptionalMandatoryStyle);if(t===!1)return!1;var i=e.videoDimensions,r=e.frameRate,o=e.maxResolution,s=e.usingOptionalMandatoryStyle;if((i||r||o)&&t===!0&&(t={}),i){var c=i.width,l=i.height;s?(a(t,{optional:[]}),t.optional.push({minWidth:c},{maxWidth:c},{minHeight:l},{maxHeight:l})):a(t,{width:{ideal:c},height:{ideal:l}})}return r&&(s?(a(t,{optional:[]}),t.optional.push({minFrameRate:r},{maxFrameRate:r})):a(t,{frameRate:{ideal:r}})),o&&(s?a(t,{mandatory:{maxWidth:o.width,maxHeight:o.height}}):a(t,{width:{max:o.width},height:{max:o.height}})),t}function o(e){return{audio:i(e),video:r(e)}}var a=e("lodash/merge"),s=e("./normalizeConstraintInput.js");t.exports=function(e){var t=s(e),n=o(t);return{constraints:n,publishAudio:t.audio.publish,publishVideo:t.video.publish,frameRate:t.frameRate,videoDimensions:t.videoDimensions,audioDeviceId:"string"==typeof t.audio.source?t.audio.source:void 0,videoDeviceId:"string"==typeof t.video.source?t.video.source:void 0}}},{"./normalizeConstraintInput.js":365,"lodash/merge":172}],361:[function(e,t){(function(n){"use strict";var i=e("lodash/assign"),r=e("bluebird"),o=e("lodash/cloneDeep"),a=e("lodash/pick"),s=e("uuid"),c=e("lodash/capitalize"),l=e("events");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=t.analytics||e("../analytics.js"),d=t.APIKEY||e("../api_key.js"),p=t.calculateCapableSimulcastStreams||e("./calculateCapableSimulcastStreams.js"),f=t.ConnectivityAttemptPinger||e("../../helpers/connectivity_attempt_pinger.js"),h=t.createChromeMixin||e("./createChromeMixin.js")(),g=t.deviceHelpers||e("../../helpers/device_helpers.js")(),m=t.EnvironmentLoader||e("../environment_loader.js"),v=t.Errors||e("../Errors.js"),y=t.Events||e("../events.js")(),_=t.ExceptionCodes||e("../exception_codes.js"),b=t.generateConstraintInfo||e("./generateConstraintInfo.js"),w=t.getUserMedia||e("../../helpers/get_user_media.js")(),A=t.interpretPeerConnectionError||e("../interpretPeerConnectionError.js")(),C=t.IntervalRunner||e("../interval_runner.js")(),E=t.logging||e("../logging.js"),T=t.Microphone||e("./microphone.js")(),S=t.otError||e("../../helpers/otError.js")(),x=t.OTErrorClass||e("../ot_error_class.js"),j=t.OTHelpers||e("../../common-js-helpers/OTHelpers.js"),k=t.OTPlugin||e("../../otplugin/otplugin.js"),R=t.otProperties||e("../../helpers/otProperties.js"),I=t.parseIceServers||e("../messaging/raptor/parse_ice_servers.js").parseIceServers,O=t.PUBLISH_MAX_DELAY||e("./max_delay.js")(),P=t.PublisherPeerConnection||e("../peer_connection/publisher_peer_connection.js")(),D=t.PublishingState||e("./state.js")(),L=t.screenSharing||e("../screensharing/screen_sharing.js")(),N=t.StreamChannel||e("../stream_channel.js"),M=t.systemRequirements||e("../system_requirements.js"),B=t.VideoOrientation||e("../../helpers/video_orientation.js")(),F=t.WidgetView||e("../../helpers/widget_view.js")(),U=t.navigator||n.navigator,H=e("../session/objects.js"),V=function(){function e(){return{sessionId:ct().sessionId||null,connectionId:ct().isConnected()?ct().connection.connectionId:null,partnerId:ct().apiKey||d.value,p2p:ct().sessionInfo?ct().sessionInfo.p2pEnabled:null,messagingServer:ct().sessionInfo?ct().sessionInfo.messagingServer:null,streamId:Q}}function t(e){e.forEach(function(e){return e()})}function V(e){var t=J.getTracks().filter(function(t){return t.kind===e});return bt().then(function(e){return r.all(e.map(function(e){return e.addTrack(t[0],J)}))})}function W(e){return bt().then(function(t){return r.all(t.map(function(t){var n=t.getSenders().filter(function(t){return t.track.kind===e&&t.track.enabled});return n.length?r.all(n.map(function(e){return t.removeTrack(e)})):void 0}))})}var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},$=this,G=new l;j.eventing(this),M.check()||M.upgrade();var Y=void 0,Q=void 0,J=void 0,q=void 0,X=void 0,K=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,it=void 0,rt=void 0,ot=void 0,at=!1,st=void 0,ct=function(){return $.session||st||{isConnected:function(){return!1}}};$.once("publishComplete",function(e){e||(at=!0)}),$.on("audioAcquisitionProblem",function(e){var t=e.method;wt("publisher:audioAcquisitionProblem","Event",{didPublishComplete:at,method:t})});var lt=s(),ut={},dt=!1,pt=z&&("screen"===z.videoSource||"window"===z.videoSource||"tab"===z.videoSource||"browser"===z.videoSource||"application"===z.videoSource),ft={},ht=!1,gt=["audioDeviceId","audioFallbackEnabled","audioSource","channels","classNames","constraints","disableAudioProcessing","enableRenegotiation","enableStereo","fitMode","frameRate","height","insertDefaultUI","insertMode","audioBitrate","maxResolution","minVideoBitrate","mirror","name","publishAudio","publishVideo","resolution","showControls","style","usePreviousDeviceSelection","videoDeviceId","videoDimensions","videoSource","width"],mt=j.defaults(z,{mirror:!pt,publishAudio:!0,publishVideo:!0,showControls:!0,fitMode:pt?"contain":"cover",audioFallbackEnabled:!pt,insertDefaultUI:!0,enableRenegotiation:!1,enableStereo:!1,disableAudioProcessing:!1});if(mt.constraints)E.warn("You have passed your own constraints not using ours");else{var vt=b({isScreenSharing:pt,audioSource:mt.audioSource,publishAudio:mt.publishAudio,videoSource:mt.videoSource,publishVideo:mt.publishVideo,resolution:mt.resolution,maxResolution:mt.maxResolution,frameRate:mt.frameRate,enableRenegotiation:mt.enableRenegotiation,disableAudioProcessing:mt.disableAudioProcessing,env:j.env,usingOptionalMandatoryStyle:pt||!(U.mediaDevices&&U.mediaDevices.getUserMedia)||"Chrome"===j.env.name});i(mt,vt)}if(!pt){var yt=new C(function(){var e=Y&&Y.video();e&&e.getAudioInputLevel().then(function(e){n.requestAnimationFrame(function(){$.dispatchEvent(new y.AudioLevelUpdatedEvent(e))})})},60);this.on({"audioLevelUpdated:added":function(e){1===e&&yt.start()},"audioLevelUpdated:removed":function(e){0===e&&yt.stop()}})}var _t=function(e,t,n){return e.addEventListener?(e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}):function(){}};!function(){var e=[];G.on("streamDestroy",function(){return t(e)}),G.on("streamChange",function(){t(e);var n=J.getAudioTracks().map(function(e){return _t(e,"ended",function(){ht=!0,$.trigger("audioAcquisitionProblem",{method:"trackEndedEvent"})})});e.splice.apply(e,[0,e.length].concat(n))})}(),function(){var e=[];G.on("streamDestroy",function(){return t(e)}),G.on("streamChange",function(){t(e),J.getTracks().forEach(function(t){t.addEventListener&&(e.push(_t(t,"mute",Jt)),e.push(_t(t,"unmute",Jt)))})})}();var bt=function(){return r.all(Object.keys(ut).map(function(e){return ut[e]}))},wt=z.logAnalyticsEvent||function(t,n,i,r,o){var s=j.extend({action:t,variation:n,payload:i},e(),r);"Failure"===n&&(s=j.extend(ft,s)),ft=a(s,"sessionId","connectionId","partnerId"),u.logEvent(s,o)},At=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"Attempt"!==t&&et||(tt=(new Date).getTime(),et=new f(j.extend({action:"Publish"},e()))),"Non-fatal"!==i.failureReason&&("Failure"===t&&et.setVariation(t),("Failure"===t||"Success"===t||"Cancel"===t)&&(j.extend(i,{attemptDuration:(new Date).getTime()-tt}),j.extend(n,{videoInputDevices:it,audioInputDevices:nt,videoInputDeviceCount:it?it.length:void 0,audioInputDeviceCount:nt?nt.length:void 0,selectedVideoInputDeviceId:rt,selectedAudioInputDeviceId:ot})),j.extend(n,{publishMaxDelay:O}),wt("Publish",t,n,i))},Ct=function(e,t){wt("ICERestart",e,t)},Et=function(e){var t=e.remoteConnectionId,n=e.parsedStats,i=e.simulcastEnabled,r=void 0;Y&&Y.domElement?r=Y.domElement:Y&&Y.video()&&Y.video().domElement()&&(r=Y.video().domElement());var o={widgetType:"Publisher",sessionId:$.session?$.session.sessionId:null,connectionId:$.session&&$.session.isConnected()?$.session.connection.connectionId:null,partnerId:$.session?$.session.apiKey:d.value,streamId:Q,width:r?Number(j.width(r).replace("px","")):void 0,height:r?Number(j.height(r).replace("px","")):void 0,audioTrack:J&&J.getAudioTracks().length>0,hasAudio:mt.publishAudio,videoTrack:J&&J.getVideoTracks().length>0,hasVideo:mt.publishVideo,videoSource:pt&&z.videoSource||mt.constraints.video&&"Camera"||null,version:R.version,mediaServerName:$.session?$.session.sessionInfo.mediaServerName:null,apiServer:R.apiURL,p2p:$.session?$.session.sessionInfo.p2pEnabled:null,messagingServer:$.session?$.session.sessionInfo.messagingServer:null,duration:q?Math.round(((new Date).getTime()-q.getTime())/1e3):0,remoteConnectionId:t,scalableVideo:i};u.logQOS(j.extend(o,n)),$.trigger("qos",n)},Tt=function(){var e=void 0,t=void 0,n=Y&&Y.video();return mt.videoDimensions?(e=Math.min(mt.videoDimensions.width,n&&n.videoWidth()||640),t=Math.min(mt.videoDimensions.height,n&&n.videoHeight()||480)):(e=n&&n.videoWidth()||640,t=n&&n.videoHeight()||480),{width:e,height:t}},St=function(e){E.error("OT.Publisher State Change Failed: ",e.message),E.debug(e)},xt=function(){return K.isDestroyed()?void(Y&&Y.destroyVideo()):(E.debug("OT.Publisher.onLoaded"),K.set("MediaBound"),H.sessions&&H.sessions.forEach(function(e){e._.privateEvents.emit("user-interaction")}),Y.loading($.session?!$.stream:!1),void(dt=!0))},jt=function(e){var t=S(v.CONNECT_FAILED,e,_.P2P_CONNECTION_FAILED);At("Failure",{},{failureReason:"PeerConnectionError",failureCode:t.code,failureMessage:t.message}),K.set("Failed"),t.message="OT.Publisher PeerConnection Error: "+t.message,$.trigger("publishComplete",t),x.handleJsException(t.message,_.P2P_CONNECTION_FAILED,{session:$.session,target:$})
},kt=function(){J&&(G.emit("streamDestroy"),n.MediaStreamTrack&&n.MediaStreamTrack.prototype.stop?J.getTracks().forEach(function(e){e.stop()}):J.stop(),J=null)},Rt=function(){var e={muted:!0,error:Bt};return r.promisify(function(t){return Y.bindVideo(J,e,t)})()["catch"](function(e){throw jt(e),e})},It=function(e){E.debug("OT.Publisher.onStreamAvailable"),K.set("BindingMedia"),kt(),J=e,G.emit("streamChange");var t=function(e,t){var n=void 0;return e.forEach(function(e){if(e.hasOwnProperty("deviceId"))n=e.deviceId.toString();else if(e.label&&t){var i=j.find(t,function(t){return t.label===e.label});i&&(n=i.deviceId)}}),n};rt=t(J.getVideoTracks(),it),ot=t(J.getAudioTracks(),nt),X=new T(J,!mt.publishAudio),$.publishVideo(mt.publishVideo&&J.getVideoTracks().length>0),$.accessAllowed=!0,$.dispatchEvent(new y.Event(y.Event.names.ACCESS_ALLOWED,!1))},Ot=function(e){E.error("OT.Publisher.onPublishingTimeout");var t=void 0,n=void 0;ht?(t=v.CHROME_MICROPHONE_ACQUISITION_ERROR,n="Unable to publish because your browser failed to get access to your microphone. You may need to fully quit and restart your browser to get it to work. See https://bugs.chromium.org/p/webrtc/issues/detail?id=4799 for more details."):(t=v.TIMEOUT,n="Could not publish in a reasonable amount of time"),$.trigger("publishComplete",S(t,new Error(n),_.UNABLE_TO_PUBLISH));var i={failureReason:"ICEWorkflow",failureCode:_.UNABLE_TO_PUBLISH,failureMessage:"OT.Publisher failed to publish in a reasonable amount of time (timeout)"};At("Failure",{},i),x.handleJsException(i.failureReason,i.failureCode,{session:$.session,target:$}),e.isConnected()&&$.streamId&&e._.streamDestroy($.streamId),$.disconnect(),$.session=null,K.isDestroyed()||K.set("MediaBound"),et&&(et.stop(),et=null)},Pt=function(e){var t=Object.keys(v).map(function(e){return v[e]}),n=S(Object.keys(t).indexOf(e.name)>-1?e.name:v.MEDIA_ERR_ABORTED,e,_.UNABLE_TO_PUBLISH);E.error("OT.Publisher.onStreamAvailableError "+n.name+": "+n.message),n.code=_.UNABLE_TO_PUBLISH,K.set("Failed"),$.trigger("publishComplete",n),Y&&(Y.destroy(),Y=null);var i={failureReason:"GetUserMedia",failureCode:_.UNABLE_TO_PUBLISH,failureMessage:"OT.Publisher failed to access camera/mic: "+n.message};At("Failure",{},i),x.handleJsException(i.failureReason,i.failureCode,{session:$.session,target:$})},Dt=function(e){var t=o(e);return t.code=_.UNABLE_TO_PUBLISH,t.name===v.USER_MEDIA_ACCESS_DENIED?void Lt(t):(E.error("OT.Publisher.onScreenSharingError "+t.message),K.set("Failed"),t.message="Screensharing: "+t.message,$.trigger("publishComplete",t),At("Failure",{},{failureReason:"ScreenSharing",failureMessage:t.message}),void(Y&&(Y.destroy(),Y=null)))},Lt=function(e){var t=o(e);"https:"!==j.env.protocol&&(pt?t.message+="PermissionDeniedError Note: https:// is required for screen sharing.":"Chrome"===j.env.name&&"localhost"!==j.env.hostName&&(t.message="Chrome requires HTTPS for camera and microphone access.")),E.error("OT.Publisher.onStreamAvailableError Permission Denied"),K.set("Failed"),t.message="OT.Publisher Access Denied: Permission Denied: "+t.message,t.code=_.UNABLE_TO_PUBLISH,$.trigger("publishComplete",t),At("Cancel",{reason:"AccessDenied"}),$.dispatchEvent(new y.Event(y.Event.names.ACCESS_DENIED)),Y&&(Y.destroy(),Y=null)},Nt=function(){wt("accessDialog","Opened"),$.dispatchEvent(new y.Event(y.Event.names.ACCESS_DIALOG_OPENED,!0))},Mt=function(){wt("accessDialog","Closed"),$.dispatchEvent(new y.Event(y.Event.names.ACCESS_DIALOG_CLOSED,!1))},Bt=function(e){var t=S(v.MEDIA_ERR_DECODE,e,_.UNABLE_TO_PUBLISH);t.message="OT.Publisher while playing stream: "+t.message,E.error("OT.Publisher.onVideoError"),wt("stream",null,{reason:t.message});var n=K.isAttemptingToPublish();K.set("Failed"),n?$.trigger("publishComplete",t):$.trigger("error",t.message),x.handleJsException(t.message,_.UNABLE_TO_PUBLISH,{session:$.session,target:$})},Ft=function(e){E.debug("Subscriber has been disconnected from the Publisher's PeerConnection"),$.cleanupSubscriber(e.remoteConnectionId)},Ut=function(e,t,n,i){var r=$.session&&$.session.sessionInfo;if("ICEWorkflow"===i&&r&&r.reconnection&&dt)return void E.debug("Ignoring peer connection failure due to possibility of reconnection.");var o=n&&n.remoteConnectionId||"(not found)",a=A(e,t,i,o,"Publisher"),s={hasRelayCandidates:n&&n.hasRelayCandidates()},c={failureReason:i||"PeerConnectionError",failureCode:a.code,failureMessage:a.message};K.isPublishing()?c.reason="Non-fatal":$.trigger("publishComplete",a),At("Failure",s,c),x.handleJsException("OT.Publisher PeerConnection Error: "+t,a.code,{session:$.session,target:$}),delete ut[n.remoteConnectionId]},Ht=function(e){Ct("Success",{remoteConnectionId:e})},Vt=function(e){Ct("Failure",{reason:"ICEWorkflow",message:"OT.Publisher PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",remoteConnectionId:e})},Wt=function(e){$.stream=e,$.stream.on("destroyed",$.disconnect,$),K.set("Publishing"),Y.loading(!dt),q=new Date,$.trigger("publishComplete",null,$),$.dispatchEvent(new y.StreamEvent("streamCreated",e,null,!1)),At("Success")},zt=function(e,t,n){var i=ut[t];if(i)return i;var o=p({browserName:j.env.name,isScreenSharing:pt,sessionInfo:$.session.sessionInfo,constraints:mt.constraints,videoDimensions:Tt()}),a=$.session._.getIceServers()["catch"](function(e){if(e instanceof TypeError)throw e;return void 0});return ut[t]=r.all([a,$.session._.getVideoCodecsCompatible(J)]).then(function(a){var s=a[0],c=a[1];return i=new P({clientCandidates:$.session.sessionInfo.clientCandidates,iceServers:s,remoteConnectionId:e,socket:$.session._.getSocket(),webRTCStream:J,channels:mt.channels,capableSimulcastStreams:o,overrideSimulcastEnabled:z._enableSimulcast,subscriberUri:n,logAnalyticsEvent:wt,offerOverrides:{enableStereo:mt.enableStereo,audioBitrate:mt.audioBitrate,priorityVideoCodec:$.session.sessionInfo.priorityVideoCodec,codecFlags:$.session._.getCodecFlags(),videoCodecsCompatible:c},answerOverrides:$.session.sessionInfo.p2pEnabled?void 0:{audioBitrate:mt.audioBitrate}}),i.on({disconnected:Ft,error:Ut,qos:function(t){var n=t.parsedStats,i=t.simulcastEnabled;return Et({remoteConnectionId:e,parsedStats:n,simulcastEnabled:i})},iceRestartSuccess:Ht.bind(void 0,t),iceRestartFailure:Vt.bind(void 0,t),audioAcquisitionProblem:function(){ht=!0,$.trigger("audioAcquisitionProblem",{method:"getStats"})}}),new r.Promise(function(e,t){i.init(Z,function(n){return n?t(n):void e(i)})})}),ut[t]},$t=h($,{name:mt.name,publishAudio:mt.publishAudio,publishVideo:mt.publishVideo,audioSource:mt.audioSource,showControls:mt.showControls,isScreenSharing:pt,logAnalyticsEvent:wt}),Gt=function(){$.off("publishComplete",Jt),$t.reset(),$.disconnect(),X=null,kt(),Y&&(Y.destroy(),Y=null),$.session&&$._.unpublishFromSession($.session,"reset"),$.id=null,$.stream=null,dt=!1,$.session=null,K.isDestroyed()||K.set("NotPublishing")},Yt=function(){return J?J.getVideoTracks().reduce(function(e,t){return e&&!t.muted&&t.enabled},mt.publishVideo):!1},Qt=function(){return J?J.getAudioTracks().reduce(function(e,t){return e&&!t.muted&&t.enabled},mt.publishAudio):!1},Jt=function en(){Y&&(Y.audioOnly(!Yt()),Y.showPoster(!Yt())),$t.setAudioOnly(!Yt()&&Qt()),$.stream?($.stream.setChannelActiveState("audio",Qt()),$.stream.setChannelActiveState("video",Yt())):$.once("publishComplete",en)};this.publish=function(e){return E.debug("OT.Publisher: publish"),(K.isAttemptingToPublish()||K.isPublishing())&&Gt(),K.set("GetUserMedia"),mt.style&&$.setStyle(mt.style,null,!0),mt.name&&(mt.name=mt.name.toString()),mt.hasOwnProperty("usePreviousDeviceSelection")&&("https:"!==j.env.protocol&&E.warn("Note: https:// is required for usePreviousDeviceSelection"),"IE"!==j.env.name&&E.warn("Note: usePreviousDeviceSelection only works in Internet Explorer"),k.hasOwnProperty("settings")&&(k.settings.usePreviousDeviceSelection=mt.usePreviousDeviceSelection)),void 0!==mt.minVideoBitrate&&("number"!=typeof mt.minVideoBitrate||isNaN(mt.minVideoBitrate)||mt.minVideoBitrate<=0)&&(E.warn("Invalid minVideoBitrate passed to the Publisher. minVideoBitrate must be a positive number"),delete mt.minVideoBitrate),void 0!==mt.audioBitrate&&("number"!=typeof mt.audioBitrate||isNaN(mt.audioBitrate)||mt.audioBitrate<6e3||mt.audioBitrate>51e4)&&(E.warn("Invalid audioBitrate passed to the Publisher. audioBitrate must be a number between 6000 and 510000 bits per second"),delete mt.audioBitrate),mt.classNames="OT_root OT_publisher",m.onLoad(function(){function t(e){K.isDestroyed()||qt(e).then(function(e){return It(e),Rt()}).then(function(){xt(),K.isDestroyed()||($.trigger("initSuccess"),$.trigger("loaded",$))})}Y=new F(e,mt),$.id=Y.domId(),$.element=Y.domElement,$.element&&$t.init(Y),Y.on("videoDimensionsChanged",function(e,t){$.stream&&$.stream.setVideoDimensions(t.width,t.height),$.dispatchEvent(new y.VideoDimensionsChangedEvent($,e,t))}),Y.on("mediaStopped",function(e){var t=new y.MediaStoppedEvent($,e);$.dispatchEvent(t,function(){if(!t.isDefaultPrevented()){if(e){var n=String(e.kind).toLowerCase();return void("audio"===n||"video"===n?$["publish"+c(n)](!1):E.warn("Track with invalid kind has ended: "+e.kind))}$.session?$._.unpublishFromSession($.session,"mediaStopped"):$.destroy("mediaStopped")}})}),Y.on("videoElementCreated",function(e){var t=new y.VideoElementCreatedEvent(e);$.dispatchEvent(t)}),pt?L.getConstraints({onAccessDialogOpened:Nt,onAccessDialogClosed:Mt,videoSource:z.videoSource,constraints:mt.constraints}).then(function(e){mt.constraints=e,t(mt.constraints)},Dt):g.shouldAskForDevices().then(function(e){e.video||(E.warn("Setting video constraint to false, there are no video sources"),mt.constraints.video=!1),e.audio||(E.warn("Setting audio constraint to false, there are no audio sources"),mt.constraints.audio=!1),it=e.videoDevices,nt=e.audioDevices,t(mt.constraints)})}),$},this.publishAudio=function(e,t){var n="function"==typeof t?t:function(){};if(mt.publishAudio=e,$t.setMuted(!e),!mt.enableRenegotiation&&X&&(X.muted(!e),Jt()),$.session&&$.stream)if($.stream.setChannelActiveState("audio",e),mt.enableRenegotiation)if(wt("publishAudioRenegotiation","Attempt",e),e&&0===J.getAudioTracks().length){mt.constraints.audio=mt.constraints.audio||!0;var i=function(e){e.getSenders().forEach(e.removeTrack.bind(e)),J.getTracks().forEach(function(t){e.addTrack(t,J)})};qt(mt.constraints).then(Xt).then(Jt).then(Rt).then(Zt.bind(null,i)).then(function(){wt("publishAudioRenegotiation","Success")}).then(n.bind(void 0,null),function(e){wt("publishAudioRenegotiation","Failure",e.message),n(e)})}else this.publishAudioTrack(e).then(function(){wt("publishAudioRenegotiation","Success")}).then(n.bind(void 0,null),function(e){wt("publishAudioRenegotiation","Failure"),n(e)});else n(null);else $.once("publishComplete",function(){$.publishAudio(mt.publishAudio,n)});return $},this.publishAudioTrack=function(e){return(e?V:W)("audio")},this.publishVideoTrack=function(e){return(e?V:W)("video")},this.publishVideo=function(e,t){var n="function"==typeof t?t:function(){},i=mt.publishVideo;if(mt.publishVideo=e,$.session&&$.stream&&mt.publishVideo!==i&&$.stream.setChannelActiveState("video",e),mt.enableRenegotiation)if(wt("publishVideoRenegotiation","Attempt",e),e&&0===J.getVideoTracks().length){mt.constraints.video=mt.constraints.video||!0;var r=function(e){e.getSenders().forEach(e.removeTrack.bind(e)),J.getTracks().forEach(function(t){e.addTrack(t,J)})};qt(mt.constraints).then(Xt).then(Jt).then(Rt).then(Zt.bind(null,r)).then(function(){wt("publishVideoRenegotiation","Success")}).then(n.bind(void 0,null),function(e){wt("publishVideoRenegotiation","Failure",e.message),n(e)})}else this.publishVideoTrack(e).then(function(){wt("publishVideoRenegotiation","Success")}).then(n.bind(void 0,null),function(e){wt("publishVideoRenegotiation","Failure",e.message),n(e)});else{if(J)for(var o=J.getVideoTracks(),a=0,s=o.length;s>a;a+=1)o[a].enabled=e;Jt(),n(null)}return $},this.destroy=function(e,t){return K.isAttemptingToPublish()&&(et&&(et.stop(),et=null),$.session&&At("Cancel",{reason:"destroy"})),K.isDestroyed()?$:(K.set("Destroyed"),Gt(),t!==!0&&$.dispatchEvent(new y.DestroyedEvent(y.Event.names.PUBLISHER_DESTROYED,$,e),$.off.bind($)),$)},this.disconnect=function(){Object.keys(ut).forEach(function(e){$.cleanupSubscriber(e)})},this.cleanupSubscriber=function(e){var t=ut[e];t&&(delete ut[e],t.then(function(t){t.destroy(),wt("disconnect","PeerConnection",{subscriberConnection:e})}))},this.processMessage=function(e,t,n){var i=n.params&&n.params.subscriber;switch(i&&"INVALID-STREAM"!==i||(i=t),E.debug("OT.Publisher.processMessage: Received "+e+" from "+i),E.debug(n),e){case"unsubscribe":$.cleanupSubscriber(i);break;default:zt(t,i,n.uri).then(function(t){return t.processMessage(e,n),null})["catch"](function(e){E.error("OT.Publisher failed to create a peerConnection",e)})}},this.getImgData=function(){if(!dt)return E.error("OT.Publisher.getImgData: Cannot getImgData before the Publisher is publishing."),null;var e=Y&&Y.video();return e?e.imgData():null};var qt=function(e){var t=w(e);return t.on("accessDialogOpened",Nt),t.on("accessDialogClosed",Mt),$.on("destroyed",function(){return t.release()}),t.promise["catch"](function(e){e.name===v.USER_MEDIA_ACCESS_DENIED?Lt(e):Pt(e)}),t.promise},Xt=function(e){kt(),J=e,G.emit("streamChange"),X=new T(J,!mt.publishAudio)},Kt=function(e){e.getSenders().forEach(function(e){return"audio"===e.track.kind&&J.getAudioTracks().length?e.replaceTrack(J.getAudioTracks()[0]):"video"===e.track.kind&&J.getVideoTracks().length?e.replaceTrack(J.getVideoTracks()[0]):void 0})},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt;return bt().then(function(t){var n=[];return t.map(e),r.all(n)})};this._={publishToSession:function(e){st=e,$.session=e;var t=s();Q=t,$.streamId=t,At("Attempt",{dataChannels:mt.channels,properties:a(mt,gt)});var n=new r.Promise(function(e,t){return dt?void e():($.once("initSuccess",e),void $.once("destroyed",function(e){var n=e.reason,i="";n&&(i=" Reason: "+n),t(new Error("Publisher destroyed before it finished loading."+i))}))});E.debug("publishToSession: waiting for publishComplete, which is triggered by stream#created from rumor");var i=new r.Promise(function(e,t){$.once("publishComplete",function(n){return n?void t(n):(E.debug("publishToSession: got publishComplete"),void e())})}),o=function(e){var t=[403,404,409],n=t.indexOf(e.code)>-1?S(v.STREAM_CREATE_FAILED,new Error("Failed to create stream in server model: "+e.message),_.UNABLE_TO_PUBLISH):S(v.UNEXPECTED_SERVER_RESPONSE,new Error("Unexpected server response: "+e.message),_.UNEXPECTED_SERVER_RESPONSE);throw At("Failure",{},{failureReason:"Publish",failureCode:n.code,failureMessage:n.message}),K.isAttemptingToPublish()&&$.trigger("publishComplete",n),x.handleJsException(e.message,n.code,{session:$.session,target:$}),n};E.debug("publishToSession: waiting for loaded");var c=n.then(function(){return e._.getVideoCodecsCompatible(J)}).then(function(n){if(E.debug("publishToSession: loaded"),!$.session)return void 0;var i=setTimeout(function(){Ot(e)},O);$.once("publishComplete",function(){clearTimeout(i)}),K.set("PublishingToSession");var a=[],s=n&&Y&&Y.video();return s&&a.push(new N({id:"video1",type:"video",active:mt.publishVideo,orientation:B.ROTATED_NORMAL,frameRate:mt.frameRate,width:s.videoWidth(),height:s.videoHeight(),source:pt?"screen":"camera",fitMode:mt.fitMode})),null!==mt.audioSource&&mt.audioSource!==!1&&a.push(new N({id:"audio1",type:"audio",active:mt.publishAudio})),E.debug("publishToSession: creating rumor stream id"),new r.Promise(function(n,i){e._.streamCreate(mt.name||"",t,mt.audioFallbackEnabled,a,mt.minVideoBitrate,function(e,t,r){return e?void i(o(e)):void n({streamId:t,message:r})})})}).then(function(e){var n=e.streamId,i=e.message;if(E.debug("publishToSession: rumor stream id created:",n,"(this is different from stream#created, which requires media to actually be flowing for mantis sessions)"),n!==t)throw new Error("streamId response does not match request");$.streamId=n,Z=I(i)});return r.all([c,i])},unpublishFromSession:function(e,t){if(!$.session||e.id!==$.session.id){var n=$.session&&$.session.id||"no session";return E.warn("The publisher "+lt+" is trying to unpublish from a session "+e.id+" it is not "+("attached to (it is attached to "+n+")")),$}return e.isConnected()&&$.stream&&(e._.streamDestroy($.stream.id),$.stream.off("destroyed",$.disconnect,$)),$.disconnect(),K.isAttemptingToPublish()&&At("Cancel",{reason:"unpublish"}),$.session=null,K.isDestroyed()||K.set("MediaBound"),et&&(et.stop(),et=null),wt("unpublish","Success",{sessionId:e.id}),$._.streamDestroyed(t),$},unpublishStreamFromSession:function(e,t,n){return Q&&e.id===Q?$._.unpublishFromSession(t,n):(E.warn("The publisher "+lt+" is trying to destroy a stream "+e.id+" that is not attached to it (it has "+(Q||"no stream")+" attached to it)"),$)},streamDestroyed:function(e){if(["reset"].indexOf(e)<0){var t=new y.StreamEvent("streamDestroyed",$.stream,e,!0),n=function(){t.isDefaultPrevented()||$.destroy()};$.dispatchEvent(t,n)}},archivingStatus:function(e){return $t.setArchivingStatus(e),e},webRtcStream:function(){return J},switchTracks:function(){return qt(mt.constraints).then(Xt).then(Rt).then(Zt)},getDataChannel:function(e,t,n){var i=ut[Object.keys(ut)[0]];return i?void i.then(function(i){i.getDataChannel(e,t,n)}):void n(new j.Error("Cannot create a DataChannel before there is a subscriber."))},iceRestart:function(e){bt().then(function(t){t.forEach(function(t){var n=t.remoteConnectionId;e||!t.iceConnectionStateIsConnected()?(Ct("Attempt",{remoteConnectionId:n}),t.iceRestart()):E.debug("Publisher: Skipping ice restart for "+n+", we are connected.")})})},getState:function(){return K},demoOnlyCycleVideo:function(){var e=0;return function(){return e+=1,r.resolve().then(function(){return U.mediaDevices.enumerateDevices()}).then(function(t){var n=t.filter(function(e){return"videoinput"===e.kind}),i=n[e%n.length];return G.emit("streamDestroy"),U.mediaDevices.getUserMedia({audio:!1,video:{deviceId:{exact:i.deviceId}}})}).then(function(e){var t=J.getVideoTracks()[0],n=e.getVideoTracks()[0];return bt().then(function(e){return r.all(e.map(function(e){return e._demoOnlyFindAndReplaceTrack(t,n)}))}).then(function(){J.addTrack(n),J.removeTrack(t),("Firefox"===j.env.name||"Safari"===j.env.name)&&($.videoElement().srcObject=null,$.videoElement().srcObject=J),G.emit("streamChange")})})}}(),testOnlyGetFramesEncoded:function(){return bt().then(function(e){var t=e[0];return t._testOnlyGetFramesEncoded()})}},this.detectDevices=function(){E.warn("Publisher.detectDevices() is not implemented.")},this.detectMicActivity=function(){E.warn("Publisher.detectMicActivity() is not implemented.")},this.getEchoCancellationMode=function(){return E.warn("Publisher.getEchoCancellationMode() is not implemented."),"fullDuplex"},this.setMicrophoneGain=function(){E.warn("Publisher.setMicrophoneGain() is not implemented.")},this.getMicrophoneGain=function(){return E.warn("Publisher.getMicrophoneGain() is not implemented."),.5},this.setCamera=function(){E.warn("Publisher.setCamera() is not implemented.")},this.setMicrophone=function(){E.warn("Publisher.setMicrophone() is not implemented.")},this.guid=function(){return lt},this.videoElement=function(){var e=Y&&Y.video();return e?e.domElement():null},this.setStream=Wt,this.isWebRTC=!0,this.isLoading=function(){return Y&&Y.loading()},this.videoWidth=function(){var e=Y&&Y.video();return e?e.videoWidth():void 0},this.videoHeight=function(){var e=Y&&Y.video();return e?e.videoHeight():void 0},K=new D(St),this.accessAllowed=!1};return V}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common-js-helpers/OTHelpers.js":218,"../../helpers/connectivity_attempt_pinger.js":246,"../../helpers/device_helpers.js":252,"../../helpers/get_user_media.js":258,"../../helpers/otError.js":273,"../../helpers/otProperties.js":274,"../../helpers/video_orientation.js":285,"../../helpers/widget_view.js":287,"../../otplugin/otplugin.js":396,"../Errors.js":289,"../analytics.js":290,"../api_key.js":292,"../environment_loader.js":308,"../events.js":309,"../exception_codes.js":310,"../interpretPeerConnectionError.js":313,"../interval_runner.js":314,"../logging.js":315,"../messaging/raptor/parse_ice_servers.js":321,"../ot_error_class.js":337,"../peer_connection/publisher_peer_connection.js":347,"../screensharing/screen_sharing.js":372,"../session/objects.js":376,"../stream_channel.js":379,"../system_requirements.js":386,"./calculateCapableSimulcastStreams.js":358,"./createChromeMixin.js":359,"./generateConstraintInfo.js":360,"./max_delay.js":363,"./microphone.js":364,"./state.js":366,bluebird:2,events:3,"lodash/assign":142,"lodash/capitalize":145,"lodash/cloneDeep":147,"lodash/pick":176,uuid:201}],362:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.Errors||e("../Errors.js"),i=t.ExceptionCodes||e("../exception_codes.js"),r=t.logging||e("../logging.js"),o=t.otError||e("../../helpers/otError.js")(),a=t.OTHelpers||e("../../common-js-helpers/OTHelpers.js"),s=t.Publisher||e("./index.js")(),c=t.sessionObjects||e("../session/objects.js");return function(e,t,l){r.debug("OT.initPublisher("+e+")"),"string"!=typeof e||document.getElementById(e)||(e=t,t=l,l=arguments[3]),"function"==typeof e?(l=e,t=void 0,e=void 0):a.isObject(e)&&!a.isElementNode(e)&&(l=t,t=e,e=void 0),"function"==typeof t&&(l=t,t=void 0);var u=void 0;t&&!a.isObject(t)&&(u="properties argument to Publisher constructor, if provided, should be an object",t=void 0),t&&t.insertDefaultUI===!1&&e&&(u="You cannot specify a target element if insertDefaultUI is false");var d=new s(t||{});c.publishers.add(d);var p=function(){l&&a.isFunction(l)&&(l.apply(void 0,arguments),l=void 0)};void 0!==u&&(r.error(u),p(o(n.INVALID_PARAMETER,new Error(u),i.INVALID_PARAMETER)));var f=function(e){d.off("publishComplete",h),p(e)},h=function(e){d.off("initSuccess",f),e&&p(e)};return d.once("initSuccess",f),d.once("publishComplete",h),d.publish(e),d}}},{"../../common-js-helpers/OTHelpers.js":218,"../../helpers/otError.js":273,"../Errors.js":289,"../exception_codes.js":310,"../logging.js":315,"../session/objects.js":376,"./index.js":361}],363:[function(e,t){"use strict";t.exports=function(){var e=Math.random();return e>.75?3e4:e>.5?25e3:e>.25?2e4:15e3}},{}],364:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.OTHelpers||e("../../common-js-helpers/OTHelpers.js");return function(e,t){var i=void 0;n.defineProperties(this,{muted:{get:function(){return i},set:function(t){if(i!==t){i=t;for(var n=e.getAudioTracks(),r=0,o=n.length;o>r;++r)n[r].enabled=!i}}}}),this.muted(void 0!==t?t===!0:e.getAudioTracks().length?!e.getAudioTracks()[0].enabled:!1)}}},{"../../common-js-helpers/OTHelpers.js":218}],365:[function(e,t){"use strict";function n(e){return e._inject&&e._inject.logging||l}function i(e,t,n,i,r){if(void 0===t)return void 0;var o=n(t);return o||r.warn("Invalid "+e+" passed to the Publisher. Got: "+t+", expecting one of "+i),o}function r(e,t){var i=n(t),r=function(){var n=t["publish"+c(e)];return void 0!==n?Boolean(n):!0}(),o=function(){var n=t[e+"Source"];return void 0===n?!0:null===n||n===!1?!1:"object"===("undefined"==typeof n?"undefined":a(n))?"string"!=typeof n.deviceId?(i.warn("Invalid "+e+"Source passed to Publisher. Expected either a device ID or device."),!0):n.deviceId:"string"!=typeof n?(i.warn("Ignoring invalid "+e+"Source parameter"),!0):n}();return"audio"===e&&t.isScreenSharing&&o!==!1&&(n(t).warn("Invalid audioSource passed to Publisher - when using screen sharing no audioSource may be used"),o=!1),{source:o,publish:r}}function o(e,t){return"Chrome"===e.name&&-1!==e.userAgent.indexOf("Mac OS X")&&1===t?2:t}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=e("assert"),c=e("lodash/capitalize"),l=e("../logging.js"),u={"320x240":{width:320,height:240},"320x180":{width:320,height:180},"640x480":{width:640,height:480},"640x360":{width:640,height:360},"1280x720":{width:1280,height:720},"1280x960":{width:1280,height:960}},d=[1,7,15,30];t.exports=function(e){var t=n(e),a=e.env||{};e.isScreenSharing&&s(e.usingOptionalMandatoryStyle,"Screensharing only uses optional-mandatory constraints right now");var c=void 0;return e.disableAudioProcessing&&"Firefox"===a.name&&(c={mozAutoGainControl:!1,mozNoiseSupression:!1}),{isScreenSharing:e.isScreenSharing,audio:r("audio",e),video:r("video",e),usingOptionalMandatoryStyle:e.usingOptionalMandatoryStyle,enableRenegotiation:e.enableRenegotiation,disableAudioProcessing:e.disableAudioProcessing,prefixedAudioConstraints:c,videoDimensions:i("resolution",e.resolution,function(e){return u[e]},'"'+Object.keys(u).join('", "')+'"',t),frameRate:o(a,i("frameRate",e.frameRate,function(e){return-1!==d.indexOf(e)?e:void 0},d.join(","),t)),maxResolution:function(){if(void 0===e.maxResolution)return e.isScreenSharing?{width:1920,height:1920}:void 0;var n={width:e.maxResolution.width,height:e.maxResolution.height};return Object.keys(n).forEach(function(e){var i=n[e];("number"!=typeof i||i>1920)&&(t.warn("Invalid maxResolution passed to the Publisher. maxResolution."+e+" must be less than or equal to 1920"),n[e]=1920)}),n}()}}},{"../logging.js":315,assert:1,"lodash/capitalize":145}],366:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.generateSimpleStateMachine||e("../generate_simple_state_machine.js")(),i=["NotPublishing","GetUserMedia","BindingMedia","MediaBound","PublishingToSession","Publishing","Failed","Destroyed"],r={NotPublishing:["NotPublishing","GetUserMedia","Destroyed"],GetUserMedia:["BindingMedia","Failed","NotPublishing","Destroyed"],BindingMedia:["MediaBound","Failed","NotPublishing","Destroyed"],MediaBound:["NotPublishing","PublishingToSession","Failed","Destroyed"],PublishingToSession:["NotPublishing","Publishing","Failed","Destroyed","MediaBound"],Publishing:["NotPublishing","MediaBound","Failed","Destroyed"],Failed:["Destroyed"],Destroyed:[]},o="NotPublishing",a=n(o,i,r);return a.prototype.isDestroyed=function(){return"Destroyed"===this.current},a.prototype.isAttemptingToPublish=function(){return-1!==["GetUserMedia","BindingMedia","MediaBound","PublishingToSession"].indexOf(this.current)},a.prototype.isPublishing=function(){return"Publishing"===this.current},a}},{"../generate_simple_state_machine.js":311}],367:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.analytics||e("./analytics.js"),i=t.errors||e("./Errors.js"),r=t.ExceptionCodes||e("./exception_codes.js"),o=t.OTHelpers||e("../common-js-helpers/OTHelpers.js"),a=t.otError||e("../helpers/otError.js")(),s=t.sessionObjects||e("./session/objects.js"),c=t.uuid||e("uuid");return function(e){function t(t){t?e&&!p&&(e(a(i.REPORT_ISSUE_FAILED,new Error("Error calling OT.reportIssue(). Check the client's network connection."),r.REPORT_ISSUE_ERROR)),p=!0):(d++,d>=u&&e&&!p&&e(null,l))}var l=c(),u=s.sessions.length(),d=0,p=!1,f={action:"ReportIssue",payload:{reportIssueId:l}};0===u?n.logEvent(f,null,t):s.sessions.forEach(function(e){var i=o.extend({sessionId:e.sessionId,partnerId:e.sessionInfo?e.sessionInfo.partnerId:null,p2p:e.sessionInfo?e.sessionInfo.p2pEnabled:null,messagingServer:e.sessionInfo?e.sessionInfo.messagingServer:null},f);n.logEvent(i,null,t)})}}},{"../common-js-helpers/OTHelpers.js":218,"../helpers/otError.js":273,"./Errors.js":289,"./analytics.js":290,"./exception_codes.js":310,"./session/objects.js":376,uuid:201}],368:[function(e,t){(function(n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("uuid");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.global||n,a=t.Errors||e("../Errors.js"),s=t.otError||e("../../helpers/otError.js")(),c=!!o.navigator.webkitGetUserMedia&&!o.navigator.userAgent.match(/android/i)&&"undefined"!=typeof o.chrome;return{isSupportedInThisBrowser:c,autoRegisters:!1,extensionRequired:!0,getConstraintsShowsPermissionUI:!0,sources:{screen:!0,application:!1,window:!1,browser:!1},register:function(e,t){return 2===t?this.registerVersion2(e):this.registerVersion1(e)},registerVersion1:function(e){if(!e)throw new Error("initChromeScreenSharingExtensionHelper: extensionID is required.");var t=c,n={},l=void 0,u="com.tokbox.screenSharing."+e,d=function(e,t){var n={payload:t,from:"jsapi"};return n[u]=e,n},p=function(e,t){var i=void 0,o=r();return n[o]=function(){clearTimeout(i),i=null,e.apply(void 0,arguments)},t&&(i=setTimeout(function(){delete n[o],e(s(a.TIMEOUT,new Error("Timeout waiting for response to screensharing request.")))},t)),o},f=function(e){if(!e)throw new Error("isAvailable: callback is required.");if(!t)return void setTimeout(e.bind(null,!1));if(void 0!==l)setTimeout(e.bind(null,l));else{var n=p(function(t){l!==!0&&(l="extensionLoaded"===t),e(l)},2e3),i=d("isExtensionInstalled",{requestId:n});o.postMessage(i,"*")}},h=function(e,t,n){if(!n)throw new Error("getSourceId: callback is required");f(function(r){if(!r)return n(s(a.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));var c=p(function(e,r){if("object"===("undefined"==typeof e?"undefined":i(e))&&e.name&&e.stack){var o=e;n(o)}else"permissionDenied"===e?n(s(a.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):(t.video||(t.video={}),t.video.mandatory||(t.video.mandatory={}),t.video.mandatory.chromeMediaSource="desktop",t.video.mandatory.chromeMediaSourceId=r.sourceId,n(void 0,t))});return void o.postMessage(d("getSourceId",{requestId:c,source:e}),"*")})};return o.addEventListener("message",function(e){if(e.origin===o.location.origin&&null!=e.data&&"object"===i(e.data)&&"extension"===e.data.from){var t=e.data[u],r=e.data.payload;if(r&&r.requestId){var a=n[r.requestId];delete n[r.requestId],a&&a(t,r)}"extensionLoaded"===t&&(l=!0)}}),{extensionAPIVersion:1,extensionID:e,isInstalled:f,getConstraints:h}},registerVersion2:function(e){var t=c&&"undefined"!=typeof o.chrome.runtime,n=function(n){if(!n)throw new Error("isAvailable: callback is required.");return t?void o.chrome.runtime.sendMessage(e,{type:"isInstalled"},null,function(e){setTimeout(n.bind(null,!!e))}):void setTimeout(n.bind(null,!1))},i=function(t,i,r){if(!r)throw new Error("getSourceId: callback is required");n(function(n){return n?void o.chrome.runtime.sendMessage(e,{type:"getSourceId",source:t},null,function(e){"permissionDenied"===e.error?r(s(a.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):e.error?r(new Error("UnexpectError: "+e.error)):(i.video||(i.video={}),i.video.mandatory||(i.video.mandatory={}),i.video.mandatory.chromeMediaSource="desktop",i.video.mandatory.chromeMediaSourceId=e.sourceId,r(void 0,i))}):r(s(a.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")))})};return{extensionAPIVersion:2,extensionID:e,isInstalled:n,getConstraints:i}}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../helpers/otError.js":273,"../Errors.js":289,uuid:201}],369:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null;try{n=t.desktopCapturer||e("electron").desktopCapturer}catch(i){}return{isSupportedInThisBrowser:null!==n,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!0,window:!0,browser:!0},register:function(){return{isInstalled:function(e){return e(!0)},getConstraints:function(e,t,i){n.getSources({types:[e]},function(t,n){if(t)return void i(t);var r=n[0];return r?void i(void 0,{audio:!1,video:{mandatory:{chromeMediaSource:e,chromeMediaSourceId:r.id}}}):void i(new Error("Could not find Electron source for screensharing"))})}}}}}},{}],370:[function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("../../common-js-helpers/OTHelpers.js");t.exports={isSupportedInThisBrowser:"Firefox"===i.env.name,autoRegisters:!0,extensionRequired:!1,extensionInstalled:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:"Firefox"===i.env.name&&i.env.version>=34,window:"Firefox"===i.env.name&&i.env.version>=34,browser:"Firefox"===i.env.name&&i.env.version>=38},register:function(){return{isInstalled:function(e){e("object"===("undefined"==typeof OTScreenSharing?"undefined":n(OTScreenSharing)))
},getConstraints:function(e,t,n){t.video={mediaSource:e},t.browserWindow&&(t.video.browserWindow=t.browserWindow,delete t.browserWindow),"undefined"!=typeof t.scrollWithPage&&(t.video.scrollWithPage=t.scrollWithPage,delete t.scrollWithPage),n(void 0,t)}}}}},{"../../common-js-helpers/OTHelpers.js":218}],371:[function(e,t){"use strict";var n=e("../../otplugin/otplugin.js");t.exports={isSupportedInThisBrowser:n.isSupported(),autoRegisters:!0,extensionRequired:!0,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:!0,browser:!1},register:function(){return{isInstalled:function(e){e(n.isInstalled())},getConstraints:function(e,t,n){t.video.mandatory.chromeMediaSource=e,n(void 0,t)}}}}},{"../../otplugin/otplugin.js":396}],372:[function(e,t){"use strict";var n=e("bluebird");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.chromeExtensionHelper||e("./chrome_extension_helper.js")(),r=t.electronExtensionHelper||e("./electron_extension_helper.js")(),o=t.Errors||e("../Errors.js"),a=t.firefoxExtensionHelper||e("./firefox_extension_helper.js"),s=t.ieExtensionHelper||e("./ie_extension_helper.js"),c=t.otError||e("../../helpers/otError.js")(),l=t.OTHelpers||e("../../common-js-helpers/OTHelpers.js"),u={};u.extensionByKind={},u.extensionClasses={},u.registerExtensionHelper=function(e,t){u.extensionClasses[e]=t,t.autoRegisters&&t.isSupportedInThisBrowser&&u.registerExtension(e)},u.registerExtension=function(e){var t=Array.prototype.slice.call(arguments,1);if(null==u.extensionClasses[e])throw new Error("Unsupported kind passed to OT.registerScreenSharingExtension");var n=u.extensionClasses[e].register.apply(u.extensionClasses[e],t);u.extensionByKind[e]=n};var d=function(){var e=l.find(Object.keys(u.extensionClasses),function(e){return u.extensionClasses[e].isSupportedInThisBrowser});return void 0===e?{}:{name:e,proto:u.extensionClasses[e],instance:u.extensionByKind[e]}};return u.pickHelper=function(){return d()},u.checkCapability=function(e){var t={supported:!1,extensionRequired:void 0,extensionRegistered:void 0,extensionInstalled:void 0,supportedSources:{}},n=d();return void 0===n.name?void setTimeout(e.bind(null,t)):(t.supported=!0,t.extensionRequired=n.proto.extensionRequired?n.name:void 0,t.supportedSources={screen:n.proto.sources.screen,application:n.proto.sources.application,window:n.proto.sources.window,browser:n.proto.sources.browser},n.instance?(t.extensionRegistered=t.extensionRequired?!0:void 0,void n.instance.isInstalled(function(n){t.extensionInstalled=t.extensionRequired||"Firefox"===l.env.name?n:void 0,e(t)})):(t.extensionRegistered=!1,t.extensionRequired&&(t.extensionInstalled=!1),void setTimeout(e.bind(null,t))))},u.registerExtensionHelper("chrome",i),u.registerExtensionHelper("electron",r),u.registerExtensionHelper("firefox",a),u.registerExtensionHelper("OpenTokPlugin",s),u.getConstraints=function(e){var t=e.onAccessDialogOpened||function(){},i=e.onAccessDialogClosed||function(){},r=e.videoSource,a=e.constraints;return new n.Promise(function(e,n){u.checkCapability(function(s){if(s.supported)if(s.extensionRegistered===!1)n(c(o.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,new Error("Screen Sharing support in this browser requires an extension, but one has not been registered.")));else if(s.extensionRequired&&s.extensionInstalled===!1)n(c(o.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Screen Sharing support in this browser requires an extension, but the extension is not installed.")));else{var l=u.pickHelper();l.proto.getConstraintsShowsPermissionUI&&t(),l.instance.getConstraints(r,a,function(t,r){l.proto.getConstraintsShowsPermissionUI&&i(),t?n(t):e(r)})}else n(c(o.SCREEN_SHARING_NOT_SUPPORTED,new Error("Screen Sharing is not supported in this browser")))})})},u}},{"../../common-js-helpers/OTHelpers.js":218,"../../helpers/otError.js":273,"../Errors.js":289,"./chrome_extension_helper.js":368,"./electron_extension_helper.js":369,"./firefox_extension_helper.js":370,"./ie_extension_helper.js":371,bluebird:2}],373:[function(e,t){(function(n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("events"),o=e("bluebird"),a=e("lodash/pick"),s=e("../peer_connection/testRemovingVideoCodecs.js");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=t.adaptIceServers||e("../messaging/raptor/parse_ice_servers.js").adaptIceServers,l=t.analytics||e("../analytics.js"),u=t.APIKEY||e("../api_key.js"),d=t.Capabilities||e("../capabilities.js"),p=t.ConnectivityAttemptPinger||e("../../helpers/connectivity_attempt_pinger.js"),f=t.convertAnvilErrorCode||e("../../helpers/convertAnvilErrorCode.js"),h=t.convertRumorError||e("../../helpers/convertRumorError.js"),g=t.Errors||e("../Errors.js"),m=t.Events||e("../events.js")(),v=t.ExceptionCodes||e("../exception_codes.js"),y=t.hasIceRestartsCapability||e("../../helpers/hasIceRestartsCapability.js"),_=t.logging||e("../logging.js"),b=t.omit||e("lodash/omit"),w=t.otError||e("../../helpers/otError.js")(),A=t.OTErrorClass||e("../ot_error_class.js"),C=t.OTHelpers||e("../../common-js-helpers/OTHelpers.js"),E=t.OTPlugin||e("../../otplugin/otplugin.js"),T=t.otProperties||e("../../helpers/otProperties.js"),S=t.Publisher||e("../publisher")(),x=t.RaptorSocket||e("../messaging/raptor/raptor_socket.js")(),j=t.SessionDispatcher||e("../messaging/raptor/session_dispatcher.js"),k=t.SessionInfo||e("./info.js")(),R=t.sessionObjects||e("./objects.js"),I=t.sessionTag||e("./tag.js"),O=t.socketCloseErrors||e("../messaging/rumor/socket_close_errors.js"),P=t.Subscriber||e("../subscriber")(),D=t.systemRequirements||e("../system_requirements.js"),L=t.uuid||e("uuid"),N=t.global||n,M=t.initPublisher||e("../publisher/init.js")({Publisher:S}),B=function(e,t,n){var B=this,F=function(e){return"string"==typeof e?B.streams.get(e)||{id:e}:e},U=n||{};C.eventing(this),this._tag=I,D.check()||D.upgrade(),null==t&&(t=e,e=null),this.id=t,this.sessionId=t;var H=void 0,V=void 0,W=void 0,z=void 0,$=void 0,G=void 0,Y=void 0,Q=!0,J=e,q=this,X=t,K=L(),Z=L(),et=_,tt=C.statable(this,["disconnected","connecting","connected","disconnecting"],"disconnected");this.connection=null,this.connections=new C.Collection,this.streams=new C.Collection,this.archives=new C.Collection;var nt=function(e){tt("disconnected"),e.code||(e.code=v.CONNECT_FAILED),et.error((e.name||"Unknown Error")+": "+e.message),this.trigger("sessionConnectFailed",e),A.handleJsException(e.message,e.code||v.CONNECT_FAILED,{session:this})},it=function(e){var t=e.reason;this.logEvent("Connect","Disconnected",{reason:e.reason});var n=new m.SessionDisconnectEvent("sessionDisconnected",t.replace("networkTimedout","networkDisconnected"));this.isConnected()&&this.disconnect(),ft(),ht.call(this,t);var i=function(){gt.call(this,n.reason),n.isDefaultPrevented()||mt.call(this,n.reason)}.bind(this);this.dispatchEvent(n,i)},rt=function(e){U.connectionEventsSuppressed||e.id.match(/^symphony\./)||this.dispatchEvent(new m.ConnectionEvent(m.Event.names.CONNECTION_CREATED,e))},ot=function(e,t){e.id.match(/^symphony\./)||e.id!==H.id()&&this.dispatchEvent(new m.ConnectionEvent(m.Event.names.CONNECTION_DESTROYED,e,t))},at=function(e){e.connection.id!==this.connection.id&&this.dispatchEvent(new m.StreamEvent(m.Event.names.STREAM_CREATED,e,null,!1))},st=function(e){var t=e.target,n=e.changedProperty,i=e.newValue;"videoDisableWarning"!==n&&"audioDisableWarning"!==n&&("videoDimensions"===n&&(i={width:i.width,height:i.height}),this.dispatchEvent(new m.StreamPropertyChangedEvent(m.Event.names.STREAM_PROPERTY_CHANGED,t,n,e.oldValue,i)))},ct=function(e,t){if(e.connection.id===this.connection.id)return void R.publishers.where({streamId:e.id}).forEach(function(n){n._.unpublishStreamFromSession(e,this,t)},this);var n=new m.StreamEvent("streamDestroyed",e,t,!0),i=function(){n.isDefaultPrevented()||R.subscribers.where({streamId:e.id}).forEach(function(e){e.session.id===this.id&&e.stream&&e.destroy("streamDestroyed")},this)}.bind(this);this.dispatchEvent(n,i)},lt=function(e){this.dispatchEvent(new m.ArchiveEvent("archiveStarted",e))},ut=function(e){this.dispatchEvent(new m.ArchiveEvent("archiveDestroyed",e))},dt=function(e){var t=e.target,n=e.changedProperty,i=e.newValue;this.dispatchEvent("status"===n&&"stopped"===i?new m.ArchiveEvent("archiveStopped",t):new m.ArchiveEvent("archiveUpdated",t))},pt=function(){q.token=null,W=null,tt("disconnected"),q.connection=null,q.capabilities=new d([]),q.connections.destroy(),q.streams.destroy(),q.archives.destroy()},ft=function(){Z=L(),pt()},ht=function(e){R.publishers.where({session:this}).forEach(function(t){t.disconnect(e)}),R.subscribers.where({session:this}).forEach(function(e){e.disconnect()})},gt=function(e){R.publishers.where({session:this}).forEach(function(t){t._.streamDestroyed(e)})},mt=function(e){R.subscribers.where({session:this}).forEach(function(t){t.destroy(e)})},vt=function(){function e(e,t){switch(e){case"WebSocketConnection":var n=C.find(Object.keys(O.codes),function(e){return O.codes[e]===t});if(n)return g["SOCKET_"+n];break;case"ConnectToSession":case"GetSessionState":switch(t){case v.CONNECT_FAILED:return g.CONNECT_FAILED;case v.UNEXPECTED_SERVER_RESPONSE:return g.UNEXPECTED_SERVER_RESPONSE;case v.CONNECTION_LIMIT_EXCEEDED:return g.CONNECTION_LIMIT_EXCEEDED}}return void 0}var t=this;et.debug("OT.Session: connecting to Raptor");var n=this.sessionInfo.messagingURL,i=T.symphonyAddresss||this.sessionInfo.symphonyAddress;H=new x(Z,K,n,i,j(this,U));var r=a(U,["connectionEventsSuppressed"]);H.connect(W,this.sessionInfo,r,function(n,i){if(n){var r=b(n,["code","message","reason"]),o=void 0;if("ConnectToSession"===n.reason||"GetSessionState"===n.reason){var a=h(n);n.code=a.code,n.message=a.message,t.logEvent("Connect","Failure",null,{failureReason:n.reason,failureCode:n.code,failureMessage:n.message,socketId:n.socketId})}(n.code||n.message||n.reason)&&(o={failureCode:n.code,failureMessage:n.message,failureReason:n.reason}),H=void 0,t.logConnectivityEvent("Failure",r,o);var s=e(n.reason,n.code);return s&&(n=w(s,new Error(n.message),n.code)),void nt.call(t,n)}et.debug("OT.Session: Received session state from Raptor",i),t.connection=t.connections.get(H.id()),t.connection&&(t.capabilities=t.connection.permissions),tt("connected"),t.logConnectivityEvent("Success",{connectionId:t.connection.id}),t.connection.on("destroyed",it,t),t.dispatchEvent(new m.SessionConnectEvent(m.Event.names.SESSION_CONNECTED),function(){t.connections.on({add:rt,remove:ot},t),t.streams.on({add:at,remove:ct,update:st},t),t.archives.on({add:lt,remove:ut,update:dt},t),t.connections._triggerAddEvents(),t.streams._triggerAddEvents(),t.archives._triggerAddEvents()})})},yt=function(){function e(e){switch(e){case v.ANVIL_BADLY_FORMED_RESPONSE:return g.BADLY_FORMED_RESPONSE;case v.ANVIL_INVALID_HTTP_STATUS:return g.INVALID_HTTP_STATUS;case v.ANVIL_XDOMAIN_OR_PARSING_ERROR:return g.XDOMAIN_OR_PARSING_ERROR;case v.ANVIL_UNKNOWN_HTTP_ERROR:return g.UNKNOWN_HTTP_ERROR;case v.ANVIL_UNEXPECTED_ERROR_CODE:return g.UNEXPECTED_ERROR_CODE;case v.ANVIL_EMPTY_RESPONSE_BODY:return g.EMPTY_RESPONSE_BODY;case v.ANVIL_CONNECT_FAILED:return g.CONNECT_FAILED;case v.AUTHENTICATION_ERROR:return g.AUTHENTICATION_ERROR;case v.INVALID_SESSION_ID:return g.INVALID_SESSION_ID;case v.TERMS_OF_SERVICE_FAILURE:return g.TERMS_OF_SERVICE_FAILURE;case v.UNEXPECTED_SERVER_RESPONSE:return g.UNEXPECTED_SERVER_RESPONSE;default:return void 0}}var n=this;this.is("connecting")&&(this.logEvent("SessionInfo","Attempt"),k.get(t,W,Z).then(_t,function(t){var i=e(t.code);if(t.code=f(t.code),n.logConnectivityEvent("Failure",null,{failureReason:"GetSessionInfo",failureCode:t.code||"No code",failureMessage:t.message}),i){var r=t.message+(t.code?" ("+t.code+")":"");t=w(i,new Error(r),t.code)}nt.call(n,t)}))},_t=function(e){if(E.hasOwnProperty("settings")&&(E.settings.usePreviousDeviceSelection=e.rememberDeviceChoiceIE),this.is("connecting")){this.sessionInfo=e,this._.setIceServers(this.sessionInfo.iceServers),z=e.p2pEnabled,$=e.messagingServer,this.logEvent("SessionInfo","Success",null,{features:{reconnection:C.castToBoolean(e.reconnection),renegotiation:C.castToBoolean(y()&&e.renegotiation),simulcast:void 0===e.simulcast?!1:e.simulcast&&"Chrome"===C.env.name}},{messagingServer:e.messagingServer});var t=T.sessionInfoOverrides;if(null!=t&&"object"===("undefined"==typeof t?"undefined":i(t))&&(this.sessionInfo=C.defaults(t,this.sessionInfo)),this.sessionInfo.partnerId&&this.sessionInfo.partnerId!==J){this.apiKey=this.sessionInfo.partnerId,J=this.sessionInfo.partnerId;var n="Authentication Error: The API key does not match the token or session.";this.logEvent("SessionInfo","Failure",null,{failureCode:v.AUTHENTICATION_ERROR,failureReason:"Authentication",failureMessage:n}),nt.call(this,w(g.AUTHENTICATION_ERROR,new Error(n),v.AUTHENTICATION_ERROR))}else vt.call(this)}}.bind(this),bt=function(e){return B.capabilities.permittedTo(e)},wt=function(e,t){_.error(e.name+": "+e.message),t(e),A.handleJsException(e.message,e.code,{session:q})};this.logEvent=function(e,t,n,i){var r={action:e,variation:t,payload:n,sessionId:X,messagingServer:$,p2p:z,partnerId:J};r.connectionId=Z,i&&(r=C.extend(i,r)),l.logEvent(r)},this.logConnectivityEvent=function(e,t,n){if("Attempt"===e||!V){G=(new Date).getTime();var i={action:"Connect",sessionId:X,p2p:this.sessionInfo?this.sessionInfo.p2pEnabled:null,messagingServer:this.sessionInfo?this.sessionInfo.messagingServer:null,partnerId:J};this.connection&&this.connection.id?i=this.connection.id:Z&&(i.connectionId=Z),V=new p(i)}V.setVariation(e),("Failure"===e||"Success"===e||"Cancel"===e)&&(n||(n={}),C.extend(n,{attemptDuration:(new Date).getTime()-G})),this.logEvent("Connect",e,t,n)},this.connect=function(t){arguments.length>1&&("string"==typeof arguments[0]||"number"==typeof arguments[0])&&"string"==typeof arguments[1]&&(null==e&&(J=t.toString()),t=arguments[1]);var n=arguments[arguments.length-1];if(this.is("connecting","connected"))return et.warn("OT.Session: Cannot connect, the session is already "+this.state),this;if(pt(),tt("connecting"),this.token=!C.isFunction(t)&&t,W=!C.isFunction(t)&&t,Q?Q=!1:K=L(),n&&C.isFunction(n)&&(this.once("sessionConnected",n.bind(null,void 0)),this.once("sessionConnectFailed",n)),null==J||C.isFunction(J))return setTimeout(nt.bind(this,w(g.AUTHENTICATION_ERROR,new Error("API Key is undefined. You must pass an API Key to initSession."),v.AUTHENTICATION_ERROR))),this;if(this.logConnectivityEvent("Attempt"),!X||C.isObject(X)||Array.isArray(X)){var i=void 0;return X?(i="SessionID is not a string. You must use string as the session ID passed into OT.initSession().",X=X.toString()):i="SessionID is undefined. You must pass a sessionID to initSession.",setTimeout(nt.bind(this,w(g.INVALID_SESSION_ID,new Error(i),v.INVALID_SESSION_ID))),this.logConnectivityEvent("Failure",null,{failureReason:"ConnectToSession",failureCode:v.INVALID_SESSION_ID,failureMessage:i}),this}return this.apiKey=J.toString(),J=J.toString(),0===u.value.length&&(u.value=J),yt.call(this),this};var At=function(e){H&&H.isNot("disconnected")?H.isNot("disconnecting")&&(tt("disconnecting"),H.disconnect(e)):ft()};this.disconnect=function(e){At(void 0!==e?e:!0)},this.destroy=function(e){this.streams.destroy(),this.connections.destroy(),this.archives.destroy(),At("unloaded"!==e)},this.publish=function(e,t,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),n=n||function(){},this.isNot("connected"))return l.logError(1010,"OT.exception","We need to be connected before you can publish",null,{action:"Publish",variation:"Failure",failureReason:"unconnected",failureCode:v.NOT_CONNECTED,failureMessage:"We need to be connected before you can publish",sessionId:X,streamId:e&&e.stream?e.stream.id:null,p2p:this.sessionInfo?this.sessionInfo.p2pEnabled:void 0,messagingServer:this.sessionInfo?this.sessionInfo.messagingServer:null,partnerId:J}),wt(w(g.NOT_CONNECTED,new Error("We need to be connected before you can publish"),v.NOT_CONNECTED),n),null;if(!bt("publish")){var i="This token does not allow publishing. The role must be at least `publisher` to enable this functionality",r={failureReason:"Permission",failureCode:v.UNABLE_TO_PUBLISH,failureMessage:i};return this.logEvent("Publish","Failure",null,r),wt(w(g.PERMISSION_DENIED,new Error(i),v.UNABLE_TO_PUBLISH),n),null}if(!e||"string"==typeof e||C.isElementNode(e))e=M(e,t);else{if(!(e instanceof S))return void wt(w(g.INVALID_PARAMETER,new Error("Session.publish :: First parameter passed in is neither a string nor an instance of the Publisher"),v.UNABLE_TO_PUBLISH),n);"session"in e&&e.session&&"sessionId"in e.session&&et.warn(e.session.sessionId===this.sessionId?"Cannot publish "+e.guid()+" again to "+this.sessionId+". Please call session.unpublish(publisher) first.":"Cannot publish "+e.guid()+" publisher already attached to "+e.session.sessionId+". Please call session.unpublish(publisher) first.")}return e._.publishToSession(this)["catch"](function(e){throw e.message="Session.publish :: "+e.message,et.error(e.code,e.message),e}).then(function(){return e}).asCallback(n),e},this.unpublish=function(e){return e?void e._.unpublishFromSession(this,"unpublished"):void et.error("OT.Session.unpublish: publisher parameter missing.")},this.subscribe=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0,n=void 0),"function"==typeof n&&(i=n,n=void 0),i=i||function(){},!this.connection||!this.connection.connectionId)return void wt(w(g.NOT_CONNECTED,new Error("Session.subscribe :: Connection required to subscribe"),v.UNABLE_TO_SUBSCRIBE),i);if(!e)return void wt(w(g.INVALID_PARAMETER,new Error("Session.subscribe :: stream cannot be null"),v.UNABLE_TO_SUBSCRIBE),i);if(!e.hasOwnProperty("streamId"))return void wt(w(g.INVALID_PARAMETER,new Error("Session.subscribe :: invalid stream object"),v.UNABLE_TO_SUBSCRIBE),i);if(n&&n.insertDefaultUI===!1&&t)return void wt(w(g.INVALID_PARAMETER,new Error("You cannot specify a target element if insertDefaultUI is false"),v.INVALID_PARAMETER),i);t&&t.insertDefaultUI===!1&&(n=t,t=void 0);var r=new P(t,C.extend(n||{},{stream:e,session:this}),function(e){return e?void wt(e,i):void i(null,r)});return R.subscribers.add(r),r},this.unsubscribe=function(e){if(!e){var t="OT.Session.unsubscribe: subscriber cannot be null";throw et.error(t),new Error(t)}return e.stream?(et.debug("OT.Session.unsubscribe: subscriber "+e.id),e.destroy(),!0):(et.warn("OT.Session.unsubscribe:: tried to unsubscribe a subscriber that had no stream"),!1)},this.getSubscribersForStream=function(e){return R.subscribers.where({streamId:e.id})},this.getPublisherForStream=function(e){var t=void 0,n=void 0;if("string"==typeof e)t=e;else{if("object"!==("undefined"==typeof e?"undefined":i(e))||!e||!e.hasOwnProperty("id"))throw n="Session.getPublisherForStream :: Invalid stream type",et.error(n),new Error(n);t=e.id}return R.publishers.where({streamId:t})[0]},this._={getSocket:function(){return H},reconnecting:function(){this.dispatchEvent(new m.SessionReconnectingEvent)}.bind(this),reconnected:function(){this.dispatchEvent(new m.SessionReconnectedEvent),this.sessionInfo.renegotiation&&(R.publishers.where({session:this}).forEach(function(e){e._.iceRestart()}),R.subscribers.where({session:this}).forEach(function(e){e._.iceRestart()}))}.bind(this),dispatchSignal:function(e,t,n){var i=new m.SignalEvent(t,n,e);i.target=this,this.trigger(m.Event.names.SIGNAL,i),t&&this.dispatchEvent(i)}.bind(this),subscriberChannelUpdate:function(e,t,n,i){return H.subscriberChannelUpdate(e.id,t.widgetId,n.id,i)},streamCreate:function(e,t,n,i,r,o){H.streamCreate(e,t,n,i,r,void 0,o)},streamDestroy:function(e){H.streamDestroy(e)},streamChannelUpdate:function(e,t,n){H.streamChannelUpdate(e.id,t.id,n)},setSocket:function(e){H=e},setLogging:function(e){et=e},setState:tt,setIceServers:function(e){e&&(Y={iceServers:c(e),timestamp:Date.now()})},getIceServers:function(){var e=Y?Date.now()-Y.timestamp:1/0,n=864e5,i=n-e,r=3e5;return i>r?o.resolve(Y.iceServers):W?k.get(t,W,Z).then(function(e){if(q._.setIceServers(e.iceServers),!Y)throw new Error("No ice servers provided by getSessionInfo");return Y.iceServers}):o.reject(new Error("Don't have a token for getting ice servers"))},getCodecFlags:function(){return{h264:q.sessionInfo.h264,vp9:q.sessionInfo.vp9,vp8:q.sessionInfo.vp8}},getVideoCodecsCompatible:function(e){return s({RTCPeerConnection:N.RTCPeerConnection,env:C.env,stream:e,codecFlags:q._.getCodecFlags()})},privateEvents:new r},this.signal=function(e,t){function n(e){switch(e){case 400:case 413:return g.INVALID_PARAMETER;case 429:return g.RATE_LIMIT_EXCEEDED;case 404:return g.NOT_FOUND;case 500:return g.NOT_CONNECTED;case 403:return g.PERMISSION_DENIED;case 2001:return g.UNEXPECTED_SERVER_RESPONSE;default:return void 0}}var i=e,r=t||function(){};if(C.isFunction(i)&&(r=i,i=null),this.isNot("connected")){var o="Unable to send signal - you are not connected to the session.";return void wt(w(g.NOT_CONNECTED,new Error(o),500),r)}H.signal(i,function(e){if(e){var t=n(e.code);return t&&(e=w(t,new Error(e.message),e.code)),void r(e)}r.apply(void 0,arguments)},this.logEvent),e&&e.data&&"string"!=typeof e.data&&et.warn("Signaling of anything other than Strings is deprecated. Please update the data property to be a string.")},this.forceDisconnect=function(e,t){if(this.isNot("connected")){var n="Cannot call forceDisconnect(). You are not connected to the session.";return void wt(w(g.NOT_CONNECTED,new Error(n),v.NOT_CONNECTED),t)}var i="string"==typeof e?e:e.id,r="Invalid Parameter. Check that you have passed valid parameter values into the method call.";if(!i)return void wt(w(g.INVALID_PARAMETER,new Error(r),v.INVALID_PARAMETER),t);var o="This token does not allow forceDisconnect. The role must be at least `moderator` to enable this functionality";return bt("forceDisconnect")?void H.forceDisconnect(i,function(e){e?wt(w(g.INVALID_PARAMETER,new Error(r),v.INVALID_PARAMETER),t):t&&C.isFunction(t)&&t.apply(void 0,arguments)}):void wt(w(g.PERMISSION_DENIED,new Error(o),v.UNABLE_TO_FORCE_DISCONNECT),t)},this.forceUnpublish=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=function(e){return wt(w(e.name,new Error(e.msg),e.code),t)},i={msg:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",code:v.INVALID_PARAMETER,name:g.INVALID_PARAMETER},r={msg:"Cannot call forceUnpublish(). You are not connected to the session.",code:v.NOT_CONNECTED,name:g.NOT_CONNECTED},o={msg:"This token does not allow forceUnpublish. The role must be at least `moderator` to enable this functionality",code:v.UNABLE_TO_FORCE_UNPUBLISH,name:g.PERMISSION_DENIED},a={msg:"The stream does not exist.",name:g.NOT_FOUND},s={msg:"An unexpected error occurred.",name:g.UNEXPECTED_SERVER_RESPONSE,code:v.UNEXPECTED_SERVER_RESPONSE};if(!e)return void n(i);if(B.isNot("connected"))return void n(r);var c=F(e);return bt("forceUnpublish")?void H.forceUnpublish(c.id,function(e){return e?void n("404"===e.code?a:"403"===e.code?o:s):void t(null)}):void n(o)},this.isConnected=function(){return B.is("connected")},this.capabilities=new d([])};return B}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common-js-helpers/OTHelpers.js":218,"../../helpers/connectivity_attempt_pinger.js":246,"../../helpers/convertAnvilErrorCode.js":247,"../../helpers/convertRumorError.js":248,"../../helpers/hasIceRestartsCapability.js":264,"../../helpers/otError.js":273,"../../helpers/otProperties.js":274,"../../otplugin/otplugin.js":396,"../Errors.js":289,"../analytics.js":290,"../api_key.js":292,"../capabilities.js":295,"../events.js":309,"../exception_codes.js":310,"../logging.js":315,"../messaging/raptor/parse_ice_servers.js":321,"../messaging/raptor/raptor_socket.js":323,"../messaging/raptor/session_dispatcher.js":325,"../messaging/rumor/socket_close_errors.js":335,"../ot_error_class.js":337,"../peer_connection/testRemovingVideoCodecs.js":354,"../publisher":361,"../publisher/init.js":362,"../subscriber":384,"../system_requirements.js":386,"./info.js":374,"./objects.js":376,"./tag.js":377,bluebird:2,events:3,"lodash/omit":174,"lodash/pick":176,uuid:201}],374:[function(e,t){"use strict";var n=e("lodash/defaults"),i=e("bluebird");t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.Anvil||e("../anvil.js")(),o=t.convertAnvilErrorCode||e("../../helpers/convertAnvilErrorCode.js"),a=t.ExceptionCodes||e("../exception_codes.js"),s=t.logging||e("../logging.js"),c=[0,600,1200],l=[a.CONNECT_FAILED,a.UNEXPECTED_SERVER_RESPONSE],u=function(e){s.log("SessionInfo Response:",e),this.sessionId=e.session_id,this.partnerId=e.partner_id,this.messagingServer=e.messaging_server_url,this.mediaServerName=e.media_server_hostname,this.messagingURL=e.messaging_url,this.symphonyAddress=e.symphony_address,this.iceServers=e.ice_servers;var t=n({},e.properties||{},{reconnection:!1,renegotiation:!1,h264:!0,vp9:!0,vp8:!0,rememberDeviceChoiceIE:!1,priorityVideoCodec:""});this.simulcast=t.simulcast,this.reconnection=t.reconnection,this.renegotiation=t.renegotiation,this.p2pEnabled=Boolean(t.p2p&&t.p2p.preference&&"enabled"===t.p2p.preference.value),this.rememberDeviceChoiceIE=t.rememberDeviceChoiceIE,this.priorityVideoCodec=t.priorityVideoCodec,this.h264=Boolean(t.h264),this.vp9=Boolean(t.vp9),this.vp8=Boolean(t.vp8),this.clientCandidates=t.clientCandidates,s.log("SessionInfo parsed:",this)};return u.get=function(e,t,n){var a=c.slice(),s=function d(i,s,c){return 0===a.length?void c(i):void r.get("session/"+e+"?extended=true",t,n).then(function(e){s(new u(e))},function(e){var t=o(e.code);l.indexOf(t)>-1?setTimeout(function(){d(e,s,c)},a.shift()):c(e)})};return new i.Promise(function(e,t){s(void 0,e,t)})},u}},{"../../helpers/convertAnvilErrorCode.js":247,"../anvil.js":291,"../exception_codes.js":310,"../logging.js":315,bluebird:2,"lodash/defaults":150}],375:[function(e,t){"use strict";t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.Session||e("./index.js")(),i=t.sessionObjects||e("./objects.js");return function(e,t,r){null==t&&(t=e,e=null),Array.isArray(t)&&1===t.length&&(t=t[0]);var o=i.sessions.get(t);return o||(o=new n(e,t,r),i.sessions.add(o)),o}}},{"./index.js":373,"./objects.js":376}],376:[function(e,t){"use strict";var n=e("../../common-js-helpers/OTHelpers.js"),i={};i.publishers=new n.Collection("guid"),i.subscribers=new n.Collection("widgetId"),i.sessions=new n.Collection,t.exports=i},{"../../common-js-helpers/OTHelpers.js":218}],377:[function(e,t){"use strict";t.exports={}},{}],378:[function(e,t){"use strict";var n=e("./logging.js"),i=e("../common-js-helpers/OTHelpers.js"),r=e("./session/objects.js"),o=e("./events.js")(),a=["name","archiving"];t.exports=function(e,t,s,c,l,u){var d=this,p=void 0;this.id=e,this.streamId=e,this.name=t,this.creationTime=Number(s),this.connection=c,this.channel=u,this.publisher=r.publishers.find({streamId:this.id}),i.eventing(this);var f=function(e,t,n,i){var r=t;switch(r){case"active":r="audio"===e.type?"hasAudio":"hasVideo",d[r]=i;break;case"disableWarning":if(r="audio"===e.type?"audioDisableWarning":"videoDisableWarning",d[r]=i,!d["audio"===e.type?"hasAudio":"hasVideo"])return;break;case"fitMode":r="defaultFitMode",d[r]=i;break;case"source":r="audio"===e.type?"audioType":"videoType",d[r]=i;break;case"videoDimensions":d.videoDimensions=i;break;case"orientation":case"width":case"height":return}d.dispatchEvent(new o.StreamUpdatedEvent(d,r,n,i))},h=function(){return d.publisher?d.publisher:r.subscribers.find(function(e){return e.stream&&e.stream.id===d.id&&e.session.id===l.id})},g=function(){return!d.publisher};this.getChannelsOfType=function(e){return d.channel.filter(function(t){return t.type===e})},this.getChannel=function(e){for(var t=0;t<d.channel.length;++t)if(d.channel[t].id===e)return d.channel[t];return null};var m=this.getChannelsOfType("audio")[0],v=this.getChannelsOfType("video")[0];this.hasAudio=null!=m&&m.active,this.hasVideo=null!=v&&v.active,this.videoType=v&&v.source,this.defaultFitMode=v&&v.fitMode,this.videoDimensions={},v&&(this.videoDimensions.width=v.width,this.videoDimensions.height=v.height,this.videoDimensions.orientation=v.orientation,v.on("update",f),this.frameRate=v.frameRate),m&&m.on("update",f),this.setChannelActiveState=function(e,t,n){var i={active:t};n&&(i.activeReason=n),y(e,i)},this.setVideoDimensions=function(e,t){y("video",{width:e,height:t,orientation:0})},this.setRestrictFrameRate=function(e){y("video",{restrictFrameRate:e})},this.setPreferredResolution=function(e){if(!g())return void n.warn("setPreferredResolution has no affect when called by a publisher");if(l.sessionInfo.p2pEnabled)return void n.warn("Stream.setPreferredResolution will not work in a P2P Session");if(!e||void 0!==e.width||void 0!==e.height){var t=d.getChannelsOfType("video")[0];if(t){if(e&&e.width){if(isNaN(parseInt(e.width,10)))throw new i.Error("stream preferred width must be an integer","Subscriber");t.preferredWidth=parseInt(e.width,10)}else t.preferredWidth=void 0;if(e&&e.height){if(isNaN(parseInt(e.height,10)))throw new i.Error("stream preferred height must be an integer","Subscriber");t.preferredHeight=parseInt(e.height,10)}else t.preferredHeight=void 0;l._.subscriberChannelUpdate(d,h(),t,{preferredWidth:t.preferredWidth||0,preferredHeight:t.preferredHeight||0})}}},this.getPreferredResolution=function(){var e=d.getChannelsOfType("video")[0];return e&&(e.preferredWidth||e.preferredHeight)?{width:e.preferredWidth,height:e.preferredHeight}:void 0},this.setPreferredFrameRate=function(e){if(!g())return void n.warn("setPreferredFrameRate has no affect when called by a publisher");if(l.sessionInfo.p2pEnabled)return void n.warn("Stream.setPreferredFrameRate will not work in a P2P Session");if(e&&isNaN(parseFloat(e)))throw new i.Error("stream preferred frameRate must be a number","Subscriber");var t=d.getChannelsOfType("video")[0];t&&(t.preferredFrameRate=e?parseFloat(e):void 0,l._.subscriberChannelUpdate(d,h(),t,{preferredFrameRate:t.preferredFrameRate||0}))},this.getPreferredFrameRate=function(){var e=d.getChannelsOfType("video")[0];return e?e.preferredFrameRate:void 0};var y=function(e,t){var n=void 0;if(d.publisher)n=function(e){l._.streamChannelUpdate(d,e,t)};else{var i=h();n=function(e){l._.subscriberChannelUpdate(d,i,e,t)}}d.getChannelsOfType(e).forEach(n)};this.destroyed=!1,this.destroyedReason=void 0,this.destroy=function(e,t){p=e||"clientDisconnected",d.destroyed=!0,d.destroyedReason=p,t!==!0&&d.dispatchEvent(new o.DestroyedEvent("destroyed",d,p))},this._={},this._.updateProperty=function(e,t){if(-1===a.indexOf(e))return void n.warn('Unknown stream property "'+e+'" was modified to "'+t+'".');var i=d[e],r=t;switch(e){case"name":d[e]=r;break;case"archiving":var s=h();d.publisher&&s&&s._.archivingStatus(r),d[e]=r}var c=new o.StreamUpdatedEvent(d,e,i,r);d.dispatchEvent(c)},this._.update=function(e){for(var t in e)e.hasOwnProperty(t)&&d._.updateProperty(t,e[t])},this._.updateChannel=function(e,t){d.getChannel(e).update(t)}}},{"../common-js-helpers/OTHelpers.js":218,"./events.js":309,"./logging.js":315,"./session/objects.js":376}],379:[function(e,t){"use strict";var n=e("../common-js-helpers/OTHelpers.js"),i=e("./logging.js"),r=e("../helpers/video_orientation.js")();t.exports=function(e){this.id=e.id,this.type=e.type,this.active=n.castToBoolean(e.active),this.orientation=e.orientation||r.ROTATED_NORMAL,e.frameRate&&(this.frameRate=parseFloat(e.frameRate)),e.preferredFrameRate&&(this.preferredFrameRate=parseFloat(e.preferredFrameRate)),e.preferredWidth&&(this.preferredWidth=parseInt(e.preferredWidth,10)),e.preferredHeight&&(this.preferredHeight=parseInt(e.preferredHeight,10)),this.width=parseInt(e.width,10),this.height=parseInt(e.height,10),this.source=e.source||"camera",this.fitMode=e.fitMode||"cover",n.eventing(this,!0),this.update=function(e){var t={},r={};for(var o in e)if(e.hasOwnProperty(o)){var a=this[o];switch(o){case"active":this.active=n.castToBoolean(e[o]);break;case"disableWarning":this.disableWarning=n.castToBoolean(e[o]);break;case"frameRate":this.frameRate=parseFloat(e[o],10);break;case"width":case"height":this[o]=parseInt(e[o],10),t[o]=this[o],r[o]=a;break;case"orientation":this[o]=e[o],t[o]=this[o],r[o]=a;break;case"fitMode":this[o]=e[o];break;case"source":this[o]=e[o];break;default:return i.warn("Tried to update unknown key "+o+" on "+this.type+" channel "+this.id),!1}this.trigger("update",this,o,a,this[o])}return Object.keys(t).length&&this.trigger("update",this,"videoDimensions",r,t),!0
}}},{"../common-js-helpers/OTHelpers.js":218,"../helpers/video_orientation.js":285,"./logging.js":315}],380:[function(e,t){"use strict";t.exports=function(e){return"http:"!==e.substr(0,5)&&"https:"!==e.substr(0,6)&&"data:image/png;base64,"!==e.substr(0,22)?"data:image/png;base64,"+e:e}},{}],381:[function(e,t){"use strict";var n=e("./fix_background_image_uri.js"),i=e("../logging.js"),r=e("./style.js"),o=e("./style_hash_log_filter.js");t.exports=function(e,t,a,s){if(!e.trigger)throw new Error("OT.StylableComponent is dependent on the mixin OTHelpers.eventing. Ensure that this is included in the object before StylableComponent.");s=s||function(){};var c=!1,l=function(t,n,i){i?e.trigger("styleValueChanged",t,n,i):e.trigger("styleValueChanged",t,n)};a===!1&&(t={buttonDisplayMode:"off",nameDisplayMode:"off",audioLevelDisplayMode:"off",videoDisabledDisplayMode:"off",audioBlockedDisplayMode:"off"},c=!0,s({showControls:!1}));var u=new r(t,l);e.getStyle=function(e){return u.get(e)},e.setStyle=function(e,t,r){if(c)return i.warn("Calling setStyle() has no effect because theshowControls option was set to false"),this;var a=void 0;return"string"!=typeof e?a=e:(a={},a[e]=t),a.backgroundImageURI&&(a.backgroundImageURI=n(a.backgroundImageURI)),u.setAll(a,r),s(o(a)),this}}},{"../logging.js":315,"./fix_background_image_uri.js":380,"./style.js":382,"./style_hash_log_filter.js":383}],382:[function(e,t){"use strict";var n=e("lodash/cloneDeep"),i=e("../logging.js");t.exports=function(e,t){var r=this,o={},a={buttonDisplayMode:["auto","mini","mini-auto","off","on"],nameDisplayMode:["auto","off","on"],audioLevelDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showSpeakerButton:null,showMicButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showArchiveStatus:[!0,!1],archiveStatusDisplayMode:["auto","off","on"],videoDisabledDisplayMode:["auto","off","on"],audioBlockedDisplayMode:["auto","off","on"]},s=function(e,t){var n=a[e];return void 0===n?!1:null===n?!0:-1!==n.indexOf(t)},c=function(e){switch(e){case"true":return!0;case"false":return!1;default:return e}};r.getAll=function(){return n(o)},r.get=function(e){return e?o[e]:r.getAll()},r.setAll=function(e,t){return Object.keys(e).forEach(function(n){r.set(n,e[n],t)}),r},r.set=function(e,n,a){i.debug("setStyle: "+e.toString());var l=void 0,u=c(n);return s(e,u)?(l=o[e],u!==l&&(o[e]=u,a||t(e,n,l)),r):(i.warn("Style.set::Invalid style property passed "+e+" : "+u),r)},e&&r.setAll(e,!0)}},{"../logging.js":315,"lodash/cloneDeep":147}],383:[function(e,t){"use strict";var n=e("lodash/cloneDeep");t.exports=function(e){var t=n(e);if(t.backgroundImageURI){var i=t.backgroundImageURI.split(":")[0];t.backgroundImageURI=-1!==["http","https","data"].indexOf(i)?i:"other"}return t}},{"lodash/cloneDeep":147}],384:[function(e,t){(function(n){"use strict";function i(e){return Math.max(0,Math.min(100,parseInt(e,10)))}function r(e){return void 0!==e.audioVolume?e.audioVolume:e.subscribeToAudio===!1?0:u}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("bluebird"),s=e("lodash/merge"),c=e("uuid"),l=e("events"),u=100;t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=t.analytics||e("../analytics.js"),p=t.audioContext||e("../../helpers/audio_context.js")(),f=t.AudioLevelMeter||e("../chrome/audio_level_meter.js"),h=t.AudioLevelTransformer||e("../audio_level_transformer"),g=t.BackingBar||e("../chrome/backing_bar.js"),m=t.Chrome||e("../chrome/chrome.js"),v=t.ConnectivityAttemptPinger||e("../../helpers/connectivity_attempt_pinger.js"),y=t.document||n.document,_=t.env||e("../../common-js-helpers/env.js"),b=t.Errors||e("../Errors.js"),w=t.Events||e("../events.js")(),A=t.ExceptionCodes||e("../exception_codes.js"),C=t.GetstatsAudioOutputLevelSampler||e("../../helpers/audio_level_samplers/getstats_audio_output_level_sampler"),E=t.getStatsHelpers||e("../peer_connection/get_stats_helpers.js"),T=t.hasAudioOutputLevelStatCapability||e("../../helpers/hasAudioOutputLevelStatCapability.js"),S=t.hasRemoteStreamsWithWebAudio||e("../../helpers/hasRemoteStreamsWithWebAudio.js"),x=t.interpretPeerConnectionError||e("../interpretPeerConnectionError.js")(),j=t.IntervalRunner||e("../interval_runner.js")(),k=t.logging||e("../logging.js"),R=t.Message||e("../messaging/raptor/message.js"),I=t.MuteButton||e("../chrome/mute_button.js")(),O=t.NamePanel||e("../chrome/name_panel.js"),P=t.otError||e("../../helpers/otError.js")(),D=t.OTErrorClass||e("../ot_error_class.js"),L=t.OTHelpers||e("../../common-js-helpers/OTHelpers.js"),N=t.otProperties||e("../../helpers/otProperties.js"),M=t.StylableComponent||e("../styling/stylable_component.js"),B=t.SubscriberPeerConnection||e("../peer_connection/subscriber_peer_connection.js")(),F=t.SubscribingState||e("./state.js"),U=t.VideoDisabledIndicator||e("../chrome/video_disabled_indicator.js"),H=t.AudioBlockedIndicator||e("../chrome/AudioBlockedIndicator.js"),V=t.VideoUnsupportedIndicator||e("../chrome/VideoUnsupportedIndicator.js"),W=t.watchFrameRate||e("../peer_connection/watchFrameRate.js"),z=t.WebaudioAudioLevelSampler||e("../../helpers/audio_level_samplers/webaudio_audio_level_sampler"),$=t.WidgetView||e("../../helpers/widget_view.js")(),G=e("../session/objects.js"),Y=3e4,Q=15e3,J=function q(e,t,T){function B(e){var t=J&&J.video();if(t)try{t.setAudioVolume(e)}catch(n){k.warn("setAudioVolume: "+n),0===yt&&(k.info("Using subscribeToAudio to mute Audio because setAudioVolume(0) failed"),Et.subscribeToAudio(!1))}X&&X.muteButton.muted(0===e)}var $=this,J=void 0,X=void 0,K=void 0,Z=void 0,et=void 0,tt=void 0,nt=void 0,it=void 0,rt=void 0,ot=void 0,at=void 0,st=void 0,ct=void 0,lt=void 0,ut=void 0,dt=void 0,pt=void 0,ft=!1,ht=c(),gt=e||ht,mt=t.session,vt=t.stream,yt=void 0,_t=void 0,bt=q.hasAudioOutputLevelStatCapability()||S(),wt=!1,At=void 0,Ct=w.Event.names.SUBSCRIBER_DISCONNECTED,Et=this,Tt={},St=null,xt=!1,jt=!1,kt={};kt.promise=new a.Promise(function(e,t){kt.resolve=e,kt.reject=t});var Rt=L.defaults({},t,{showControls:!0,testNetwork:!1,fitMode:vt.defaultFitMode||"cover",insertDefaultUI:!0});if(Rt.testNetwork&&mt.sessionInfo.p2pEnabled&&k.warn("You cannot test your network with a relayed session. Use a routed session."),"function"!=typeof T&&(T=function(){}),this.id=gt,this.widgetId=ht,this.session=mt,this.stream=Rt.stream,vt=Rt.stream,this.streamId=vt.id,!mt)return D.handleJsException("OT.Subscriber must be passed a session option",2e3,{session:mt,target:this}),null;L.eventing(this,!1),Et.once("subscribeComplete",T),bt&&this.on({"audioLevelUpdated:added":function(e){1===e&&ot&&ot.start()},"audioLevelUpdated:removed":function(e){0===e&&ot&&ot.stop()}});var It=function(){var e=[setTimeout(function(){Pt("Warning",{})},Q),setTimeout(function(){Ut(null,"OT.Subscriber failed to subscribe to a stream in a reasonable amount of time",tt,"ICEWorkflow")},Y)];return function(){e.forEach(function(e){clearTimeout(e)})}},Ot=function(e,t,n,i,r){var o=L.extend({action:e,variation:t,payload:n,streamId:vt?vt.id:null,sessionId:mt?mt.sessionId:null,connectionId:mt&&mt.isConnected()?mt.connection.connectionId:null,partnerId:mt&&mt.sessionInfo?mt.sessionInfo.partnerId:null,subscriberId:ht},i);("Failure"===t||"iceconnectionstatechange"===t&&"closed"===n)&&(o=L.extend(o,Tt));var a=[o];r&&a.push(r),d.logEvent.apply(d,a)},Pt=function(e,t,n){"Attempt"!==e&&ut||(lt=(new Date).getTime(),ut=new v({action:"Subscribe",sessionId:mt?mt.sessionId:null,connectionId:mt&&mt.isConnected()?mt.connection.connectionId:null,partnerId:mt.isConnected()?mt.sessionInfo.partnerId:null,p2p:mt&&mt.sessionInfo.p2pEnabled,messagingServer:mt&&mt.sessionInfo.messagingServer,subscriberId:ht,streamId:vt?vt.id:null})),ut.setVariation(e),("Failure"===e||"Success"===e||"Cancel"===e)&&(n||(n={}),L.extend(n,{attemptDuration:(new Date).getTime()-lt})),Ot("Subscribe",e,t,n)},Dt=function(e,t){Ot("ICERestart",e,t)},Lt=function(e){var t=e.parsedStats,n=void 0;J&&J.domElement?n=J.domElement:J&&J.video()&&J.video().domElement()&&(n=J.video().domElement());var i={widgetType:"Subscriber",width:n?Number(L.width(n).replace("px","")):null,height:n?Number(L.height(n).replace("px","")):null,audioTrack:st&&st.getAudioTracks().length>0,hasAudio:vt&&vt.hasAudio,subscribeToAudio:pt,audioVolume:this.getAudioVolume(),videoTrack:st&&st.getVideoTracks().length>0,hasVideo:vt&&vt.hasVideo,subscribeToVideo:Rt.subscribeToVideo,sessionId:mt?mt.sessionId:null,connectionId:mt?mt.connection.connectionId:null,mediaServerName:mt?mt.sessionInfo.mediaServerName:null,p2p:mt?mt.sessionInfo.p2pEnabled:!1,messagingServer:mt?mt.sessionInfo.messagingServer:null,apiServer:N.apiURL,congestionLevel:St,partnerId:mt?mt.apiKey:null,streamId:vt.id,subscriberId:ht,version:N.version,duration:Math.round((L.now()-nt)/1e3),remoteConnectionId:vt.connection.connectionId},r=L.extend(i,t);d.logQOS(r),this.trigger("qos",r)}.bind(this),Nt=function(e){k.error("OT.Subscriber State Change Failed: ",e.message),k.debug(e)},Mt=function(){!it.isSubscribing()&&J&&J.video()&&(ft=!0,xt||(xt=!0),k.debug("OT.Subscriber.onLoaded"),it.set("Subscribing"),nt=L.now(),J.loading(!1),X&&X.showAfterLoading(),wt&&vt.setRestrictFrameRate(!0),Z&&Z.audioOnly(J.audioOnly()),$.setAudioVolume(yt),Pt("Success",{}),$.trigger("subscribeComplete",null,$),$.trigger("loaded",$))},Bt=function(){k.debug("OT.Subscriber has been disconnected from the Publisher's PeerConnection"),it.isAttemptingToSubscribe()?(it.set("Failed"),this.trigger("subscribeComplete",P(b.DISCONNECTED,new Error("ClientDisconnected")),this)):it.isSubscribing()&&it.set("Failed"),this.disconnect()},Ft=function(e){var t=P(b.MEDIA_ERR_DECODE,e,e.code||A.P2P_CONNECTION_FAILED);t.message="OT.Subscriber while playing stream: "+t.message,k.error("OT.Subscriber.onVideoError"),Pt("Failure",null,{failureReason:"VideoElement",failureMessage:t.message,failureCode:t.code||A.P2P_CONNECTION_FAILED});var n=it.isAttemptingToSubscribe();it.set("Failed"),n?Et.trigger("subscribeComplete",t):Et.trigger("error",t.message),D.handleJsException(t.message,A.UNABLE_TO_SUBSCRIBE,{session:Et.session,target:Et})},Ut=function(e,t,n,i){if("SetRemoteDescription"===i&&jt&&t.match(/Unsupported video without audio for fallback/)){J&&J.addError("The stream is unable to be played.","Your browser does not support the video format.");var r=void 0;return r=new Error("Safari"===L.env.name?"VP8 not supported in Safari. Please make sure you have signed up for the Safari Beta Program. See https://tokbox.com/safari":"Video format not supported in this browser."),r.code=A.UNSUPPORTED_VIDEO_CODEC,void Ft(r)}if("ICEWorkflow"===i&&mt.sessionInfo.reconnection&&ft)return void k.debug("Ignoring peer connection failure due to possibility of reconnection.");var o=void 0;o="ICEWorkflow"===i?A.SUBSCRIBER_ICE_WORKFLOW_FAILED:e===A.STREAM_LIMIT_EXCEEDED?e:A.P2P_CONNECTION_FAILED;var a={failureReason:i?i:"PeerConnectionError",failureMessage:"OT.Subscriber PeerConnection Error: "+t,failureCode:o};if(it.isAttemptingToSubscribe()){var s={hasRelayCandidates:tt&&tt.hasRelayCandidates()};Ot("createPeerConnection","Failure",s,a),it.set("Failed");var c=x(e,t,i,"(not found)","Subscriber");$.trigger("subscribeComplete",c,$),Pt("Failure",null,a)}else it.isSubscribing()&&(it.set("Failed"),$.trigger("error",t),Pt("Disconnect",null,a));$.disconnect(),404===Number(e)&&$.destroy(),D.handleJsException("OT.Subscriber PeerConnection Error: "+t,o,{session:mt,target:$}),Zt(e)},Ht=function(e){st=e,k.debug("OT.Subscriber.onRemoteStreamAdded"),it.set("BindingRemoteStream"),$.subscribeToAudio(pt,!1),ct="loading",$.subscribeToVideo(Rt.subscribeToVideo,"loading"),mt.sessionInfo.p2pEnabled||($.setPreferredResolution(Rt.preferredResolution),$.setPreferredFrameRate(Rt.preferredFrameRate));var t={error:Ft,audioVolume:yt};e.getVideoTracks().forEach(function(e){e.enabled=n.webkitMediaStream?!1:vt.hasVideo&&Rt.subscribeToVideo});var i=new a.Promise(function(i,r){return void J.bindVideo(e,t,function(t){if(t)return Ft(t),void r(t);if(it.isDestroyed())return void r(new Error("Subscriber destroyed"));n.webkitMediaStream&&e.getVideoTracks().forEach(function(e){e.enabled=vt.hasVideo&&Rt.subscribeToVideo});var o=J&&J.video();o&&o.orientation({width:vt.videoDimensions.width,height:vt.videoDimensions.height,videoOrientation:vt.videoDimensions.orientation});var a=X&&X.videoUnsupportedIndicator;if(a&&a.setVideoUnsupported(jt),J.isAudioBlocked()){var s=function(e){J.setAudioBlockedUi(e);var t=X&&X.audioBlockedIndicator;t&&t.setAudioBlocked(e),a&&a.setVideoUnsupported(!e&&jt),$._.privateEvents.emit("audioBlockedStateChange",e)};s(!0),J.on("user-interaction",function(){k.debug("user-interaction"),G.sessions&&G.sessions.forEach(function(e){e._.privateEvents.emit("user-interaction")})});var c=void 0;mt._.privateEvents.on("user-interaction",c=function(){J.playAudio().then(function(){k.debug("Successfully unblocked audio"),s(!1),mt._.privateEvents.removeListener("user-interaction",c)})["catch"](function(e){k.error("Error retrying audio on user interaction:",e)})})}i()})}),r=new a.Promise(function(e,t){var n=J&&J.video();return n&&n.domElement()?void e():(J.once("videoElementCreated",e),void Et.once("destroyed",t))});a.all([i,r,kt.promise]).then(Mt)["catch"](function(){return void 0}),rt&&"webRTCStream"in rt&&e.getAudioTracks().length>0&&rt.webRTCStream(e),"Safari"===L.env.name&&(At=W(tt.getStats.bind(tt))),$.trigger("streamAdded",$)},Vt=function(e){st=null,k.debug("OT.Subscriber.onStreamRemoved");var t=J&&J.video();t&&t.stream===e&&J.destroyVideo(),this.trigger("streamRemoved",this)},Wt=function(){jt=!0},zt={"new":w.Event.names.SUBSCRIBER_DISCONNECTED,checking:w.Event.names.SUBSCRIBER_DISCONNECTED,connected:w.Event.names.SUBSCRIBER_CONNECTED,completed:w.Event.names.SUBSCRIBER_CONNECTED,disconnected:w.Event.names.SUBSCRIBER_DISCONNECTED},$t=function(e){var t=void 0,n=zt[e];n&&n!==Ct&&(Ct=n,k.debug("OT.Subscriber.connectionStateChanged to "+e),this.dispatchEvent(new w.ConnectionStateChangedEvent(n,this)),J&&(t=n!==w.Event.names.SUBSCRIBER_CONNECTED,J.loading(t)))},Gt=function(){Dt("Success")},Yt=function(){Dt("Failure",{reason:"ICEWorkflow",message:"OT.Subscriber PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall."})},Qt=function(){this.disconnect()},Jt=function(e){var t=J&&J.video();switch(e.changedProperty){case"videoDimensions":if(!t)break;t.orientation({width:e.newValue.width,height:e.newValue.height,videoOrientation:e.newValue.orientation}),this.dispatchEvent(new w.VideoDimensionsChangedEvent(this,e.oldValue,e.newValue));break;case"videoDisableWarning":X&&X.videoDisabledIndicator.setWarning(e.newValue),this.dispatchEvent(new w.VideoDisableWarningEvent(e.newValue?"videoDisableWarning":"videoDisableWarningLifted")),St="videoDisableWarning"===e.newValue?1:null;break;case"hasVideo":en(!(vt.hasVideo&&Rt.subscribeToVideo)),this.dispatchEvent(new w.VideoEnabledChangedEvent(vt.hasVideo?"videoEnabled":"videoDisabled",{reason:"publishVideo"}));break;case"hasAudio":K.update()}},qt=function(){return vt.getChannelsOfType("audio").length>0};K={get:function(){return qt()?Et.getStyle("buttonDisplayMode"):"off"},update:function(){var e=K.get();X&&(X.muteButton.setDisplayMode(e),X.backingBar.setMuteMode(e))}};var Xt=function(e,t){if(X)switch(e){case"nameDisplayMode":X.name.setDisplayMode(t),X.backingBar.setNameMode(t);break;case"videoUnsupportedDisplayMode":X.videoUnsupportedIndicator.setDisplayMode(t);break;case"videoDisabledDisplayMode":X.videoDisabledIndicator.setDisplayMode(t);break;case"audioBlockedDisplayMode":X.audioBlockedIndicator.setDisplayMode(t);break;case"showArchiveStatus":X.archive.setShowArchiveStatus(t);break;case"buttonDisplayMode":K.update();break;case"audioLevelDisplayMode":X.audioLevel.setDisplayMode(t);break;case"bugDisplayMode":break;case"backgroundImageURI":J.setBackgroundImageURI(t)}},Kt=function(){var e={backingBar:new g({nameMode:Rt.name?this.getStyle("nameDisplayMode"):"off",muteMode:K.get()}),name:new O({name:Rt.name,mode:this.getStyle("nameDisplayMode")}),muteButton:new I({muted:0===yt,mode:K.get()})};if(bt){var t=new h,n=function(e){Z.setValue(t.transform(e.audioLevel))};Z=new f({mode:Et.getStyle("audioLevelDisplayMode")}),Z.watchVisibilityChanged(function(e){e?Et.on("audioLevelUpdated",n):Et.off("audioLevelUpdated",n)}),Z.setDisplayMode(this.getStyle("audioLevelDisplayMode")),Z.audioOnly(!1),e.audioLevel=Z}e.videoDisabledIndicator=new U({mode:this.getStyle("videoDisabledDisplayMode")}),e.audioBlockedIndicator=new H({mode:this.getStyle("audioBlockedDisplayMode")}),e.videoUnsupportedIndicator=new V({mode:this.getStyle("videoUnsupportedDisplayMode")}),J&&J.domElement&&(X=new m({parent:J.domElement}).set(e).on({muted:function(){Et.setAudioVolume(0)},unmuted:function(){Et.setAudioVolume(_t)}},this),X.hideWhileLoading())},Zt=function(e){var t=void 0,n=void 0;J&&(e===A.STREAM_LIMIT_EXCEEDED?(t="The stream was unable to connect.",n="The limit for the number of media streams has been reached."):(t="The stream was unable to connect due to a network error.",n=xt?"Ensure you have a stable connection and try again.":"Make sure you have a stable network connection and that it isn't blocked by a firewall."),J.addError(t,n))};M(this,{nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioBlockedDisplayMode:"auto",backgroundImageURI:null,showArchiveStatus:!0,showMicButton:!0},Rt.showControls,function(e){Ot("SetStyle","Subscriber",e,null,.1)});var en=function(e){tt&&tt.subscribeToVideo(!e),J&&(J.audioOnly(e),J.showPoster(e)),Z&&Z.audioOnly(e)},tn=function(){var e=0;return function(){0===e&&Ot("GetStats","Called"),e++}}();this.destroy=function(e,t){if(it.isDestroyed())return this;if(it.isAttemptingToSubscribe()){var n={reason:e||"destroy"};"streamDestroyed"===e?this.trigger("subscribeComplete",P(b.STREAM_DESTROYED,new Error("Stream was destroyed before it could be subscribed to")),this):ut.stop(),Pt("Cancel",n)}return it.set("Destroyed"),At&&(At.destroy(),At=null),ot&&ot.stop(),Tt={sessionId:mt.sessionId,connectionId:mt&&mt.isConnected()?mt.connection.connectionId:null,partnerId:mt&&mt.sessionInfo?mt.sessionInfo.partnerId:null,streamId:vt&&!vt.destroyed?vt.id:null},this.disconnect(),X&&(X.destroy(),X=null),J&&(J.destroy(),J=null,this.element=null),vt&&!vt.destroyed&&Ot("unsubscribe",null,{streamId:vt.id}),vt.off(dt,this),this.id=null,gt=null,this.stream=null,vt=null,this.streamId=null,this.session=null,mt=null,Rt=null,t!==!0&&this.dispatchEvent(new w.DestroyedEvent(w.Event.names.SUBSCRIBER_DESTROYED,this,e),this.off.bind(this)),this},this.disconnect=function(){it.isDestroyed()||it.isFailed()||it.set("NotSubscribing"),J&&J.destroyVideo(),tt&&(tt.destroy(),tt=null,Ot("disconnect","PeerConnection",{streamId:vt.id}))},this.processMessage=function(e,t,n){k.debug("OT.Subscriber.processMessage: Received "+e+" message from "+t),k.debug(n),et!==t&&(et=t),tt&&tt.processMessage(e,n)},this.disableVideo=function(e){if(e){if("auto"!==ct)return void k.info("Video was not re-enabled because it was manually disabled");k.info("Video has been re-enabled"),X&&X.videoDisabledIndicator.disableVideo(!1)}else k.warn("Due to high packet loss and low bandwidth, video has been disabled");this.subscribeToVideo(e,"auto"),!e&&X&&X.videoDisabledIndicator.disableVideo(!0);var t=e?{videoEnabled:!0}:{videoDisabled:!0};Ot("updateQuality","video",t)},this.getImgData=function(){if(!this.isSubscribing())return k.error("OT.Subscriber.getImgData: Cannot getImgData before the Subscriber is subscribing."),null;var e=J&&J.video();return e?e.imgData():null},this.getStats=function(e){return tt?(tn(),void tt.getStats(function(t,n){if(t)return 1015===t.code&&(t=P(b.NOT_CONNECTED,t,1015)),void e(t);var i={timestamp:0};n.forEach(function(e){if(E.isInboundStat(e)){var t=E.isVideoStat(e),r=E.isAudioStat(e);(r||t)&&(i.timestamp=E.normalizeTimestamp(e.timestamp)),t?s(i,{video:E.parseStatCategory(e)}):r&&s(i,{audio:E.parseStatCategory(e)})}else if("track"===e.type&&-1!==e.id.toLowerCase().indexOf("video")){var o=e.framesPerSecond;At&&(o?(At.destroy(),At=null):o=At.getFrameRateFromStats(n)),s(i,{video:{frameRate:o}})}}),e(null,i)})):void e(P(b.NOT_CONNECTED,new Error("OT.Subscriber is not connected cannot getStats"),1015))},this.setAudioVolume=function(e){var t=i(e);return isNaN(t)?(k.error("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),this):(t!==e&&k.warn("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),t===yt?(B(yt),this):(_t=yt,yt=t,B(yt),yt>0&&!pt&&this.subscribeToAudio(!0),this))},this.getAudioVolume=function(){var e=J&&J.video();if(e)try{return e.getAudioVolume()}catch(t){k.warn("getAudioVolume "+t)}return yt},this.subscribeToAudio=function(e){var t=L.castToBoolean(e,!0);return t!==pt&&(0===this.getAudioVolume()&&t&&this.setAudioVolume(_t),this.getAudioVolume()>0&&!t&&this.setAudioVolume(0)),tt&&(tt.subscribeToAudio(t),vt&&vt.setChannelActiveState("audio",t)),pt=t,this};var nn={auto:"quality",publishVideo:"publishVideo",subscribeToVideo:"subscribeToVideo"};if("Safari"===_.name){var rn=function(){!y.hidden&&Rt.subscribeToVideo&&(k.debug("document visibility restored in Safari - resubscribing to video"),$.subscribeToVideo(!1),$.subscribeToVideo(!0))};y.addEventListener("visibilitychange",rn),this.once("destroyed",function(){y.removeEventListener("visibilitychange",rn)})}if(this.subscribeToVideo=function(e,t){var n=L.castToBoolean(e,!0);return en(!n||!vt.hasVideo||!(st&&st.getVideoTracks().length>0)),vt.hasVideo&&st&&0===st.getVideoTracks().length?(n&&k.info("Subscriber is audio-only due to incompatibility, can't subscribeToVideo."),Rt.subscribeToVideo=!1,this):(n&&!Rt.subscribeToVideo&&J&&J.video()&&vt.hasVideo&&(J.loading(n),J.video().whenTimeIncrements(function(){J.loading(!1)},this)),X&&X.videoDisabledIndicator&&X.videoDisabledIndicator.disableVideo(!1),tt&&mt&&vt&&(n!==Rt.subscribeToVideo||t!==ct)&&vt.setChannelActiveState("video",n,t),Rt.subscribeToVideo=n,ct=t,"loading"!==t&&(this.dispatchEvent(new w.VideoEnabledChangedEvent(n?"videoEnabled":"videoDisabled",{reason:nn[t]||"subscribeToVideo"})),"videoDisabled"===n&&"auto"===t&&(St=2)),this)},this.setPreferredResolution=function(e){if(it.isDestroyed()||!tt)return void k.warn("Cannot set the max Resolution when not subscribing to a publisher");if(Rt.preferredResolution=e,mt.sessionInfo.p2pEnabled)return void k.warn("OT.Subscriber.setPreferredResolution will not work in a P2P Session");var t=vt.getPreferredResolution(),n=t&&e&&t.width===e.width&&t.height===e.height||!t&&!e;n||vt.setPreferredResolution(e)},this.setPreferredFrameRate=function(e){return it.isDestroyed()||!tt?void k.warn("Cannot set the max frameRate when not subscribing to a publisher"):(Rt.preferredFrameRate=e,mt.sessionInfo.p2pEnabled?void k.warn("OT.Subscriber.setPreferredFrameRate will not work in a P2P Session"):void(vt.getPreferredFrameRate()!==e&&vt.setPreferredFrameRate(e)))},this.isSubscribing=function(){return it.isSubscribing()},this.isWebRTC=!0,this.isLoading=function(){return J&&J.loading()},this.videoElement=function(){var e=J&&J.video();return e?e.domElement():null},this.videoWidth=function(){var e=J&&J.video();return e?e.videoWidth():void 0},this.videoHeight=function(){var e=J&&J.video();return e?e.videoHeight():void 0},this.restrictFrameRate=function(e){return k.debug("OT.Subscriber.restrictFrameRate("+e+")"),Ot("restrictFrameRate",e.toString(),{streamId:vt.id}),mt.sessionInfo.p2pEnabled&&k.warn("OT.Subscriber.restrictFrameRate: Cannot restrictFrameRate on a P2P session"),"boolean"!=typeof e?k.error("OT.Subscriber.restrictFrameRate: expected a boolean value got a "+("undefined"==typeof e?"undefined":o(e))):(wt=e,vt.setRestrictFrameRate(e)),this},this.on("styleValueChanged",Xt,this),this._={getDataChannel:function(e,t,n){return tt?void tt.getDataChannel(e,t,n):void n(new L.Error("Cannot create a DataChannel before there is a publisher connection."))},iceRestart:function(e){tt?e||!tt.iceConnectionStateIsConnected()?(Dt("Attempt"),tt.iceRestart()):k.debug("Subscriber: Skipping ice restart, we are connected."):k.debug("Subscriber: Skipping ice restart, we have no peer connection")},webRtcStream:function(){return st},privateEvents:new l},it=new F(Nt),k.debug("OT.Subscriber: subscribe to "+vt.id),it.set("Init"),!vt)return k.error("OT.Subscriber: No stream parameter."),!1;if(dt={updated:Jt,destroyed:Qt},vt.on(dt,this),et=vt.connection.id,Rt.name=Rt.name||vt.name,Rt.classNames="OT_root OT_subscriber",Rt.style&&this.setStyle(Rt.style,null,!0),Rt.subscribeToVideo=L.castToBoolean(Rt.subscribeToVideo,!0),this.subscribeToAudio(L.castToBoolean(Rt.subscribeToAudio,!0)),this.setAudioVolume(r(Rt)),_t=u,J=new q.WidgetView(e,Rt),this.id=J.domId(),gt=J.domId(),this.element=J.domElement,J.on("videoElementCreated",function(e){var t=new w.VideoElementCreatedEvent(e),n=$;ft?$.dispatchEvent(t):$.once("loaded",function(){n.dispatchEvent(t)})}),this.element&&Kt.call(this),at=vt.connection.id===mt.connection.id,!Rt.testNetwork&&at){var on=mt.getPublisherForStream(vt);if(!on||!on._.webRtcStream())return this.trigger("subscribeComplete",P(b.STREAM_DESTROYED,new Error("Tried to subscribe to a local publisher, but its stream no longer exists")),this),this;kt.resolve(),Ht.call(this,on._.webRtcStream())}else{Rt.testNetwork&&this.setAudioVolume(0),it.set("ConnectingToPeer");var an=R.subscribers.uri(mt.apiKey,mt.sessionId,vt.id,this.widgetId);if(tt=new q.SubscriberPeerConnection({clientCandidates:mt.sessionInfo.clientCandidates,iceServers:mt.sessionInfo.iceServers,socket:mt._.getSocket(),stream:vt,subscriberId:this.widgetId,subscriberUri:an,properties:Rt,logAnalyticsEvent:Ot,p2p:mt.sessionInfo.p2pEnabled}),"IE"===_.name?kt.resolve():(tt.once("iceConnected",kt.resolve),tt.once("error",kt.reject)),tt.on({disconnected:Bt,error:Ut,remoteStreamAdded:Ht,remoteStreamRemoved:Vt,signalingStateStable:function(){Et.trigger("signalingStateStable");var e=J&&J.video();e&&st&&(e.bindToStream(st,function(e){e&&k.debug("Could not bind to stream",e)}),rt&&"webRTCStream"in rt&&st.getAudioTracks().length>0&&rt.webRTCStream(st))},qos:Lt,iceConnectionStateChange:$t,iceRestartSuccess:Gt,iceRestartFailure:Yt,remoteVideoUnsupported:Wt},this),tt.init(function(e){if(e)throw e}),q.hasAudioOutputLevelStatCapability()?rt=new C(tt.getStats):S()&&(rt=new z(p())),rt){var sn=this;ot=new j(function(){rt.sample(function(e){null!==e&&n.requestAnimationFrame(function(){sn.dispatchEvent(new w.AudioLevelUpdatedEvent(e))})})},60)}}var cn=It();return Et.once("subscribeComplete destroyed",cn),void Pt("Attempt",{})};return J.hasAudioOutputLevelStatCapability=T,J.WidgetView=$,J.SubscriberPeerConnection=B,J}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common-js-helpers/OTHelpers.js":218,"../../common-js-helpers/env.js":234,"../../helpers/audio_context.js":243,"../../helpers/audio_level_samplers/getstats_audio_output_level_sampler":244,"../../helpers/audio_level_samplers/webaudio_audio_level_sampler":245,"../../helpers/connectivity_attempt_pinger.js":246,"../../helpers/hasAudioOutputLevelStatCapability.js":260,"../../helpers/hasRemoteStreamsWithWebAudio.js":268,"../../helpers/otError.js":273,"../../helpers/otProperties.js":274,"../../helpers/widget_view.js":287,"../Errors.js":289,"../analytics.js":290,"../audio_level_transformer":294,"../chrome/AudioBlockedIndicator.js":296,"../chrome/VideoUnsupportedIndicator.js":297,"../chrome/audio_level_meter.js":299,"../chrome/backing_bar.js":300,"../chrome/chrome.js":302,"../chrome/mute_button.js":303,"../chrome/name_panel.js":304,"../chrome/video_disabled_indicator.js":305,"../events.js":309,"../exception_codes.js":310,"../interpretPeerConnectionError.js":313,"../interval_runner.js":314,"../logging.js":315,"../messaging/raptor/message.js":320,"../ot_error_class.js":337,"../peer_connection/get_stats_helpers.js":341,"../peer_connection/subscriber_peer_connection.js":353,"../peer_connection/watchFrameRate.js":357,"../session/objects.js":376,"../styling/stylable_component.js":381,"./state.js":385,bluebird:2,events:3,"lodash/merge":172,uuid:201}],385:[function(e,t){"use strict";var n=e("../generate_simple_state_machine.js")(),i="NotSubscribing",r=["NotSubscribing","Init","ConnectingToPeer","BindingRemoteStream","Subscribing","Failed","Destroyed"],o={NotSubscribing:["NotSubscribing","Init","Destroyed"],Init:["NotSubscribing","ConnectingToPeer","BindingRemoteStream","Destroyed"],ConnectingToPeer:["NotSubscribing","BindingRemoteStream","Failed","Destroyed"],BindingRemoteStream:["NotSubscribing","Subscribing","Failed","Destroyed"],Subscribing:["NotSubscribing","Failed","Destroyed","BindingRemoteStream"],Failed:["Destroyed"],Destroyed:[]},a=n(i,r,o);a.prototype.isDestroyed=function(){return"Destroyed"===this.current},a.prototype.isFailed=function(){return"Failed"===this.current},a.prototype.isSubscribing=function(){return"Subscribing"===this.current},a.prototype.isAttemptingToSubscribe=function(){return-1!==["Init","ConnectingToPeer","BindingRemoteStream"].indexOf(this.current)},t.exports=a},{"../generate_simple_state_machine.js":311}],386:[function(e,t){(function(n){"use strict";var i=e("./analytics.js"),r=e("./api_key.js"),o=e("../helpers/dialogs.js"),a=e("../ot/environment_loader.js"),s=e("../helpers/hasOpenTokSupport.js").once,c=e("../common-js-helpers/isWebSocketSupported.js"),l=e("lodash/once"),u=e("../otplugin/otplugin.js"),d=e("../common-js-helpers/OTHelpers.js"),p=e("./logging.js"),f=e("../helpers/otProperties.js"),h={};t.exports=h;var g=void 0,m=document.location.hash,v=1,y=0;h.check=function(){p.debug("OT.checkSystemRequirements()");var e=c()&&s()||u.isInstalled();return e=e?v:y,h.check=function(){return p.debug("OT.checkSystemRequirements()"),e},e===y&&i.logEvent({action:"checkSystemRequirements",variation:"notHasRequirements",partnerId:r.value,payload:{userAgent:d.env.userAgent}}),e},h.upgrade=l(function(){a.onLoad(function(){if(u.isSupported())return void o.Plugin.promptToInstall().on({download:function(){n.location=u.pathToInstaller()},refresh:function(){n.location.reload()},closed:function(){}});var e="_upgradeBrowser";document.body.appendChild(function(){var t=document.createElement("iframe");t.id=e,t.style.position="absolute",t.style.position="fixed",t.style.height="100%",t.style.width="100%",t.style.top="0px",t.style.left="0px",t.style.right="0px",t.style.bottom="0px",t.style.zIndex=1e3,t.style.backgroundColor="rgba(0,0,0,0.2)",t.setAttribute("frameBorder","0"),t.frameBorder="0",t.scrolling="no",t.setAttribute("scrolling","no");var n=d.env.name.toLowerCase()in f.minimumVersion;return t.src=f.assetURL+"/html/upgrade.html#"+encodeURIComponent(n?"true":"false")+","+encodeURIComponent(JSON.stringify(f.minimumVersion))+"|"+encodeURIComponent(document.location.href),t}()),g&&clearInterval(g),g=setInterval(function(){var t=document.location.hash,n=/^#?\d+&/;t!==m&&n.test(t)&&(m=t,"close_window"===t.replace(n,"")&&(document.body.removeChild(document.getElementById(e)),document.location.hash=""))},100)})}),t.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/OTHelpers.js":218,"../common-js-helpers/isWebSocketSupported.js":236,"../helpers/dialogs.js":253,"../helpers/hasOpenTokSupport.js":265,"../helpers/otProperties.js":274,"../ot/environment_loader.js":308,"../otplugin/otplugin.js":396,"./analytics.js":290,"./api_key.js":292,"./logging.js":315,"lodash/once":175}],387:[function(e,t){(function(n){"use strict";var i=e("./curry_call_async.js"),r=e("../ot/logging.js"),o=e("./meta.js"),a=n.OT,s=e("../common-js-helpers/OTHelpers.js"),c=e("./plugin_proxies.js"),l=void 0,u=function(){var e=void 0,t=function(t){var n=arguments;return function(){return e?void t(void 0,n):void c.create({mimeType:o.getInstallerMimeType(),isVisible:!1,windowless:!1},function(i,o){return e=o,i?void r.error("Error while loading the AutoUpdater: "+i):t.apply(void 0,n)})}};this.hasRequiredVersion=function(){return o.version()===o.installedVersion()},this.autoUpdate=t(function(){var t=a.Dialogs.Plugin.updateInProgress(),n=new a.Analytics,c={ieVersion:s.env.version,pluginOldVersion:o.installedVersion(),pluginNewVersion:o.version},l=i(function(){n.logEvent({action:"OTPluginAutoUpdate",variation:"Success",partnerId:a.APIKEY,payload:JSON.stringify(c)}),e.destroy(),t.close(),a.Dialogs.Plugin.updateComplete().on({reload:function(){window.location.reload()}})}),u=i(function(i,o,s){c.errorCode=i,c.systemErrorCode=s,n.logEvent({action:"OTPluginAutoUpdate",variation:"Failure",partnerId:a.APIKEY,payload:JSON.stringify(c)}),e.destroy(),t.close();
var l=o+" ("+i+"). Please restart your browser and try again.";t=a.Dialogs.Plugin.updateComplete(l).on({reload:function(){t.close()}}),r.error("autoUpdate failed: "+o+" ("+i+"). Please restart your browser and try again.")}),d=i(function(e){t.setUpdateProgress(e.toFixed())});e._.updatePlugin(o.pathToInstaller(),l,u,d)}),this.destroy=function(){e&&e.destroy()},navigator.plugins&&navigator.plugins.refresh(!1)};u.get=function(e){if(!l){if(!this.isinstalled())return void e.call(null,"Plugin was not installed");l=new u}e.call(null,void 0,l)},u.isinstalled=function(){return null!==o.getInstallerMimeType()&&!o.hasBrokenUpdater()},u.installedVersion=function(){return o.installedVersion()},t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/OTHelpers.js":218,"../ot/logging.js":315,"./curry_call_async.js":388,"./meta.js":395,"./plugin_proxies.js":405}],388:[function(e,t){"use strict";t.exports=function(e){return function(){var t=arguments;setTimeout(function(){e.apply(void 0,t)})}}},{}],389:[function(e,t){"use strict";t.exports=3e3},{}],390:[function(e,t){"use strict";t.exports=function(){var e={},t={};return e.on=function(n,i,r){return t.hasOwnProperty(n)||(t[n]=[]),t[n].push([i,r]),e},e.off=function(n,i,r){return t.hasOwnProperty(n)&&0!==t[n].length?(t[n]=t[n].filter(function(e){return e[0]!==i&&e[1]!==r}),e):void 0},e.once=function(t,n,i){var r=function o(){return e.off(t,o),n.apply(i,arguments)};return e.on(t,r),e},e.emit=function(n,i){return setTimeout(function(){t.hasOwnProperty(n)&&0!==t[n].length&&t[n].forEach(function(e){e[0].apply(e[1],i)})}),e},e}},{}],391:[function(e,t){"use strict";var n=e("../common-js-helpers/OTHelpers.js");t.exports=function(e){var t=n.clone(e);this.hasVideo=void 0!==t.video&&t.video!==!1,this.hasAudio=void 0!==t.audio&&t.audio!==!1,t.video===!0&&(t.video={}),t.audio===!0&&(t.audio={}),this.hasVideo&&!t.video.mandatory&&(t.video.mandatory={}),this.hasAudio&&!t.audio.mandatory&&(t.audio.mandatory={}),this.screenSharing=this.hasVideo&&("screen"===t.video.mandatory.chromeMediaSource||"window"===t.video.mandatory.chromeMediaSource),this.audio=t.audio,this.video=t.video,this.setVideoSource=function(e){void 0!==e?t.video.mandatory.sourceId=e:delete t.video},this.setAudioSource=function(e){void 0!==e?t.audio.mandatory.sourceId=e:delete t.audio},this.toHash=function(){return t}}},{"../common-js-helpers/OTHelpers.js":218}],392:[function(e,t){"use strict";var n=e("./readiness.js").isReady,i=e("./plugin_proxies.js"),r=e("./readiness.js").listen;t.exports=function(){var e=function(){},t=new e;return t.enumerateDevices=function(e){r(function(t){t?e(t):i.mediaCapturer.enumerateDevices(e)})},t.addListener=function(e,t){r(function(n){n||i.mediaCapturer.on("devicesChanged",e,t)})},t.removeListener=function(e,t){n()&&i.mediaCapturer.off("devicesChanged",e,t)},t}},{"./plugin_proxies.js":405,"./readiness.js":407}],393:[function(e,t){"use strict";var n=e("./media_stream_track.js"),i=e("./video_container.js"),r=function(e,t){var r=function(){},o=new r,a=[],s=[];o.id=e.id,t.addRef(o),e.videoTracks&&e.videoTracks.map(function(i){s.push(new n(e.id,i,t))}),e.audioTracks&&e.audioTracks.map(function(i){a.push(new n(e.id,i,t))});var c=function(e){var t="video"===e?s:a;return t.some(function(e){return e.enabled})};return o.getVideoTracks=function(){return s},o.getAudioTracks=function(){return a},o.getTracks=function(){return s.concat(a)},o.getTrackById=function(e){return s.concat(a).forEach(function(t){return t.id===e?t:void 0}),null},o.hasVideo=function(){return c("video")},o.hasAudio=function(){return c("audio")},o.addTrack=function(){},o.removeTrack=function(){},o.stop=function(){t._.stopMediaStream(o.id),t.removeRef(o)},o.destroy=function(){o.stop()},o._={plugin:t,render:function(){return new i(t,o)}},o},o={};r.fromJson=function(e,t){if(!e)return null;var n=new r(JSON.parse(e),t);return o[n.id]=n,n},r.getOrCreate=function(e,t){if(!e)return null;var n=JSON.parse(e),i=o[n.id];return i?i:r.fromJson(e,t)},t.exports=r},{"./media_stream_track.js":394,"./video_container.js":415}],394:[function(e,t){"use strict";var n=e("../common-js-helpers/OTHelpers.js");t.exports=function(e,t,i){var r=function(){},o=new r;n.eventing(o),o.id=t.id,o.kind=t.kind,o.label=t.label,o.streamId=e,o.readyState="live";var a=t.enabled===!0||"true"===t.enabled;return Object.defineProperty(o,"enabled",{get:function(){return a},set:function(t){a=t===!0||"true"===t,a?i._.enableMediaStreamTrack(e,o.id):i._.disableMediaStreamTrack(e,o.id)}}),o.setEnabled=function(e){o.enabled=e},o.stop=function(){o.readyState="ended",o.dispatchEvent({type:"ended"})},o}},{"../common-js-helpers/OTHelpers.js":218}],395:[function(e,t){(function(n){"use strict";var i=e("../ot/logging.js"),r=e("../common-js-helpers/OTHelpers.js"),o=e("./pluginVersion"),a=e("../helpers/otProperties.js"),s=e("./version_greater_than.js"),c={};t.exports=c;var l="IE"===r.env.name&&-1!==r.env.userAgent.indexOf("Win64"),u=l?"_x64":"";c.mimeType="application/x-opentokplugin"+u+",version="+o,c.activeXName="TokBox.OpenTokPlugin"+u+"."+o;var d=void 0,p=-1,f=function(){if(void 0===d){var e="TokBox.OpenTokPluginInstaller"+u,t="OpenTokPluginInstaller",a="application/x-opentokplugininstaller"+u,s=n.navigator.plugins[e]||n.navigator.plugins[t];if(p=-1,s)for(var c=s.length,l=new RegExp(a.replace("-","\\-")+",version=([0-9a-zA-Z-_.]+)","i"),f=void 0,h=void 0,g=0;c>g&&(f=s[g],!f||!f.enabledPlugin||f.enabledPlugin.name!==s.name||-1===f.type.indexOf(a)||(h=l.exec(f.type),null===h||(p=h[1],p!==o)));++g);else if("IE"===r.env.name)try{s=new ActiveXObject(e),p=s.getMasterVersion()}catch(m){i.info(m)}d=-1!==p?a+",version="+p:null}};c.getInstallerMimeType=function(){return void 0===d&&f(),d},c.version=function(){return o},c.installedVersion=function(){return void 0===p&&f(),p},c.hasBrokenUpdater=function(){var e="0.4.0.9"===c.installedVersion()||!s(c.installedVersion(),"0.4.0.4");return c.hasBrokenUpdater=function(){return e},e},c.pathToInstaller=function(e){var t=a.assetURL+"/plugin/"+("OpenTokPluginMain_x"+(l?"64":"32")+".msi");return e&&e(t),t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/OTHelpers.js":218,"../helpers/otProperties.js":274,"../ot/logging.js":315,"./pluginVersion":404,"./version_greater_than.js":414}],396:[function(e,t){(function(n){"use strict";var i=e("../ot/analytics.js"),r=e("../common-js-helpers/OTHelpers.js"),o=e("./startupAnalyticsLogger.js"),a={};if(t.exports=a,n.OTPlugin=a,a.isSupported=function(){return"IE"===r.env.name&&r.env.version>=9},a.isSupported()){var s=e("./auto_updater.js"),c=e("../ot/logging.js"),l=e("./media_constraints.js"),u=e("./media_devices.js"),d=e("./media_stream.js"),p=e("./meta.js"),f=e("./peer_connection/create_peer_connection.js"),h=e("./plugin_proxies.js"),g=e("./readiness.js"),m=e("./settings.js"),v=e("./rtc/rtc_ice_candidate.js"),y=e("./rtc/rtc_session_description.js");a.isReady=g.isReady,a.meta=p,a.isInstalled=function(){return a.isSupported()?s.isinstalled():!1},a.settings=m,a.version=p.version,a.installedVersion=p.installedVersion,a.pathToInstaller=p.pathToInstaller,a.ready=function(e){g.listen(e.bind(a))};var _=function(e,t,n){h.createMediaPeer(function(i,r){return i?void n.call(a,i):void r._.getUserMedia(e.toHash(),function(e){t.call(a,d.fromJson(e,r))},n)})};a.getUserMedia=function(e,t,n){var i=new l(e);if(i.screenSharing)_(i,t,n);else{var r=[];i.hasVideo&&r.push("video"),i.hasAudio&&r.push("audio"),h.mediaCapturer.selectSources(r,function(e){for(var r in e)e.hasOwnProperty(r)&&c.debug(r+" Capture Device: "+e[r]);i.setVideoSource(e.video),i.setAudioSource(e.audio),_(i,function(n){n&&(n.getVideoTracks().forEach(function(t){return t.deviceId=e.video,t}),n.getAudioTracks().forEach(function(t){return t.deviceId=e.audio,t})),t.apply(this,arguments)},n)},n,m.usePreviousDeviceSelection)}},a.enumerateDevices=function(e){g.listen(function(t){t?e(t):h.mediaCapturer.enumerateDevices(e)})},a.initPeerConnection=function(e,t,n,i){var r=function(n,r){return n?void i(n):(c.debug("Got PeerConnection for "+r.id),void f(e,t,r).then(function(e){e?i(null,e):i(new Error("Failed to create RTCPeerConnection object"))},function(e){i(e)}))};n&&n._.plugin?r(null,n._.plugin):h.createMediaPeer(r)},a.RTCSessionDescription=y,a.RTCIceCandidate=v,a.mediaDevices=new u,a.supportedVideoCodecs=["VP8","VP9"],o({analytics:i,meta:p,readiness:g}),t.exports=a}else a.isInstalled=function(){return!1}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/OTHelpers.js":218,"../ot/analytics.js":290,"../ot/logging.js":315,"./auto_updater.js":387,"./media_constraints.js":391,"./media_devices.js":392,"./media_stream.js":393,"./meta.js":395,"./peer_connection/create_peer_connection.js":403,"./plugin_proxies.js":405,"./readiness.js":407,"./rtc/rtc_ice_candidate.js":409,"./rtc/rtc_session_description.js":410,"./settings.js":412,"./startupAnalyticsLogger.js":413}],397:[function(e,t){"use strict";var n=e("./create_single_element_container.js"),i=e("../../curry_call_async.js"),r=e("lodash/once"),o=e("bluebird"),a=e("./request_manager.js"),s=e("../../rtc/rtc_stats_report.js");t.exports=function(e,t){var c=n(),l=r(function(){e.registerXCallback("getStatsSuccess",i(function(e){c.pop().success(e)})),e.registerXCallback("getStatsError",i(function(e){c.pop().error(e)}))});return a(function(n){return new o(function(i,r){l(),c.push({success:function(e){i(new s(JSON.parse(e)))},error:r}),e.getStats(t,n)})})}},{"../../curry_call_async.js":388,"../../rtc/rtc_stats_report.js":411,"./create_single_element_container.js":399,"./request_manager.js":401,bluebird:2,"lodash/once":175}],398:[function(e,t){"use strict";t.exports=function(){var e=[];return function(t){var n=e.indexOf(t);return-1===n&&(n=e.length,e.push(t)),String(n)}}},{}],399:[function(e,t){"use strict";var n=e("assert");t.exports=function(){var e={},t=[];return e.push=function(e){n(0===t.length),t.push(e)},e.pop=function(){return n(1===t.length),t.pop()},e}},{assert:1}],400:[function(e,t){"use strict";var n=e("assert");t.exports=function(e){var t=void 0;return function(){return n(0===arguments.length),t?t:t=e()["finally"](function(){t=void 0})}}},{assert:1}],401:[function(e,t){"use strict";var n=e("./create_linear_resolver.js"),i=e("lodash/memoize"),r=e("./request_compressor.js"),o=e("./request_serializer.js");t.exports=function(e){var t=o(e),a=function(e){return r(function(){return t(e)})},s=i(a,n());return function(e){var t=s(e);return t()}}},{"./create_linear_resolver.js":398,"./request_compressor.js":400,"./request_serializer.js":402,"lodash/memoize":171}],402:[function(e,t){"use strict";var n=e("assert"),i=e("bluebird");t.exports=function(e){var t=[],r=void 0,o=void 0,a=function(e){return n(void 0===this),n(arguments.length<=1),new i(function(n){t.push({input:e,resolve:n}),o()})};return o=function(){if(0!==t.length&&!r){var n=t.shift();r=e(n.input)["finally"](function(){r=void 0,o()}),n.resolve(r)}},a}},{assert:1,bluebird:2}],403:[function(e,t){"use strict";var n=e("bluebird"),i=e("uuid"),r=e("../curry_call_async.js"),o=e("./create_get_stats_adaptor/create_get_stats_adaptor.js"),a=e("../../ot/logging.js"),s=e("../media_stream"),c=e("../../common-js-helpers/OTHelpers.js"),l=e("../rtc/rtc_ice_candidate.js"),u=e("../rtc/rtc_session_description.js"),d=function(e,t,d){var p=function(){},f=new p,h=i(),g=[],m=void 0,v=void 0,y=new n.Promise(function(e,t){m=e,v=t}),_=void 0,b=void 0;d.addRef(f),_={addstream:[],removestream:[],icecandidate:[],signalingstatechange:[],iceconnectionstatechange:[]};var w=function(){},A=function(){return f.localDescription&&f.remoteDescription},C=function(e){a.error("Failed to process candidate"),a.error(e)},E=function(){if(A())for(var e=0;e<g.length;++e)d._.addIceCandidate(h,g[e],w,C)},T=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return _.hasOwnProperty(t)?void _[t].forEach(function(t){t.apply(void 0,e)}):void a.error("PeerConnection does not have an event called: "+t)},S=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=r(e[t]));d._.on(h,e)},x=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];return setTimeout(function(){return e.apply(void 0,n)})},j=function(e){var t=s.fromJson(e,d),n={stream:t,target:f};f.onaddstream&&c.isFunction(f.onaddstream)&&x(f.onaddstream,n),T("addstream",n)},k=function(e){var t=s.getOrCreate(e,d),n={stream:t,target:f};f.onremovestream&&c.isFunction(f.onremovestream)&&x(f.onremovestream,n),T("removestream",n)},R=function(e,t,n){var i=new l({candidate:e,sdpMid:t,sdpMLineIndex:n}),r={candidate:i,target:f};f.onicecandidate&&c.isFunction(f.onicecandidate)&&x(f.onicecandidate,r),T("icecandidate",r)},I=function(e){f.signalingState=e;var t={state:e,target:f};f.onsignalingstatechange&&c.isFunction(f.onsignalingstatechange)&&x(f.onsignalingstatechange,t),T("signalingstatechange",t)},O=function(e){f.iceConnectionState=e;var t={state:e,target:f};f.oniceconnectionstatechange&&c.isFunction(f.oniceconnectionstatechange)&&x(f.oniceconnectionstatechange,t),T("iceconnectionstatechange",t)};f.createOffer=function(e){return y.then(function(){return a.debug("createOffer",e),new n.Promise(function(t,n){return d._.createOffer(h,function(e,n){t(new u({type:e,sdp:n}))},n,e||{})})})},f.createAnswer=function(e){return y.then(function(){return a.debug("createAnswer",e),new n.Promise(function(t,n){return d._.createAnswer(h,function(e,n){t(new u({type:e,sdp:n}))},n,e||{})})})},f.setLocalDescription=function(e){return y.then(function(){return a.debug("setLocalDescription"),new n.Promise(function(t,n){return d._.setLocalDescription(h,e,function(){f.localDescription=e,t(),E()},n)})})},f.setRemoteDescription=function(e){return y.then(function(){return a.debug("setRemoteDescription"),new n.Promise(function(t,n){return d._.setRemoteDescription(h,e,function(){f.remoteDescription=e,t(),E()},n)})})},f.addIceCandidate=function(e){return y.then(function(){return a.debug("addIceCandidate"),A()?new n.Promise(function(t,n){return d._.addIceCandidate(h,e,t,n)}):(g.push(e),Promise.resolve())})},f.addStream=function(e){return y.then(function(){var t={};d._.addStream(h,e,t)})},f.removeStream=function(e){return y.then(function(){d._.removeStream(h,e)})},f.getRemoteStreams=function(){var e=d._.getRemoteStreams(h);return e?e.map(function(e){return s.getOrCreate(e,d)}):[]},f.getLocalStreams=function(){return d._.getLocalStreams(h).map(function(e){return s.getOrCreate(e,d)})},f.getStreamById=function(e){return s.getOrCreate(d._.getStreamById(h,e),d)};var P=o(d._,h);return f.getStats=function(e){return y.then(function(){return b.then(function(){return P(e)})})},f.close=function(){d._.destroyPeerConnection(h),d.removeRef(this)},f.destroy=function(){f.close()},f.addEventListener=function(e,t){void 0!==_[e]&&_[e].push(t)},f.removeEventListener=function(e,t){void 0!==_[e]&&(_[e]=_[e].filter(function(e){return e!==t}))},f.onaddstream=null,f.onremovestream=null,f.onicecandidate=null,f.onsignalingstatechange=null,f.oniceconnectionstatechange=null,e.iceServers.forEach(function(e){e.username||(e.username=""),e.credential||(e.credential="")}),d._.registerXCallback("sharedWindowClosed",function(){var e=f.getLocalStreams();e&&e.length>0&&e[0].getVideoTracks()?e[0].getVideoTracks().forEach(function(e){e.stop()}):a.warn("received sharedWindowClosed for a stream with no video tracks")}),d._.initPeerConnection(h,e,t,function(){S({addStream:j,removeStream:k,iceCandidate:R,signalingStateChange:I,iceConnectionChange:O}),b=new n.Promise(function(e){d._.getLocalStreams(h).length>0?e():f.addEventListener("addstream",function(){setTimeout(function(){e()},200)})}),m(f)},function(e){v(e)}),y};t.exports=d},{"../../common-js-helpers/OTHelpers.js":218,"../../ot/logging.js":315,"../curry_call_async.js":388,"../media_stream":393,"../rtc/rtc_ice_candidate.js":409,"../rtc/rtc_session_description.js":410,"./create_get_stats_adaptor/create_get_stats_adaptor.js":397,bluebird:2,uuid:201}],404:[function(e,t){"use strict";t.exports="2.2.1.133"},{}],405:[function(e,t){"use strict";var n=e("./meta.js"),i=e("../common-js-helpers/OTHelpers.js"),r=e("./proxy_extras.js"),o=function(){},a=new o,s={},c=function(e){a.mediaCapturer&&a.mediaCapturer.id===e.id?a.mediaCapturer=null:s.hasOwnProperty(e.id)&&delete s[e.id],e.OTHelpers&&e.OTHelpers.remove()};a.mediaCapturer=null,a.removeAll=function(){for(var e in s)s.hasOwnProperty(e)&&s[e].destroy();a.mediaCapturer&&a.mediaCapturer.destroy()},a.create=function(e,t){var n=r.createPluginProxy(e,t);return s[n.uuid]=n,n.on("destroy",function(){c(n)}),n},a.createMediaPeer=function(e,t){var o=void 0,c=void 0;i.isFunction(e)?(o={},c=e):(o=e,c=t);var l=a.create(i.extend(o||{},{mimeType:n.mimeType,isVisible:!0,windowless:!0}),function(e){return e?void c.call(void 0,e):(s[l.id]=l,void c.call(void 0,void 0,l))});r.makeMediaPeerProxy(l)},a.createMediaCapturer=function(e){return a.mediaCapturer?void e.call(void 0,void 0,a.mediaCapturer):(a.mediaCapturer=a.create({mimeType:n.mimeType,isVisible:!1,windowless:!1},function(t){e.call(void 0,t,a.mediaCapturer)}),void r.makeMediaCapturerProxy(a.mediaCapturer))},t.exports=a},{"../common-js-helpers/OTHelpers.js":218,"./meta.js":395,"./proxy_extras.js":406}],406:[function(e,t){(function(n){"use strict";var i=e("lodash/assign"),r=e("bluebird"),o=e("../common-js-helpers/OTHelpers.js"),a=e("uuid"),s=e("./curry_call_async.js"),c=e("./empiric_delay.js"),l=e("./event_emitter.js"),u=e("../ot/logging.js"),d=e("./ref_count_behaviour.js"),p=e("./wait_for_ready_signal.js"),f=5e3,h={},g=function(e){if(e&&(h[e]&&(clearTimeout(h[e]),h[e]=null),n[e]))try{delete n[e]}catch(t){n[e]=void 0}},m=function(e,t){h[e]=setTimeout(function(){g(e),t("The object timed out while loading.")},f),n[e]=function(){g(e);var n=Array.prototype.slice.call(arguments);n.unshift(null),t.apply(void 0,n)}},v=function(){return"OTPlugin_loaded_"+a().replace(/\-+/g,"")},y=function(e,t){var n=t||{},i=[],r=['type="'+n.mimeType+'"','id="'+e+'_obj"','tb_callback_id="'+e+'"','width="0" height="0"'],a={userAgent:o.env.userAgent.toLowerCase(),windowless:n.windowless,onload:e};n.isVisible!==!0&&r.push('visibility="hidden"'),i.push("<object "+r.join(" ")+">");for(var s in a)a.hasOwnProperty(s)&&i.push('<param name="'+s+'" value="'+a[s]+'" />');return i.push("</object>"),i.join("")},_=function(e,t,i){var r=t||{},o=y(e,r),a=r.doc||n.document;a.body.insertAdjacentHTML("beforeend",o);var s=a.body.querySelector("#"+e+"_obj");i(void 0,s)},b=function(e,t){var n=function(){},a=new n;a.ready={},a.ready.promise=new r.Promise(function(e,t){a.ready.resolve=e,a.ready.reject=t}),i(a,l()),a.listenForDeviceChanges=function(){a.ready.promise.then(function(){return r.delay(c)}).then(function(){a._.registerXCallback("devicesChanged",function(){var e=Array.prototype.slice.call(arguments);u.debug(e),a.emit("devicesChanged",e)})})},d(a);var f=function(e){e?(a._=e,a.parentElement=e.parentElement,a.OTHelpers=o(e)):(a._=null,a.parentElement=null,a.OTHelpers=o())};return a.uuid=v(),a.isValid=function(){return a._.valid},a.destroy=function(){a.removeAllRefs(),f(null),a.emit("destroy")},a.enumerateDevices=function(e){a._.enumerateDevices(e)},f(null),m(a.uuid,function(n){return n?(t("The plugin with the mimeType of "+e.mimeType+" timed out while loading: "+n),void a.destroy()):(a._.setAttribute("id","tb_plugin_"+a._.uuid),a._.removeAttribute("tb_callback_id"),a.uuid=a._.uuid,a.id=a._.id,a._.on&&a._.on(-1,{customEvent:s(function(){var e=Array.prototype.slice.call(arguments);a.emit(e.shift(),e)})}),void p(a,function(e){return e?(t("Error while starting up plugin "+a.uuid+": "+e),void a.destroy()):void t(void 0,a)}))}),_(a.uuid,e,function(e,t){return e?void u.error(e):void f(t)}),a},w=function(e){return e.selectSources=function(){return e._.selectSources.apply(e._,arguments)},e.listenForDeviceChanges(),e},A=function(e){return e.setStream=function(t,n){return e._.setStream(t,e._.msMatchesSelector(".OT_publisher.OT_mirrored object")),n&&setTimeout(n,200),e},e};t.exports={createPluginProxy:b,makeMediaPeerProxy:A,makeMediaCapturerProxy:w}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common-js-helpers/OTHelpers.js":218,"../ot/logging.js":315,"./curry_call_async.js":388,"./empiric_delay.js":389,"./event_emitter.js":390,"./ref_count_behaviour.js":408,"./wait_for_ready_signal.js":416,bluebird:2,"lodash/assign":142,uuid:201}],407:[function(e,t){"use strict";var n=e("./auto_updater.js"),i=e("../ot/logging.js"),r=e("../common-js-helpers/OTHelpers.js"),o=e("./plugin_proxies.js"),a=e("../helpers/domState.js"),s=!1,c=[],l=void 0,u=function(){o.removeAll()},d=function(e){return r.isFunction(e)?void(s?e.call(void 0,l):c.push(e)):void i.warn("registerReadyListener was called with something that was not a function.")},p=function(){s=!0;for(var e=void 0;(e=c.pop())&&r.isFunction(e);)e.call(void 0,l)},f=function(){n.get(function(e,t){return e?(l="Error while loading the AutoUpdater: "+e,void p()):t.hasRequiredVersion()?void o.createMediaCapturer(function(e){l=e,l||o.mediaCapturer&&o.mediaCapturer.isValid()||(l="The TB Plugin failed to load properly"),p(),a.whenUnloaded.then(u)}):void t.autoUpdate()})};a.whenLoaded.then(f),t.exports={listen:d,isReady:function(){return s}}},{"../common-js-helpers/OTHelpers.js":218,"../helpers/domState.js":254,"../ot/logging.js":315,"./auto_updater.js":387,"./plugin_proxies.js":405}],408:[function(e,t){"use strict";t.exports=function(e){var t=[];e.addRef=function(n){return t.push(n),e},e.removeRef=function(n){if(0===t.length)return e;var i=t.indexOf(n);return-1!==i&&t.splice(i,1),0===t.length&&e.destroy(),e},e.removeAllRefs=function(){for(;t.length;)t.shift().destroy()}}},{}],409:[function(e,t){"use strict";t.exports=function(e){this.sdpMid=e.sdpMid,this.sdpMLineIndex=parseInt(e.sdpMLineIndex,10),this.candidate=e.candidate}},{}],410:[function(e,t){"use strict";t.exports=function(e){this.type=e.type,this.sdp=e.sdp}},{}],411:[function(e,t){"use strict";var n=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])};n.prototype.forEach=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n])},t.exports=n},{}],412:[function(e,t){"use strict";t.exports={usePreviousDeviceSelection:!1}},{}],413:[function(e,t){"use strict";t.exports=function(t){var n=t.analytics,i=void 0===n?e("../ot/analytics.js"):n,r=t.meta,o=void 0===r?e("./meta.js"):r,a=t.readiness,s=void 0===a?e("./readiness.js"):a;s.listen(function(e){if(-1!==o.installedVersion()){var t={version:o.installedVersion()};e&&(t.message=e),i.logEvent({action:"OTPlugin-Load",variation:e?"Failure":"Success",payload:t})}})}},{"../ot/analytics.js":290,"./meta.js":395,"./readiness.js":407}],414:[function(e,t){"use strict";var n=e("assert"),i=/^[0-9]+(\.[0-9]+)*$/;t.exports=function(e,t){n(i.test(e)),n(i.test(t));var r=e.split(".").map(Number),o=t.split(".").map(Number);n(r.length===o.length);for(var a=r.length,s=0;a>s;++s)if(r[s]!==o[s])return r[s]>o[s];return n(e===t),!1}},{assert:1}],415:[function(e,t){"use strict";var n=e("../ot/logging.js"),i=e("../common-js-helpers/OTHelpers.js");t.exports=function(e,t){var r=function(){},o=new r,a=!1;return o.domElement=e._,o.OTHelpers=i(e._),o.parentElement=e._.parentNode,e.addRef(o),o.appendTo=function(t){t&&e._.parentNode!==t&&(n.debug("VideoContainer appendTo",t),t.appendChild(e._),o.parentElement=t)},o.show=function(r){return n.debug("VideoContainer show"),e._.removeAttribute("width"),e._.removeAttribute("height"),e.setStream(t,r),i.show(e._),o},o.setSize=function(t,n){return e._.setAttribute("width",t),e._.setAttribute("height",n),o},o.getAudioInputLevel=function(){return a||(e._.enableVolumeLevelMonitoring(!0),a=!0),e._.getInputLevel()},o.setFitMode=function(t){e._.fitMode(t)},o.width=function(t){return void 0!==t&&(n.debug("VideoContainer set width to "+t),e._.setAttribute("width",t)),e._.getAttribute("width")},o.height=function(t){return void 0!==t&&(n.debug("VideoContainer set height to "+t),e._.setAttribute("height",t)),e._.getAttribute("height")},o.getImgData=function(){return e._.getImgData("image/png")},o.videoWidth=function(){return e._.videoWidth},o.videoHeight=function(){return e._.videoHeight},o.destroy=function(){e._.setStream(null),e.removeRef(o)},o}},{"../common-js-helpers/OTHelpers.js":218,"../ot/logging.js":315}],416:[function(e,t){"use strict";var n=e("./curry_call_async.js"),i=e("../ot/logging.js");t.exports=function(e,t){var r=function(){e.ready.resolve(),e.ready.promise.then(function(n){return n?(i.error("Error while starting up plugin "+e.uuid+": "+n),void t(n)):(i.debug("Plugin "+e.id+" is loaded"),void t(void 0,e))})};e._.initialise?(e.on("ready",n(r)),e._.initialise()):r()}},{"../ot/logging.js":315,"./curry_call_async.js":388}]},{},[288])(288)});var initializeSwfobject=function(){function e(){if(!W){try{var e=N.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}W=!0;for(var n=F.length,i=0;n>i;i++)F[i]()}}function t(e){W?e():F[F.length]=e}function n(e){if(typeof L.addEventListener!=j)L.addEventListener("load",e,!1);else if(typeof N.addEventListener!=j)N.addEventListener("load",e,!1);else if(typeof L.attachEvent!=j)v(L,"onload",e);else if("function"==typeof L.onload){var t=L.onload;L.onload=function(){t(),e()}}else L.onload=e}function i(){B?r():o()}function r(){var e=N.getElementsByTagName("body")[0],t=m(k);t.setAttribute("type",O);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=j){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),G.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(10>i)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,o()}()}else o()}function o(){var e=U.length;if(e>0)for(var t=0;e>t;t++){var n=U[t].id,i=U[t].callbackFn,r={success:!1,id:n};if(G.pv[0]>0){var o=g(n);if(o)if(!y(U[t].swfVersion)||G.wk&&G.wk<312)if(U[t].expressInstall&&s()){var u={};u.data=U[t].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));for(var d={},p=o.getElementsByTagName("param"),f=p.length,h=0;f>h;h++)"movie"!=p[h].getAttribute("name").toLowerCase()&&(d[p[h].getAttribute("name")]=p[h].getAttribute("value"));c(u,d,n,i)}else l(o),i&&i(r);else b(n,!0),i&&(r.success=!0,r.ref=a(n),i(r))}else if(b(n,!0),i){var m=a(n);m&&typeof m.SetVariable!=j&&(r.success=!0,r.ref=m),i(r)}}}function a(e){var t=null,n=g(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=j)t=n;else{var i=n.getElementsByTagName(k)[0];i&&(t=i)}return t}function s(){return!z&&y("6.0.65")&&(G.win||G.mac)&&!(G.wk&&G.wk<312)}function c(e,t,n,i){z=!0,E=i||null,T={success:!1,id:n};var r=g(n);if(r){"OBJECT"==r.nodeName?(A=u(r),C=null):(A=r,C=n),e.id=P,(typeof e.width==j||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==j||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),N.title=N.title.slice(0,47)+" - Flash Player Installation";var o=G.ie&&G.win?"ActiveX":"PlugIn",a="MMredirectURL="+L.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+N.title;if(typeof t.flashvars!=j?t.flashvars+="&"+a:t.flashvars=a,G.ie&&G.win&&4!=r.readyState){var s=m("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}d(e,t,n)}}function l(e){if(G.ie&&G.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=m("div");if(G.win&&G.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(k)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;r>o;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function d(e,t,n){var i,r=g(n);if(G.wk&&G.wk<312)return i;if(r)if(typeof e.id==j&&(e.id=n),G.ie&&G.win){var o="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?o+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(o+=" "+a+'="'+e[a]+'"'));var s="";for(var c in t)t[c]!=Object.prototype[c]&&(s+='<param name="'+c+'" value="'+t[c]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+s+"</object>",H[H.length]=e.id,i=g(e.id)}else{var l=m(k);l.setAttribute("type",O);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?l.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&l.setAttribute(u,e[u]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&p(l,d,t[d]);r.parentNode.replaceChild(l,r),i=l}return i}function p(e,t,n){var i=m("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function f(e){var t=g(e);t&&"OBJECT"==t.nodeName&&(G.ie&&G.win?(t.style.display="none",function(){4==t.readyState?h(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function h(e){var t=g(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function g(e){var t=null;try{t=N.getElementById(e)}catch(n){}return t}function m(e){return N.createElement(e)}function v(e,t,n){e.attachEvent(t,n),V[V.length]=[e,t,n]}function y(e){var t=G.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function _(e,t,n,i){if(!G.ie||!G.mac){var r=N.getElementsByTagName("head")[0];if(r){var o=n&&"string"==typeof n?n:"screen";if(i&&(S=null,x=null),!S||x!=o){var a=m("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),S=r.appendChild(a),G.ie&&G.win&&typeof N.styleSheets!=j&&N.styleSheets.length>0&&(S=N.styleSheets[N.styleSheets.length-1]),x=o}G.ie&&G.win?S&&typeof S.addRule==k&&S.addRule(e,t):S&&typeof N.createTextNode!=j&&S.appendChild(N.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if($){var n=t?"visible":"hidden";W&&g(e)?g(e).style.visibility=n:_("#"+e,"visibility:"+n)}}function w(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=j?encodeURIComponent(e):e}{var A,C,E,T,S,x,j="undefined",k="object",R="Shockwave Flash",I="ShockwaveFlash.ShockwaveFlash",O="application/x-shockwave-flash",P="SWFObjectExprInst",D="onreadystatechange",L=window,N=document,M=navigator,B=!1,F=[i],U=[],H=[],V=[],W=!1,z=!1,$=!0,G=function(){var e=typeof N.getElementById!=j&&typeof N.getElementsByTagName!=j&&typeof N.createElement!=j,t=M.userAgent.toLowerCase(),n=M.platform.toLowerCase(),i=/win/.test(n?n:t),r=/mac/.test(n?n:t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,a=!1,s=[0,0,0],c=null;if(typeof M.plugins!=j&&typeof M.plugins[R]==k)c=M.plugins[R].description,!c||typeof M.mimeTypes!=j&&M.mimeTypes[O]&&!M.mimeTypes[O].enabledPlugin||(B=!0,a=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof L.ActiveXObject!=j)try{var l=new ActiveXObject(I);l&&(c=l.GetVariable("$version"),c&&(a=!0,c=c.split(" ")[1].split(","),s=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]))}catch(u){}return{w3:e,pv:s,wk:o,ie:a,win:i,mac:r}}();!function(){G.w3&&((typeof N.readyState!=j&&"complete"==N.readyState||typeof N.readyState==j&&(N.getElementsByTagName("body")[0]||N.body))&&e(),W||(typeof N.addEventListener!=j&&N.addEventListener("DOMContentLoaded",e,!1),G.ie&&G.win&&(N.attachEvent(D,function(){"complete"==N.readyState&&(N.detachEvent(D,arguments.callee),e())}),L==top&&!function(){if(!W){try{N.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),G.wk&&!function(){return W?void 0:/loaded|complete/.test(N.readyState)?void e():void setTimeout(arguments.callee,0)}(),n(e)))}(),function(){G.ie&&G.win&&window.attachEvent("onunload",function(){for(var e=V.length,t=0;e>t;t++)V[t][0].detachEvent(V[t][1],V[t][2]);for(var n=H.length,i=0;n>i;i++)f(H[i]);for(var r in G)G[r]=null;G=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}()}return{registerObject:function(e,t,n,i){if(G.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,U[U.length]=r,b(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return G.w3?a(e):void 0
},embedSWF:function(e,n,i,r,o,a,l,u,p,f){var h={success:!1,id:n};G.w3&&!(G.wk&&G.wk<312)&&e&&n&&i&&r&&o?(b(n,!1),t(function(){i+="",r+="";var t={};if(p&&typeof p===k)for(var g in p)t[g]=p[g];t.data=e,t.width=i,t.height=r;var m={};if(u&&typeof u===k)for(var v in u)m[v]=u[v];if(l&&typeof l===k)for(var _ in l)typeof m.flashvars!=j?m.flashvars+="&"+_+"="+l[_]:m.flashvars=_+"="+l[_];if(y(o)){var w=d(t,m,n);t.id==n&&b(n,!0),h.success=!0,h.ref=w}else{if(a&&s())return t.data=a,void c(t,m,n,f);b(n,!0)}f&&f(h)})):f&&f(h)},switchOffAutoHideShow:function(){$=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,n){return G.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,i){G.w3&&s()&&c(e,t,n,i)},removeSWF:function(e){G.w3&&f(e)},createCSS:function(e,t,n,i){G.w3&&_(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=N.location.search||N.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return w(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return w(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=g(P);e&&A&&(e.parentNode.replaceChild(A,e),C&&(b(C,!0),G.ie&&G.win&&(A.style.display="block")),E&&E(T)),z=!1}}}};!function(){var e=function(e){function t(e){var t=m.length;return m.push(new o(a({progress:function(){},complete:function(){},cancelled:function(){},info:function(){},warn:function(){},error:function(){}},e,{id:t,status:s,priority:0,onStatusChange:n,loadedBytes:0,sizeBytes:e.file.size}))),t}function n(){y.d("onFileUploadStatusChange"),r()}function i(){setTimeout(r,1)}function r(){y.d("processQueue   length: "+m.length);var e=-1,t=-1,n=!0;m.forEach(function(i,r){i.priority>t&&i.status==s&&(e=r,t=i.priority),i.status==c&&(n=!1)}),n&&e>=0&&m[e].start()}function o(e){function t(e){(e==l||e==d||e==u)&&(clearInterval(S),clearInterval(x)),j.status=e,j.onStatusChange()}function n(){y.d("cancelAllRequests()"),I.forEach(function(e){e.abort()})}function i(){var e={method:"POST",path:T()+"?uploads",step:"initiate",x_amz_headers:j.xAmzHeadersAtInitiate,not_signed_headers:j.notSignedHeadersAtInitiate};j.contentType&&(e.contentType=j.contentType),e.onErr=function(){y.d("onInitiateError for FileUpload "+j.id),t(d)},e.on200=function(t){var n=t.response.match(/<UploadId\>(.+)<\/UploadId\>/);n&&n[1]?(j.uploadId=n[1],y.d("requester success. got uploadId "+j.uploadId),m(),_()):e.onErr()},A(e),C(e)}function r(e){var n,i,r,o;o=k[e],o.status=c,R++,o.loadedBytesPrevious=null,n=0===o.attempts++?0:1e3*Math.min(v.maxRetryBackoffSecs,Math.pow(v.retryBackoffPower,o.attempts-2)),y.d("uploadPart #"+e+"     will wait "+n+"ms to try"),r={method:"PUT",path:T()+"?partNumber="+e+"&uploadId="+j.uploadId,step:"upload #"+e,x_amz_headers:j.xAmzHeadersAtUpload,attempts:o.attempts},r.onErr=function(n,r){var a="problem uploading part #"+e+",   http status: "+n.status+",   hasErrored: "+!!i+",   part status: "+o.status+",   readyState: "+n.readyState+(r?",   isOnError":"");if(y.w(a),j.warn(a),!i){if(i=!0,404==n.status){var s="404 error resulted in abortion of both this part and the entire file.";y.w(s+" Server response: "+n.response),j.error(s),o.status=p,t(p)}else o.status=d,o.loadedBytes=0,_();n.abort()}},r.on200=function(t){var n,i=t.getResponseHeader("ETag");y.d("uploadPart 200 response for part #"+e+"     ETag: "+i),o.isEmpty||i!=h?(o.eTag=i,o.status=l):(o.status=d,o.loadedBytes=0,n="eTag matches MD5 of 0 length blob for part #"+e+"   Retrying part.",y.w(n),j.warn(n)),_()},r.onProgress=function(e){o.loadedBytes=e.loaded};var a=j.file.slice?"slice":j.file.mozSlice?"mozSlice":"webkitSlice";r.toSend=function(){var t=j.file[a](o.start,o.end);return y.d("sending part # "+e+" (bytes "+o.start+" -> "+o.end+")  reported length: "+t.size),o.isEmpty||0!==t.size||y.w("  *** WARN: blob reporting size of 0 bytes. Will try upload anyway.."),t},r.onFailedAuth=function(){var t="onFailedAuth for uploadPart #"+e+".   Will set status to ERROR";y.w(t),j.warn(t),o.status=d,o.loadedBytes=0,_()},A(r),setTimeout(function(){C(r),y.d("upload #",e,r)},n),o.uploader=r}function o(e){var t=k[e];t.uploader.awsXhr&&t.uploader.awsXhr.abort(),t.uploader.authXhr&&t.uploader.authXhr.abort()}function g(){y.d("completeUpload"),j.info("will attempt to complete upload");var e="<CompleteMultipartUpload>";k.forEach(function(t,n){t&&(e+="<Part><PartNumber>"+n+"</PartNumber><ETag>"+t.eTag+"</ETag></Part>")}),e+="</CompleteMultipartUpload>";var n={method:"POST",contentType:"application/xml; charset=UTF-8",path:T()+"?uploadId="+j.uploadId,x_amz_headers:j.xAmzHeadersAtComplete,step:"complete"};n.onErr=function(){var e="Error completing upload.";y.w(e),j.error(e),t(d)},n.on200=function(e){j.complete(e),t(l)},n.toSend=function(){return e},A(n),C(n)}function m(){for(var e=Math.ceil(j.file.size/v.partSize)||1,t=1;e>=t;t++)k[t]={status:s,start:(t-1)*v.partSize,end:t*v.partSize,attempts:0,loadedBytes:0,loadedBytesPrevious:null,isEmpty:0===j.file.size}}function _(){var e,t=0,n=!0,i=!1,o=[],a=[];return j.status!=c?void j.info("will not process parts list, as not currently evaporating"):(k.forEach(function(e,l){var u=!1;if(o.push(e.status),e){switch(e.status){case c:n=!1,t++,a.push(e.loadedBytes);break;case d:i=!0,u=!0;break;case s:u=!0}u&&(n=!1,t<v.maxConcurrentParts&&(r(l),t++))}}),e=o.toString()+" // bytesLoaded: "+a.toString(),y.d("processPartsList()  anyPartHasErrored: "+i,e),(R>=k.length-1||i)&&j.info("part stati: "+e),void(n&&g()))}function b(){S=setInterval(function(){var e=0;k.forEach(function(t){e+=t.loadedBytes}),j.progress(e/j.sizeBytes)},v.progressIntervalMS)}function w(){x=setInterval(function(){y.d("monitorPartsProgress() "+Date()),k.forEach(function(e,t){var n;return e.status!=c?void y.d(t,"not evaporating "):null===e.loadedBytesPrevious?(y.d(t,"no previous "),void(e.loadedBytesPrevious=e.loadedBytes)):(n=e.loadedBytesPrevious<e.loadedBytes,v.simulateStalling&&4==t&&Math.random()<.25&&(n=!1),y.d(t,n?"moving. ":"stalled.",e.loadedBytesPrevious,e.loadedBytes),n||setTimeout(function(){j.info("part #"+t+" stalled. will abort. "+e.loadedBytesPrevious+" "+e.loadedBytes),o(t)},0),void(e.loadedBytesPrevious=e.loadedBytes))})},12e4)}function A(e){if(y.d("setupRequest()",e),v.timeUrl){var t=new XMLHttpRequest;t.open("GET",v.timeUrl+"?requestTime="+(new Date).getTime(),!1),t.send(),e.dateString=t.responseText}else e.dateString=(new Date).toUTCString();e.x_amz_headers=a(e.x_amz_headers,{"x-amz-date":e.dateString}),e.onGotAuth=function(){var t=new XMLHttpRequest;I.push(t),e.awsXhr=t;var n=e.toSend?e.toSend():null,i=f+e.path,r={};a(r,e.not_signed_headers),a(r,e.x_amz_headers),v.simulateErrors&&1==e.attempts&&"upload #3"==e.step&&(y.d("simulating error by POST part #3 to invalid url"),i="https:///foo"),t.open(e.method,i),t.setRequestHeader("Authorization","AWS "+v.aws_key+":"+e.auth);for(var o in r)r.hasOwnProperty(o)&&t.setRequestHeader(o,r[o]);e.contentType&&t.setRequestHeader("Content-Type",e.contentType),t.onreadystatechange=function(){4==t.readyState&&(n&&y.d("  ### "+n.size),200==t.status?e.on200(t):e.onErr(t))},t.onerror=function(){e.onErr(t,!0)},"function"==typeof e.onProgress&&(t.upload.onprogress=function(t){e.onProgress(t)}),t.send(n)},e.onFailedAuth=e.onFailedAuth||function(t){j.error("Error onFailedAuth for step: "+e.step),e.onErr(t)}}function C(e){y.d("authorizedSend() "+e.step);var t=new XMLHttpRequest;I.push(t),e.authXhr=t;var n,i=v.signerUrl+"?to_sign="+E(e);for(var r in j.signParams)j.signParams.hasOwnProperty(r)&&(i+=j.signParams[r]instanceof Function?"&"+encodeURIComponent(r)+"="+encodeURIComponent(j.signParams[r]()):"&"+encodeURIComponent(r)+"="+encodeURIComponent(j.signParams[r]));for(var o in j.signHeaders)j.signHeaders.hasOwnProperty(o)&&(j.signHeaders[o]instanceof Function?t.setRequestHeader(o,j.signHeaders[o]()):t.setRequestHeader(o,j.signHeaders[o]));t.onreadystatechange=function(){4==t.readyState&&(200==t.status&&28==t.response.length?(y.d("authorizedSend got signature for step: '"+e.step+"'    sig: "+t.response),e.auth=t.response,e.onGotAuth()):(n="failed to get authorization (readyState=4) for "+e.step+".  xhr.status: "+t.status+".  xhr.response: "+t.response,y.w(n),j.warn(n),e.onFailedAuth(t)))},t.onerror=function(){n="failed to get authorization (onerror) for "+e.step+".  xhr.status: "+t.status+".  xhr.response: "+t.response,y.w(n),j.warn(n),e.onFailedAuth(t)},t.open("GET",i),j.beforeSigner instanceof Function&&j.beforeSigner(t),t.send()}function E(e){var t,n="",i=[];for(var r in e.x_amz_headers)e.x_amz_headers.hasOwnProperty(r)&&i.push(r);return i.sort(),i.forEach(function(t){n+=t+":"+e.x_amz_headers[t]+"\n"}),t=e.method+"\n\n"+(e.contentType||"")+"\n\n"+n+(v.cloudfront?"/"+v.bucket:"")+e.path,encodeURIComponent(t)}function T(){var e="/"+v.bucket+"/"+j.name;return(v.cloudfront||f.indexOf("cloudfront")>-1)&&(e="/"+j.name),e}var S,x,j=this,k=[],R=0,I=[];a(j,e),j.start=function(){y.d("starting FileUpload "+j.id),t(c),i(),b(),w()},j.stop=function(){y.d("stopping FileUpload ",j.id),j.cancelled(),j.info("upload canceled"),t(u),n()}}function a(e,t,n){if("undefined"==typeof e&&(e={}),"object"==typeof n)for(var i in n)t[i]=n[i];for(var r in t)e[r]=t[r];return e}if(this.supported=!("undefined"==typeof File||"undefined"==typeof Blob||!(Blob.prototype.webkitSlice||Blob.prototype.mozSlice||Blob.prototype.slice)||e.testUnsupported),this.supported){var s=0,c=2,l=3,u=5,d=10,p=20,f=e.aws_url||"https://s3.amazonaws.com",h='"d41d8cd98f00b204e9800998ecf8427e"',g=this,m=[],v=a({logging:!0,maxConcurrentParts:5,partSize:6291456,retryBackoffPower:2,maxRetryBackoffSecs:300,progressIntervalMS:500,cloudfront:!1,encodeFilename:!0},e);g.add=function(e){y.d("add");var n;if("undefined"==typeof e)return"Missing file";if("undefined"==typeof e.name?n="Missing attribute: name  ":v.encodeFilename&&(e.name=encodeURIComponent(e.name)),n)return n;var r=t(e);return i(),r},g.cancel=function(e){return y.d("cancel ",e),m[e]?(m[e].stop(),!0):!1},g.pause=function(){},g.resume=function(){},g.forceRetry=function(){};var y={d:function(){},w:function(){},e:function(){}};v.logging&&console&&console.log&&(y=console,y.d=y.log,y.w=console.warn?y.warn:y.log,y.e=console.error?y.error:y.log)}};"undefined"!=typeof module&&module.exports?module.exports=e:"undefined"!=typeof window&&(window.Evaporate=e)}(),function(e,t,n,i){"use strict";function r(t,n){this.a=t,n&&e.extend(n,n,{a:n.autoFormat,h:n.autoHideDialCode,d:n.defaultCountry,i:n.ipinfoToken,n:n.nationalMode,t:n.numberType,o:n.onlyCountries,p:n.preferredCountries,v:n.preventInvalidNumbers,u:n.utilsScript}),this.b=e.extend({},s,n),this.c=s,this.ns="."+o+a++,this.d=Boolean(t.setSelectionRange),this.e=Boolean(e(t).attr("placeholder")),this.f=o}var o="intlTelInput",a=1,s={allowExtensions:!1,a:!0,h:!0,autoPlaceholder:!0,d:"",geoIpLookup:null,n:!0,t:"MOBILE",o:[],p:["us","gb"],u:""},c={b:38,c:40,d:13,e:27,f:43,A:65,Z:90,g:48,h:57,i:32,Bi:8,TAB:9,k:46,l:17,m:91,n:224},l=!1;e(t).load(function(){l=!0}),r.prototype={_init:function(){return this.b.n&&(this.b.h=!1),navigator.userAgent.match(/IEMobile/i)&&(this.b.a=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.autoCountryDeferred=new e.Deferred,this.utilsScriptDeferred=new e.Deferred,this._b(),this._f(),this._h(),this._i(),this._initRequests(),[this.autoCountryDeferred,this.utilsScriptDeferred]},_b:function(){this._d(),this._e()},_c:function(e,t,n){t in this.m||(this.m[t]=[]);var i=n||0;this.m[t][i]=e},_d:function(){var t;if(this.b.o.length){for(t=0;t<this.b.o.length;t++)this.b.o[t]=this.b.o[t].toLowerCase();for(this.l=[],t=0;t<u.length;t++)-1!=e.inArray(u[t].iso2,this.b.o)&&this.l.push(u[t])}else this.l=u;for(this.m={},t=0;t<this.l.length;t++){var n=this.l[t];if(this._c(n.iso2,n.dialCode,n.priority),n.areaCodes)for(var i=0;i<n.areaCodes.length;i++)this._c(n.iso2,n.dialCode+n.areaCodes[i])}},_e:function(){this.n=[];for(var e=0;e<this.b.p.length;e++){var t=this.b.p[e].toLowerCase(),n=this._y(t,!1,!0);n&&this.n.push(n)}},_f:function(){this.g=e(this.a),this.g.attr("autocomplete","off"),this.g.wrap(e("<div>",{"class":"intl-tel-input"})),this.flagsContainer=e("<div>",{"class":"flag-dropdown"}).insertBefore(this.g);var t=e("<div>",{tabindex:"0","class":"selected-flag"}).appendTo(this.flagsContainer);this.h=e("<div>",{"class":"iti-flag"}).appendTo(t),e("<div>",{"class":"arrow"}).appendTo(t),this.isMobile?this.i=e("<select>",{"class":"iti-mobile-select"}).appendTo(this.flagsContainer):(this.i=e("<ul>",{"class":"country-list v-hide"}).appendTo(this.flagsContainer),this.n.length&&!this.isMobile&&(this._g(this.n,"preferred"),e("<li>",{"class":"divider"}).appendTo(this.i))),this._g(this.l,""),this.isMobile||(this.j=this.i.outerHeight(),this.i.removeClass("v-hide").addClass("hide"),this.k=this.i.children(".country"))},_g:function(e,t){for(var n="",i=0;i<e.length;i++){var r=e[i];this.isMobile?(n+="<option data-dial-code='"+r.dialCode+"' value='"+r.iso2+"'>",n+=r.name+" +"+r.dialCode,n+="</option>"):(n+="<li class='country "+t+"' data-dial-code='"+r.dialCode+"' data-country-code='"+r.iso2+"'>",n+="<div class='flag'><div class='iti-flag "+r.iso2+"'></div></div>",n+="<span class='country-name'>"+r.name+"</span>",n+="<span class='dial-code'>+"+r.dialCode+"</span>",n+="</li>")}this.i.append(n)},_h:function(){var e=this.g.val();this._af(e)?this._v(e,!0):"auto"!=this.b.d&&(this.b.d=this.b.d?this._y(this.b.d.toLowerCase(),!1,!1):this.n.length?this.n[0]:this.l[0],this._z(this.b.d.iso2),e||this._ae(this.b.d.dialCode,!1)),e&&this._u(e)},_i:function(){var t=this;if(this._j(),(this.b.h||this.b.a)&&this._l(),this.isMobile)this.i.on("change"+this.ns,function(){t._ab(e(this).find("option:selected"))});else{var n=this.g.closest("label");n.length&&n.on("click"+this.ns,function(e){t.i.hasClass("hide")?t.g.focus():e.preventDefault()});var i=this.h.parent();i.on("click"+this.ns,function(){!t.i.hasClass("hide")||t.g.prop("disabled")||t.g.prop("readonly")||t._n()})}this.flagsContainer.on("keydown"+t.ns,function(e){var n=t.i.hasClass("hide");!n||e.which!=c.b&&e.which!=c.c&&e.which!=c.i&&e.which!=c.d||(e.preventDefault(),e.stopPropagation(),t._n()),e.which==c.TAB&&t._ac()})},_initRequests:function(){var n=this;this.b.u?l?this.loadUtils():e(t).load(function(){n.loadUtils()}):this.utilsScriptDeferred.resolve(),"auto"==this.b.d?this._loadAutoCountry():this.autoCountryDeferred.resolve()},_loadAutoCountry:function(){var t=e.cookie?e.cookie("itiAutoCountry"):"";t&&(e.fn[o].autoCountry=t),e.fn[o].autoCountry?this.autoCountryLoaded():e.fn[o].startedLoadingAutoCountry||(e.fn[o].startedLoadingAutoCountry=!0,"function"==typeof this.b.geoIpLookup&&this.b.geoIpLookup(function(t){e.fn[o].autoCountry=t.toLowerCase(),e.cookie&&e.cookie("itiAutoCountry",e.fn[o].autoCountry,{path:"/"}),setTimeout(function(){e(".intl-tel-input input").intlTelInput("autoCountryLoaded")})}))},_j:function(){var e=this;this.b.a&&this.g.on("keypress"+this.ns,function(n){if(n.which>=c.i&&!n.ctrlKey&&!n.metaKey&&t.intlTelInputUtils&&!e.g.prop("readonly")){n.preventDefault();var i=n.which>=c.g&&n.which<=c.h||n.which==c.f,r=e.g[0],o=e.d&&r.selectionStart==r.selectionEnd,a=e.g.attr("maxlength"),s=e.g.val(),l=a?s.length<a:!0;if(l&&(i||o)){var u=i?String.fromCharCode(n.which):null;e._k(u,!0,i),s!=e.g.val()&&e.g.trigger("input")}i||e._handleInvalidKey()}}),this.g.on("cut"+this.ns+" paste"+this.ns,function(){setTimeout(function(){if(e.b.a&&t.intlTelInputUtils){var n=e.d&&e.g[0].selectionStart==e.g.val().length;e._k(null,n),e._ensurePlus()}else e._v(e.g.val())})}),this.g.on("keyup"+this.ns,function(n){if(n.which==c.d||e.g.prop("readonly"));else if(e.b.a&&t.intlTelInputUtils){var i=e.d&&e.g[0].selectionStart==e.g.val().length;e.g.val()?(n.which==c.k&&!i||n.which==c.Bi)&&e._k():e._v(""),e._ensurePlus()}else e._v(e.g.val())})},_ensurePlus:function(){if(!this.b.n){var e=this.g.val(),t=this.g[0];if("+"!=e.charAt(0)){var n=this.d?t.selectionStart+1:0;this.g.val("+"+e),this.d&&t.setSelectionRange(n,n)}}},_handleInvalidKey:function(){var e=this;this.g.trigger("invalidkey").addClass("iti-invalid-key"),setTimeout(function(){e.g.removeClass("iti-invalid-key")},100)},_k:function(e,t,n){var i,r=this.g.val(),o=(this._getClean(r),this.g[0]),a=0;if(this.d?(a=this._getDigitsOnRight(r,o.selectionEnd),e?r=r.substr(0,o.selectionStart)+e+r.substring(o.selectionEnd,r.length):i=r.substr(o.selectionStart-2,2)):e&&(r+=e),this.setNumber(r,null,t,!0,n),this.d){var s;r=this.g.val(),a?(s=this._getCursorFromDigitsOnRight(r,a),e||(s=this._getCursorFromLeftChar(r,s,i))):s=r.length,o.setSelectionRange(s,s)}},_getCursorFromLeftChar:function(t,n,i){for(var r=n;r>0;r--){var o=t.charAt(r-1);if(e.isNumeric(o)||t.substr(r-2,2)==i)return r}return 0},_getCursorFromDigitsOnRight:function(t,n){for(var i=t.length-1;i>=0;i--)if(e.isNumeric(t.charAt(i))&&0===--n)return i;return 0},_getDigitsOnRight:function(t,n){for(var i=0,r=n;r<t.length;r++)e.isNumeric(t.charAt(r))&&i++;return i},_l:function(){var e=this;this.b.h&&this.g.on("mousedown"+this.ns,function(t){e.g.is(":focus")||e.g.val()||(t.preventDefault(),e.g.focus())}),this.g.on("focus"+this.ns,function(){var n=e.g.val();e.g.data("focusVal",n),e.b.h&&!n&&!e.g.prop("readonly")&&e.o.dialCode&&(e._u("+"+e.o.dialCode,null,!0),e.g.one("keypress.plus"+e.ns,function(n){if(n.which==c.f){var i=e.b.a&&t.intlTelInputUtils?"+":"";e.g.val(i)}}),setTimeout(function(){var t=e.g[0];if(e.d){var n=e.g.val().length;t.setSelectionRange(n,n)}}))}),this.g.on("blur"+this.ns,function(){if(e.b.h){var n=e.g.val(),i="+"==n.charAt(0);if(i){var r=e._m(n);r&&e.o.dialCode!=r||e.g.val("")}e.g.off("keypress.plus"+e.ns)}e.b.a&&t.intlTelInputUtils&&e.g.val()!=e.g.data("focusVal")&&e.g.trigger("change")})},_m:function(e){return e.replace(/\D/g,"")},_getClean:function(e){var t="+"==e.charAt(0)?"+":"";return t+this._m(e)},_n:function(){this._o();var e=this.i.children(".active");e.length&&this._x(e),this.i.removeClass("hide"),e.length&&this._ad(e),this._p(),this.h.children(".arrow").addClass("up")},_o:function(){var n=this.g.offset().top,i=e(t).scrollTop(),r=n+this.g.outerHeight()+this.j<i+e(t).height(),o=n-this.j>i,a=!r&&o?"-"+(this.j-1)+"px":"";this.i.css("top",a)},_p:function(){var t=this;this.i.on("mouseover"+this.ns,".country",function(){t._x(e(this))}),this.i.on("click"+this.ns,".country",function(){t._ab(e(this))});var i=!0;e("html").on("click"+this.ns,function(){i||t._ac(),i=!1});var r="",o=null;e(n).on("keydown"+this.ns,function(e){e.preventDefault(),e.which==c.b||e.which==c.c?t._q(e.which):e.which==c.d?t._r():e.which==c.e?t._ac():(e.which>=c.A&&e.which<=c.Z||e.which==c.i)&&(o&&clearTimeout(o),r+=String.fromCharCode(e.which),t._s(r),o=setTimeout(function(){r=""},1e3))})},_q:function(e){var t=this.i.children(".highlight").first(),n=e==c.b?t.prev():t.next();n.length&&(n.hasClass("divider")&&(n=e==c.b?n.prev():n.next()),this._x(n),this._ad(n))},_r:function(){var e=this.i.children(".highlight").first();e.length&&this._ab(e)},_s:function(e){for(var t=0;t<this.l.length;t++)if(this._t(this.l[t].name,e)){var n=this.i.children("[data-country-code="+this.l[t].iso2+"]").not(".preferred");this._x(n),this._ad(n,!0);break}},_t:function(e,t){return e.substr(0,t.length).toUpperCase()==t},_u:function(e,n,i,r,o){var a;if(this.b.a&&t.intlTelInputUtils&&this.o){a="number"==typeof n&&intlTelInputUtils.isValidNumber(e,this.o.iso2)?intlTelInputUtils.formatNumberByType(e,this.o.iso2,n):!r&&this.b.n&&"+"==e.charAt(0)&&intlTelInputUtils.isValidNumber(e,this.o.iso2)?intlTelInputUtils.formatNumberByType(e,this.o.iso2,intlTelInputUtils.numberFormat.NATIONAL):intlTelInputUtils.formatNumber(e,this.o.iso2,i,this.b.allowExtensions,o);var s=this.g.attr("maxlength");s&&a.length>s&&(a=a.substr(0,s))}else a=e;this.g.val(a)},_v:function(t,n){t&&this.b.n&&this.o&&"1"==this.o.dialCode&&"+"!=t.charAt(0)&&("1"!=t.charAt(0)&&(t="1"+t),t="+"+t);var i=this._af(t),r=null;if(i){var o=this.m[this._m(i)],a=this.o&&-1!=e.inArray(this.o.iso2,o);if(!a||this._w(t,i))for(var s=0;s<o.length;s++)if(o[s]){r=o[s];break}}else"+"==t.charAt(0)&&this._m(t).length?r="":t&&"+"!=t||(r=this.b.d.iso2);null!==r&&this._z(r,n)},_w:function(e,t){return"+1"==t&&this._m(e).length>=4},_x:function(e){this.k.removeClass("highlight"),e.addClass("highlight")},_y:function(e,t,n){for(var i=t?u:this.l,r=0;r<i.length;r++)if(i[r].iso2==e)return i[r];if(n)return null;throw new Error("No country data for '"+e+"'")},_z:function(e,t){this.o=e?this._y(e,!1,!1):{},t&&this.o.iso2&&(this.b.d={iso2:this.o.iso2}),this.h.attr("class","iti-flag "+e);var n=e?this.o.name+": +"+this.o.dialCode:"Unknown";this.h.parent().attr("title",n),this._aa(),this.isMobile?this.i.val(e):(this.k.removeClass("active"),e&&this.k.find(".iti-flag."+e).first().closest(".country").addClass("active"))},_aa:function(){if(t.intlTelInputUtils&&!this.e&&this.b.autoPlaceholder&&this.o){var e=this.o.iso2,n=intlTelInputUtils.numberType[this.b.t||"FIXED_LINE"],i=e?intlTelInputUtils.getExampleNumber(e,this.b.n,n):"";this.g.attr("placeholder",i)}},_ab:function(e){var t=this.isMobile?"value":"data-country-code";if(this._z(e.attr(t),!0),this.isMobile||this._ac(),this._ae(e.attr("data-dial-code"),!0),this.g.trigger("change"),this.g.focus(),this.d){var n=this.g.val().length;this.g[0].setSelectionRange(n,n)}},_ac:function(){this.i.addClass("hide"),this.h.children(".arrow").removeClass("up"),e(n).off(this.ns),e("html").off(this.ns),this.i.off(this.ns)},_ad:function(e,t){var n=this.i,i=n.height(),r=n.offset().top,o=r+i,a=e.outerHeight(),s=e.offset().top,c=s+a,l=s-r+n.scrollTop(),u=i/2-a/2;if(r>s)t&&(l-=u),n.scrollTop(l);else if(c>o){t&&(l+=u);var d=i-a;n.scrollTop(l-d)}},_ae:function(t,n){var i,r=this.g.val();if(t="+"+t,this.b.n&&"+"!=r.charAt(0))i=r;else if(r){var o=this._af(r);if(o.length>1)i=r.replace(o,t);else{var a="+"!=r.charAt(0)?e.trim(r):"";i=t+a}}else i=!this.b.h||n?t:"";this._u(i,null,n)},_af:function(t){var n="";if("+"==t.charAt(0))for(var i="",r=0;r<t.length;r++){var o=t.charAt(r);if(e.isNumeric(o)&&(i+=o,this.m[i]&&(n=t.substr(0,r+1)),4==i.length))break}return n},autoCountryLoaded:function(){"auto"==this.b.d&&(this.b.d=e.fn[o].autoCountry,this._h(),this.autoCountryDeferred.resolve())},destroy:function(){this.isMobile||this._ac(),this.g.off(this.ns),this.isMobile?this.i.off(this.ns):(this.h.parent().off(this.ns),this.g.closest("label").off(this.ns));var e=this.g.parent();e.before(this.g).remove()},getExtension:function(){return this.g.val().split(" ext. ")[1]||""},getNumber:function(e){return t.intlTelInputUtils?intlTelInputUtils.formatNumberByType(this.g.val(),this.o.iso2,e):""},getNumberType:function(){return t.intlTelInputUtils?intlTelInputUtils.getNumberType(this.g.val(),this.o.iso2):-99},getSelectedCountryData:function(){return this.o||{}},getValidationError:function(){return t.intlTelInputUtils?intlTelInputUtils.getValidationError(this.g.val(),this.o.iso2):-99},isValidNumber:function(){var n=e.trim(this.g.val()),i=this.b.n?this.o.iso2:"";return t.intlTelInputUtils?intlTelInputUtils.isValidNumber(n,i):!1},loadUtils:function(t){var n=this,i=t||this.b.u;!e.fn[o].loadedUtilsScript&&i?(e.fn[o].loadedUtilsScript=!0,e.ajax({url:i,success:function(){e(".intl-tel-input input").intlTelInput("utilsLoaded")},complete:function(){n.utilsScriptDeferred.resolve()},dataType:"script",cache:!0})):this.utilsScriptDeferred.resolve()},selectCountry:function(e){e=e.toLowerCase(),this.h.hasClass(e)||(this._z(e,!0),this._ae(this.o.dialCode,!1))},setNumber:function(e,t,n,i,r){this.b.n||"+"==e.charAt(0)||(e="+"+e),this._v(e),this._u(e,t,n,i,r)},utilsLoaded:function(){this.b.a&&this.g.val()&&this._u(this.g.val()),this._aa()}},e.fn[o]=function(t){var n=arguments;if(t===i||"object"==typeof t){var a=[];return this.each(function(){if(!e.data(this,"plugin_"+o)){var n=new r(this,t),i=n._init();a.push(i[0]),a.push(i[1]),e.data(this,"plugin_"+o,n)}}),e.when.apply(null,a)}if("string"==typeof t&&"_"!==t[0]){var s;return this.each(function(){var i=e.data(this,"plugin_"+o);i instanceof r&&"function"==typeof i[t]&&(s=i[t].apply(i,Array.prototype.slice.call(n,1))),"destroy"===t&&e.data(this,"plugin_"+o,null)}),s!==i?s:this}},e.fn[o].getCountryData=function(){return u},e.fn[o].version="6.0.6";for(var u=[["Afghanistan (\u202b\u0627\u0641\u063a\u0627\u0646\u0633\u062a\u0627\u0646\u202c\u200e)","af","93"],["Albania (Shqip\xebri)","al","355"],["Algeria (\u202b\u0627\u0644\u062c\u0632\u0627\u0626\u0631\u202c\u200e)","dz","213"],["American Samoa","as","1684"],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1264"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54"],["Armenia (\u0540\u0561\u0575\u0561\u057d\u057f\u0561\u0576)","am","374"],["Aruba","aw","297"],["Australia","au","61"],["Austria (\xd6sterreich)","at","43"],["Azerbaijan (Az\u0259rbaycan)","az","994"],["Bahamas","bs","1242"],["Bahrain (\u202b\u0627\u0644\u0628\u062d\u0631\u064a\u0646\u202c\u200e)","bh","973"],["Bangladesh (\u09ac\u09be\u0982\u09b2\u09be\u09a6\u09c7\u09b6)","bd","880"],["Barbados","bb","1246"],["Belarus (\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u044c)","by","375"],["Belgium (Belgi\xeb)","be","32"],["Belize","bz","501"],["Benin (B\xe9nin)","bj","229"],["Bermuda","bm","1441"],["Bhutan (\u0f60\u0f56\u0fb2\u0f74\u0f42)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (\u0411\u043e\u0441\u043d\u0430 \u0438 \u0425\u0435\u0440\u0446\u0435\u0433\u043e\u0432\u0438\u043d\u0430)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1284"],["Brunei","bn","673"],["Bulgaria (\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (\u1780\u1798\u17d2\u1796\u17bb\u1787\u17b6)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1],["Cayman Islands","ky","1345"],["Central African Republic (R\xe9publique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (\u4e2d\u56fd)","cn","86"],["Colombia","co","57"],["Comoros (\u202b\u062c\u0632\u0631 \u0627\u0644\u0642\u0645\u0631\u202c\u200e)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["C\xf4te d\u2019Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Cura\xe7ao","cw","599",0],["Cyprus (\u039a\u03cd\u03c0\u03c1\u03bf\u03c2)","cy","357"],["Czech Republic (\u010cesk\xe1 republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic (Rep\xfablica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (\u202b\u0645\u0635\u0631\u202c\u200e)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (F\xf8royar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358"],["France","fr","33"],["French Guiana (Guyane fran\xe7aise)","gf","594"],["French Polynesia (Polyn\xe9sie fran\xe7aise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (\u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (\u0395\u03bb\u03bb\u03ac\u03b4\u03b1)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1473"],["Guadeloupe","gp","590",0],["Guam","gu","1671"],["Guatemala","gt","502"],["Guinea (Guin\xe9e)","gn","224"],["Guinea-Bissau (Guin\xe9 Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (\u9999\u6e2f)","hk","852"],["Hungary (Magyarorsz\xe1g)","hu","36"],["Iceland (\xcdsland)","is","354"],["India (\u092d\u093e\u0930\u0924)","in","91"],["Indonesia","id","62"],["Iran (\u202b\u0627\u06cc\u0631\u0627\u0646\u202c\u200e)","ir","98"],["Iraq (\u202b\u0627\u0644\u0639\u0631\u0627\u0642\u202c\u200e)","iq","964"],["Ireland","ie","353"],["Israel (\u202b\u05d9\u05e9\u05e8\u05d0\u05dc\u202c\u200e)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1876"],["Japan (\u65e5\u672c)","jp","81"],["Jordan (\u202b\u0627\u0644\u0623\u0631\u062f\u0646\u202c\u200e)","jo","962"],["Kazakhstan (\u041a\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043d)","kz","7",1],["Kenya","ke","254"],["Kiribati","ki","686"],["Kuwait (\u202b\u0627\u0644\u0643\u0648\u064a\u062a\u202c\u200e)","kw","965"],["Kyrgyzstan (\u041a\u044b\u0440\u0433\u044b\u0437\u0441\u0442\u0430\u043d)","kg","996"],["Laos (\u0ea5\u0eb2\u0ea7)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (\u202b\u0644\u0628\u0646\u0627\u0646\u202c\u200e)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (\u202b\u0644\u064a\u0628\u064a\u0627\u202c\u200e)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (\u6fb3\u9580)","mo","853"],["Macedonia (FYROM) (\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0438\u0458\u0430)","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (\u202b\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627\u202c\u200e)","mr","222"],["Mauritius (Moris)","mu","230"],["Mexico (M\xe9xico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (\u041c\u043e\u043d\u0433\u043e\u043b)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1664"],["Morocco (\u202b\u0627\u0644\u0645\u063a\u0631\u0628\u202c\u200e)","ma","212"],["Mozambique (Mo\xe7ambique)","mz","258"],["Myanmar (Burma) (\u1019\u103c\u1014\u103a\u1019\u102c)","mm","95"],["Namibia (Namibi\xeb)","na","264"],["Nauru","nr","674"],["Nepal (\u0928\u0947\u092a\u093e\u0932)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Cal\xe9donie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (\uc870\uc120 \ubbfc\uc8fc\uc8fc\uc758 \uc778\ubbfc \uacf5\ud654\uad6d)","kp","850"],["Northern Mariana Islands","mp","1670"],["Norway (Norge)","no","47"],["Oman (\u202b\u0639\u064f\u0645\u0627\u0646\u202c\u200e)","om","968"],["Pakistan (\u202b\u067e\u0627\u06a9\u0633\u062a\u0627\u0646\u202c\u200e)","pk","92"],["Palau","pw","680"],["Palestine (\u202b\u0641\u0644\u0633\u0637\u064a\u0646\u202c\u200e)","ps","970"],["Panama (Panam\xe1)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per\xfa)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (\u202b\u0642\u0637\u0631\u202c\u200e)","qa","974"],["R\xe9union (La R\xe9union)","re","262"],["Romania (Rom\xe2nia)","ro","40"],["Russia (\u0420\u043e\u0441\u0441\u0438\u044f)","ru","7",0],["Rwanda","rw","250"],["Saint Barth\xe9lemy (Saint-Barth\xe9lemy)","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Martin (Saint-Martin (partie fran\xe7aise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["S\xe3o Tom\xe9 and Pr\xedncipe (S\xe3o Tom\xe9 e Pr\xedncipe)","st","239"],["Saudi Arabia (\u202b\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629\u202c\u200e)","sa","966"],["Senegal (S\xe9n\xe9gal)","sn","221"],["Serbia (\u0421\u0440\u0431\u0438\u0458\u0430)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1721"],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (\ub300\ud55c\ubbfc\uad6d)","kr","82"],["South Sudan (\u202b\u062c\u0646\u0648\u0628 \u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)","ss","211"],["Spain (Espa\xf1a)","es","34"],["Sri Lanka (\u0dc1\u0dca\u200d\u0dbb\u0dd3 \u0dbd\u0d82\u0d9a\u0dcf\u0dc0)","lk","94"],["Sudan (\u202b\u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (\u202b\u0633\u0648\u0631\u064a\u0627\u202c\u200e)","sy","963"],["Taiwan (\u53f0\u7063)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (\u0e44\u0e17\u0e22)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia (\u202b\u062a\u0648\u0646\u0633\u202c\u200e)","tn","216"],["Turkey (T\xfcrkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1649"],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1340"],["Uganda","ug","256"],["Ukraine (\u0423\u043a\u0440\u0430\u0457\u043d\u0430)","ua","380"],["United Arab Emirates (\u202b\u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062a \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0645\u062a\u062d\u062f\u0629\u202c\u200e)","ae","971"],["United Kingdom","gb","44"],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (O\u02bbzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt\xe0 del Vaticano)","va","39",1],["Venezuela","ve","58"],["Vietnam (Vi\u1ec7t Nam)","vn","84"],["Wallis and Futuna","wf","681"],["Yemen (\u202b\u0627\u0644\u064a\u0645\u0646\u202c\u200e)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]],d=0;d<u.length;d++){var p=u[d];
u[d]={name:p[0],iso2:p[1],dialCode:p[2],priority:p[3]||0,areaCodes:p[4]||null}}}($,window,document,null);var AssetGrid=function(e,t,n){var i=[],r=this,o=$(e),a=$(t);n=parseInt(n)||250;var s=function(e,t){t-=5*e.length;for(var n=0,i=0;i<e.length;++i)n+=$(e[i]).data("width")/$(e[i]).data("height");return t/n},c=function(e,t){i.push(t);for(var n=0;n<e.length;++n)$(e[n]).css({width:t*$(e[n]).data("width")/$(e[n]).data("height"),height:t})};r.resize=function(){var e=n,t=o.width()-30,i=0,r=a;e:for(;r.length>0;){for(var l=1;l<r.length+1;++l){var u=r.slice(0,l),d=s(u,t);if(e>d){c(u,d),i++,r=r.slice(l);continue e}}c(u,Math.min(e,d)),i++;break}},window.addEventListener("resize",r.resize),r.resize()},createAudioMeter=function(e,t,n,i){var r=e.createScriptProcessor(512);return r.onaudioprocess=volumeAudioProcess,r.clipping=!1,r.lastClip=0,r.volume=0,r.clipLevel=t||.98,r.averaging=n||.95,r.clipLag=i||750,r.connect(e.destination),r.checkClipping=function(){return this.clipping?(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping):!1},r.shutdown=function(){this.disconnect(),this.onaudioprocess=null},r},volumeAudioProcess=function(e){for(var t,n=e.inputBuffer.getChannelData(0),i=n.length,r=0,o=0;i>o;o++)t=n[o],Math.abs(t)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),r+=t*t;var a=Math.sqrt(r/i);this.volume=Math.max(a,this.volume*this.averaging)};DetectRTC.load(function(){$(function(){var e=window.DetectRTC.isWebRTCSupported;init(e)})});var createCookie=function(e,t){document.cookie=e+"="+t+"; path=/"},getCookie=function(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):null}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1});
